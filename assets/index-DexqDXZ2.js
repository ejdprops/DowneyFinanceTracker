var bp=g=>{throw TypeError(g)};var Tu=(g,t,i)=>t.has(g)||bp("Cannot "+i);var ne=(g,t,i)=>(Tu(g,t,"read from private field"),i?i.call(g):t.get(g)),Fi=(g,t,i)=>t.has(g)?bp("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(g):t.set(g,i),Ke=(g,t,i,s)=>(Tu(g,t,"write to private field"),s?s.call(g,i):t.set(g,i),i),zi=(g,t,i)=>(Tu(g,t,"access private method"),i);var yp=(g,t,i,s)=>({set _(r){Ke(g,t,r,i)},get _(){return ne(g,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const o of l.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(r){if(r.ep)return;r.ep=!0;const l=i(r);fetch(r.href,l)}})();function cy(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}var Du={exports:{}},ar={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vp;function uy(){if(vp)return ar;vp=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(s,r,l){var o=null;if(l!==void 0&&(o=""+l),r.key!==void 0&&(o=""+r.key),"key"in r){l={};for(var u in r)u!=="key"&&(l[u]=r[u])}else l=r;return r=l.ref,{$$typeof:g,type:s,key:o,ref:r!==void 0?r:null,props:l}}return ar.Fragment=t,ar.jsx=i,ar.jsxs=i,ar}var xp;function hy(){return xp||(xp=1,Du.exports=uy()),Du.exports}var v=hy(),Nu={exports:{}},At={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ap;function dy(){if(Ap)return At;Ap=1;var g=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.for("react.activity"),y=Symbol.iterator;function A(M){return M===null||typeof M!="object"?null:(M=y&&M[y]||M["@@iterator"],typeof M=="function"?M:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function E(M,H,G){this.props=M,this.context=H,this.refs=C,this.updater=G||w}E.prototype.isReactComponent={},E.prototype.setState=function(M,H){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,H,"setState")},E.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function k(){}k.prototype=E.prototype;function O(M,H,G){this.props=M,this.context=H,this.refs=C,this.updater=G||w}var P=O.prototype=new k;P.constructor=O,S(P,E.prototype),P.isPureReactComponent=!0;var I=Array.isArray;function F(){}var B={H:null,A:null,T:null,S:null},D=Object.prototype.hasOwnProperty;function N(M,H,G){var nt=G.ref;return{$$typeof:g,type:M,key:H,ref:nt!==void 0?nt:null,props:G}}function U(M,H){return N(M.type,H,M.props)}function $(M){return typeof M=="object"&&M!==null&&M.$$typeof===g}function tt(M){var H={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(G){return H[G]})}var st=/\/+/g;function rt(M,H){return typeof M=="object"&&M!==null&&M.key!=null?tt(""+M.key):H.toString(36)}function dt(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(F,F):(M.status="pending",M.then(function(H){M.status==="pending"&&(M.status="fulfilled",M.value=H)},function(H){M.status==="pending"&&(M.status="rejected",M.reason=H)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function j(M,H,G,nt,Q){var it=typeof M;(it==="undefined"||it==="boolean")&&(M=null);var at=!1;if(M===null)at=!0;else switch(it){case"bigint":case"string":case"number":at=!0;break;case"object":switch(M.$$typeof){case g:case t:at=!0;break;case p:return at=M._init,j(at(M._payload),H,G,nt,Q)}}if(at)return Q=Q(M),at=nt===""?"."+rt(M,0):nt,I(Q)?(G="",at!=null&&(G=at.replace(st,"$&/")+"/"),j(Q,H,G,"",function(zt){return zt})):Q!=null&&($(Q)&&(Q=U(Q,G+(Q.key==null||M&&M.key===Q.key?"":(""+Q.key).replace(st,"$&/")+"/")+at)),H.push(Q)),1;at=0;var ct=nt===""?".":nt+":";if(I(M))for(var lt=0;lt<M.length;lt++)nt=M[lt],it=ct+rt(nt,lt),at+=j(nt,H,G,it,Q);else if(lt=A(M),typeof lt=="function")for(M=lt.call(M),lt=0;!(nt=M.next()).done;)nt=nt.value,it=ct+rt(nt,lt++),at+=j(nt,H,G,it,Q);else if(it==="object"){if(typeof M.then=="function")return j(dt(M),H,G,nt,Q);throw H=String(M),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return at}function T(M,H,G){if(M==null)return M;var nt=[],Q=0;return j(M,nt,"","",function(it){return H.call(G,it,Q++)}),nt}function X(M){if(M._status===-1){var H=M._result;H=H(),H.then(function(G){(M._status===0||M._status===-1)&&(M._status=1,M._result=G)},function(G){(M._status===0||M._status===-1)&&(M._status=2,M._result=G)}),M._status===-1&&(M._status=0,M._result=H)}if(M._status===1)return M._result.default;throw M._result}var et=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},gt={map:T,forEach:function(M,H,G){T(M,function(){H.apply(this,arguments)},G)},count:function(M){var H=0;return T(M,function(){H++}),H},toArray:function(M){return T(M,function(H){return H})||[]},only:function(M){if(!$(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return At.Activity=b,At.Children=gt,At.Component=E,At.Fragment=i,At.Profiler=r,At.PureComponent=O,At.StrictMode=s,At.Suspense=h,At.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,At.__COMPILER_RUNTIME={__proto__:null,c:function(M){return B.H.useMemoCache(M)}},At.cache=function(M){return function(){return M.apply(null,arguments)}},At.cacheSignal=function(){return null},At.cloneElement=function(M,H,G){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var nt=S({},M.props),Q=M.key;if(H!=null)for(it in H.key!==void 0&&(Q=""+H.key),H)!D.call(H,it)||it==="key"||it==="__self"||it==="__source"||it==="ref"&&H.ref===void 0||(nt[it]=H[it]);var it=arguments.length-2;if(it===1)nt.children=G;else if(1<it){for(var at=Array(it),ct=0;ct<it;ct++)at[ct]=arguments[ct+2];nt.children=at}return N(M.type,Q,nt)},At.createContext=function(M){return M={$$typeof:o,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:l,_context:M},M},At.createElement=function(M,H,G){var nt,Q={},it=null;if(H!=null)for(nt in H.key!==void 0&&(it=""+H.key),H)D.call(H,nt)&&nt!=="key"&&nt!=="__self"&&nt!=="__source"&&(Q[nt]=H[nt]);var at=arguments.length-2;if(at===1)Q.children=G;else if(1<at){for(var ct=Array(at),lt=0;lt<at;lt++)ct[lt]=arguments[lt+2];Q.children=ct}if(M&&M.defaultProps)for(nt in at=M.defaultProps,at)Q[nt]===void 0&&(Q[nt]=at[nt]);return N(M,it,Q)},At.createRef=function(){return{current:null}},At.forwardRef=function(M){return{$$typeof:u,render:M}},At.isValidElement=$,At.lazy=function(M){return{$$typeof:p,_payload:{_status:-1,_result:M},_init:X}},At.memo=function(M,H){return{$$typeof:d,type:M,compare:H===void 0?null:H}},At.startTransition=function(M){var H=B.T,G={};B.T=G;try{var nt=M(),Q=B.S;Q!==null&&Q(G,nt),typeof nt=="object"&&nt!==null&&typeof nt.then=="function"&&nt.then(F,et)}catch(it){et(it)}finally{H!==null&&G.types!==null&&(H.types=G.types),B.T=H}},At.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},At.use=function(M){return B.H.use(M)},At.useActionState=function(M,H,G){return B.H.useActionState(M,H,G)},At.useCallback=function(M,H){return B.H.useCallback(M,H)},At.useContext=function(M){return B.H.useContext(M)},At.useDebugValue=function(){},At.useDeferredValue=function(M,H){return B.H.useDeferredValue(M,H)},At.useEffect=function(M,H){return B.H.useEffect(M,H)},At.useEffectEvent=function(M){return B.H.useEffectEvent(M)},At.useId=function(){return B.H.useId()},At.useImperativeHandle=function(M,H,G){return B.H.useImperativeHandle(M,H,G)},At.useInsertionEffect=function(M,H){return B.H.useInsertionEffect(M,H)},At.useLayoutEffect=function(M,H){return B.H.useLayoutEffect(M,H)},At.useMemo=function(M,H){return B.H.useMemo(M,H)},At.useOptimistic=function(M,H){return B.H.useOptimistic(M,H)},At.useReducer=function(M,H,G){return B.H.useReducer(M,H,G)},At.useRef=function(M){return B.H.useRef(M)},At.useState=function(M){return B.H.useState(M)},At.useSyncExternalStore=function(M,H,G){return B.H.useSyncExternalStore(M,H,G)},At.useTransition=function(){return B.H.useTransition()},At.version="19.2.0",At}var Sp;function nh(){return Sp||(Sp=1,Nu.exports=dy()),Nu.exports}var vt=nh(),Mu={exports:{}},rr={},Ru={exports:{}},Ou={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wp;function fy(){return wp||(wp=1,(function(g){function t(j,T){var X=j.length;j.push(T);t:for(;0<X;){var et=X-1>>>1,gt=j[et];if(0<r(gt,T))j[et]=T,j[X]=gt,X=et;else break t}}function i(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var T=j[0],X=j.pop();if(X!==T){j[0]=X;t:for(var et=0,gt=j.length,M=gt>>>1;et<M;){var H=2*(et+1)-1,G=j[H],nt=H+1,Q=j[nt];if(0>r(G,X))nt<gt&&0>r(Q,G)?(j[et]=Q,j[nt]=X,et=nt):(j[et]=G,j[H]=X,et=H);else if(nt<gt&&0>r(Q,X))j[et]=Q,j[nt]=X,et=nt;else break t}}return T}function r(j,T){var X=j.sortIndex-T.sortIndex;return X!==0?X:j.id-T.id}if(g.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;g.unstable_now=function(){return l.now()}}else{var o=Date,u=o.now();g.unstable_now=function(){return o.now()-u}}var h=[],d=[],p=1,b=null,y=3,A=!1,w=!1,S=!1,C=!1,E=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;function P(j){for(var T=i(d);T!==null;){if(T.callback===null)s(d);else if(T.startTime<=j)s(d),T.sortIndex=T.expirationTime,t(h,T);else break;T=i(d)}}function I(j){if(S=!1,P(j),!w)if(i(h)!==null)w=!0,F||(F=!0,tt());else{var T=i(d);T!==null&&dt(I,T.startTime-j)}}var F=!1,B=-1,D=5,N=-1;function U(){return C?!0:!(g.unstable_now()-N<D)}function $(){if(C=!1,F){var j=g.unstable_now();N=j;var T=!0;try{t:{w=!1,S&&(S=!1,k(B),B=-1),A=!0;var X=y;try{e:{for(P(j),b=i(h);b!==null&&!(b.expirationTime>j&&U());){var et=b.callback;if(typeof et=="function"){b.callback=null,y=b.priorityLevel;var gt=et(b.expirationTime<=j);if(j=g.unstable_now(),typeof gt=="function"){b.callback=gt,P(j),T=!0;break e}b===i(h)&&s(h),P(j)}else s(h);b=i(h)}if(b!==null)T=!0;else{var M=i(d);M!==null&&dt(I,M.startTime-j),T=!1}}break t}finally{b=null,y=X,A=!1}T=void 0}}finally{T?tt():F=!1}}}var tt;if(typeof O=="function")tt=function(){O($)};else if(typeof MessageChannel<"u"){var st=new MessageChannel,rt=st.port2;st.port1.onmessage=$,tt=function(){rt.postMessage(null)}}else tt=function(){E($,0)};function dt(j,T){B=E(function(){j(g.unstable_now())},T)}g.unstable_IdlePriority=5,g.unstable_ImmediatePriority=1,g.unstable_LowPriority=4,g.unstable_NormalPriority=3,g.unstable_Profiling=null,g.unstable_UserBlockingPriority=2,g.unstable_cancelCallback=function(j){j.callback=null},g.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<j?Math.floor(1e3/j):5},g.unstable_getCurrentPriorityLevel=function(){return y},g.unstable_next=function(j){switch(y){case 1:case 2:case 3:var T=3;break;default:T=y}var X=y;y=T;try{return j()}finally{y=X}},g.unstable_requestPaint=function(){C=!0},g.unstable_runWithPriority=function(j,T){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var X=y;y=j;try{return T()}finally{y=X}},g.unstable_scheduleCallback=function(j,T,X){var et=g.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?et+X:et):X=et,j){case 1:var gt=-1;break;case 2:gt=250;break;case 5:gt=1073741823;break;case 4:gt=1e4;break;default:gt=5e3}return gt=X+gt,j={id:p++,callback:T,priorityLevel:j,startTime:X,expirationTime:gt,sortIndex:-1},X>et?(j.sortIndex=X,t(d,j),i(h)===null&&j===i(d)&&(S?(k(B),B=-1):S=!0,dt(I,X-et))):(j.sortIndex=gt,t(h,j),w||A||(w=!0,F||(F=!0,tt()))),j},g.unstable_shouldYield=U,g.unstable_wrapCallback=function(j){var T=y;return function(){var X=y;y=T;try{return j.apply(this,arguments)}finally{y=X}}}})(Ou)),Ou}var _p;function gy(){return _p||(_p=1,Ru.exports=fy()),Ru.exports}var ku={exports:{}},je={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ep;function py(){if(Ep)return je;Ep=1;var g=nh();function t(h){var d="https://react.dev/errors/"+h;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var s={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},r=Symbol.for("react.portal");function l(h,d,p){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:b==null?null:""+b,children:h,containerInfo:d,implementation:p}}var o=g.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(h,d){if(h==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return je.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,je.createPortal=function(h,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return l(h,d,null,p)},je.flushSync=function(h){var d=o.T,p=s.p;try{if(o.T=null,s.p=2,h)return h()}finally{o.T=d,s.p=p,s.d.f()}},je.preconnect=function(h,d){typeof h=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,s.d.C(h,d))},je.prefetchDNS=function(h){typeof h=="string"&&s.d.D(h)},je.preinit=function(h,d){if(typeof h=="string"&&d&&typeof d.as=="string"){var p=d.as,b=u(p,d.crossOrigin),y=typeof d.integrity=="string"?d.integrity:void 0,A=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?s.d.S(h,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:b,integrity:y,fetchPriority:A}):p==="script"&&s.d.X(h,{crossOrigin:b,integrity:y,fetchPriority:A,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},je.preinitModule=function(h,d){if(typeof h=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=u(d.as,d.crossOrigin);s.d.M(h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&s.d.M(h)},je.preload=function(h,d){if(typeof h=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,b=u(p,d.crossOrigin);s.d.L(h,p,{crossOrigin:b,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},je.preloadModule=function(h,d){if(typeof h=="string")if(d){var p=u(d.as,d.crossOrigin);s.d.m(h,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else s.d.m(h)},je.requestFormReset=function(h){s.d.r(h)},je.unstable_batchedUpdates=function(h,d){return h(d)},je.useFormState=function(h,d,p){return o.H.useFormState(h,d,p)},je.useFormStatus=function(){return o.H.useHostTransitionStatus()},je.version="19.2.0",je}var Cp;function my(){if(Cp)return ku.exports;Cp=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),ku.exports=py(),ku.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tp;function by(){if(Tp)return rr;Tp=1;var g=gy(),t=nh(),i=my();function s(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)n+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function l(e){var n=e,a=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(a=n.return),e=n.return;while(e)}return n.tag===3?a:null}function o(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function u(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function h(e){if(l(e)!==e)throw Error(s(188))}function d(e){var n=e.alternate;if(!n){if(n=l(e),n===null)throw Error(s(188));return n!==e?null:e}for(var a=e,c=n;;){var f=a.return;if(f===null)break;var m=f.alternate;if(m===null){if(c=f.return,c!==null){a=c;continue}break}if(f.child===m.child){for(m=f.child;m;){if(m===a)return h(f),e;if(m===c)return h(f),n;m=m.sibling}throw Error(s(188))}if(a.return!==c.return)a=f,c=m;else{for(var x=!1,_=f.child;_;){if(_===a){x=!0,a=f,c=m;break}if(_===c){x=!0,c=f,a=m;break}_=_.sibling}if(!x){for(_=m.child;_;){if(_===a){x=!0,a=m,c=f;break}if(_===c){x=!0,c=m,a=f;break}_=_.sibling}if(!x)throw Error(s(189))}}if(a.alternate!==c)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?e:n}function p(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=p(e),n!==null)return n;e=e.sibling}return null}var b=Object.assign,y=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),k=Symbol.for("react.consumer"),O=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),$=Symbol.iterator;function tt(e){return e===null||typeof e!="object"?null:(e=$&&e[$]||e["@@iterator"],typeof e=="function"?e:null)}var st=Symbol.for("react.client.reference");function rt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===st?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case E:return"Profiler";case C:return"StrictMode";case I:return"Suspense";case F:return"SuspenseList";case N:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case w:return"Portal";case O:return e.displayName||"Context";case k:return(e._context.displayName||"Context")+".Consumer";case P:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case B:return n=e.displayName||null,n!==null?n:rt(e.type)||"Memo";case D:n=e._payload,e=e._init;try{return rt(e(n))}catch{}}return null}var dt=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,T=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},et=[],gt=-1;function M(e){return{current:e}}function H(e){0>gt||(e.current=et[gt],et[gt]=null,gt--)}function G(e,n){gt++,et[gt]=e.current,e.current=n}var nt=M(null),Q=M(null),it=M(null),at=M(null);function ct(e,n){switch(G(it,n),G(Q,e),G(nt,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?Ig(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=Ig(n),e=Ug(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}H(nt),G(nt,e)}function lt(){H(nt),H(Q),H(it)}function zt(e){e.memoizedState!==null&&G(at,e);var n=nt.current,a=Ug(n,e.type);n!==a&&(G(Q,e),G(nt,a))}function pt(e){Q.current===e&&(H(nt),H(Q)),at.current===e&&(H(at),er._currentValue=X)}var Pt,Ft;function Nt(e){if(Pt===void 0)try{throw Error()}catch(a){var n=a.stack.trim().match(/\n( *(at )?)/);Pt=n&&n[1]||"",Ft=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pt+e+Ft}var qt=!1;function Dt(e,n){if(!e||qt)return"";qt=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(n){var J=function(){throw Error()};if(Object.defineProperty(J.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(J,[])}catch(K){var Y=K}Reflect.construct(e,[],J)}else{try{J.call()}catch(K){Y=K}e.call(J.prototype)}}else{try{throw Error()}catch(K){Y=K}(J=e())&&typeof J.catch=="function"&&J.catch(function(){})}}catch(K){if(K&&Y&&typeof K.stack=="string")return[K.stack,Y.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var m=c.DetermineComponentFrameRoot(),x=m[0],_=m[1];if(x&&_){var R=x.split(`
`),V=_.split(`
`);for(f=c=0;c<R.length&&!R[c].includes("DetermineComponentFrameRoot");)c++;for(;f<V.length&&!V[f].includes("DetermineComponentFrameRoot");)f++;if(c===R.length||f===V.length)for(c=R.length-1,f=V.length-1;1<=c&&0<=f&&R[c]!==V[f];)f--;for(;1<=c&&0<=f;c--,f--)if(R[c]!==V[f]){if(c!==1||f!==1)do if(c--,f--,0>f||R[c]!==V[f]){var W=`
`+R[c].replace(" at new "," at ");return e.displayName&&W.includes("<anonymous>")&&(W=W.replace("<anonymous>",e.displayName)),W}while(1<=c&&0<=f);break}}}finally{qt=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Nt(a):""}function Ze(e,n){switch(e.tag){case 26:case 27:case 5:return Nt(e.type);case 16:return Nt("Lazy");case 13:return e.child!==n&&n!==null?Nt("Suspense Fallback"):Nt("Suspense");case 19:return Nt("SuspenseList");case 0:case 15:return Dt(e.type,!1);case 11:return Dt(e.type.render,!1);case 1:return Dt(e.type,!0);case 31:return Nt("Activity");default:return""}}function wt(e){try{var n="",a=null;do n+=Ze(e,a),a=e,e=e.return;while(e);return n}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var Wt=Object.prototype.hasOwnProperty,ci=g.unstable_scheduleCallback,ki=g.unstable_cancelCallback,ui=g.unstable_shouldYield,qn=g.unstable_requestPaint,Gt=g.unstable_now,hi=g.unstable_getCurrentPriorityLevel,ue=g.unstable_ImmediatePriority,_e=g.unstable_UserBlockingPriority,Ue=g.unstable_NormalPriority,da=g.unstable_LowPriority,fa=g.unstable_IdlePriority,fn=g.log,di=g.unstable_setDisableYieldValue,Ti=null,Le=null;function gn(e){if(typeof fn=="function"&&di(e),Le&&typeof Le.setStrictMode=="function")try{Le.setStrictMode(Ti,e)}catch{}}var Je=Math.clz32?Math.clz32:Km,Xm=Math.log,$m=Math.LN2;function Km(e){return e>>>=0,e===0?32:31-(Xm(e)/$m|0)|0}var Tr=256,Dr=262144,Nr=4194304;function Gn(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Mr(e,n,a){var c=e.pendingLanes;if(c===0)return 0;var f=0,m=e.suspendedLanes,x=e.pingedLanes;e=e.warmLanes;var _=c&134217727;return _!==0?(c=_&~m,c!==0?f=Gn(c):(x&=_,x!==0?f=Gn(x):a||(a=_&~e,a!==0&&(f=Gn(a))))):(_=c&~m,_!==0?f=Gn(_):x!==0?f=Gn(x):a||(a=c&~e,a!==0&&(f=Gn(a)))),f===0?0:n!==0&&n!==f&&(n&m)===0&&(m=f&-f,a=n&-n,m>=a||m===32&&(a&4194048)!==0)?n:f}function ga(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function Qm(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xh(){var e=Nr;return Nr<<=1,(Nr&62914560)===0&&(Nr=4194304),e}function po(e){for(var n=[],a=0;31>a;a++)n.push(e);return n}function pa(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Wm(e,n,a,c,f,m){var x=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var _=e.entanglements,R=e.expirationTimes,V=e.hiddenUpdates;for(a=x&~a;0<a;){var W=31-Je(a),J=1<<W;_[W]=0,R[W]=-1;var Y=V[W];if(Y!==null)for(V[W]=null,W=0;W<Y.length;W++){var K=Y[W];K!==null&&(K.lane&=-536870913)}a&=~J}c!==0&&Ah(e,c,0),m!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=m&~(x&~n))}function Ah(e,n,a){e.pendingLanes|=n,e.suspendedLanes&=~n;var c=31-Je(n);e.entangledLanes|=n,e.entanglements[c]=e.entanglements[c]|1073741824|a&261930}function Sh(e,n){var a=e.entangledLanes|=n;for(e=e.entanglements;a;){var c=31-Je(a),f=1<<c;f&n|e[c]&n&&(e[c]|=n),a&=~f}}function wh(e,n){var a=n&-n;return a=(a&42)!==0?1:mo(a),(a&(e.suspendedLanes|n))!==0?0:a}function mo(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function bo(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function _h(){var e=T.p;return e!==0?e:(e=window.event,e===void 0?32:up(e.type))}function Eh(e,n){var a=T.p;try{return T.p=e,n()}finally{T.p=a}}var pn=Math.random().toString(36).slice(2),Ee="__reactFiber$"+pn,He="__reactProps$"+pn,ms="__reactContainer$"+pn,yo="__reactEvents$"+pn,Zm="__reactListeners$"+pn,Jm="__reactHandles$"+pn,Ch="__reactResources$"+pn,ma="__reactMarker$"+pn;function vo(e){delete e[Ee],delete e[He],delete e[yo],delete e[Zm],delete e[Jm]}function bs(e){var n=e[Ee];if(n)return n;for(var a=e.parentNode;a;){if(n=a[ms]||a[Ee]){if(a=n.alternate,n.child!==null||a!==null&&a.child!==null)for(e=$g(e);e!==null;){if(a=e[Ee])return a;e=$g(e)}return n}e=a,a=e.parentNode}return null}function ys(e){if(e=e[Ee]||e[ms]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function ba(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(s(33))}function vs(e){var n=e[Ch];return n||(n=e[Ch]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Ae(e){e[ma]=!0}var Th=new Set,Dh={};function Vn(e,n){xs(e,n),xs(e+"Capture",n)}function xs(e,n){for(Dh[e]=n,e=0;e<n.length;e++)Th.add(n[e])}var t0=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Nh={},Mh={};function e0(e){return Wt.call(Mh,e)?!0:Wt.call(Nh,e)?!1:t0.test(e)?Mh[e]=!0:(Nh[e]=!0,!1)}function Rr(e,n,a){if(e0(n))if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var c=n.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+a)}}function Or(e,n,a){if(a===null)e.removeAttribute(n);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+a)}}function Vi(e,n,a,c){if(c===null)e.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(n,a,""+c)}}function fi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Rh(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function i0(e,n,a){var c=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,m=c.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return f.call(this)},set:function(x){a=""+x,m.call(this,x)}}),Object.defineProperty(e,n,{enumerable:c.enumerable}),{getValue:function(){return a},setValue:function(x){a=""+x},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function xo(e){if(!e._valueTracker){var n=Rh(e)?"checked":"value";e._valueTracker=i0(e,n,""+e[n])}}function Oh(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var a=n.getValue(),c="";return e&&(c=Rh(e)?e.checked?"true":"false":e.value),e=c,e!==a?(n.setValue(e),!0):!1}function kr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var n0=/[\n"\\]/g;function gi(e){return e.replace(n0,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ao(e,n,a,c,f,m,x,_){e.name="",x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?e.type=x:e.removeAttribute("type"),n!=null?x==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+fi(n)):e.value!==""+fi(n)&&(e.value=""+fi(n)):x!=="submit"&&x!=="reset"||e.removeAttribute("value"),n!=null?So(e,x,fi(n)):a!=null?So(e,x,fi(a)):c!=null&&e.removeAttribute("value"),f==null&&m!=null&&(e.defaultChecked=!!m),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.name=""+fi(_):e.removeAttribute("name")}function kh(e,n,a,c,f,m,x,_){if(m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(e.type=m),n!=null||a!=null){if(!(m!=="submit"&&m!=="reset"||n!=null)){xo(e);return}a=a!=null?""+fi(a):"",n=n!=null?""+fi(n):a,_||n===e.value||(e.value=n),e.defaultValue=n}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,e.checked=_?e.checked:!!c,e.defaultChecked=!!c,x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(e.name=x),xo(e)}function So(e,n,a){n==="number"&&kr(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function As(e,n,a,c){if(e=e.options,n){n={};for(var f=0;f<a.length;f++)n["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=n.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&c&&(e[a].defaultSelected=!0)}else{for(a=""+fi(a),n=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,c&&(e[f].defaultSelected=!0);return}n!==null||e[f].disabled||(n=e[f])}n!==null&&(n.selected=!0)}}function Lh(e,n,a){if(n!=null&&(n=""+fi(n),n!==e.value&&(e.value=n),a==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=a!=null?""+fi(a):""}function jh(e,n,a,c){if(n==null){if(c!=null){if(a!=null)throw Error(s(92));if(dt(c)){if(1<c.length)throw Error(s(93));c=c[0]}a=c}a==null&&(a=""),n=a}a=fi(n),e.defaultValue=a,c=e.textContent,c===a&&c!==""&&c!==null&&(e.value=c),xo(e)}function Ss(e,n){if(n){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=n;return}}e.textContent=n}var s0=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Bh(e,n,a){var c=n.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?c?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":c?e.setProperty(n,a):typeof a!="number"||a===0||s0.has(n)?n==="float"?e.cssFloat=a:e[n]=(""+a).trim():e[n]=a+"px"}function Ph(e,n,a){if(n!=null&&typeof n!="object")throw Error(s(62));if(e=e.style,a!=null){for(var c in a)!a.hasOwnProperty(c)||n!=null&&n.hasOwnProperty(c)||(c.indexOf("--")===0?e.setProperty(c,""):c==="float"?e.cssFloat="":e[c]="");for(var f in n)c=n[f],n.hasOwnProperty(f)&&a[f]!==c&&Bh(e,f,c)}else for(var m in n)n.hasOwnProperty(m)&&Bh(e,m,n[m])}function wo(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a0=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),r0=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Lr(e){return r0.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Yi(){}var _o=null;function Eo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ws=null,_s=null;function Fh(e){var n=ys(e);if(n&&(e=n.stateNode)){var a=e[He]||null;t:switch(e=n.stateNode,n.type){case"input":if(Ao(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),n=a.name,a.type==="radio"&&n!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+gi(""+n)+'"][type="radio"]'),n=0;n<a.length;n++){var c=a[n];if(c!==e&&c.form===e.form){var f=c[He]||null;if(!f)throw Error(s(90));Ao(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(n=0;n<a.length;n++)c=a[n],c.form===e.form&&Oh(c)}break t;case"textarea":Lh(e,a.value,a.defaultValue);break t;case"select":n=a.value,n!=null&&As(e,!!a.multiple,n,!1)}}}var Co=!1;function zh(e,n,a){if(Co)return e(n,a);Co=!0;try{var c=e(n);return c}finally{if(Co=!1,(ws!==null||_s!==null)&&(Al(),ws&&(n=ws,e=_s,_s=ws=null,Fh(n),e)))for(n=0;n<e.length;n++)Fh(e[n])}}function ya(e,n){var a=e.stateNode;if(a===null)return null;var c=a[He]||null;if(c===null)return null;a=c[n];t:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(e=e.type,c=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!c;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(s(231,n,typeof a));return a}var Xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),To=!1;if(Xi)try{var va={};Object.defineProperty(va,"passive",{get:function(){To=!0}}),window.addEventListener("test",va,va),window.removeEventListener("test",va,va)}catch{To=!1}var mn=null,Do=null,jr=null;function Ih(){if(jr)return jr;var e,n=Do,a=n.length,c,f="value"in mn?mn.value:mn.textContent,m=f.length;for(e=0;e<a&&n[e]===f[e];e++);var x=a-e;for(c=1;c<=x&&n[a-c]===f[m-c];c++);return jr=f.slice(e,1<c?1-c:void 0)}function Br(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Pr(){return!0}function Uh(){return!1}function qe(e){function n(a,c,f,m,x){this._reactName=a,this._targetInst=f,this.type=c,this.nativeEvent=m,this.target=x,this.currentTarget=null;for(var _ in e)e.hasOwnProperty(_)&&(a=e[_],this[_]=a?a(m):m[_]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?Pr:Uh,this.isPropagationStopped=Uh,this}return b(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Pr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Pr)},persist:function(){},isPersistent:Pr}),n}var Yn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fr=qe(Yn),xa=b({},Yn,{view:0,detail:0}),l0=qe(xa),No,Mo,Aa,zr=b({},xa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Aa&&(Aa&&e.type==="mousemove"?(No=e.screenX-Aa.screenX,Mo=e.screenY-Aa.screenY):Mo=No=0,Aa=e),No)},movementY:function(e){return"movementY"in e?e.movementY:Mo}}),Hh=qe(zr),o0=b({},zr,{dataTransfer:0}),c0=qe(o0),u0=b({},xa,{relatedTarget:0}),Ro=qe(u0),h0=b({},Yn,{animationName:0,elapsedTime:0,pseudoElement:0}),d0=qe(h0),f0=b({},Yn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),g0=qe(f0),p0=b({},Yn,{data:0}),qh=qe(p0),m0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},b0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},y0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function v0(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=y0[e])?!!n[e]:!1}function Oo(){return v0}var x0=b({},xa,{key:function(e){if(e.key){var n=m0[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Br(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?b0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(e){return e.type==="keypress"?Br(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Br(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),A0=qe(x0),S0=b({},zr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gh=qe(S0),w0=b({},xa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),_0=qe(w0),E0=b({},Yn,{propertyName:0,elapsedTime:0,pseudoElement:0}),C0=qe(E0),T0=b({},zr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D0=qe(T0),N0=b({},Yn,{newState:0,oldState:0}),M0=qe(N0),R0=[9,13,27,32],ko=Xi&&"CompositionEvent"in window,Sa=null;Xi&&"documentMode"in document&&(Sa=document.documentMode);var O0=Xi&&"TextEvent"in window&&!Sa,Vh=Xi&&(!ko||Sa&&8<Sa&&11>=Sa),Yh=" ",Xh=!1;function $h(e,n){switch(e){case"keyup":return R0.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kh(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Es=!1;function k0(e,n){switch(e){case"compositionend":return Kh(n);case"keypress":return n.which!==32?null:(Xh=!0,Yh);case"textInput":return e=n.data,e===Yh&&Xh?null:e;default:return null}}function L0(e,n){if(Es)return e==="compositionend"||!ko&&$h(e,n)?(e=Ih(),jr=Do=mn=null,Es=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return Vh&&n.locale!=="ko"?null:n.data;default:return null}}var j0={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qh(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!j0[e.type]:n==="textarea"}function Wh(e,n,a,c){ws?_s?_s.push(c):_s=[c]:ws=c,n=Dl(n,"onChange"),0<n.length&&(a=new Fr("onChange","change",null,a,c),e.push({event:a,listeners:n}))}var wa=null,_a=null;function B0(e){Lg(e,0)}function Ir(e){var n=ba(e);if(Oh(n))return e}function Zh(e,n){if(e==="change")return n}var Jh=!1;if(Xi){var Lo;if(Xi){var jo="oninput"in document;if(!jo){var td=document.createElement("div");td.setAttribute("oninput","return;"),jo=typeof td.oninput=="function"}Lo=jo}else Lo=!1;Jh=Lo&&(!document.documentMode||9<document.documentMode)}function ed(){wa&&(wa.detachEvent("onpropertychange",id),_a=wa=null)}function id(e){if(e.propertyName==="value"&&Ir(_a)){var n=[];Wh(n,_a,e,Eo(e)),zh(B0,n)}}function P0(e,n,a){e==="focusin"?(ed(),wa=n,_a=a,wa.attachEvent("onpropertychange",id)):e==="focusout"&&ed()}function F0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ir(_a)}function z0(e,n){if(e==="click")return Ir(n)}function I0(e,n){if(e==="input"||e==="change")return Ir(n)}function U0(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var ti=typeof Object.is=="function"?Object.is:U0;function Ea(e,n){if(ti(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var a=Object.keys(e),c=Object.keys(n);if(a.length!==c.length)return!1;for(c=0;c<a.length;c++){var f=a[c];if(!Wt.call(n,f)||!ti(e[f],n[f]))return!1}return!0}function nd(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sd(e,n){var a=nd(e);e=0;for(var c;a;){if(a.nodeType===3){if(c=e+a.textContent.length,e<=n&&c>=n)return{node:a,offset:n-e};e=c}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=nd(a)}}function ad(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?ad(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function rd(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=kr(e.document);n instanceof e.HTMLIFrameElement;){try{var a=typeof n.contentWindow.location.href=="string"}catch{a=!1}if(a)e=n.contentWindow;else break;n=kr(e.document)}return n}function Bo(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var H0=Xi&&"documentMode"in document&&11>=document.documentMode,Cs=null,Po=null,Ca=null,Fo=!1;function ld(e,n,a){var c=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Fo||Cs==null||Cs!==kr(c)||(c=Cs,"selectionStart"in c&&Bo(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Ca&&Ea(Ca,c)||(Ca=c,c=Dl(Po,"onSelect"),0<c.length&&(n=new Fr("onSelect","select",null,n,a),e.push({event:n,listeners:c}),n.target=Cs)))}function Xn(e,n){var a={};return a[e.toLowerCase()]=n.toLowerCase(),a["Webkit"+e]="webkit"+n,a["Moz"+e]="moz"+n,a}var Ts={animationend:Xn("Animation","AnimationEnd"),animationiteration:Xn("Animation","AnimationIteration"),animationstart:Xn("Animation","AnimationStart"),transitionrun:Xn("Transition","TransitionRun"),transitionstart:Xn("Transition","TransitionStart"),transitioncancel:Xn("Transition","TransitionCancel"),transitionend:Xn("Transition","TransitionEnd")},zo={},od={};Xi&&(od=document.createElement("div").style,"AnimationEvent"in window||(delete Ts.animationend.animation,delete Ts.animationiteration.animation,delete Ts.animationstart.animation),"TransitionEvent"in window||delete Ts.transitionend.transition);function $n(e){if(zo[e])return zo[e];if(!Ts[e])return e;var n=Ts[e],a;for(a in n)if(n.hasOwnProperty(a)&&a in od)return zo[e]=n[a];return e}var cd=$n("animationend"),ud=$n("animationiteration"),hd=$n("animationstart"),q0=$n("transitionrun"),G0=$n("transitionstart"),V0=$n("transitioncancel"),dd=$n("transitionend"),fd=new Map,Io="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Io.push("scrollEnd");function Di(e,n){fd.set(e,n),Vn(n,[e])}var Ur=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},pi=[],Ds=0,Uo=0;function Hr(){for(var e=Ds,n=Uo=Ds=0;n<e;){var a=pi[n];pi[n++]=null;var c=pi[n];pi[n++]=null;var f=pi[n];pi[n++]=null;var m=pi[n];if(pi[n++]=null,c!==null&&f!==null){var x=c.pending;x===null?f.next=f:(f.next=x.next,x.next=f),c.pending=f}m!==0&&gd(a,f,m)}}function qr(e,n,a,c){pi[Ds++]=e,pi[Ds++]=n,pi[Ds++]=a,pi[Ds++]=c,Uo|=c,e.lanes|=c,e=e.alternate,e!==null&&(e.lanes|=c)}function Ho(e,n,a,c){return qr(e,n,a,c),Gr(e)}function Kn(e,n){return qr(e,null,null,n),Gr(e)}function gd(e,n,a){e.lanes|=a;var c=e.alternate;c!==null&&(c.lanes|=a);for(var f=!1,m=e.return;m!==null;)m.childLanes|=a,c=m.alternate,c!==null&&(c.childLanes|=a),m.tag===22&&(e=m.stateNode,e===null||e._visibility&1||(f=!0)),e=m,m=m.return;return e.tag===3?(m=e.stateNode,f&&n!==null&&(f=31-Je(a),e=m.hiddenUpdates,c=e[f],c===null?e[f]=[n]:c.push(n),n.lane=a|536870912),m):null}function Gr(e){if(50<$a)throw $a=0,Wc=null,Error(s(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var Ns={};function Y0(e,n,a,c){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ei(e,n,a,c){return new Y0(e,n,a,c)}function qo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function $i(e,n){var a=e.alternate;return a===null?(a=ei(e.tag,n,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=n,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,n=e.dependencies,a.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function pd(e,n){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,n=a.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Vr(e,n,a,c,f,m){var x=0;if(c=e,typeof e=="function")qo(e)&&(x=1);else if(typeof e=="string")x=Wb(e,a,nt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case N:return e=ei(31,a,n,f),e.elementType=N,e.lanes=m,e;case S:return Qn(a.children,f,m,n);case C:x=8,f|=24;break;case E:return e=ei(12,a,n,f|2),e.elementType=E,e.lanes=m,e;case I:return e=ei(13,a,n,f),e.elementType=I,e.lanes=m,e;case F:return e=ei(19,a,n,f),e.elementType=F,e.lanes=m,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O:x=10;break t;case k:x=9;break t;case P:x=11;break t;case B:x=14;break t;case D:x=16,c=null;break t}x=29,a=Error(s(130,e===null?"null":typeof e,"")),c=null}return n=ei(x,a,n,f),n.elementType=e,n.type=c,n.lanes=m,n}function Qn(e,n,a,c){return e=ei(7,e,c,n),e.lanes=a,e}function Go(e,n,a){return e=ei(6,e,null,n),e.lanes=a,e}function md(e){var n=ei(18,null,null,0);return n.stateNode=e,n}function Vo(e,n,a){return n=ei(4,e.children!==null?e.children:[],e.key,n),n.lanes=a,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var bd=new WeakMap;function mi(e,n){if(typeof e=="object"&&e!==null){var a=bd.get(e);return a!==void 0?a:(n={value:e,source:n,stack:wt(n)},bd.set(e,n),n)}return{value:e,source:n,stack:wt(n)}}var Ms=[],Rs=0,Yr=null,Ta=0,bi=[],yi=0,bn=null,Li=1,ji="";function Ki(e,n){Ms[Rs++]=Ta,Ms[Rs++]=Yr,Yr=e,Ta=n}function yd(e,n,a){bi[yi++]=Li,bi[yi++]=ji,bi[yi++]=bn,bn=e;var c=Li;e=ji;var f=32-Je(c)-1;c&=~(1<<f),a+=1;var m=32-Je(n)+f;if(30<m){var x=f-f%5;m=(c&(1<<x)-1).toString(32),c>>=x,f-=x,Li=1<<32-Je(n)+f|a<<f|c,ji=m+e}else Li=1<<m|a<<f|c,ji=e}function Yo(e){e.return!==null&&(Ki(e,1),yd(e,1,0))}function Xo(e){for(;e===Yr;)Yr=Ms[--Rs],Ms[Rs]=null,Ta=Ms[--Rs],Ms[Rs]=null;for(;e===bn;)bn=bi[--yi],bi[yi]=null,ji=bi[--yi],bi[yi]=null,Li=bi[--yi],bi[yi]=null}function vd(e,n){bi[yi++]=Li,bi[yi++]=ji,bi[yi++]=bn,Li=n.id,ji=n.overflow,bn=e}var Ce=null,te=null,Lt=!1,yn=null,vi=!1,$o=Error(s(519));function vn(e){var n=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Da(mi(n,e)),$o}function xd(e){var n=e.stateNode,a=e.type,c=e.memoizedProps;switch(n[Ee]=e,n[He]=c,a){case"dialog":Rt("cancel",n),Rt("close",n);break;case"iframe":case"object":case"embed":Rt("load",n);break;case"video":case"audio":for(a=0;a<Qa.length;a++)Rt(Qa[a],n);break;case"source":Rt("error",n);break;case"img":case"image":case"link":Rt("error",n),Rt("load",n);break;case"details":Rt("toggle",n);break;case"input":Rt("invalid",n),kh(n,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Rt("invalid",n);break;case"textarea":Rt("invalid",n),jh(n,c.value,c.defaultValue,c.children)}a=c.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||n.textContent===""+a||c.suppressHydrationWarning===!0||Fg(n.textContent,a)?(c.popover!=null&&(Rt("beforetoggle",n),Rt("toggle",n)),c.onScroll!=null&&Rt("scroll",n),c.onScrollEnd!=null&&Rt("scrollend",n),c.onClick!=null&&(n.onclick=Yi),n=!0):n=!1,n||vn(e,!0)}function Ad(e){for(Ce=e.return;Ce;)switch(Ce.tag){case 5:case 31:case 13:vi=!1;return;case 27:case 3:vi=!0;return;default:Ce=Ce.return}}function Os(e){if(e!==Ce)return!1;if(!Lt)return Ad(e),Lt=!0,!1;var n=e.tag,a;if((a=n!==3&&n!==27)&&((a=n===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||du(e.type,e.memoizedProps)),a=!a),a&&te&&vn(e),Ad(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));te=Xg(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(317));te=Xg(e)}else n===27?(n=te,kn(e.type)?(e=bu,bu=null,te=e):te=n):te=Ce?Ai(e.stateNode.nextSibling):null;return!0}function Wn(){te=Ce=null,Lt=!1}function Ko(){var e=yn;return e!==null&&(Xe===null?Xe=e:Xe.push.apply(Xe,e),yn=null),e}function Da(e){yn===null?yn=[e]:yn.push(e)}var Qo=M(null),Zn=null,Qi=null;function xn(e,n,a){G(Qo,n._currentValue),n._currentValue=a}function Wi(e){e._currentValue=Qo.current,H(Qo)}function Wo(e,n,a){for(;e!==null;){var c=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,c!==null&&(c.childLanes|=n)):c!==null&&(c.childLanes&n)!==n&&(c.childLanes|=n),e===a)break;e=e.return}}function Zo(e,n,a,c){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var m=f.dependencies;if(m!==null){var x=f.child;m=m.firstContext;t:for(;m!==null;){var _=m;m=f;for(var R=0;R<n.length;R++)if(_.context===n[R]){m.lanes|=a,_=m.alternate,_!==null&&(_.lanes|=a),Wo(m.return,a,e),c||(x=null);break t}m=_.next}}else if(f.tag===18){if(x=f.return,x===null)throw Error(s(341));x.lanes|=a,m=x.alternate,m!==null&&(m.lanes|=a),Wo(x,a,e),x=null}else x=f.child;if(x!==null)x.return=f;else for(x=f;x!==null;){if(x===e){x=null;break}if(f=x.sibling,f!==null){f.return=x.return,x=f;break}x=x.return}f=x}}function ks(e,n,a,c){e=null;for(var f=n,m=!1;f!==null;){if(!m){if((f.flags&524288)!==0)m=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var x=f.alternate;if(x===null)throw Error(s(387));if(x=x.memoizedProps,x!==null){var _=f.type;ti(f.pendingProps.value,x.value)||(e!==null?e.push(_):e=[_])}}else if(f===at.current){if(x=f.alternate,x===null)throw Error(s(387));x.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(er):e=[er])}f=f.return}e!==null&&Zo(n,e,a,c),n.flags|=262144}function Xr(e){for(e=e.firstContext;e!==null;){if(!ti(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Jn(e){Zn=e,Qi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Te(e){return Sd(Zn,e)}function $r(e,n){return Zn===null&&Jn(e),Sd(e,n)}function Sd(e,n){var a=n._currentValue;if(n={context:n,memoizedValue:a,next:null},Qi===null){if(e===null)throw Error(s(308));Qi=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else Qi=Qi.next=n;return a}var X0=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(a,c){e.push(c)}};this.abort=function(){n.aborted=!0,e.forEach(function(a){return a()})}},$0=g.unstable_scheduleCallback,K0=g.unstable_NormalPriority,ge={$$typeof:O,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jo(){return{controller:new X0,data:new Map,refCount:0}}function Na(e){e.refCount--,e.refCount===0&&$0(K0,function(){e.controller.abort()})}var Ma=null,tc=0,Ls=0,js=null;function Q0(e,n){if(Ma===null){var a=Ma=[];tc=0,Ls=nu(),js={status:"pending",value:void 0,then:function(c){a.push(c)}}}return tc++,n.then(wd,wd),n}function wd(){if(--tc===0&&Ma!==null){js!==null&&(js.status="fulfilled");var e=Ma;Ma=null,Ls=0,js=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function W0(e,n){var a=[],c={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){c.status="fulfilled",c.value=n;for(var f=0;f<a.length;f++)(0,a[f])(n)},function(f){for(c.status="rejected",c.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),c}var _d=j.S;j.S=function(e,n){og=Gt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Q0(e,n),_d!==null&&_d(e,n)};var ts=M(null);function ec(){var e=ts.current;return e!==null?e:Zt.pooledCache}function Kr(e,n){n===null?G(ts,ts.current):G(ts,n.pool)}function Ed(){var e=ec();return e===null?null:{parent:ge._currentValue,pool:e}}var Bs=Error(s(460)),ic=Error(s(474)),Qr=Error(s(542)),Wr={then:function(){}};function Cd(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Td(e,n,a){switch(a=e[a],a===void 0?e.push(n):a!==n&&(n.then(Yi,Yi),n=a),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Nd(e),e;default:if(typeof n.status=="string")n.then(Yi,Yi);else{if(e=Zt,e!==null&&100<e.shellSuspendCounter)throw Error(s(482));e=n,e.status="pending",e.then(function(c){if(n.status==="pending"){var f=n;f.status="fulfilled",f.value=c}},function(c){if(n.status==="pending"){var f=n;f.status="rejected",f.reason=c}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Nd(e),e}throw is=n,Bs}}function es(e){try{var n=e._init;return n(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(is=a,Bs):a}}var is=null;function Dd(){if(is===null)throw Error(s(459));var e=is;return is=null,e}function Nd(e){if(e===Bs||e===Qr)throw Error(s(483))}var Ps=null,Ra=0;function Zr(e){var n=Ra;return Ra+=1,Ps===null&&(Ps=[]),Td(Ps,e,n)}function Oa(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Jr(e,n){throw n.$$typeof===y?Error(s(525)):(e=Object.prototype.toString.call(n),Error(s(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Md(e){function n(z,L){if(e){var q=z.deletions;q===null?(z.deletions=[L],z.flags|=16):q.push(L)}}function a(z,L){if(!e)return null;for(;L!==null;)n(z,L),L=L.sibling;return null}function c(z){for(var L=new Map;z!==null;)z.key!==null?L.set(z.key,z):L.set(z.index,z),z=z.sibling;return L}function f(z,L){return z=$i(z,L),z.index=0,z.sibling=null,z}function m(z,L,q){return z.index=q,e?(q=z.alternate,q!==null?(q=q.index,q<L?(z.flags|=67108866,L):q):(z.flags|=67108866,L)):(z.flags|=1048576,L)}function x(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function _(z,L,q,Z){return L===null||L.tag!==6?(L=Go(q,z.mode,Z),L.return=z,L):(L=f(L,q),L.return=z,L)}function R(z,L,q,Z){var mt=q.type;return mt===S?W(z,L,q.props.children,Z,q.key):L!==null&&(L.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===D&&es(mt)===L.type)?(L=f(L,q.props),Oa(L,q),L.return=z,L):(L=Vr(q.type,q.key,q.props,null,z.mode,Z),Oa(L,q),L.return=z,L)}function V(z,L,q,Z){return L===null||L.tag!==4||L.stateNode.containerInfo!==q.containerInfo||L.stateNode.implementation!==q.implementation?(L=Vo(q,z.mode,Z),L.return=z,L):(L=f(L,q.children||[]),L.return=z,L)}function W(z,L,q,Z,mt){return L===null||L.tag!==7?(L=Qn(q,z.mode,Z,mt),L.return=z,L):(L=f(L,q),L.return=z,L)}function J(z,L,q){if(typeof L=="string"&&L!==""||typeof L=="number"||typeof L=="bigint")return L=Go(""+L,z.mode,q),L.return=z,L;if(typeof L=="object"&&L!==null){switch(L.$$typeof){case A:return q=Vr(L.type,L.key,L.props,null,z.mode,q),Oa(q,L),q.return=z,q;case w:return L=Vo(L,z.mode,q),L.return=z,L;case D:return L=es(L),J(z,L,q)}if(dt(L)||tt(L))return L=Qn(L,z.mode,q,null),L.return=z,L;if(typeof L.then=="function")return J(z,Zr(L),q);if(L.$$typeof===O)return J(z,$r(z,L),q);Jr(z,L)}return null}function Y(z,L,q,Z){var mt=L!==null?L.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return mt!==null?null:_(z,L,""+q,Z);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case A:return q.key===mt?R(z,L,q,Z):null;case w:return q.key===mt?V(z,L,q,Z):null;case D:return q=es(q),Y(z,L,q,Z)}if(dt(q)||tt(q))return mt!==null?null:W(z,L,q,Z,null);if(typeof q.then=="function")return Y(z,L,Zr(q),Z);if(q.$$typeof===O)return Y(z,L,$r(z,q),Z);Jr(z,q)}return null}function K(z,L,q,Z,mt){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(q)||null,_(L,z,""+Z,mt);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case A:return z=z.get(Z.key===null?q:Z.key)||null,R(L,z,Z,mt);case w:return z=z.get(Z.key===null?q:Z.key)||null,V(L,z,Z,mt);case D:return Z=es(Z),K(z,L,q,Z,mt)}if(dt(Z)||tt(Z))return z=z.get(q)||null,W(L,z,Z,mt,null);if(typeof Z.then=="function")return K(z,L,q,Zr(Z),mt);if(Z.$$typeof===O)return K(z,L,q,$r(L,Z),mt);Jr(L,Z)}return null}function ut(z,L,q,Z){for(var mt=null,It=null,ft=L,Ct=L=0,kt=null;ft!==null&&Ct<q.length;Ct++){ft.index>Ct?(kt=ft,ft=null):kt=ft.sibling;var Ut=Y(z,ft,q[Ct],Z);if(Ut===null){ft===null&&(ft=kt);break}e&&ft&&Ut.alternate===null&&n(z,ft),L=m(Ut,L,Ct),It===null?mt=Ut:It.sibling=Ut,It=Ut,ft=kt}if(Ct===q.length)return a(z,ft),Lt&&Ki(z,Ct),mt;if(ft===null){for(;Ct<q.length;Ct++)ft=J(z,q[Ct],Z),ft!==null&&(L=m(ft,L,Ct),It===null?mt=ft:It.sibling=ft,It=ft);return Lt&&Ki(z,Ct),mt}for(ft=c(ft);Ct<q.length;Ct++)kt=K(ft,z,Ct,q[Ct],Z),kt!==null&&(e&&kt.alternate!==null&&ft.delete(kt.key===null?Ct:kt.key),L=m(kt,L,Ct),It===null?mt=kt:It.sibling=kt,It=kt);return e&&ft.forEach(function(Fn){return n(z,Fn)}),Lt&&Ki(z,Ct),mt}function yt(z,L,q,Z){if(q==null)throw Error(s(151));for(var mt=null,It=null,ft=L,Ct=L=0,kt=null,Ut=q.next();ft!==null&&!Ut.done;Ct++,Ut=q.next()){ft.index>Ct?(kt=ft,ft=null):kt=ft.sibling;var Fn=Y(z,ft,Ut.value,Z);if(Fn===null){ft===null&&(ft=kt);break}e&&ft&&Fn.alternate===null&&n(z,ft),L=m(Fn,L,Ct),It===null?mt=Fn:It.sibling=Fn,It=Fn,ft=kt}if(Ut.done)return a(z,ft),Lt&&Ki(z,Ct),mt;if(ft===null){for(;!Ut.done;Ct++,Ut=q.next())Ut=J(z,Ut.value,Z),Ut!==null&&(L=m(Ut,L,Ct),It===null?mt=Ut:It.sibling=Ut,It=Ut);return Lt&&Ki(z,Ct),mt}for(ft=c(ft);!Ut.done;Ct++,Ut=q.next())Ut=K(ft,z,Ct,Ut.value,Z),Ut!==null&&(e&&Ut.alternate!==null&&ft.delete(Ut.key===null?Ct:Ut.key),L=m(Ut,L,Ct),It===null?mt=Ut:It.sibling=Ut,It=Ut);return e&&ft.forEach(function(oy){return n(z,oy)}),Lt&&Ki(z,Ct),mt}function Kt(z,L,q,Z){if(typeof q=="object"&&q!==null&&q.type===S&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case A:t:{for(var mt=q.key;L!==null;){if(L.key===mt){if(mt=q.type,mt===S){if(L.tag===7){a(z,L.sibling),Z=f(L,q.props.children),Z.return=z,z=Z;break t}}else if(L.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===D&&es(mt)===L.type){a(z,L.sibling),Z=f(L,q.props),Oa(Z,q),Z.return=z,z=Z;break t}a(z,L);break}else n(z,L);L=L.sibling}q.type===S?(Z=Qn(q.props.children,z.mode,Z,q.key),Z.return=z,z=Z):(Z=Vr(q.type,q.key,q.props,null,z.mode,Z),Oa(Z,q),Z.return=z,z=Z)}return x(z);case w:t:{for(mt=q.key;L!==null;){if(L.key===mt)if(L.tag===4&&L.stateNode.containerInfo===q.containerInfo&&L.stateNode.implementation===q.implementation){a(z,L.sibling),Z=f(L,q.children||[]),Z.return=z,z=Z;break t}else{a(z,L);break}else n(z,L);L=L.sibling}Z=Vo(q,z.mode,Z),Z.return=z,z=Z}return x(z);case D:return q=es(q),Kt(z,L,q,Z)}if(dt(q))return ut(z,L,q,Z);if(tt(q)){if(mt=tt(q),typeof mt!="function")throw Error(s(150));return q=mt.call(q),yt(z,L,q,Z)}if(typeof q.then=="function")return Kt(z,L,Zr(q),Z);if(q.$$typeof===O)return Kt(z,L,$r(z,q),Z);Jr(z,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,L!==null&&L.tag===6?(a(z,L.sibling),Z=f(L,q),Z.return=z,z=Z):(a(z,L),Z=Go(q,z.mode,Z),Z.return=z,z=Z),x(z)):a(z,L)}return function(z,L,q,Z){try{Ra=0;var mt=Kt(z,L,q,Z);return Ps=null,mt}catch(ft){if(ft===Bs||ft===Qr)throw ft;var It=ei(29,ft,null,z.mode);return It.lanes=Z,It.return=z,It}finally{}}}var ns=Md(!0),Rd=Md(!1),An=!1;function nc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Sn(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wn(e,n,a){var c=e.updateQueue;if(c===null)return null;if(c=c.shared,(Ht&2)!==0){var f=c.pending;return f===null?n.next=n:(n.next=f.next,f.next=n),c.pending=n,n=Gr(e),gd(e,null,a),n}return qr(e,c,n,a),Gr(e)}function ka(e,n,a){if(n=n.updateQueue,n!==null&&(n=n.shared,(a&4194048)!==0)){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,Sh(e,a)}}function ac(e,n){var a=e.updateQueue,c=e.alternate;if(c!==null&&(c=c.updateQueue,a===c)){var f=null,m=null;if(a=a.firstBaseUpdate,a!==null){do{var x={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};m===null?f=m=x:m=m.next=x,a=a.next}while(a!==null);m===null?f=m=n:m=m.next=n}else f=m=n;a={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:m,shared:c.shared,callbacks:c.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=n:e.next=n,a.lastBaseUpdate=n}var rc=!1;function La(){if(rc){var e=js;if(e!==null)throw e}}function ja(e,n,a,c){rc=!1;var f=e.updateQueue;An=!1;var m=f.firstBaseUpdate,x=f.lastBaseUpdate,_=f.shared.pending;if(_!==null){f.shared.pending=null;var R=_,V=R.next;R.next=null,x===null?m=V:x.next=V,x=R;var W=e.alternate;W!==null&&(W=W.updateQueue,_=W.lastBaseUpdate,_!==x&&(_===null?W.firstBaseUpdate=V:_.next=V,W.lastBaseUpdate=R))}if(m!==null){var J=f.baseState;x=0,W=V=R=null,_=m;do{var Y=_.lane&-536870913,K=Y!==_.lane;if(K?(Ot&Y)===Y:(c&Y)===Y){Y!==0&&Y===Ls&&(rc=!0),W!==null&&(W=W.next={lane:0,tag:_.tag,payload:_.payload,callback:null,next:null});t:{var ut=e,yt=_;Y=n;var Kt=a;switch(yt.tag){case 1:if(ut=yt.payload,typeof ut=="function"){J=ut.call(Kt,J,Y);break t}J=ut;break t;case 3:ut.flags=ut.flags&-65537|128;case 0:if(ut=yt.payload,Y=typeof ut=="function"?ut.call(Kt,J,Y):ut,Y==null)break t;J=b({},J,Y);break t;case 2:An=!0}}Y=_.callback,Y!==null&&(e.flags|=64,K&&(e.flags|=8192),K=f.callbacks,K===null?f.callbacks=[Y]:K.push(Y))}else K={lane:Y,tag:_.tag,payload:_.payload,callback:_.callback,next:null},W===null?(V=W=K,R=J):W=W.next=K,x|=Y;if(_=_.next,_===null){if(_=f.shared.pending,_===null)break;K=_,_=K.next,K.next=null,f.lastBaseUpdate=K,f.shared.pending=null}}while(!0);W===null&&(R=J),f.baseState=R,f.firstBaseUpdate=V,f.lastBaseUpdate=W,m===null&&(f.shared.lanes=0),Dn|=x,e.lanes=x,e.memoizedState=J}}function Od(e,n){if(typeof e!="function")throw Error(s(191,e));e.call(n)}function kd(e,n){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)Od(a[e],n)}var Fs=M(null),tl=M(0);function Ld(e,n){e=ln,G(tl,e),G(Fs,n),ln=e|n.baseLanes}function lc(){G(tl,ln),G(Fs,Fs.current)}function oc(){ln=tl.current,H(Fs),H(tl)}var ii=M(null),xi=null;function _n(e){var n=e.alternate;G(he,he.current&1),G(ii,e),xi===null&&(n===null||Fs.current!==null||n.memoizedState!==null)&&(xi=e)}function cc(e){G(he,he.current),G(ii,e),xi===null&&(xi=e)}function jd(e){e.tag===22?(G(he,he.current),G(ii,e),xi===null&&(xi=e)):En()}function En(){G(he,he.current),G(ii,ii.current)}function ni(e){H(ii),xi===e&&(xi=null),H(he)}var he=M(0);function el(e){for(var n=e;n!==null;){if(n.tag===13){var a=n.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||pu(a)||mu(a)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var Zi=0,Et=null,Xt=null,pe=null,il=!1,zs=!1,ss=!1,nl=0,Ba=0,Is=null,Z0=0;function le(){throw Error(s(321))}function uc(e,n){if(n===null)return!1;for(var a=0;a<n.length&&a<e.length;a++)if(!ti(e[a],n[a]))return!1;return!0}function hc(e,n,a,c,f,m){return Zi=m,Et=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,j.H=e===null||e.memoizedState===null?vf:Cc,ss=!1,m=a(c,f),ss=!1,zs&&(m=Pd(n,a,c,f)),Bd(e),m}function Bd(e){j.H=za;var n=Xt!==null&&Xt.next!==null;if(Zi=0,pe=Xt=Et=null,il=!1,Ba=0,Is=null,n)throw Error(s(300));e===null||me||(e=e.dependencies,e!==null&&Xr(e)&&(me=!0))}function Pd(e,n,a,c){Et=e;var f=0;do{if(zs&&(Is=null),Ba=0,zs=!1,25<=f)throw Error(s(301));if(f+=1,pe=Xt=null,e.updateQueue!=null){var m=e.updateQueue;m.lastEffect=null,m.events=null,m.stores=null,m.memoCache!=null&&(m.memoCache.index=0)}j.H=xf,m=n(a,c)}while(zs);return m}function J0(){var e=j.H,n=e.useState()[0];return n=typeof n.then=="function"?Pa(n):n,e=e.useState()[0],(Xt!==null?Xt.memoizedState:null)!==e&&(Et.flags|=1024),n}function dc(){var e=nl!==0;return nl=0,e}function fc(e,n,a){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~a}function gc(e){if(il){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}il=!1}Zi=0,pe=Xt=Et=null,zs=!1,Ba=nl=0,Is=null}function Be(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?Et.memoizedState=pe=e:pe=pe.next=e,pe}function de(){if(Xt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Xt.next;var n=pe===null?Et.memoizedState:pe.next;if(n!==null)pe=n,Xt=e;else{if(e===null)throw Et.alternate===null?Error(s(467)):Error(s(310));Xt=e,e={memoizedState:Xt.memoizedState,baseState:Xt.baseState,baseQueue:Xt.baseQueue,queue:Xt.queue,next:null},pe===null?Et.memoizedState=pe=e:pe=pe.next=e}return pe}function sl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Pa(e){var n=Ba;return Ba+=1,Is===null&&(Is=[]),e=Td(Is,e,n),n=Et,(pe===null?n.memoizedState:pe.next)===null&&(n=n.alternate,j.H=n===null||n.memoizedState===null?vf:Cc),e}function al(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Pa(e);if(e.$$typeof===O)return Te(e)}throw Error(s(438,String(e)))}function pc(e){var n=null,a=Et.updateQueue;if(a!==null&&(n=a.memoCache),n==null){var c=Et.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(n={data:c.data.map(function(f){return f.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),a===null&&(a=sl(),Et.updateQueue=a),a.memoCache=n,a=n.data[n.index],a===void 0)for(a=n.data[n.index]=Array(e),c=0;c<e;c++)a[c]=U;return n.index++,a}function Ji(e,n){return typeof n=="function"?n(e):n}function rl(e){var n=de();return mc(n,Xt,e)}function mc(e,n,a){var c=e.queue;if(c===null)throw Error(s(311));c.lastRenderedReducer=a;var f=e.baseQueue,m=c.pending;if(m!==null){if(f!==null){var x=f.next;f.next=m.next,m.next=x}n.baseQueue=f=m,c.pending=null}if(m=e.baseState,f===null)e.memoizedState=m;else{n=f.next;var _=x=null,R=null,V=n,W=!1;do{var J=V.lane&-536870913;if(J!==V.lane?(Ot&J)===J:(Zi&J)===J){var Y=V.revertLane;if(Y===0)R!==null&&(R=R.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),J===Ls&&(W=!0);else if((Zi&Y)===Y){V=V.next,Y===Ls&&(W=!0);continue}else J={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},R===null?(_=R=J,x=m):R=R.next=J,Et.lanes|=Y,Dn|=Y;J=V.action,ss&&a(m,J),m=V.hasEagerState?V.eagerState:a(m,J)}else Y={lane:J,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},R===null?(_=R=Y,x=m):R=R.next=Y,Et.lanes|=J,Dn|=J;V=V.next}while(V!==null&&V!==n);if(R===null?x=m:R.next=_,!ti(m,e.memoizedState)&&(me=!0,W&&(a=js,a!==null)))throw a;e.memoizedState=m,e.baseState=x,e.baseQueue=R,c.lastRenderedState=m}return f===null&&(c.lanes=0),[e.memoizedState,c.dispatch]}function bc(e){var n=de(),a=n.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=e;var c=a.dispatch,f=a.pending,m=n.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do m=e(m,x.action),x=x.next;while(x!==f);ti(m,n.memoizedState)||(me=!0),n.memoizedState=m,n.baseQueue===null&&(n.baseState=m),a.lastRenderedState=m}return[m,c]}function Fd(e,n,a){var c=Et,f=de(),m=Lt;if(m){if(a===void 0)throw Error(s(407));a=a()}else a=n();var x=!ti((Xt||f).memoizedState,a);if(x&&(f.memoizedState=a,me=!0),f=f.queue,xc(Ud.bind(null,c,f,e),[e]),f.getSnapshot!==n||x||pe!==null&&pe.memoizedState.tag&1){if(c.flags|=2048,Us(9,{destroy:void 0},Id.bind(null,c,f,a,n),null),Zt===null)throw Error(s(349));m||(Zi&127)!==0||zd(c,n,a)}return a}function zd(e,n,a){e.flags|=16384,e={getSnapshot:n,value:a},n=Et.updateQueue,n===null?(n=sl(),Et.updateQueue=n,n.stores=[e]):(a=n.stores,a===null?n.stores=[e]:a.push(e))}function Id(e,n,a,c){n.value=a,n.getSnapshot=c,Hd(n)&&qd(e)}function Ud(e,n,a){return a(function(){Hd(n)&&qd(e)})}function Hd(e){var n=e.getSnapshot;e=e.value;try{var a=n();return!ti(e,a)}catch{return!0}}function qd(e){var n=Kn(e,2);n!==null&&$e(n,e,2)}function yc(e){var n=Be();if(typeof e=="function"){var a=e;if(e=a(),ss){gn(!0);try{a()}finally{gn(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:e},n}function Gd(e,n,a,c){return e.baseState=a,mc(e,Xt,typeof c=="function"?c:Ji)}function tb(e,n,a,c,f){if(cl(e))throw Error(s(485));if(e=n.action,e!==null){var m={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(x){m.listeners.push(x)}};j.T!==null?a(!0):m.isTransition=!1,c(m),a=n.pending,a===null?(m.next=n.pending=m,Vd(n,m)):(m.next=a.next,n.pending=a.next=m)}}function Vd(e,n){var a=n.action,c=n.payload,f=e.state;if(n.isTransition){var m=j.T,x={};j.T=x;try{var _=a(f,c),R=j.S;R!==null&&R(x,_),Yd(e,n,_)}catch(V){vc(e,n,V)}finally{m!==null&&x.types!==null&&(m.types=x.types),j.T=m}}else try{m=a(f,c),Yd(e,n,m)}catch(V){vc(e,n,V)}}function Yd(e,n,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(c){Xd(e,n,c)},function(c){return vc(e,n,c)}):Xd(e,n,a)}function Xd(e,n,a){n.status="fulfilled",n.value=a,$d(n),e.state=a,n=e.pending,n!==null&&(a=n.next,a===n?e.pending=null:(a=a.next,n.next=a,Vd(e,a)))}function vc(e,n,a){var c=e.pending;if(e.pending=null,c!==null){c=c.next;do n.status="rejected",n.reason=a,$d(n),n=n.next;while(n!==c)}e.action=null}function $d(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Kd(e,n){return n}function Qd(e,n){if(Lt){var a=Zt.formState;if(a!==null){t:{var c=Et;if(Lt){if(te){e:{for(var f=te,m=vi;f.nodeType!==8;){if(!m){f=null;break e}if(f=Ai(f.nextSibling),f===null){f=null;break e}}m=f.data,f=m==="F!"||m==="F"?f:null}if(f){te=Ai(f.nextSibling),c=f.data==="F!";break t}}vn(c)}c=!1}c&&(n=a[0])}}return a=Be(),a.memoizedState=a.baseState=n,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:n},a.queue=c,a=mf.bind(null,Et,c),c.dispatch=a,c=yc(!1),m=Ec.bind(null,Et,!1,c.queue),c=Be(),f={state:n,dispatch:null,action:e,pending:null},c.queue=f,a=tb.bind(null,Et,f,m,a),f.dispatch=a,c.memoizedState=e,[n,a,!1]}function Wd(e){var n=de();return Zd(n,Xt,e)}function Zd(e,n,a){if(n=mc(e,n,Kd)[0],e=rl(Ji)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var c=Pa(n)}catch(x){throw x===Bs?Qr:x}else c=n;n=de();var f=n.queue,m=f.dispatch;return a!==n.memoizedState&&(Et.flags|=2048,Us(9,{destroy:void 0},eb.bind(null,f,a),null)),[c,m,e]}function eb(e,n){e.action=n}function Jd(e){var n=de(),a=Xt;if(a!==null)return Zd(n,a,e);de(),n=n.memoizedState,a=de();var c=a.queue.dispatch;return a.memoizedState=e,[n,c,!1]}function Us(e,n,a,c){return e={tag:e,create:a,deps:c,inst:n,next:null},n=Et.updateQueue,n===null&&(n=sl(),Et.updateQueue=n),a=n.lastEffect,a===null?n.lastEffect=e.next=e:(c=a.next,a.next=e,e.next=c,n.lastEffect=e),e}function tf(){return de().memoizedState}function ll(e,n,a,c){var f=Be();Et.flags|=e,f.memoizedState=Us(1|n,{destroy:void 0},a,c===void 0?null:c)}function ol(e,n,a,c){var f=de();c=c===void 0?null:c;var m=f.memoizedState.inst;Xt!==null&&c!==null&&uc(c,Xt.memoizedState.deps)?f.memoizedState=Us(n,m,a,c):(Et.flags|=e,f.memoizedState=Us(1|n,m,a,c))}function ef(e,n){ll(8390656,8,e,n)}function xc(e,n){ol(2048,8,e,n)}function ib(e){Et.flags|=4;var n=Et.updateQueue;if(n===null)n=sl(),Et.updateQueue=n,n.events=[e];else{var a=n.events;a===null?n.events=[e]:a.push(e)}}function nf(e){var n=de().memoizedState;return ib({ref:n,nextImpl:e}),function(){if((Ht&2)!==0)throw Error(s(440));return n.impl.apply(void 0,arguments)}}function sf(e,n){return ol(4,2,e,n)}function af(e,n){return ol(4,4,e,n)}function rf(e,n){if(typeof n=="function"){e=e();var a=n(e);return function(){typeof a=="function"?a():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function lf(e,n,a){a=a!=null?a.concat([e]):null,ol(4,4,rf.bind(null,n,e),a)}function Ac(){}function of(e,n){var a=de();n=n===void 0?null:n;var c=a.memoizedState;return n!==null&&uc(n,c[1])?c[0]:(a.memoizedState=[e,n],e)}function cf(e,n){var a=de();n=n===void 0?null:n;var c=a.memoizedState;if(n!==null&&uc(n,c[1]))return c[0];if(c=e(),ss){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[c,n],c}function Sc(e,n,a){return a===void 0||(Zi&1073741824)!==0&&(Ot&261930)===0?e.memoizedState=n:(e.memoizedState=a,e=ug(),Et.lanes|=e,Dn|=e,a)}function uf(e,n,a,c){return ti(a,n)?a:Fs.current!==null?(e=Sc(e,a,c),ti(e,n)||(me=!0),e):(Zi&42)===0||(Zi&1073741824)!==0&&(Ot&261930)===0?(me=!0,e.memoizedState=a):(e=ug(),Et.lanes|=e,Dn|=e,n)}function hf(e,n,a,c,f){var m=T.p;T.p=m!==0&&8>m?m:8;var x=j.T,_={};j.T=_,Ec(e,!1,n,a);try{var R=f(),V=j.S;if(V!==null&&V(_,R),R!==null&&typeof R=="object"&&typeof R.then=="function"){var W=W0(R,c);Fa(e,n,W,ri(e))}else Fa(e,n,c,ri(e))}catch(J){Fa(e,n,{then:function(){},status:"rejected",reason:J},ri())}finally{T.p=m,x!==null&&_.types!==null&&(x.types=_.types),j.T=x}}function nb(){}function wc(e,n,a,c){if(e.tag!==5)throw Error(s(476));var f=df(e).queue;hf(e,f,n,X,a===null?nb:function(){return ff(e),a(c)})}function df(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:X},next:null};var a={};return n.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:a},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function ff(e){var n=df(e);n.next===null&&(n=e.alternate.memoizedState),Fa(e,n.next.queue,{},ri())}function _c(){return Te(er)}function gf(){return de().memoizedState}function pf(){return de().memoizedState}function sb(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var a=ri();e=Sn(a);var c=wn(n,e,a);c!==null&&($e(c,n,a),ka(c,n,a)),n={cache:Jo()},e.payload=n;return}n=n.return}}function ab(e,n,a){var c=ri();a={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},cl(e)?bf(n,a):(a=Ho(e,n,a,c),a!==null&&($e(a,e,c),yf(a,n,c)))}function mf(e,n,a){var c=ri();Fa(e,n,a,c)}function Fa(e,n,a,c){var f={lane:c,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(cl(e))bf(n,f);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=n.lastRenderedReducer,m!==null))try{var x=n.lastRenderedState,_=m(x,a);if(f.hasEagerState=!0,f.eagerState=_,ti(_,x))return qr(e,n,f,0),Zt===null&&Hr(),!1}catch{}finally{}if(a=Ho(e,n,f,c),a!==null)return $e(a,e,c),yf(a,n,c),!0}return!1}function Ec(e,n,a,c){if(c={lane:2,revertLane:nu(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},cl(e)){if(n)throw Error(s(479))}else n=Ho(e,a,c,2),n!==null&&$e(n,e,2)}function cl(e){var n=e.alternate;return e===Et||n!==null&&n===Et}function bf(e,n){zs=il=!0;var a=e.pending;a===null?n.next=n:(n.next=a.next,a.next=n),e.pending=n}function yf(e,n,a){if((a&4194048)!==0){var c=n.lanes;c&=e.pendingLanes,a|=c,n.lanes=a,Sh(e,a)}}var za={readContext:Te,use:al,useCallback:le,useContext:le,useEffect:le,useImperativeHandle:le,useLayoutEffect:le,useInsertionEffect:le,useMemo:le,useReducer:le,useRef:le,useState:le,useDebugValue:le,useDeferredValue:le,useTransition:le,useSyncExternalStore:le,useId:le,useHostTransitionStatus:le,useFormState:le,useActionState:le,useOptimistic:le,useMemoCache:le,useCacheRefresh:le};za.useEffectEvent=le;var vf={readContext:Te,use:al,useCallback:function(e,n){return Be().memoizedState=[e,n===void 0?null:n],e},useContext:Te,useEffect:ef,useImperativeHandle:function(e,n,a){a=a!=null?a.concat([e]):null,ll(4194308,4,rf.bind(null,n,e),a)},useLayoutEffect:function(e,n){return ll(4194308,4,e,n)},useInsertionEffect:function(e,n){ll(4,2,e,n)},useMemo:function(e,n){var a=Be();n=n===void 0?null:n;var c=e();if(ss){gn(!0);try{e()}finally{gn(!1)}}return a.memoizedState=[c,n],c},useReducer:function(e,n,a){var c=Be();if(a!==void 0){var f=a(n);if(ss){gn(!0);try{a(n)}finally{gn(!1)}}}else f=n;return c.memoizedState=c.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},c.queue=e,e=e.dispatch=ab.bind(null,Et,e),[c.memoizedState,e]},useRef:function(e){var n=Be();return e={current:e},n.memoizedState=e},useState:function(e){e=yc(e);var n=e.queue,a=mf.bind(null,Et,n);return n.dispatch=a,[e.memoizedState,a]},useDebugValue:Ac,useDeferredValue:function(e,n){var a=Be();return Sc(a,e,n)},useTransition:function(){var e=yc(!1);return e=hf.bind(null,Et,e.queue,!0,!1),Be().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,a){var c=Et,f=Be();if(Lt){if(a===void 0)throw Error(s(407));a=a()}else{if(a=n(),Zt===null)throw Error(s(349));(Ot&127)!==0||zd(c,n,a)}f.memoizedState=a;var m={value:a,getSnapshot:n};return f.queue=m,ef(Ud.bind(null,c,m,e),[e]),c.flags|=2048,Us(9,{destroy:void 0},Id.bind(null,c,m,a,n),null),a},useId:function(){var e=Be(),n=Zt.identifierPrefix;if(Lt){var a=ji,c=Li;a=(c&~(1<<32-Je(c)-1)).toString(32)+a,n="_"+n+"R_"+a,a=nl++,0<a&&(n+="H"+a.toString(32)),n+="_"}else a=Z0++,n="_"+n+"r_"+a.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:_c,useFormState:Qd,useActionState:Qd,useOptimistic:function(e){var n=Be();n.memoizedState=n.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=a,n=Ec.bind(null,Et,!0,a),a.dispatch=n,[e,n]},useMemoCache:pc,useCacheRefresh:function(){return Be().memoizedState=sb.bind(null,Et)},useEffectEvent:function(e){var n=Be(),a={impl:e};return n.memoizedState=a,function(){if((Ht&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},Cc={readContext:Te,use:al,useCallback:of,useContext:Te,useEffect:xc,useImperativeHandle:lf,useInsertionEffect:sf,useLayoutEffect:af,useMemo:cf,useReducer:rl,useRef:tf,useState:function(){return rl(Ji)},useDebugValue:Ac,useDeferredValue:function(e,n){var a=de();return uf(a,Xt.memoizedState,e,n)},useTransition:function(){var e=rl(Ji)[0],n=de().memoizedState;return[typeof e=="boolean"?e:Pa(e),n]},useSyncExternalStore:Fd,useId:gf,useHostTransitionStatus:_c,useFormState:Wd,useActionState:Wd,useOptimistic:function(e,n){var a=de();return Gd(a,Xt,e,n)},useMemoCache:pc,useCacheRefresh:pf};Cc.useEffectEvent=nf;var xf={readContext:Te,use:al,useCallback:of,useContext:Te,useEffect:xc,useImperativeHandle:lf,useInsertionEffect:sf,useLayoutEffect:af,useMemo:cf,useReducer:bc,useRef:tf,useState:function(){return bc(Ji)},useDebugValue:Ac,useDeferredValue:function(e,n){var a=de();return Xt===null?Sc(a,e,n):uf(a,Xt.memoizedState,e,n)},useTransition:function(){var e=bc(Ji)[0],n=de().memoizedState;return[typeof e=="boolean"?e:Pa(e),n]},useSyncExternalStore:Fd,useId:gf,useHostTransitionStatus:_c,useFormState:Jd,useActionState:Jd,useOptimistic:function(e,n){var a=de();return Xt!==null?Gd(a,Xt,e,n):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:pc,useCacheRefresh:pf};xf.useEffectEvent=nf;function Tc(e,n,a,c){n=e.memoizedState,a=a(c,n),a=a==null?n:b({},n,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Dc={enqueueSetState:function(e,n,a){e=e._reactInternals;var c=ri(),f=Sn(c);f.payload=n,a!=null&&(f.callback=a),n=wn(e,f,c),n!==null&&($e(n,e,c),ka(n,e,c))},enqueueReplaceState:function(e,n,a){e=e._reactInternals;var c=ri(),f=Sn(c);f.tag=1,f.payload=n,a!=null&&(f.callback=a),n=wn(e,f,c),n!==null&&($e(n,e,c),ka(n,e,c))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var a=ri(),c=Sn(a);c.tag=2,n!=null&&(c.callback=n),n=wn(e,c,a),n!==null&&($e(n,e,a),ka(n,e,a))}};function Af(e,n,a,c,f,m,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(c,m,x):n.prototype&&n.prototype.isPureReactComponent?!Ea(a,c)||!Ea(f,m):!0}function Sf(e,n,a,c){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(a,c),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(a,c),n.state!==e&&Dc.enqueueReplaceState(n,n.state,null)}function as(e,n){var a=n;if("ref"in n){a={};for(var c in n)c!=="ref"&&(a[c]=n[c])}if(e=e.defaultProps){a===n&&(a=b({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function wf(e){Ur(e)}function _f(e){console.error(e)}function Ef(e){Ur(e)}function ul(e,n){try{var a=e.onUncaughtError;a(n.value,{componentStack:n.stack})}catch(c){setTimeout(function(){throw c})}}function Cf(e,n,a){try{var c=e.onCaughtError;c(a.value,{componentStack:a.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Nc(e,n,a){return a=Sn(a),a.tag=3,a.payload={element:null},a.callback=function(){ul(e,n)},a}function Tf(e){return e=Sn(e),e.tag=3,e}function Df(e,n,a,c){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var m=c.value;e.payload=function(){return f(m)},e.callback=function(){Cf(n,a,c)}}var x=a.stateNode;x!==null&&typeof x.componentDidCatch=="function"&&(e.callback=function(){Cf(n,a,c),typeof f!="function"&&(Nn===null?Nn=new Set([this]):Nn.add(this));var _=c.stack;this.componentDidCatch(c.value,{componentStack:_!==null?_:""})})}function rb(e,n,a,c,f){if(a.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(n=a.alternate,n!==null&&ks(n,a,f,!0),a=ii.current,a!==null){switch(a.tag){case 31:case 13:return xi===null?Sl():a.alternate===null&&oe===0&&(oe=3),a.flags&=-257,a.flags|=65536,a.lanes=f,c===Wr?a.flags|=16384:(n=a.updateQueue,n===null?a.updateQueue=new Set([c]):n.add(c),tu(e,c,f)),!1;case 22:return a.flags|=65536,c===Wr?a.flags|=16384:(n=a.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([c])},a.updateQueue=n):(a=n.retryQueue,a===null?n.retryQueue=new Set([c]):a.add(c)),tu(e,c,f)),!1}throw Error(s(435,a.tag))}return tu(e,c,f),Sl(),!1}if(Lt)return n=ii.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=f,c!==$o&&(e=Error(s(422),{cause:c}),Da(mi(e,a)))):(c!==$o&&(n=Error(s(423),{cause:c}),Da(mi(n,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,c=mi(c,a),f=Nc(e.stateNode,c,f),ac(e,f),oe!==4&&(oe=2)),!1;var m=Error(s(520),{cause:c});if(m=mi(m,a),Xa===null?Xa=[m]:Xa.push(m),oe!==4&&(oe=2),n===null)return!0;c=mi(c,a),a=n;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Nc(a.stateNode,c,e),ac(a,e),!1;case 1:if(n=a.type,m=a.stateNode,(a.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Nn===null||!Nn.has(m))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Tf(f),Df(f,e,a,c),ac(a,f),!1}a=a.return}while(a!==null);return!1}var Mc=Error(s(461)),me=!1;function De(e,n,a,c){n.child=e===null?Rd(n,null,a,c):ns(n,e.child,a,c)}function Nf(e,n,a,c,f){a=a.render;var m=n.ref;if("ref"in c){var x={};for(var _ in c)_!=="ref"&&(x[_]=c[_])}else x=c;return Jn(n),c=hc(e,n,a,x,m,f),_=dc(),e!==null&&!me?(fc(e,n,f),tn(e,n,f)):(Lt&&_&&Yo(n),n.flags|=1,De(e,n,c,f),n.child)}function Mf(e,n,a,c,f){if(e===null){var m=a.type;return typeof m=="function"&&!qo(m)&&m.defaultProps===void 0&&a.compare===null?(n.tag=15,n.type=m,Rf(e,n,m,c,f)):(e=Vr(a.type,null,c,n,n.mode,f),e.ref=n.ref,e.return=n,n.child=e)}if(m=e.child,!Fc(e,f)){var x=m.memoizedProps;if(a=a.compare,a=a!==null?a:Ea,a(x,c)&&e.ref===n.ref)return tn(e,n,f)}return n.flags|=1,e=$i(m,c),e.ref=n.ref,e.return=n,n.child=e}function Rf(e,n,a,c,f){if(e!==null){var m=e.memoizedProps;if(Ea(m,c)&&e.ref===n.ref)if(me=!1,n.pendingProps=c=m,Fc(e,f))(e.flags&131072)!==0&&(me=!0);else return n.lanes=e.lanes,tn(e,n,f)}return Rc(e,n,a,c,f)}function Of(e,n,a,c){var f=c.children,m=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((n.flags&128)!==0){if(m=m!==null?m.baseLanes|a:a,e!==null){for(c=n.child=e.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~m}else c=0,n.child=null;return kf(e,n,m,a,c)}if((a&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Kr(n,m!==null?m.cachePool:null),m!==null?Ld(n,m):lc(),jd(n);else return c=n.lanes=536870912,kf(e,n,m!==null?m.baseLanes|a:a,a,c)}else m!==null?(Kr(n,m.cachePool),Ld(n,m),En(),n.memoizedState=null):(e!==null&&Kr(n,null),lc(),En());return De(e,n,f,a),n.child}function Ia(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function kf(e,n,a,c,f){var m=ec();return m=m===null?null:{parent:ge._currentValue,pool:m},n.memoizedState={baseLanes:a,cachePool:m},e!==null&&Kr(n,null),lc(),jd(n),e!==null&&ks(e,n,c,!0),n.childLanes=f,null}function hl(e,n){return n=fl({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function Lf(e,n,a){return ns(n,e.child,null,a),e=hl(n,n.pendingProps),e.flags|=2,ni(n),n.memoizedState=null,e}function lb(e,n,a){var c=n.pendingProps,f=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(Lt){if(c.mode==="hidden")return e=hl(n,c),n.lanes=536870912,Ia(null,e);if(cc(n),(e=te)?(e=Yg(e,vi),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bn!==null?{id:Li,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=md(e),a.return=n,n.child=a,Ce=n,te=null)):e=null,e===null)throw vn(n);return n.lanes=536870912,null}return hl(n,c)}var m=e.memoizedState;if(m!==null){var x=m.dehydrated;if(cc(n),f)if(n.flags&256)n.flags&=-257,n=Lf(e,n,a);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(s(558));else if(me||ks(e,n,a,!1),f=(a&e.childLanes)!==0,me||f){if(c=Zt,c!==null&&(x=wh(c,a),x!==0&&x!==m.retryLane))throw m.retryLane=x,Kn(e,x),$e(c,e,x),Mc;Sl(),n=Lf(e,n,a)}else e=m.treeContext,te=Ai(x.nextSibling),Ce=n,Lt=!0,yn=null,vi=!1,e!==null&&vd(n,e),n=hl(n,c),n.flags|=4096;return n}return e=$i(e.child,{mode:c.mode,children:c.children}),e.ref=n.ref,n.child=e,e.return=n,e}function dl(e,n){var a=n.ref;if(a===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(e===null||e.ref!==a)&&(n.flags|=4194816)}}function Rc(e,n,a,c,f){return Jn(n),a=hc(e,n,a,c,void 0,f),c=dc(),e!==null&&!me?(fc(e,n,f),tn(e,n,f)):(Lt&&c&&Yo(n),n.flags|=1,De(e,n,a,f),n.child)}function jf(e,n,a,c,f,m){return Jn(n),n.updateQueue=null,a=Pd(n,c,a,f),Bd(e),c=dc(),e!==null&&!me?(fc(e,n,m),tn(e,n,m)):(Lt&&c&&Yo(n),n.flags|=1,De(e,n,a,m),n.child)}function Bf(e,n,a,c,f){if(Jn(n),n.stateNode===null){var m=Ns,x=a.contextType;typeof x=="object"&&x!==null&&(m=Te(x)),m=new a(c,m),n.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Dc,n.stateNode=m,m._reactInternals=n,m=n.stateNode,m.props=c,m.state=n.memoizedState,m.refs={},nc(n),x=a.contextType,m.context=typeof x=="object"&&x!==null?Te(x):Ns,m.state=n.memoizedState,x=a.getDerivedStateFromProps,typeof x=="function"&&(Tc(n,a,x,c),m.state=n.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof m.getSnapshotBeforeUpdate=="function"||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(x=m.state,typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount(),x!==m.state&&Dc.enqueueReplaceState(m,m.state,null),ja(n,c,m,f),La(),m.state=n.memoizedState),typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!0}else if(e===null){m=n.stateNode;var _=n.memoizedProps,R=as(a,_);m.props=R;var V=m.context,W=a.contextType;x=Ns,typeof W=="object"&&W!==null&&(x=Te(W));var J=a.getDerivedStateFromProps;W=typeof J=="function"||typeof m.getSnapshotBeforeUpdate=="function",_=n.pendingProps!==_,W||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(_||V!==x)&&Sf(n,m,c,x),An=!1;var Y=n.memoizedState;m.state=Y,ja(n,c,m,f),La(),V=n.memoizedState,_||Y!==V||An?(typeof J=="function"&&(Tc(n,a,J,c),V=n.memoizedState),(R=An||Af(n,a,R,c,Y,V,x))?(W||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(n.flags|=4194308)):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=c,n.memoizedState=V),m.props=c,m.state=V,m.context=x,c=R):(typeof m.componentDidMount=="function"&&(n.flags|=4194308),c=!1)}else{m=n.stateNode,sc(e,n),x=n.memoizedProps,W=as(a,x),m.props=W,J=n.pendingProps,Y=m.context,V=a.contextType,R=Ns,typeof V=="object"&&V!==null&&(R=Te(V)),_=a.getDerivedStateFromProps,(V=typeof _=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(x!==J||Y!==R)&&Sf(n,m,c,R),An=!1,Y=n.memoizedState,m.state=Y,ja(n,c,m,f),La();var K=n.memoizedState;x!==J||Y!==K||An||e!==null&&e.dependencies!==null&&Xr(e.dependencies)?(typeof _=="function"&&(Tc(n,a,_,c),K=n.memoizedState),(W=An||Af(n,a,W,c,Y,K,R)||e!==null&&e.dependencies!==null&&Xr(e.dependencies))?(V||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(c,K,R),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(c,K,R)),typeof m.componentDidUpdate=="function"&&(n.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),n.memoizedProps=c,n.memoizedState=K),m.props=c,m.state=K,m.context=R,c=W):(typeof m.componentDidUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(n.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||x===e.memoizedProps&&Y===e.memoizedState||(n.flags|=1024),c=!1)}return m=c,dl(e,n),c=(n.flags&128)!==0,m||c?(m=n.stateNode,a=c&&typeof a.getDerivedStateFromError!="function"?null:m.render(),n.flags|=1,e!==null&&c?(n.child=ns(n,e.child,null,f),n.child=ns(n,null,a,f)):De(e,n,a,f),n.memoizedState=m.state,e=n.child):e=tn(e,n,f),e}function Pf(e,n,a,c){return Wn(),n.flags|=256,De(e,n,a,c),n.child}var Oc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kc(e){return{baseLanes:e,cachePool:Ed()}}function Lc(e,n,a){return e=e!==null?e.childLanes&~a:0,n&&(e|=ai),e}function Ff(e,n,a){var c=n.pendingProps,f=!1,m=(n.flags&128)!==0,x;if((x=m)||(x=e!==null&&e.memoizedState===null?!1:(he.current&2)!==0),x&&(f=!0,n.flags&=-129),x=(n.flags&32)!==0,n.flags&=-33,e===null){if(Lt){if(f?_n(n):En(),(e=te)?(e=Yg(e,vi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:bn!==null?{id:Li,overflow:ji}:null,retryLane:536870912,hydrationErrors:null},a=md(e),a.return=n,n.child=a,Ce=n,te=null)):e=null,e===null)throw vn(n);return mu(e)?n.lanes=32:n.lanes=536870912,null}var _=c.children;return c=c.fallback,f?(En(),f=n.mode,_=fl({mode:"hidden",children:_},f),c=Qn(c,f,a,null),_.return=n,c.return=n,_.sibling=c,n.child=_,c=n.child,c.memoizedState=kc(a),c.childLanes=Lc(e,x,a),n.memoizedState=Oc,Ia(null,c)):(_n(n),jc(n,_))}var R=e.memoizedState;if(R!==null&&(_=R.dehydrated,_!==null)){if(m)n.flags&256?(_n(n),n.flags&=-257,n=Bc(e,n,a)):n.memoizedState!==null?(En(),n.child=e.child,n.flags|=128,n=null):(En(),_=c.fallback,f=n.mode,c=fl({mode:"visible",children:c.children},f),_=Qn(_,f,a,null),_.flags|=2,c.return=n,_.return=n,c.sibling=_,n.child=c,ns(n,e.child,null,a),c=n.child,c.memoizedState=kc(a),c.childLanes=Lc(e,x,a),n.memoizedState=Oc,n=Ia(null,c));else if(_n(n),mu(_)){if(x=_.nextSibling&&_.nextSibling.dataset,x)var V=x.dgst;x=V,c=Error(s(419)),c.stack="",c.digest=x,Da({value:c,source:null,stack:null}),n=Bc(e,n,a)}else if(me||ks(e,n,a,!1),x=(a&e.childLanes)!==0,me||x){if(x=Zt,x!==null&&(c=wh(x,a),c!==0&&c!==R.retryLane))throw R.retryLane=c,Kn(e,c),$e(x,e,c),Mc;pu(_)||Sl(),n=Bc(e,n,a)}else pu(_)?(n.flags|=192,n.child=e.child,n=null):(e=R.treeContext,te=Ai(_.nextSibling),Ce=n,Lt=!0,yn=null,vi=!1,e!==null&&vd(n,e),n=jc(n,c.children),n.flags|=4096);return n}return f?(En(),_=c.fallback,f=n.mode,R=e.child,V=R.sibling,c=$i(R,{mode:"hidden",children:c.children}),c.subtreeFlags=R.subtreeFlags&65011712,V!==null?_=$i(V,_):(_=Qn(_,f,a,null),_.flags|=2),_.return=n,c.return=n,c.sibling=_,n.child=c,Ia(null,c),c=n.child,_=e.child.memoizedState,_===null?_=kc(a):(f=_.cachePool,f!==null?(R=ge._currentValue,f=f.parent!==R?{parent:R,pool:R}:f):f=Ed(),_={baseLanes:_.baseLanes|a,cachePool:f}),c.memoizedState=_,c.childLanes=Lc(e,x,a),n.memoizedState=Oc,Ia(e.child,c)):(_n(n),a=e.child,e=a.sibling,a=$i(a,{mode:"visible",children:c.children}),a.return=n,a.sibling=null,e!==null&&(x=n.deletions,x===null?(n.deletions=[e],n.flags|=16):x.push(e)),n.child=a,n.memoizedState=null,a)}function jc(e,n){return n=fl({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function fl(e,n){return e=ei(22,e,null,n),e.lanes=0,e}function Bc(e,n,a){return ns(n,e.child,null,a),e=jc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function zf(e,n,a){e.lanes|=n;var c=e.alternate;c!==null&&(c.lanes|=n),Wo(e.return,n,a)}function Pc(e,n,a,c,f,m){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:c,tail:a,tailMode:f,treeForkCount:m}:(x.isBackwards=n,x.rendering=null,x.renderingStartTime=0,x.last=c,x.tail=a,x.tailMode=f,x.treeForkCount=m)}function If(e,n,a){var c=n.pendingProps,f=c.revealOrder,m=c.tail;c=c.children;var x=he.current,_=(x&2)!==0;if(_?(x=x&1|2,n.flags|=128):x&=1,G(he,x),De(e,n,c,a),c=Lt?Ta:0,!_&&e!==null&&(e.flags&128)!==0)t:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zf(e,a,n);else if(e.tag===19)zf(e,a,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break t;for(;e.sibling===null;){if(e.return===null||e.return===n)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=n.child,f=null;a!==null;)e=a.alternate,e!==null&&el(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=n.child,n.child=null):(f=a.sibling,a.sibling=null),Pc(n,!1,f,a,m,c);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=n.child,n.child=null;f!==null;){if(e=f.alternate,e!==null&&el(e)===null){n.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Pc(n,!0,a,null,m,c);break;case"together":Pc(n,!1,null,null,void 0,c);break;default:n.memoizedState=null}return n.child}function tn(e,n,a){if(e!==null&&(n.dependencies=e.dependencies),Dn|=n.lanes,(a&n.childLanes)===0)if(e!==null){if(ks(e,n,a,!1),(a&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(s(153));if(n.child!==null){for(e=n.child,a=$i(e,e.pendingProps),n.child=a,a.return=n;e.sibling!==null;)e=e.sibling,a=a.sibling=$i(e,e.pendingProps),a.return=n;a.sibling=null}return n.child}function Fc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&Xr(e)))}function ob(e,n,a){switch(n.tag){case 3:ct(n,n.stateNode.containerInfo),xn(n,ge,e.memoizedState.cache),Wn();break;case 27:case 5:zt(n);break;case 4:ct(n,n.stateNode.containerInfo);break;case 10:xn(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,cc(n),null;break;case 13:var c=n.memoizedState;if(c!==null)return c.dehydrated!==null?(_n(n),n.flags|=128,null):(a&n.child.childLanes)!==0?Ff(e,n,a):(_n(n),e=tn(e,n,a),e!==null?e.sibling:null);_n(n);break;case 19:var f=(e.flags&128)!==0;if(c=(a&n.childLanes)!==0,c||(ks(e,n,a,!1),c=(a&n.childLanes)!==0),f){if(c)return If(e,n,a);n.flags|=128}if(f=n.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),G(he,he.current),c)break;return null;case 22:return n.lanes=0,Of(e,n,a,n.pendingProps);case 24:xn(n,ge,e.memoizedState.cache)}return tn(e,n,a)}function Uf(e,n,a){if(e!==null)if(e.memoizedProps!==n.pendingProps)me=!0;else{if(!Fc(e,a)&&(n.flags&128)===0)return me=!1,ob(e,n,a);me=(e.flags&131072)!==0}else me=!1,Lt&&(n.flags&1048576)!==0&&yd(n,Ta,n.index);switch(n.lanes=0,n.tag){case 16:t:{var c=n.pendingProps;if(e=es(n.elementType),n.type=e,typeof e=="function")qo(e)?(c=as(e,c),n.tag=1,n=Bf(null,n,e,c,a)):(n.tag=0,n=Rc(null,n,e,c,a));else{if(e!=null){var f=e.$$typeof;if(f===P){n.tag=11,n=Nf(null,n,e,c,a);break t}else if(f===B){n.tag=14,n=Mf(null,n,e,c,a);break t}}throw n=rt(e)||e,Error(s(306,n,""))}}return n;case 0:return Rc(e,n,n.type,n.pendingProps,a);case 1:return c=n.type,f=as(c,n.pendingProps),Bf(e,n,c,f,a);case 3:t:{if(ct(n,n.stateNode.containerInfo),e===null)throw Error(s(387));c=n.pendingProps;var m=n.memoizedState;f=m.element,sc(e,n),ja(n,c,null,a);var x=n.memoizedState;if(c=x.cache,xn(n,ge,c),c!==m.cache&&Zo(n,[ge],a,!0),La(),c=x.element,m.isDehydrated)if(m={element:c,isDehydrated:!1,cache:x.cache},n.updateQueue.baseState=m,n.memoizedState=m,n.flags&256){n=Pf(e,n,c,a);break t}else if(c!==f){f=mi(Error(s(424)),n),Da(f),n=Pf(e,n,c,a);break t}else{switch(e=n.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(te=Ai(e.firstChild),Ce=n,Lt=!0,yn=null,vi=!0,a=Rd(n,null,c,a),n.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Wn(),c===f){n=tn(e,n,a);break t}De(e,n,c,a)}n=n.child}return n;case 26:return dl(e,n),e===null?(a=Zg(n.type,null,n.pendingProps,null))?n.memoizedState=a:Lt||(a=n.type,e=n.pendingProps,c=Nl(it.current).createElement(a),c[Ee]=n,c[He]=e,Ne(c,a,e),Ae(c),n.stateNode=c):n.memoizedState=Zg(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return zt(n),e===null&&Lt&&(c=n.stateNode=Kg(n.type,n.pendingProps,it.current),Ce=n,vi=!0,f=te,kn(n.type)?(bu=f,te=Ai(c.firstChild)):te=f),De(e,n,n.pendingProps.children,a),dl(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&Lt&&((f=c=te)&&(c=Fb(c,n.type,n.pendingProps,vi),c!==null?(n.stateNode=c,Ce=n,te=Ai(c.firstChild),vi=!1,f=!0):f=!1),f||vn(n)),zt(n),f=n.type,m=n.pendingProps,x=e!==null?e.memoizedProps:null,c=m.children,du(f,m)?c=null:x!==null&&du(f,x)&&(n.flags|=32),n.memoizedState!==null&&(f=hc(e,n,J0,null,null,a),er._currentValue=f),dl(e,n),De(e,n,c,a),n.child;case 6:return e===null&&Lt&&((e=a=te)&&(a=zb(a,n.pendingProps,vi),a!==null?(n.stateNode=a,Ce=n,te=null,e=!0):e=!1),e||vn(n)),null;case 13:return Ff(e,n,a);case 4:return ct(n,n.stateNode.containerInfo),c=n.pendingProps,e===null?n.child=ns(n,null,c,a):De(e,n,c,a),n.child;case 11:return Nf(e,n,n.type,n.pendingProps,a);case 7:return De(e,n,n.pendingProps,a),n.child;case 8:return De(e,n,n.pendingProps.children,a),n.child;case 12:return De(e,n,n.pendingProps.children,a),n.child;case 10:return c=n.pendingProps,xn(n,n.type,c.value),De(e,n,c.children,a),n.child;case 9:return f=n.type._context,c=n.pendingProps.children,Jn(n),f=Te(f),c=c(f),n.flags|=1,De(e,n,c,a),n.child;case 14:return Mf(e,n,n.type,n.pendingProps,a);case 15:return Rf(e,n,n.type,n.pendingProps,a);case 19:return If(e,n,a);case 31:return lb(e,n,a);case 22:return Of(e,n,a,n.pendingProps);case 24:return Jn(n),c=Te(ge),e===null?(f=ec(),f===null&&(f=Zt,m=Jo(),f.pooledCache=m,m.refCount++,m!==null&&(f.pooledCacheLanes|=a),f=m),n.memoizedState={parent:c,cache:f},nc(n),xn(n,ge,f)):((e.lanes&a)!==0&&(sc(e,n),ja(n,null,null,a),La()),f=e.memoizedState,m=n.memoizedState,f.parent!==c?(f={parent:c,cache:c},n.memoizedState=f,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=f),xn(n,ge,c)):(c=m.cache,xn(n,ge,c),c!==f.cache&&Zo(n,[ge],a,!0))),De(e,n,n.pendingProps.children,a),n.child;case 29:throw n.pendingProps}throw Error(s(156,n.tag))}function en(e){e.flags|=4}function zc(e,n,a,c,f){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(gg())e.flags|=8192;else throw is=Wr,ic}else e.flags&=-16777217}function Hf(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!np(n))if(gg())e.flags|=8192;else throw is=Wr,ic}function gl(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?xh():536870912,e.lanes|=n,Vs|=n)}function Ua(e,n){if(!Lt)switch(e.tailMode){case"hidden":n=e.tail;for(var a=null;n!==null;)n.alternate!==null&&(a=n),n=n.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:c.sibling=null}}function ee(e){var n=e.alternate!==null&&e.alternate.child===e.child,a=0,c=0;if(n)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=c,e.childLanes=a,n}function cb(e,n,a){var c=n.pendingProps;switch(Xo(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ee(n),null;case 1:return ee(n),null;case 3:return a=n.stateNode,c=null,e!==null&&(c=e.memoizedState.cache),n.memoizedState.cache!==c&&(n.flags|=2048),Wi(ge),lt(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Os(n)?en(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,Ko())),ee(n),null;case 26:var f=n.type,m=n.memoizedState;return e===null?(en(n),m!==null?(ee(n),Hf(n,m)):(ee(n),zc(n,f,null,c,a))):m?m!==e.memoizedState?(en(n),ee(n),Hf(n,m)):(ee(n),n.flags&=-16777217):(e=e.memoizedProps,e!==c&&en(n),ee(n),zc(n,f,e,c,a)),null;case 27:if(pt(n),a=it.current,f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&en(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return ee(n),null}e=nt.current,Os(n)?xd(n):(e=Kg(f,c,a),n.stateNode=e,en(n))}return ee(n),null;case 5:if(pt(n),f=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==c&&en(n);else{if(!c){if(n.stateNode===null)throw Error(s(166));return ee(n),null}if(m=nt.current,Os(n))xd(n);else{var x=Nl(it.current);switch(m){case 1:m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":m=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":m=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":m=x.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild);break;case"select":m=typeof c.is=="string"?x.createElement("select",{is:c.is}):x.createElement("select"),c.multiple?m.multiple=!0:c.size&&(m.size=c.size);break;default:m=typeof c.is=="string"?x.createElement(f,{is:c.is}):x.createElement(f)}}m[Ee]=n,m[He]=c;t:for(x=n.child;x!==null;){if(x.tag===5||x.tag===6)m.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===n)break t;for(;x.sibling===null;){if(x.return===null||x.return===n)break t;x=x.return}x.sibling.return=x.return,x=x.sibling}n.stateNode=m;t:switch(Ne(m,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break t;case"img":c=!0;break t;default:c=!1}c&&en(n)}}return ee(n),zc(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,a),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==c&&en(n);else{if(typeof c!="string"&&n.stateNode===null)throw Error(s(166));if(e=it.current,Os(n)){if(e=n.stateNode,a=n.memoizedProps,c=null,f=Ce,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}e[Ee]=n,e=!!(e.nodeValue===a||c!==null&&c.suppressHydrationWarning===!0||Fg(e.nodeValue,a)),e||vn(n,!0)}else e=Nl(e).createTextNode(c),e[Ee]=n,n.stateNode=e}return ee(n),null;case 31:if(a=n.memoizedState,e===null||e.memoizedState!==null){if(c=Os(n),a!==null){if(e===null){if(!c)throw Error(s(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(s(557));e[Ee]=n}else Wn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ee(n),e=!1}else a=Ko(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return n.flags&256?(ni(n),n):(ni(n),null);if((n.flags&128)!==0)throw Error(s(558))}return ee(n),null;case 13:if(c=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Os(n),c!==null&&c.dehydrated!==null){if(e===null){if(!f)throw Error(s(318));if(f=n.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(s(317));f[Ee]=n}else Wn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;ee(n),f=!1}else f=Ko(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return n.flags&256?(ni(n),n):(ni(n),null)}return ni(n),(n.flags&128)!==0?(n.lanes=a,n):(a=c!==null,e=e!==null&&e.memoizedState!==null,a&&(c=n.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048)),a!==e&&a&&(n.child.flags|=8192),gl(n,n.updateQueue),ee(n),null);case 4:return lt(),e===null&&lu(n.stateNode.containerInfo),ee(n),null;case 10:return Wi(n.type),ee(n),null;case 19:if(H(he),c=n.memoizedState,c===null)return ee(n),null;if(f=(n.flags&128)!==0,m=c.rendering,m===null)if(f)Ua(c,!1);else{if(oe!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(m=el(e),m!==null){for(n.flags|=128,Ua(c,!1),e=m.updateQueue,n.updateQueue=e,gl(n,e),n.subtreeFlags=0,e=a,a=n.child;a!==null;)pd(a,e),a=a.sibling;return G(he,he.current&1|2),Lt&&Ki(n,c.treeForkCount),n.child}e=e.sibling}c.tail!==null&&Gt()>vl&&(n.flags|=128,f=!0,Ua(c,!1),n.lanes=4194304)}else{if(!f)if(e=el(m),e!==null){if(n.flags|=128,f=!0,e=e.updateQueue,n.updateQueue=e,gl(n,e),Ua(c,!0),c.tail===null&&c.tailMode==="hidden"&&!m.alternate&&!Lt)return ee(n),null}else 2*Gt()-c.renderingStartTime>vl&&a!==536870912&&(n.flags|=128,f=!0,Ua(c,!1),n.lanes=4194304);c.isBackwards?(m.sibling=n.child,n.child=m):(e=c.last,e!==null?e.sibling=m:n.child=m,c.last=m)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=Gt(),e.sibling=null,a=he.current,G(he,f?a&1|2:a&1),Lt&&Ki(n,c.treeForkCount),e):(ee(n),null);case 22:case 23:return ni(n),oc(),c=n.memoizedState!==null,e!==null?e.memoizedState!==null!==c&&(n.flags|=8192):c&&(n.flags|=8192),c?(a&536870912)!==0&&(n.flags&128)===0&&(ee(n),n.subtreeFlags&6&&(n.flags|=8192)):ee(n),a=n.updateQueue,a!==null&&gl(n,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),c=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(c=n.memoizedState.cachePool.pool),c!==a&&(n.flags|=2048),e!==null&&H(ts),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),n.memoizedState.cache!==a&&(n.flags|=2048),Wi(ge),ee(n),null;case 25:return null;case 30:return null}throw Error(s(156,n.tag))}function ub(e,n){switch(Xo(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Wi(ge),lt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return pt(n),null;case 31:if(n.memoizedState!==null){if(ni(n),n.alternate===null)throw Error(s(340));Wn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(ni(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(s(340));Wn()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return H(he),null;case 4:return lt(),null;case 10:return Wi(n.type),null;case 22:case 23:return ni(n),oc(),e!==null&&H(ts),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return Wi(ge),null;case 25:return null;default:return null}}function qf(e,n){switch(Xo(n),n.tag){case 3:Wi(ge),lt();break;case 26:case 27:case 5:pt(n);break;case 4:lt();break;case 31:n.memoizedState!==null&&ni(n);break;case 13:ni(n);break;case 19:H(he);break;case 10:Wi(n.type);break;case 22:case 23:ni(n),oc(),e!==null&&H(ts);break;case 24:Wi(ge)}}function Ha(e,n){try{var a=n.updateQueue,c=a!==null?a.lastEffect:null;if(c!==null){var f=c.next;a=f;do{if((a.tag&e)===e){c=void 0;var m=a.create,x=a.inst;c=m(),x.destroy=c}a=a.next}while(a!==f)}}catch(_){Yt(n,n.return,_)}}function Cn(e,n,a){try{var c=n.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var m=f.next;c=m;do{if((c.tag&e)===e){var x=c.inst,_=x.destroy;if(_!==void 0){x.destroy=void 0,f=n;var R=a,V=_;try{V()}catch(W){Yt(f,R,W)}}}c=c.next}while(c!==m)}}catch(W){Yt(n,n.return,W)}}function Gf(e){var n=e.updateQueue;if(n!==null){var a=e.stateNode;try{kd(n,a)}catch(c){Yt(e,e.return,c)}}}function Vf(e,n,a){a.props=as(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(c){Yt(e,n,c)}}function qa(e,n){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var c=e.stateNode;break;case 30:c=e.stateNode;break;default:c=e.stateNode}typeof a=="function"?e.refCleanup=a(c):a.current=c}}catch(f){Yt(e,n,f)}}function Bi(e,n){var a=e.ref,c=e.refCleanup;if(a!==null)if(typeof c=="function")try{c()}catch(f){Yt(e,n,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){Yt(e,n,f)}else a.current=null}function Yf(e){var n=e.type,a=e.memoizedProps,c=e.stateNode;try{t:switch(n){case"button":case"input":case"select":case"textarea":a.autoFocus&&c.focus();break t;case"img":a.src?c.src=a.src:a.srcSet&&(c.srcset=a.srcSet)}}catch(f){Yt(e,e.return,f)}}function Ic(e,n,a){try{var c=e.stateNode;Ob(c,e.type,a,n),c[He]=n}catch(f){Yt(e,e.return,f)}}function Xf(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&kn(e.type)||e.tag===4}function Uc(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||Xf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&kn(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Hc(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,n):(n=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,n.appendChild(e),a=a._reactRootContainer,a!=null||n.onclick!==null||(n.onclick=Yi));else if(c!==4&&(c===27&&kn(e.type)&&(a=e.stateNode,n=null),e=e.child,e!==null))for(Hc(e,n,a),e=e.sibling;e!==null;)Hc(e,n,a),e=e.sibling}function pl(e,n,a){var c=e.tag;if(c===5||c===6)e=e.stateNode,n?a.insertBefore(e,n):a.appendChild(e);else if(c!==4&&(c===27&&kn(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(pl(e,n,a),e=e.sibling;e!==null;)pl(e,n,a),e=e.sibling}function $f(e){var n=e.stateNode,a=e.memoizedProps;try{for(var c=e.type,f=n.attributes;f.length;)n.removeAttributeNode(f[0]);Ne(n,c,a),n[Ee]=e,n[He]=a}catch(m){Yt(e,e.return,m)}}var nn=!1,be=!1,qc=!1,Kf=typeof WeakSet=="function"?WeakSet:Set,Se=null;function hb(e,n){if(e=e.containerInfo,uu=Bl,e=rd(e),Bo(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var c=a.getSelection&&a.getSelection();if(c&&c.rangeCount!==0){a=c.anchorNode;var f=c.anchorOffset,m=c.focusNode;c=c.focusOffset;try{a.nodeType,m.nodeType}catch{a=null;break t}var x=0,_=-1,R=-1,V=0,W=0,J=e,Y=null;e:for(;;){for(var K;J!==a||f!==0&&J.nodeType!==3||(_=x+f),J!==m||c!==0&&J.nodeType!==3||(R=x+c),J.nodeType===3&&(x+=J.nodeValue.length),(K=J.firstChild)!==null;)Y=J,J=K;for(;;){if(J===e)break e;if(Y===a&&++V===f&&(_=x),Y===m&&++W===c&&(R=x),(K=J.nextSibling)!==null)break;J=Y,Y=J.parentNode}J=K}a=_===-1||R===-1?null:{start:_,end:R}}else a=null}a=a||{start:0,end:0}}else a=null;for(hu={focusedElem:e,selectionRange:a},Bl=!1,Se=n;Se!==null;)if(n=Se,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Se=e;else for(;Se!==null;){switch(n=Se,m=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&m!==null){e=void 0,a=n,f=m.memoizedProps,m=m.memoizedState,c=a.stateNode;try{var ut=as(a.type,f);e=c.getSnapshotBeforeUpdate(ut,m),c.__reactInternalSnapshotBeforeUpdate=e}catch(yt){Yt(a,a.return,yt)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,a=e.nodeType,a===9)gu(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gu(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(s(163))}if(e=n.sibling,e!==null){e.return=n.return,Se=e;break}Se=n.return}}function Qf(e,n,a){var c=a.flags;switch(a.tag){case 0:case 11:case 15:an(e,a),c&4&&Ha(5,a);break;case 1:if(an(e,a),c&4)if(e=a.stateNode,n===null)try{e.componentDidMount()}catch(x){Yt(a,a.return,x)}else{var f=as(a.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(f,n,e.__reactInternalSnapshotBeforeUpdate)}catch(x){Yt(a,a.return,x)}}c&64&&Gf(a),c&512&&qa(a,a.return);break;case 3:if(an(e,a),c&64&&(e=a.updateQueue,e!==null)){if(n=null,a.child!==null)switch(a.child.tag){case 27:case 5:n=a.child.stateNode;break;case 1:n=a.child.stateNode}try{kd(e,n)}catch(x){Yt(a,a.return,x)}}break;case 27:n===null&&c&4&&$f(a);case 26:case 5:an(e,a),n===null&&c&4&&Yf(a),c&512&&qa(a,a.return);break;case 12:an(e,a);break;case 31:an(e,a),c&4&&Jf(e,a);break;case 13:an(e,a),c&4&&tg(e,a),c&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=xb.bind(null,a),Ib(e,a))));break;case 22:if(c=a.memoizedState!==null||nn,!c){n=n!==null&&n.memoizedState!==null||be,f=nn;var m=be;nn=c,(be=n)&&!m?rn(e,a,(a.subtreeFlags&8772)!==0):an(e,a),nn=f,be=m}break;case 30:break;default:an(e,a)}}function Wf(e){var n=e.alternate;n!==null&&(e.alternate=null,Wf(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&vo(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ie=null,Ge=!1;function sn(e,n,a){for(a=a.child;a!==null;)Zf(e,n,a),a=a.sibling}function Zf(e,n,a){if(Le&&typeof Le.onCommitFiberUnmount=="function")try{Le.onCommitFiberUnmount(Ti,a)}catch{}switch(a.tag){case 26:be||Bi(a,n),sn(e,n,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:be||Bi(a,n);var c=ie,f=Ge;kn(a.type)&&(ie=a.stateNode,Ge=!1),sn(e,n,a),Za(a.stateNode),ie=c,Ge=f;break;case 5:be||Bi(a,n);case 6:if(c=ie,f=Ge,ie=null,sn(e,n,a),ie=c,Ge=f,ie!==null)if(Ge)try{(ie.nodeType===9?ie.body:ie.nodeName==="HTML"?ie.ownerDocument.body:ie).removeChild(a.stateNode)}catch(m){Yt(a,n,m)}else try{ie.removeChild(a.stateNode)}catch(m){Yt(a,n,m)}break;case 18:ie!==null&&(Ge?(e=ie,Gg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Js(e)):Gg(ie,a.stateNode));break;case 4:c=ie,f=Ge,ie=a.stateNode.containerInfo,Ge=!0,sn(e,n,a),ie=c,Ge=f;break;case 0:case 11:case 14:case 15:Cn(2,a,n),be||Cn(4,a,n),sn(e,n,a);break;case 1:be||(Bi(a,n),c=a.stateNode,typeof c.componentWillUnmount=="function"&&Vf(a,n,c)),sn(e,n,a);break;case 21:sn(e,n,a);break;case 22:be=(c=be)||a.memoizedState!==null,sn(e,n,a),be=c;break;default:sn(e,n,a)}}function Jf(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Js(e)}catch(a){Yt(n,n.return,a)}}}function tg(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Js(e)}catch(a){Yt(n,n.return,a)}}function db(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Kf),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Kf),n;default:throw Error(s(435,e.tag))}}function ml(e,n){var a=db(e);n.forEach(function(c){if(!a.has(c)){a.add(c);var f=Ab.bind(null,e,c);c.then(f,f)}})}function Ve(e,n){var a=n.deletions;if(a!==null)for(var c=0;c<a.length;c++){var f=a[c],m=e,x=n,_=x;t:for(;_!==null;){switch(_.tag){case 27:if(kn(_.type)){ie=_.stateNode,Ge=!1;break t}break;case 5:ie=_.stateNode,Ge=!1;break t;case 3:case 4:ie=_.stateNode.containerInfo,Ge=!0;break t}_=_.return}if(ie===null)throw Error(s(160));Zf(m,x,f),ie=null,Ge=!1,m=f.alternate,m!==null&&(m.return=null),f.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)eg(n,e),n=n.sibling}var Ni=null;function eg(e,n){var a=e.alternate,c=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Ve(n,e),Ye(e),c&4&&(Cn(3,e,e.return),Ha(3,e),Cn(5,e,e.return));break;case 1:Ve(n,e),Ye(e),c&512&&(be||a===null||Bi(a,a.return)),c&64&&nn&&(e=e.updateQueue,e!==null&&(c=e.callbacks,c!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?c:a.concat(c))));break;case 26:var f=Ni;if(Ve(n,e),Ye(e),c&512&&(be||a===null||Bi(a,a.return)),c&4){var m=a!==null?a.memoizedState:null;if(c=e.memoizedState,a===null)if(c===null)if(e.stateNode===null){t:{c=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(c){case"title":m=f.getElementsByTagName("title")[0],(!m||m[ma]||m[Ee]||m.namespaceURI==="http://www.w3.org/2000/svg"||m.hasAttribute("itemprop"))&&(m=f.createElement(c),f.head.insertBefore(m,f.querySelector("head > title"))),Ne(m,c,a),m[Ee]=e,Ae(m),c=m;break t;case"link":var x=ep("link","href",f).get(c+(a.href||""));if(x){for(var _=0;_<x.length;_++)if(m=x[_],m.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&m.getAttribute("rel")===(a.rel==null?null:a.rel)&&m.getAttribute("title")===(a.title==null?null:a.title)&&m.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){x.splice(_,1);break e}}m=f.createElement(c),Ne(m,c,a),f.head.appendChild(m);break;case"meta":if(x=ep("meta","content",f).get(c+(a.content||""))){for(_=0;_<x.length;_++)if(m=x[_],m.getAttribute("content")===(a.content==null?null:""+a.content)&&m.getAttribute("name")===(a.name==null?null:a.name)&&m.getAttribute("property")===(a.property==null?null:a.property)&&m.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&m.getAttribute("charset")===(a.charSet==null?null:a.charSet)){x.splice(_,1);break e}}m=f.createElement(c),Ne(m,c,a),f.head.appendChild(m);break;default:throw Error(s(468,c))}m[Ee]=e,Ae(m),c=m}e.stateNode=c}else ip(f,e.type,e.stateNode);else e.stateNode=tp(f,c,e.memoizedProps);else m!==c?(m===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):m.count--,c===null?ip(f,e.type,e.stateNode):tp(f,c,e.memoizedProps)):c===null&&e.stateNode!==null&&Ic(e,e.memoizedProps,a.memoizedProps)}break;case 27:Ve(n,e),Ye(e),c&512&&(be||a===null||Bi(a,a.return)),a!==null&&c&4&&Ic(e,e.memoizedProps,a.memoizedProps);break;case 5:if(Ve(n,e),Ye(e),c&512&&(be||a===null||Bi(a,a.return)),e.flags&32){f=e.stateNode;try{Ss(f,"")}catch(ut){Yt(e,e.return,ut)}}c&4&&e.stateNode!=null&&(f=e.memoizedProps,Ic(e,f,a!==null?a.memoizedProps:f)),c&1024&&(qc=!0);break;case 6:if(Ve(n,e),Ye(e),c&4){if(e.stateNode===null)throw Error(s(162));c=e.memoizedProps,a=e.stateNode;try{a.nodeValue=c}catch(ut){Yt(e,e.return,ut)}}break;case 3:if(Ol=null,f=Ni,Ni=Ml(n.containerInfo),Ve(n,e),Ni=f,Ye(e),c&4&&a!==null&&a.memoizedState.isDehydrated)try{Js(n.containerInfo)}catch(ut){Yt(e,e.return,ut)}qc&&(qc=!1,ig(e));break;case 4:c=Ni,Ni=Ml(e.stateNode.containerInfo),Ve(n,e),Ye(e),Ni=c;break;case 12:Ve(n,e),Ye(e);break;case 31:Ve(n,e),Ye(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ml(e,c)));break;case 13:Ve(n,e),Ye(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(yl=Gt()),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ml(e,c)));break;case 22:f=e.memoizedState!==null;var R=a!==null&&a.memoizedState!==null,V=nn,W=be;if(nn=V||f,be=W||R,Ve(n,e),be=W,nn=V,Ye(e),c&8192)t:for(n=e.stateNode,n._visibility=f?n._visibility&-2:n._visibility|1,f&&(a===null||R||nn||be||rs(e)),a=null,n=e;;){if(n.tag===5||n.tag===26){if(a===null){R=a=n;try{if(m=R.stateNode,f)x=m.style,typeof x.setProperty=="function"?x.setProperty("display","none","important"):x.display="none";else{_=R.stateNode;var J=R.memoizedProps.style,Y=J!=null&&J.hasOwnProperty("display")?J.display:null;_.style.display=Y==null||typeof Y=="boolean"?"":(""+Y).trim()}}catch(ut){Yt(R,R.return,ut)}}}else if(n.tag===6){if(a===null){R=n;try{R.stateNode.nodeValue=f?"":R.memoizedProps}catch(ut){Yt(R,R.return,ut)}}}else if(n.tag===18){if(a===null){R=n;try{var K=R.stateNode;f?Vg(K,!0):Vg(R.stateNode,!1)}catch(ut){Yt(R,R.return,ut)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break t;for(;n.sibling===null;){if(n.return===null||n.return===e)break t;a===n&&(a=null),n=n.return}a===n&&(a=null),n.sibling.return=n.return,n=n.sibling}c&4&&(c=e.updateQueue,c!==null&&(a=c.retryQueue,a!==null&&(c.retryQueue=null,ml(e,a))));break;case 19:Ve(n,e),Ye(e),c&4&&(c=e.updateQueue,c!==null&&(e.updateQueue=null,ml(e,c)));break;case 30:break;case 21:break;default:Ve(n,e),Ye(e)}}function Ye(e){var n=e.flags;if(n&2){try{for(var a,c=e.return;c!==null;){if(Xf(c)){a=c;break}c=c.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var f=a.stateNode,m=Uc(e);pl(e,m,f);break;case 5:var x=a.stateNode;a.flags&32&&(Ss(x,""),a.flags&=-33);var _=Uc(e);pl(e,_,x);break;case 3:case 4:var R=a.stateNode.containerInfo,V=Uc(e);Hc(e,V,R);break;default:throw Error(s(161))}}catch(W){Yt(e,e.return,W)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function ig(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;ig(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function an(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)Qf(e,n.alternate,n),n=n.sibling}function rs(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:Cn(4,n,n.return),rs(n);break;case 1:Bi(n,n.return);var a=n.stateNode;typeof a.componentWillUnmount=="function"&&Vf(n,n.return,a),rs(n);break;case 27:Za(n.stateNode);case 26:case 5:Bi(n,n.return),rs(n);break;case 22:n.memoizedState===null&&rs(n);break;case 30:rs(n);break;default:rs(n)}e=e.sibling}}function rn(e,n,a){for(a=a&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var c=n.alternate,f=e,m=n,x=m.flags;switch(m.tag){case 0:case 11:case 15:rn(f,m,a),Ha(4,m);break;case 1:if(rn(f,m,a),c=m,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(V){Yt(c,c.return,V)}if(c=m,f=c.updateQueue,f!==null){var _=c.stateNode;try{var R=f.shared.hiddenCallbacks;if(R!==null)for(f.shared.hiddenCallbacks=null,f=0;f<R.length;f++)Od(R[f],_)}catch(V){Yt(c,c.return,V)}}a&&x&64&&Gf(m),qa(m,m.return);break;case 27:$f(m);case 26:case 5:rn(f,m,a),a&&c===null&&x&4&&Yf(m),qa(m,m.return);break;case 12:rn(f,m,a);break;case 31:rn(f,m,a),a&&x&4&&Jf(f,m);break;case 13:rn(f,m,a),a&&x&4&&tg(f,m);break;case 22:m.memoizedState===null&&rn(f,m,a),qa(m,m.return);break;case 30:break;default:rn(f,m,a)}n=n.sibling}}function Gc(e,n){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&Na(a))}function Vc(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Na(e))}function Mi(e,n,a,c){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)ng(e,n,a,c),n=n.sibling}function ng(e,n,a,c){var f=n.flags;switch(n.tag){case 0:case 11:case 15:Mi(e,n,a,c),f&2048&&Ha(9,n);break;case 1:Mi(e,n,a,c);break;case 3:Mi(e,n,a,c),f&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&Na(e)));break;case 12:if(f&2048){Mi(e,n,a,c),e=n.stateNode;try{var m=n.memoizedProps,x=m.id,_=m.onPostCommit;typeof _=="function"&&_(x,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(R){Yt(n,n.return,R)}}else Mi(e,n,a,c);break;case 31:Mi(e,n,a,c);break;case 13:Mi(e,n,a,c);break;case 23:break;case 22:m=n.stateNode,x=n.alternate,n.memoizedState!==null?m._visibility&2?Mi(e,n,a,c):Ga(e,n):m._visibility&2?Mi(e,n,a,c):(m._visibility|=2,Hs(e,n,a,c,(n.subtreeFlags&10256)!==0||!1)),f&2048&&Gc(x,n);break;case 24:Mi(e,n,a,c),f&2048&&Vc(n.alternate,n);break;default:Mi(e,n,a,c)}}function Hs(e,n,a,c,f){for(f=f&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var m=e,x=n,_=a,R=c,V=x.flags;switch(x.tag){case 0:case 11:case 15:Hs(m,x,_,R,f),Ha(8,x);break;case 23:break;case 22:var W=x.stateNode;x.memoizedState!==null?W._visibility&2?Hs(m,x,_,R,f):Ga(m,x):(W._visibility|=2,Hs(m,x,_,R,f)),f&&V&2048&&Gc(x.alternate,x);break;case 24:Hs(m,x,_,R,f),f&&V&2048&&Vc(x.alternate,x);break;default:Hs(m,x,_,R,f)}n=n.sibling}}function Ga(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var a=e,c=n,f=c.flags;switch(c.tag){case 22:Ga(a,c),f&2048&&Gc(c.alternate,c);break;case 24:Ga(a,c),f&2048&&Vc(c.alternate,c);break;default:Ga(a,c)}n=n.sibling}}var Va=8192;function qs(e,n,a){if(e.subtreeFlags&Va)for(e=e.child;e!==null;)sg(e,n,a),e=e.sibling}function sg(e,n,a){switch(e.tag){case 26:qs(e,n,a),e.flags&Va&&e.memoizedState!==null&&Zb(a,Ni,e.memoizedState,e.memoizedProps);break;case 5:qs(e,n,a);break;case 3:case 4:var c=Ni;Ni=Ml(e.stateNode.containerInfo),qs(e,n,a),Ni=c;break;case 22:e.memoizedState===null&&(c=e.alternate,c!==null&&c.memoizedState!==null?(c=Va,Va=16777216,qs(e,n,a),Va=c):qs(e,n,a));break;default:qs(e,n,a)}}function ag(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Ya(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];Se=c,lg(c,e)}ag(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rg(e),e=e.sibling}function rg(e){switch(e.tag){case 0:case 11:case 15:Ya(e),e.flags&2048&&Cn(9,e,e.return);break;case 3:Ya(e);break;case 12:Ya(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,bl(e)):Ya(e);break;default:Ya(e)}}function bl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var a=0;a<n.length;a++){var c=n[a];Se=c,lg(c,e)}ag(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:Cn(8,n,n.return),bl(n);break;case 22:a=n.stateNode,a._visibility&2&&(a._visibility&=-3,bl(n));break;default:bl(n)}e=e.sibling}}function lg(e,n){for(;Se!==null;){var a=Se;switch(a.tag){case 0:case 11:case 15:Cn(8,a,n);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var c=a.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Na(a.memoizedState.cache)}if(c=a.child,c!==null)c.return=a,Se=c;else t:for(a=e;Se!==null;){c=Se;var f=c.sibling,m=c.return;if(Wf(c),c===a){Se=null;break t}if(f!==null){f.return=m,Se=f;break t}Se=m}}}var fb={getCacheForType:function(e){var n=Te(ge),a=n.data.get(e);return a===void 0&&(a=e(),n.data.set(e,a)),a},cacheSignal:function(){return Te(ge).controller.signal}},gb=typeof WeakMap=="function"?WeakMap:Map,Ht=0,Zt=null,Mt=null,Ot=0,Vt=0,si=null,Tn=!1,Gs=!1,Yc=!1,ln=0,oe=0,Dn=0,ls=0,Xc=0,ai=0,Vs=0,Xa=null,Xe=null,$c=!1,yl=0,og=0,vl=1/0,xl=null,Nn=null,xe=0,Mn=null,Ys=null,on=0,Kc=0,Qc=null,cg=null,$a=0,Wc=null;function ri(){return(Ht&2)!==0&&Ot!==0?Ot&-Ot:j.T!==null?nu():_h()}function ug(){if(ai===0)if((Ot&536870912)===0||Lt){var e=Dr;Dr<<=1,(Dr&3932160)===0&&(Dr=262144),ai=e}else ai=536870912;return e=ii.current,e!==null&&(e.flags|=32),ai}function $e(e,n,a){(e===Zt&&(Vt===2||Vt===9)||e.cancelPendingCommit!==null)&&(Xs(e,0),Rn(e,Ot,ai,!1)),pa(e,a),((Ht&2)===0||e!==Zt)&&(e===Zt&&((Ht&2)===0&&(ls|=a),oe===4&&Rn(e,Ot,ai,!1)),Pi(e))}function hg(e,n,a){if((Ht&6)!==0)throw Error(s(327));var c=!a&&(n&127)===0&&(n&e.expiredLanes)===0||ga(e,n),f=c?bb(e,n):Jc(e,n,!0),m=c;do{if(f===0){Gs&&!c&&Rn(e,n,0,!1);break}else{if(a=e.current.alternate,m&&!pb(a)){f=Jc(e,n,!1),m=!1;continue}if(f===2){if(m=n,e.errorRecoveryDisabledLanes&m)var x=0;else x=e.pendingLanes&-536870913,x=x!==0?x:x&536870912?536870912:0;if(x!==0){n=x;t:{var _=e;f=Xa;var R=_.current.memoizedState.isDehydrated;if(R&&(Xs(_,x).flags|=256),x=Jc(_,x,!1),x!==2){if(Yc&&!R){_.errorRecoveryDisabledLanes|=m,ls|=m,f=4;break t}m=Xe,Xe=f,m!==null&&(Xe===null?Xe=m:Xe.push.apply(Xe,m))}f=x}if(m=!1,f!==2)continue}}if(f===1){Xs(e,0),Rn(e,n,0,!0);break}t:{switch(c=e,m=f,m){case 0:case 1:throw Error(s(345));case 4:if((n&4194048)!==n)break;case 6:Rn(c,n,ai,!Tn);break t;case 2:Xe=null;break;case 3:case 5:break;default:throw Error(s(329))}if((n&62914560)===n&&(f=yl+300-Gt(),10<f)){if(Rn(c,n,ai,!Tn),Mr(c,0,!0)!==0)break t;on=n,c.timeoutHandle=Hg(dg.bind(null,c,a,Xe,xl,$c,n,ai,ls,Vs,Tn,m,"Throttled",-0,0),f);break t}dg(c,a,Xe,xl,$c,n,ai,ls,Vs,Tn,m,null,-0,0)}}break}while(!0);Pi(e)}function dg(e,n,a,c,f,m,x,_,R,V,W,J,Y,K){if(e.timeoutHandle=-1,J=n.subtreeFlags,J&8192||(J&16785408)===16785408){J={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Yi},sg(n,m,J);var ut=(m&62914560)===m?yl-Gt():(m&4194048)===m?og-Gt():0;if(ut=Jb(J,ut),ut!==null){on=m,e.cancelPendingCommit=ut(xg.bind(null,e,n,m,a,c,f,x,_,R,W,J,null,Y,K)),Rn(e,m,x,!V);return}}xg(e,n,m,a,c,f,x,_,R)}function pb(e){for(var n=e;;){var a=n.tag;if((a===0||a===11||a===15)&&n.flags&16384&&(a=n.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var c=0;c<a.length;c++){var f=a[c],m=f.getSnapshot;f=f.value;try{if(!ti(m(),f))return!1}catch{return!1}}if(a=n.child,n.subtreeFlags&16384&&a!==null)a.return=n,n=a;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Rn(e,n,a,c){n&=~Xc,n&=~ls,e.suspendedLanes|=n,e.pingedLanes&=~n,c&&(e.warmLanes|=n),c=e.expirationTimes;for(var f=n;0<f;){var m=31-Je(f),x=1<<m;c[m]=-1,f&=~x}a!==0&&Ah(e,a,n)}function Al(){return(Ht&6)===0?(Ka(0),!1):!0}function Zc(){if(Mt!==null){if(Vt===0)var e=Mt.return;else e=Mt,Qi=Zn=null,gc(e),Ps=null,Ra=0,e=Mt;for(;e!==null;)qf(e.alternate,e),e=e.return;Mt=null}}function Xs(e,n){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,jb(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),on=0,Zc(),Zt=e,Mt=a=$i(e.current,null),Ot=n,Vt=0,si=null,Tn=!1,Gs=ga(e,n),Yc=!1,Vs=ai=Xc=ls=Dn=oe=0,Xe=Xa=null,$c=!1,(n&8)!==0&&(n|=n&32);var c=e.entangledLanes;if(c!==0)for(e=e.entanglements,c&=n;0<c;){var f=31-Je(c),m=1<<f;n|=e[f],c&=~m}return ln=n,Hr(),a}function fg(e,n){Et=null,j.H=za,n===Bs||n===Qr?(n=Dd(),Vt=3):n===ic?(n=Dd(),Vt=4):Vt=n===Mc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,si=n,Mt===null&&(oe=1,ul(e,mi(n,e.current)))}function gg(){var e=ii.current;return e===null?!0:(Ot&4194048)===Ot?xi===null:(Ot&62914560)===Ot||(Ot&536870912)!==0?e===xi:!1}function pg(){var e=j.H;return j.H=za,e===null?za:e}function mg(){var e=j.A;return j.A=fb,e}function Sl(){oe=4,Tn||(Ot&4194048)!==Ot&&ii.current!==null||(Gs=!0),(Dn&134217727)===0&&(ls&134217727)===0||Zt===null||Rn(Zt,Ot,ai,!1)}function Jc(e,n,a){var c=Ht;Ht|=2;var f=pg(),m=mg();(Zt!==e||Ot!==n)&&(xl=null,Xs(e,n)),n=!1;var x=oe;t:do try{if(Vt!==0&&Mt!==null){var _=Mt,R=si;switch(Vt){case 8:Zc(),x=6;break t;case 3:case 2:case 9:case 6:ii.current===null&&(n=!0);var V=Vt;if(Vt=0,si=null,$s(e,_,R,V),a&&Gs){x=0;break t}break;default:V=Vt,Vt=0,si=null,$s(e,_,R,V)}}mb(),x=oe;break}catch(W){fg(e,W)}while(!0);return n&&e.shellSuspendCounter++,Qi=Zn=null,Ht=c,j.H=f,j.A=m,Mt===null&&(Zt=null,Ot=0,Hr()),x}function mb(){for(;Mt!==null;)bg(Mt)}function bb(e,n){var a=Ht;Ht|=2;var c=pg(),f=mg();Zt!==e||Ot!==n?(xl=null,vl=Gt()+500,Xs(e,n)):Gs=ga(e,n);t:do try{if(Vt!==0&&Mt!==null){n=Mt;var m=si;e:switch(Vt){case 1:Vt=0,si=null,$s(e,n,m,1);break;case 2:case 9:if(Cd(m)){Vt=0,si=null,yg(n);break}n=function(){Vt!==2&&Vt!==9||Zt!==e||(Vt=7),Pi(e)},m.then(n,n);break t;case 3:Vt=7;break t;case 4:Vt=5;break t;case 7:Cd(m)?(Vt=0,si=null,yg(n)):(Vt=0,si=null,$s(e,n,m,7));break;case 5:var x=null;switch(Mt.tag){case 26:x=Mt.memoizedState;case 5:case 27:var _=Mt;if(x?np(x):_.stateNode.complete){Vt=0,si=null;var R=_.sibling;if(R!==null)Mt=R;else{var V=_.return;V!==null?(Mt=V,wl(V)):Mt=null}break e}}Vt=0,si=null,$s(e,n,m,5);break;case 6:Vt=0,si=null,$s(e,n,m,6);break;case 8:Zc(),oe=6;break t;default:throw Error(s(462))}}yb();break}catch(W){fg(e,W)}while(!0);return Qi=Zn=null,j.H=c,j.A=f,Ht=a,Mt!==null?0:(Zt=null,Ot=0,Hr(),oe)}function yb(){for(;Mt!==null&&!ui();)bg(Mt)}function bg(e){var n=Uf(e.alternate,e,ln);e.memoizedProps=e.pendingProps,n===null?wl(e):Mt=n}function yg(e){var n=e,a=n.alternate;switch(n.tag){case 15:case 0:n=jf(a,n,n.pendingProps,n.type,void 0,Ot);break;case 11:n=jf(a,n,n.pendingProps,n.type.render,n.ref,Ot);break;case 5:gc(n);default:qf(a,n),n=Mt=pd(n,ln),n=Uf(a,n,ln)}e.memoizedProps=e.pendingProps,n===null?wl(e):Mt=n}function $s(e,n,a,c){Qi=Zn=null,gc(n),Ps=null,Ra=0;var f=n.return;try{if(rb(e,f,n,a,Ot)){oe=1,ul(e,mi(a,e.current)),Mt=null;return}}catch(m){if(f!==null)throw Mt=f,m;oe=1,ul(e,mi(a,e.current)),Mt=null;return}n.flags&32768?(Lt||c===1?e=!0:Gs||(Ot&536870912)!==0?e=!1:(Tn=e=!0,(c===2||c===9||c===3||c===6)&&(c=ii.current,c!==null&&c.tag===13&&(c.flags|=16384))),vg(n,e)):wl(n)}function wl(e){var n=e;do{if((n.flags&32768)!==0){vg(n,Tn);return}e=n.return;var a=cb(n.alternate,n,ln);if(a!==null){Mt=a;return}if(n=n.sibling,n!==null){Mt=n;return}Mt=n=e}while(n!==null);oe===0&&(oe=5)}function vg(e,n){do{var a=ub(e.alternate,e);if(a!==null){a.flags&=32767,Mt=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!n&&(e=e.sibling,e!==null)){Mt=e;return}Mt=e=a}while(e!==null);oe=6,Mt=null}function xg(e,n,a,c,f,m,x,_,R){e.cancelPendingCommit=null;do _l();while(xe!==0);if((Ht&6)!==0)throw Error(s(327));if(n!==null){if(n===e.current)throw Error(s(177));if(m=n.lanes|n.childLanes,m|=Uo,Wm(e,a,m,x,_,R),e===Zt&&(Mt=Zt=null,Ot=0),Ys=n,Mn=e,on=a,Kc=m,Qc=f,cg=c,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,Sb(Ue,function(){return Eg(),null})):(e.callbackNode=null,e.callbackPriority=0),c=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||c){c=j.T,j.T=null,f=T.p,T.p=2,x=Ht,Ht|=4;try{hb(e,n,a)}finally{Ht=x,T.p=f,j.T=c}}xe=1,Ag(),Sg(),wg()}}function Ag(){if(xe===1){xe=0;var e=Mn,n=Ys,a=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var c=T.p;T.p=2;var f=Ht;Ht|=4;try{eg(n,e);var m=hu,x=rd(e.containerInfo),_=m.focusedElem,R=m.selectionRange;if(x!==_&&_&&_.ownerDocument&&ad(_.ownerDocument.documentElement,_)){if(R!==null&&Bo(_)){var V=R.start,W=R.end;if(W===void 0&&(W=V),"selectionStart"in _)_.selectionStart=V,_.selectionEnd=Math.min(W,_.value.length);else{var J=_.ownerDocument||document,Y=J&&J.defaultView||window;if(Y.getSelection){var K=Y.getSelection(),ut=_.textContent.length,yt=Math.min(R.start,ut),Kt=R.end===void 0?yt:Math.min(R.end,ut);!K.extend&&yt>Kt&&(x=Kt,Kt=yt,yt=x);var z=sd(_,yt),L=sd(_,Kt);if(z&&L&&(K.rangeCount!==1||K.anchorNode!==z.node||K.anchorOffset!==z.offset||K.focusNode!==L.node||K.focusOffset!==L.offset)){var q=J.createRange();q.setStart(z.node,z.offset),K.removeAllRanges(),yt>Kt?(K.addRange(q),K.extend(L.node,L.offset)):(q.setEnd(L.node,L.offset),K.addRange(q))}}}}for(J=[],K=_;K=K.parentNode;)K.nodeType===1&&J.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof _.focus=="function"&&_.focus(),_=0;_<J.length;_++){var Z=J[_];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}Bl=!!uu,hu=uu=null}finally{Ht=f,T.p=c,j.T=a}}e.current=n,xe=2}}function Sg(){if(xe===2){xe=0;var e=Mn,n=Ys,a=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var c=T.p;T.p=2;var f=Ht;Ht|=4;try{Qf(e,n.alternate,n)}finally{Ht=f,T.p=c,j.T=a}}xe=3}}function wg(){if(xe===4||xe===3){xe=0,qn();var e=Mn,n=Ys,a=on,c=cg;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?xe=5:(xe=0,Ys=Mn=null,_g(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Nn=null),bo(a),n=n.stateNode,Le&&typeof Le.onCommitFiberRoot=="function")try{Le.onCommitFiberRoot(Ti,n,void 0,(n.current.flags&128)===128)}catch{}if(c!==null){n=j.T,f=T.p,T.p=2,j.T=null;try{for(var m=e.onRecoverableError,x=0;x<c.length;x++){var _=c[x];m(_.value,{componentStack:_.stack})}}finally{j.T=n,T.p=f}}(on&3)!==0&&_l(),Pi(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Wc?$a++:($a=0,Wc=e):$a=0,Ka(0)}}function _g(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,Na(n)))}function _l(){return Ag(),Sg(),wg(),Eg()}function Eg(){if(xe!==5)return!1;var e=Mn,n=Kc;Kc=0;var a=bo(on),c=j.T,f=T.p;try{T.p=32>a?32:a,j.T=null,a=Qc,Qc=null;var m=Mn,x=on;if(xe=0,Ys=Mn=null,on=0,(Ht&6)!==0)throw Error(s(331));var _=Ht;if(Ht|=4,rg(m.current),ng(m,m.current,x,a),Ht=_,Ka(0,!1),Le&&typeof Le.onPostCommitFiberRoot=="function")try{Le.onPostCommitFiberRoot(Ti,m)}catch{}return!0}finally{T.p=f,j.T=c,_g(e,n)}}function Cg(e,n,a){n=mi(a,n),n=Nc(e.stateNode,n,2),e=wn(e,n,2),e!==null&&(pa(e,2),Pi(e))}function Yt(e,n,a){if(e.tag===3)Cg(e,e,a);else for(;n!==null;){if(n.tag===3){Cg(n,e,a);break}else if(n.tag===1){var c=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Nn===null||!Nn.has(c))){e=mi(a,e),a=Tf(2),c=wn(n,a,2),c!==null&&(Df(a,c,n,e),pa(c,2),Pi(c));break}}n=n.return}}function tu(e,n,a){var c=e.pingCache;if(c===null){c=e.pingCache=new gb;var f=new Set;c.set(n,f)}else f=c.get(n),f===void 0&&(f=new Set,c.set(n,f));f.has(a)||(Yc=!0,f.add(a),e=vb.bind(null,e,n,a),n.then(e,e))}function vb(e,n,a){var c=e.pingCache;c!==null&&c.delete(n),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Zt===e&&(Ot&a)===a&&(oe===4||oe===3&&(Ot&62914560)===Ot&&300>Gt()-yl?(Ht&2)===0&&Xs(e,0):Xc|=a,Vs===Ot&&(Vs=0)),Pi(e)}function Tg(e,n){n===0&&(n=xh()),e=Kn(e,n),e!==null&&(pa(e,n),Pi(e))}function xb(e){var n=e.memoizedState,a=0;n!==null&&(a=n.retryLane),Tg(e,a)}function Ab(e,n){var a=0;switch(e.tag){case 31:case 13:var c=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:c=e.stateNode;break;case 22:c=e.stateNode._retryCache;break;default:throw Error(s(314))}c!==null&&c.delete(n),Tg(e,a)}function Sb(e,n){return ci(e,n)}var El=null,Ks=null,eu=!1,Cl=!1,iu=!1,On=0;function Pi(e){e!==Ks&&e.next===null&&(Ks===null?El=Ks=e:Ks=Ks.next=e),Cl=!0,eu||(eu=!0,_b())}function Ka(e,n){if(!iu&&Cl){iu=!0;do for(var a=!1,c=El;c!==null;){if(e!==0){var f=c.pendingLanes;if(f===0)var m=0;else{var x=c.suspendedLanes,_=c.pingedLanes;m=(1<<31-Je(42|e)+1)-1,m&=f&~(x&~_),m=m&201326741?m&201326741|1:m?m|2:0}m!==0&&(a=!0,Rg(c,m))}else m=Ot,m=Mr(c,c===Zt?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(m&3)===0||ga(c,m)||(a=!0,Rg(c,m));c=c.next}while(a);iu=!1}}function wb(){Dg()}function Dg(){Cl=eu=!1;var e=0;On!==0&&Lb()&&(e=On);for(var n=Gt(),a=null,c=El;c!==null;){var f=c.next,m=Ng(c,n);m===0?(c.next=null,a===null?El=f:a.next=f,f===null&&(Ks=a)):(a=c,(e!==0||(m&3)!==0)&&(Cl=!0)),c=f}xe!==0&&xe!==5||Ka(e),On!==0&&(On=0)}function Ng(e,n){for(var a=e.suspendedLanes,c=e.pingedLanes,f=e.expirationTimes,m=e.pendingLanes&-62914561;0<m;){var x=31-Je(m),_=1<<x,R=f[x];R===-1?((_&a)===0||(_&c)!==0)&&(f[x]=Qm(_,n)):R<=n&&(e.expiredLanes|=_),m&=~_}if(n=Zt,a=Ot,a=Mr(e,e===n?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c=e.callbackNode,a===0||e===n&&(Vt===2||Vt===9)||e.cancelPendingCommit!==null)return c!==null&&c!==null&&ki(c),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ga(e,a)){if(n=a&-a,n===e.callbackPriority)return n;switch(c!==null&&ki(c),bo(a)){case 2:case 8:a=_e;break;case 32:a=Ue;break;case 268435456:a=fa;break;default:a=Ue}return c=Mg.bind(null,e),a=ci(a,c),e.callbackPriority=n,e.callbackNode=a,n}return c!==null&&c!==null&&ki(c),e.callbackPriority=2,e.callbackNode=null,2}function Mg(e,n){if(xe!==0&&xe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(_l()&&e.callbackNode!==a)return null;var c=Ot;return c=Mr(e,e===Zt?c:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),c===0?null:(hg(e,c,n),Ng(e,Gt()),e.callbackNode!=null&&e.callbackNode===a?Mg.bind(null,e):null)}function Rg(e,n){if(_l())return null;hg(e,n,!0)}function _b(){Bb(function(){(Ht&6)!==0?ci(ue,wb):Dg()})}function nu(){if(On===0){var e=Ls;e===0&&(e=Tr,Tr<<=1,(Tr&261888)===0&&(Tr=256)),On=e}return On}function Og(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Lr(""+e)}function kg(e,n){var a=n.ownerDocument.createElement("input");return a.name=n.name,a.value=n.value,e.id&&a.setAttribute("form",e.id),n.parentNode.insertBefore(a,n),e=new FormData(e),a.parentNode.removeChild(a),e}function Eb(e,n,a,c,f){if(n==="submit"&&a&&a.stateNode===f){var m=Og((f[He]||null).action),x=c.submitter;x&&(n=(n=x[He]||null)?Og(n.formAction):x.getAttribute("formAction"),n!==null&&(m=n,x=null));var _=new Fr("action","action",null,c,f);e.push({event:_,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(On!==0){var R=x?kg(f,x):new FormData(f);wc(a,{pending:!0,data:R,method:f.method,action:m},null,R)}}else typeof m=="function"&&(_.preventDefault(),R=x?kg(f,x):new FormData(f),wc(a,{pending:!0,data:R,method:f.method,action:m},m,R))},currentTarget:f}]})}}for(var su=0;su<Io.length;su++){var au=Io[su],Cb=au.toLowerCase(),Tb=au[0].toUpperCase()+au.slice(1);Di(Cb,"on"+Tb)}Di(cd,"onAnimationEnd"),Di(ud,"onAnimationIteration"),Di(hd,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(q0,"onTransitionRun"),Di(G0,"onTransitionStart"),Di(V0,"onTransitionCancel"),Di(dd,"onTransitionEnd"),xs("onMouseEnter",["mouseout","mouseover"]),xs("onMouseLeave",["mouseout","mouseover"]),xs("onPointerEnter",["pointerout","pointerover"]),xs("onPointerLeave",["pointerout","pointerover"]),Vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Vn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Db=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qa));function Lg(e,n){n=(n&4)!==0;for(var a=0;a<e.length;a++){var c=e[a],f=c.event;c=c.listeners;t:{var m=void 0;if(n)for(var x=c.length-1;0<=x;x--){var _=c[x],R=_.instance,V=_.currentTarget;if(_=_.listener,R!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=V;try{m(f)}catch(W){Ur(W)}f.currentTarget=null,m=R}else for(x=0;x<c.length;x++){if(_=c[x],R=_.instance,V=_.currentTarget,_=_.listener,R!==m&&f.isPropagationStopped())break t;m=_,f.currentTarget=V;try{m(f)}catch(W){Ur(W)}f.currentTarget=null,m=R}}}}function Rt(e,n){var a=n[yo];a===void 0&&(a=n[yo]=new Set);var c=e+"__bubble";a.has(c)||(jg(n,e,2,!1),a.add(c))}function ru(e,n,a){var c=0;n&&(c|=4),jg(a,e,c,n)}var Tl="_reactListening"+Math.random().toString(36).slice(2);function lu(e){if(!e[Tl]){e[Tl]=!0,Th.forEach(function(a){a!=="selectionchange"&&(Db.has(a)||ru(a,!1,e),ru(a,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[Tl]||(n[Tl]=!0,ru("selectionchange",!1,n))}}function jg(e,n,a,c){switch(up(n)){case 2:var f=iy;break;case 8:f=ny;break;default:f=Su}a=f.bind(null,n,a,e),f=void 0,!To||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(f=!0),c?f!==void 0?e.addEventListener(n,a,{capture:!0,passive:f}):e.addEventListener(n,a,!0):f!==void 0?e.addEventListener(n,a,{passive:f}):e.addEventListener(n,a,!1)}function ou(e,n,a,c,f){var m=c;if((n&1)===0&&(n&2)===0&&c!==null)t:for(;;){if(c===null)return;var x=c.tag;if(x===3||x===4){var _=c.stateNode.containerInfo;if(_===f)break;if(x===4)for(x=c.return;x!==null;){var R=x.tag;if((R===3||R===4)&&x.stateNode.containerInfo===f)return;x=x.return}for(;_!==null;){if(x=bs(_),x===null)return;if(R=x.tag,R===5||R===6||R===26||R===27){c=m=x;continue t}_=_.parentNode}}c=c.return}zh(function(){var V=m,W=Eo(a),J=[];t:{var Y=fd.get(e);if(Y!==void 0){var K=Fr,ut=e;switch(e){case"keypress":if(Br(a)===0)break t;case"keydown":case"keyup":K=A0;break;case"focusin":ut="focus",K=Ro;break;case"focusout":ut="blur",K=Ro;break;case"beforeblur":case"afterblur":K=Ro;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=Hh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=c0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=_0;break;case cd:case ud:case hd:K=d0;break;case dd:K=C0;break;case"scroll":case"scrollend":K=l0;break;case"wheel":K=D0;break;case"copy":case"cut":case"paste":K=g0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=Gh;break;case"toggle":case"beforetoggle":K=M0}var yt=(n&4)!==0,Kt=!yt&&(e==="scroll"||e==="scrollend"),z=yt?Y!==null?Y+"Capture":null:Y;yt=[];for(var L=V,q;L!==null;){var Z=L;if(q=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||q===null||z===null||(Z=ya(L,z),Z!=null&&yt.push(Wa(L,Z,q))),Kt)break;L=L.return}0<yt.length&&(Y=new K(Y,ut,null,a,W),J.push({event:Y,listeners:yt}))}}if((n&7)===0){t:{if(Y=e==="mouseover"||e==="pointerover",K=e==="mouseout"||e==="pointerout",Y&&a!==_o&&(ut=a.relatedTarget||a.fromElement)&&(bs(ut)||ut[ms]))break t;if((K||Y)&&(Y=W.window===W?W:(Y=W.ownerDocument)?Y.defaultView||Y.parentWindow:window,K?(ut=a.relatedTarget||a.toElement,K=V,ut=ut?bs(ut):null,ut!==null&&(Kt=l(ut),yt=ut.tag,ut!==Kt||yt!==5&&yt!==27&&yt!==6)&&(ut=null)):(K=null,ut=V),K!==ut)){if(yt=Hh,Z="onMouseLeave",z="onMouseEnter",L="mouse",(e==="pointerout"||e==="pointerover")&&(yt=Gh,Z="onPointerLeave",z="onPointerEnter",L="pointer"),Kt=K==null?Y:ba(K),q=ut==null?Y:ba(ut),Y=new yt(Z,L+"leave",K,a,W),Y.target=Kt,Y.relatedTarget=q,Z=null,bs(W)===V&&(yt=new yt(z,L+"enter",ut,a,W),yt.target=q,yt.relatedTarget=Kt,Z=yt),Kt=Z,K&&ut)e:{for(yt=Nb,z=K,L=ut,q=0,Z=z;Z;Z=yt(Z))q++;Z=0;for(var mt=L;mt;mt=yt(mt))Z++;for(;0<q-Z;)z=yt(z),q--;for(;0<Z-q;)L=yt(L),Z--;for(;q--;){if(z===L||L!==null&&z===L.alternate){yt=z;break e}z=yt(z),L=yt(L)}yt=null}else yt=null;K!==null&&Bg(J,Y,K,yt,!1),ut!==null&&Kt!==null&&Bg(J,Kt,ut,yt,!0)}}t:{if(Y=V?ba(V):window,K=Y.nodeName&&Y.nodeName.toLowerCase(),K==="select"||K==="input"&&Y.type==="file")var It=Zh;else if(Qh(Y))if(Jh)It=I0;else{It=F0;var ft=P0}else K=Y.nodeName,!K||K.toLowerCase()!=="input"||Y.type!=="checkbox"&&Y.type!=="radio"?V&&wo(V.elementType)&&(It=Zh):It=z0;if(It&&(It=It(e,V))){Wh(J,It,a,W);break t}ft&&ft(e,Y,V),e==="focusout"&&V&&Y.type==="number"&&V.memoizedProps.value!=null&&So(Y,"number",Y.value)}switch(ft=V?ba(V):window,e){case"focusin":(Qh(ft)||ft.contentEditable==="true")&&(Cs=ft,Po=V,Ca=null);break;case"focusout":Ca=Po=Cs=null;break;case"mousedown":Fo=!0;break;case"contextmenu":case"mouseup":case"dragend":Fo=!1,ld(J,a,W);break;case"selectionchange":if(H0)break;case"keydown":case"keyup":ld(J,a,W)}var Ct;if(ko)t:{switch(e){case"compositionstart":var kt="onCompositionStart";break t;case"compositionend":kt="onCompositionEnd";break t;case"compositionupdate":kt="onCompositionUpdate";break t}kt=void 0}else Es?$h(e,a)&&(kt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(kt="onCompositionStart");kt&&(Vh&&a.locale!=="ko"&&(Es||kt!=="onCompositionStart"?kt==="onCompositionEnd"&&Es&&(Ct=Ih()):(mn=W,Do="value"in mn?mn.value:mn.textContent,Es=!0)),ft=Dl(V,kt),0<ft.length&&(kt=new qh(kt,e,null,a,W),J.push({event:kt,listeners:ft}),Ct?kt.data=Ct:(Ct=Kh(a),Ct!==null&&(kt.data=Ct)))),(Ct=O0?k0(e,a):L0(e,a))&&(kt=Dl(V,"onBeforeInput"),0<kt.length&&(ft=new qh("onBeforeInput","beforeinput",null,a,W),J.push({event:ft,listeners:kt}),ft.data=Ct)),Eb(J,e,V,a,W)}Lg(J,n)})}function Wa(e,n,a){return{instance:e,listener:n,currentTarget:a}}function Dl(e,n){for(var a=n+"Capture",c=[];e!==null;){var f=e,m=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||m===null||(f=ya(e,a),f!=null&&c.unshift(Wa(e,f,m)),f=ya(e,n),f!=null&&c.push(Wa(e,f,m))),e.tag===3)return c;e=e.return}return[]}function Nb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Bg(e,n,a,c,f){for(var m=n._reactName,x=[];a!==null&&a!==c;){var _=a,R=_.alternate,V=_.stateNode;if(_=_.tag,R!==null&&R===c)break;_!==5&&_!==26&&_!==27||V===null||(R=V,f?(V=ya(a,m),V!=null&&x.unshift(Wa(a,V,R))):f||(V=ya(a,m),V!=null&&x.push(Wa(a,V,R)))),a=a.return}x.length!==0&&e.push({event:n,listeners:x})}var Mb=/\r\n?/g,Rb=/\u0000|\uFFFD/g;function Pg(e){return(typeof e=="string"?e:""+e).replace(Mb,`
`).replace(Rb,"")}function Fg(e,n){return n=Pg(n),Pg(e)===n}function $t(e,n,a,c,f,m){switch(a){case"children":typeof c=="string"?n==="body"||n==="textarea"&&c===""||Ss(e,c):(typeof c=="number"||typeof c=="bigint")&&n!=="body"&&Ss(e,""+c);break;case"className":Or(e,"class",c);break;case"tabIndex":Or(e,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Or(e,a,c);break;case"style":Ph(e,c,m);break;case"data":if(n!=="object"){Or(e,"data",c);break}case"src":case"href":if(c===""&&(n!=="a"||a!=="href")){e.removeAttribute(a);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Lr(""+c),e.setAttribute(a,c);break;case"action":case"formAction":if(typeof c=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof m=="function"&&(a==="formAction"?(n!=="input"&&$t(e,n,"name",f.name,f,null),$t(e,n,"formEncType",f.formEncType,f,null),$t(e,n,"formMethod",f.formMethod,f,null),$t(e,n,"formTarget",f.formTarget,f,null)):($t(e,n,"encType",f.encType,f,null),$t(e,n,"method",f.method,f,null),$t(e,n,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){e.removeAttribute(a);break}c=Lr(""+c),e.setAttribute(a,c);break;case"onClick":c!=null&&(e.onclick=Yi);break;case"onScroll":c!=null&&Rt("scroll",e);break;case"onScrollEnd":c!=null&&Rt("scrollend",e);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"multiple":e.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":e.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){e.removeAttribute("xlink:href");break}a=Lr(""+c),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""+c):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":c===!0?e.setAttribute(a,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?e.setAttribute(a,c):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?e.setAttribute(a,c):e.removeAttribute(a);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?e.removeAttribute(a):e.setAttribute(a,c);break;case"popover":Rt("beforetoggle",e),Rt("toggle",e),Rr(e,"popover",c);break;case"xlinkActuate":Vi(e,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":Vi(e,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":Vi(e,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":Vi(e,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":Vi(e,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":Vi(e,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":Vi(e,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":Vi(e,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":Vi(e,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Rr(e,"is",c);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=a0.get(a)||a,Rr(e,a,c))}}function cu(e,n,a,c,f,m){switch(a){case"style":Ph(e,c,m);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(s(61));if(a=c.__html,a!=null){if(f.children!=null)throw Error(s(60));e.innerHTML=a}}break;case"children":typeof c=="string"?Ss(e,c):(typeof c=="number"||typeof c=="bigint")&&Ss(e,""+c);break;case"onScroll":c!=null&&Rt("scroll",e);break;case"onScrollEnd":c!=null&&Rt("scrollend",e);break;case"onClick":c!=null&&(e.onclick=Yi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Dh.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),n=a.slice(2,f?a.length-7:void 0),m=e[He]||null,m=m!=null?m[a]:null,typeof m=="function"&&e.removeEventListener(n,m,f),typeof c=="function")){typeof m!="function"&&m!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(n,c,f);break t}a in e?e[a]=c:c===!0?e.setAttribute(a,""):Rr(e,a,c)}}}function Ne(e,n,a){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Rt("error",e),Rt("load",e);var c=!1,f=!1,m;for(m in a)if(a.hasOwnProperty(m)){var x=a[m];if(x!=null)switch(m){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:$t(e,n,m,x,a,null)}}f&&$t(e,n,"srcSet",a.srcSet,a,null),c&&$t(e,n,"src",a.src,a,null);return;case"input":Rt("invalid",e);var _=m=x=f=null,R=null,V=null;for(c in a)if(a.hasOwnProperty(c)){var W=a[c];if(W!=null)switch(c){case"name":f=W;break;case"type":x=W;break;case"checked":R=W;break;case"defaultChecked":V=W;break;case"value":m=W;break;case"defaultValue":_=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(s(137,n));break;default:$t(e,n,c,W,a,null)}}kh(e,m,_,R,V,x,f,!1);return;case"select":Rt("invalid",e),c=x=m=null;for(f in a)if(a.hasOwnProperty(f)&&(_=a[f],_!=null))switch(f){case"value":m=_;break;case"defaultValue":x=_;break;case"multiple":c=_;default:$t(e,n,f,_,a,null)}n=m,a=x,e.multiple=!!c,n!=null?As(e,!!c,n,!1):a!=null&&As(e,!!c,a,!0);return;case"textarea":Rt("invalid",e),m=f=c=null;for(x in a)if(a.hasOwnProperty(x)&&(_=a[x],_!=null))switch(x){case"value":c=_;break;case"defaultValue":f=_;break;case"children":m=_;break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(s(91));break;default:$t(e,n,x,_,a,null)}jh(e,c,f,m);return;case"option":for(R in a)if(a.hasOwnProperty(R)&&(c=a[R],c!=null))switch(R){case"selected":e.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:$t(e,n,R,c,a,null)}return;case"dialog":Rt("beforetoggle",e),Rt("toggle",e),Rt("cancel",e),Rt("close",e);break;case"iframe":case"object":Rt("load",e);break;case"video":case"audio":for(c=0;c<Qa.length;c++)Rt(Qa[c],e);break;case"image":Rt("error",e),Rt("load",e);break;case"details":Rt("toggle",e);break;case"embed":case"source":case"link":Rt("error",e),Rt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in a)if(a.hasOwnProperty(V)&&(c=a[V],c!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,n));default:$t(e,n,V,c,a,null)}return;default:if(wo(n)){for(W in a)a.hasOwnProperty(W)&&(c=a[W],c!==void 0&&cu(e,n,W,c,a,void 0));return}}for(_ in a)a.hasOwnProperty(_)&&(c=a[_],c!=null&&$t(e,n,_,c,a,null))}function Ob(e,n,a,c){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,m=null,x=null,_=null,R=null,V=null,W=null;for(K in a){var J=a[K];if(a.hasOwnProperty(K)&&J!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":R=J;default:c.hasOwnProperty(K)||$t(e,n,K,null,c,J)}}for(var Y in c){var K=c[Y];if(J=a[Y],c.hasOwnProperty(Y)&&(K!=null||J!=null))switch(Y){case"type":m=K;break;case"name":f=K;break;case"checked":V=K;break;case"defaultChecked":W=K;break;case"value":x=K;break;case"defaultValue":_=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(s(137,n));break;default:K!==J&&$t(e,n,Y,K,c,J)}}Ao(e,x,_,R,V,W,m,f);return;case"select":K=x=_=Y=null;for(m in a)if(R=a[m],a.hasOwnProperty(m)&&R!=null)switch(m){case"value":break;case"multiple":K=R;default:c.hasOwnProperty(m)||$t(e,n,m,null,c,R)}for(f in c)if(m=c[f],R=a[f],c.hasOwnProperty(f)&&(m!=null||R!=null))switch(f){case"value":Y=m;break;case"defaultValue":_=m;break;case"multiple":x=m;default:m!==R&&$t(e,n,f,m,c,R)}n=_,a=x,c=K,Y!=null?As(e,!!a,Y,!1):!!c!=!!a&&(n!=null?As(e,!!a,n,!0):As(e,!!a,a?[]:"",!1));return;case"textarea":K=Y=null;for(_ in a)if(f=a[_],a.hasOwnProperty(_)&&f!=null&&!c.hasOwnProperty(_))switch(_){case"value":break;case"children":break;default:$t(e,n,_,null,c,f)}for(x in c)if(f=c[x],m=a[x],c.hasOwnProperty(x)&&(f!=null||m!=null))switch(x){case"value":Y=f;break;case"defaultValue":K=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(s(91));break;default:f!==m&&$t(e,n,x,f,c,m)}Lh(e,Y,K);return;case"option":for(var ut in a)if(Y=a[ut],a.hasOwnProperty(ut)&&Y!=null&&!c.hasOwnProperty(ut))switch(ut){case"selected":e.selected=!1;break;default:$t(e,n,ut,null,c,Y)}for(R in c)if(Y=c[R],K=a[R],c.hasOwnProperty(R)&&Y!==K&&(Y!=null||K!=null))switch(R){case"selected":e.selected=Y&&typeof Y!="function"&&typeof Y!="symbol";break;default:$t(e,n,R,Y,c,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var yt in a)Y=a[yt],a.hasOwnProperty(yt)&&Y!=null&&!c.hasOwnProperty(yt)&&$t(e,n,yt,null,c,Y);for(V in c)if(Y=c[V],K=a[V],c.hasOwnProperty(V)&&Y!==K&&(Y!=null||K!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,n));break;default:$t(e,n,V,Y,c,K)}return;default:if(wo(n)){for(var Kt in a)Y=a[Kt],a.hasOwnProperty(Kt)&&Y!==void 0&&!c.hasOwnProperty(Kt)&&cu(e,n,Kt,void 0,c,Y);for(W in c)Y=c[W],K=a[W],!c.hasOwnProperty(W)||Y===K||Y===void 0&&K===void 0||cu(e,n,W,Y,c,K);return}}for(var z in a)Y=a[z],a.hasOwnProperty(z)&&Y!=null&&!c.hasOwnProperty(z)&&$t(e,n,z,null,c,Y);for(J in c)Y=c[J],K=a[J],!c.hasOwnProperty(J)||Y===K||Y==null&&K==null||$t(e,n,J,Y,c,K)}function zg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function kb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,a=performance.getEntriesByType("resource"),c=0;c<a.length;c++){var f=a[c],m=f.transferSize,x=f.initiatorType,_=f.duration;if(m&&_&&zg(x)){for(x=0,_=f.responseEnd,c+=1;c<a.length;c++){var R=a[c],V=R.startTime;if(V>_)break;var W=R.transferSize,J=R.initiatorType;W&&zg(J)&&(R=R.responseEnd,x+=W*(R<_?1:(_-V)/(R-V)))}if(--c,n+=8*(m+x)/(f.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var uu=null,hu=null;function Nl(e){return e.nodeType===9?e:e.ownerDocument}function Ig(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ug(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function du(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var fu=null;function Lb(){var e=window.event;return e&&e.type==="popstate"?e===fu?!1:(fu=e,!0):(fu=null,!1)}var Hg=typeof setTimeout=="function"?setTimeout:void 0,jb=typeof clearTimeout=="function"?clearTimeout:void 0,qg=typeof Promise=="function"?Promise:void 0,Bb=typeof queueMicrotask=="function"?queueMicrotask:typeof qg<"u"?function(e){return qg.resolve(null).then(e).catch(Pb)}:Hg;function Pb(e){setTimeout(function(){throw e})}function kn(e){return e==="head"}function Gg(e,n){var a=n,c=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(c===0){e.removeChild(f),Js(n);return}c--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")c++;else if(a==="html")Za(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,Za(a);for(var m=a.firstChild;m;){var x=m.nextSibling,_=m.nodeName;m[ma]||_==="SCRIPT"||_==="STYLE"||_==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=x}}else a==="body"&&Za(e.ownerDocument.body);a=f}while(a);Js(n)}function Vg(e,n){var a=e;e=0;do{var c=a.nextSibling;if(a.nodeType===1?n?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(n?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),c&&c.nodeType===8)if(a=c.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=c}while(a)}function gu(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var a=n;switch(n=n.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":gu(a),vo(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Fb(e,n,a,c){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!c&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(c){if(!e[ma])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(m=e.getAttribute("rel"),m==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(m!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(m=e.getAttribute("src"),(m!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&m&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var m=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===m)return e}else return e;if(e=Ai(e.nextSibling),e===null)break}return null}function zb(e,n,a){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Ai(e.nextSibling),e===null))return null;return e}function Yg(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ai(e.nextSibling),e===null))return null;return e}function pu(e){return e.data==="$?"||e.data==="$~"}function mu(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Ib(e,n){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||a.readyState!=="loading")n();else{var c=function(){n(),a.removeEventListener("DOMContentLoaded",c)};a.addEventListener("DOMContentLoaded",c),e._reactRetry=c}}function Ai(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var bu=null;function Xg(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(n===0)return Ai(e.nextSibling);n--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||n++}e=e.nextSibling}return null}function $g(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(n===0)return e;n--}else a!=="/$"&&a!=="/&"||n++}e=e.previousSibling}return null}function Kg(e,n,a){switch(n=Nl(a),e){case"html":if(e=n.documentElement,!e)throw Error(s(452));return e;case"head":if(e=n.head,!e)throw Error(s(453));return e;case"body":if(e=n.body,!e)throw Error(s(454));return e;default:throw Error(s(451))}}function Za(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);vo(e)}var Si=new Map,Qg=new Set;function Ml(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var cn=T.d;T.d={f:Ub,r:Hb,D:qb,C:Gb,L:Vb,m:Yb,X:$b,S:Xb,M:Kb};function Ub(){var e=cn.f(),n=Al();return e||n}function Hb(e){var n=ys(e);n!==null&&n.tag===5&&n.type==="form"?ff(n):cn.r(e)}var Qs=typeof document>"u"?null:document;function Wg(e,n,a){var c=Qs;if(c&&typeof n=="string"&&n){var f=gi(n);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),Qg.has(f)||(Qg.add(f),e={rel:e,crossOrigin:a,href:n},c.querySelector(f)===null&&(n=c.createElement("link"),Ne(n,"link",e),Ae(n),c.head.appendChild(n)))}}function qb(e){cn.D(e),Wg("dns-prefetch",e,null)}function Gb(e,n){cn.C(e,n),Wg("preconnect",e,n)}function Vb(e,n,a){cn.L(e,n,a);var c=Qs;if(c&&e&&n){var f='link[rel="preload"][as="'+gi(n)+'"]';n==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+gi(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+gi(a.imageSizes)+'"]')):f+='[href="'+gi(e)+'"]';var m=f;switch(n){case"style":m=Ws(e);break;case"script":m=Zs(e)}Si.has(m)||(e=b({rel:"preload",href:n==="image"&&a&&a.imageSrcSet?void 0:e,as:n},a),Si.set(m,e),c.querySelector(f)!==null||n==="style"&&c.querySelector(Ja(m))||n==="script"&&c.querySelector(tr(m))||(n=c.createElement("link"),Ne(n,"link",e),Ae(n),c.head.appendChild(n)))}}function Yb(e,n){cn.m(e,n);var a=Qs;if(a&&e){var c=n&&typeof n.as=="string"?n.as:"script",f='link[rel="modulepreload"][as="'+gi(c)+'"][href="'+gi(e)+'"]',m=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":m=Zs(e)}if(!Si.has(m)&&(e=b({rel:"modulepreload",href:e},n),Si.set(m,e),a.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(tr(m)))return}c=a.createElement("link"),Ne(c,"link",e),Ae(c),a.head.appendChild(c)}}}function Xb(e,n,a){cn.S(e,n,a);var c=Qs;if(c&&e){var f=vs(c).hoistableStyles,m=Ws(e);n=n||"default";var x=f.get(m);if(!x){var _={loading:0,preload:null};if(x=c.querySelector(Ja(m)))_.loading=5;else{e=b({rel:"stylesheet",href:e,"data-precedence":n},a),(a=Si.get(m))&&yu(e,a);var R=x=c.createElement("link");Ae(R),Ne(R,"link",e),R._p=new Promise(function(V,W){R.onload=V,R.onerror=W}),R.addEventListener("load",function(){_.loading|=1}),R.addEventListener("error",function(){_.loading|=2}),_.loading|=4,Rl(x,n,c)}x={type:"stylesheet",instance:x,count:1,state:_},f.set(m,x)}}}function $b(e,n){cn.X(e,n);var a=Qs;if(a&&e){var c=vs(a).hoistableScripts,f=Zs(e),m=c.get(f);m||(m=a.querySelector(tr(f)),m||(e=b({src:e,async:!0},n),(n=Si.get(f))&&vu(e,n),m=a.createElement("script"),Ae(m),Ne(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Kb(e,n){cn.M(e,n);var a=Qs;if(a&&e){var c=vs(a).hoistableScripts,f=Zs(e),m=c.get(f);m||(m=a.querySelector(tr(f)),m||(e=b({src:e,async:!0,type:"module"},n),(n=Si.get(f))&&vu(e,n),m=a.createElement("script"),Ae(m),Ne(m,"link",e),a.head.appendChild(m)),m={type:"script",instance:m,count:1,state:null},c.set(f,m))}}function Zg(e,n,a,c){var f=(f=it.current)?Ml(f):null;if(!f)throw Error(s(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(n=Ws(a.href),a=vs(f).hoistableStyles,c=a.get(n),c||(c={type:"style",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Ws(a.href);var m=vs(f).hoistableStyles,x=m.get(e);if(x||(f=f.ownerDocument||f,x={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},m.set(e,x),(m=f.querySelector(Ja(e)))&&!m._p&&(x.instance=m,x.state.loading=5),Si.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Si.set(e,a),m||Qb(f,e,a,x.state))),n&&c===null)throw Error(s(528,""));return x}if(n&&c!==null)throw Error(s(529,""));return null;case"script":return n=a.async,a=a.src,typeof a=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Zs(a),a=vs(f).hoistableScripts,c=a.get(n),c||(c={type:"script",instance:null,count:0,state:null},a.set(n,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,e))}}function Ws(e){return'href="'+gi(e)+'"'}function Ja(e){return'link[rel="stylesheet"]['+e+"]"}function Jg(e){return b({},e,{"data-precedence":e.precedence,precedence:null})}function Qb(e,n,a,c){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?c.loading=1:(n=e.createElement("link"),c.preload=n,n.addEventListener("load",function(){return c.loading|=1}),n.addEventListener("error",function(){return c.loading|=2}),Ne(n,"link",a),Ae(n),e.head.appendChild(n))}function Zs(e){return'[src="'+gi(e)+'"]'}function tr(e){return"script[async]"+e}function tp(e,n,a){if(n.count++,n.instance===null)switch(n.type){case"style":var c=e.querySelector('style[data-href~="'+gi(a.href)+'"]');if(c)return n.instance=c,Ae(c),c;var f=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return c=(e.ownerDocument||e).createElement("style"),Ae(c),Ne(c,"style",f),Rl(c,a.precedence,e),n.instance=c;case"stylesheet":f=Ws(a.href);var m=e.querySelector(Ja(f));if(m)return n.state.loading|=4,n.instance=m,Ae(m),m;c=Jg(a),(f=Si.get(f))&&yu(c,f),m=(e.ownerDocument||e).createElement("link"),Ae(m);var x=m;return x._p=new Promise(function(_,R){x.onload=_,x.onerror=R}),Ne(m,"link",c),n.state.loading|=4,Rl(m,a.precedence,e),n.instance=m;case"script":return m=Zs(a.src),(f=e.querySelector(tr(m)))?(n.instance=f,Ae(f),f):(c=a,(f=Si.get(m))&&(c=b({},a),vu(c,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ae(f),Ne(f,"link",c),e.head.appendChild(f),n.instance=f);case"void":return null;default:throw Error(s(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(c=n.instance,n.state.loading|=4,Rl(c,a.precedence,e));return n.instance}function Rl(e,n,a){for(var c=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,m=f,x=0;x<c.length;x++){var _=c[x];if(_.dataset.precedence===n)m=_;else if(m!==f)break}m?m.parentNode.insertBefore(e,m.nextSibling):(n=a.nodeType===9?a.head:a,n.insertBefore(e,n.firstChild))}function yu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function vu(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var Ol=null;function ep(e,n,a){if(Ol===null){var c=new Map,f=Ol=new Map;f.set(a,c)}else f=Ol,c=f.get(a),c||(c=new Map,f.set(a,c));if(c.has(e))return c;for(c.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var m=a[f];if(!(m[ma]||m[Ee]||e==="link"&&m.getAttribute("rel")==="stylesheet")&&m.namespaceURI!=="http://www.w3.org/2000/svg"){var x=m.getAttribute(n)||"";x=e+x;var _=c.get(x);_?_.push(m):c.set(x,[m])}}return c}function ip(e,n,a){e=e.ownerDocument||e,e.head.insertBefore(a,n==="title"?e.querySelector("head > title"):null)}function Wb(e,n,a){if(a===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return e=n.disabled,typeof n.precedence=="string"&&e==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function np(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Zb(e,n,a,c){if(a.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=Ws(c.href),m=n.querySelector(Ja(f));if(m){n=m._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=kl.bind(e),n.then(e,e)),a.state.loading|=4,a.instance=m,Ae(m);return}m=n.ownerDocument||n,c=Jg(c),(f=Si.get(f))&&yu(c,f),m=m.createElement("link"),Ae(m);var x=m;x._p=new Promise(function(_,R){x.onload=_,x.onerror=R}),Ne(m,"link",c),a.instance=m}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,n),(n=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=kl.bind(e),n.addEventListener("load",a),n.addEventListener("error",a))}}var xu=0;function Jb(e,n){return e.stylesheets&&e.count===0&&jl(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var c=setTimeout(function(){if(e.stylesheets&&jl(e,e.stylesheets),e.unsuspend){var m=e.unsuspend;e.unsuspend=null,m()}},6e4+n);0<e.imgBytes&&xu===0&&(xu=62500*kb());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&jl(e,e.stylesheets),e.unsuspend)){var m=e.unsuspend;e.unsuspend=null,m()}},(e.imgBytes>xu?50:800)+n);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function kl(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)jl(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Ll=null;function jl(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Ll=new Map,n.forEach(ty,e),Ll=null,kl.call(e))}function ty(e,n){if(!(n.state.loading&4)){var a=Ll.get(e);if(a)var c=a.get(null);else{a=new Map,Ll.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),m=0;m<f.length;m++){var x=f[m];(x.nodeName==="LINK"||x.getAttribute("media")!=="not all")&&(a.set(x.dataset.precedence,x),c=x)}c&&a.set(null,c)}f=n.instance,x=f.getAttribute("data-precedence"),m=a.get(x)||c,m===c&&a.set(null,f),a.set(x,f),this.count++,c=kl.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),m?m.parentNode.insertBefore(f,m.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),n.state.loading|=4}}var er={$$typeof:O,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function ey(e,n,a,c,f,m,x,_,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=po(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=po(0),this.hiddenUpdates=po(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=m,this.onRecoverableError=x,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function sp(e,n,a,c,f,m,x,_,R,V,W,J){return e=new ey(e,n,a,x,R,V,W,J,_),n=1,m===!0&&(n|=24),m=ei(3,null,null,n),e.current=m,m.stateNode=e,n=Jo(),n.refCount++,e.pooledCache=n,n.refCount++,m.memoizedState={element:c,isDehydrated:a,cache:n},nc(m),e}function ap(e){return e?(e=Ns,e):Ns}function rp(e,n,a,c,f,m){f=ap(f),c.context===null?c.context=f:c.pendingContext=f,c=Sn(n),c.payload={element:a},m=m===void 0?null:m,m!==null&&(c.callback=m),a=wn(e,c,n),a!==null&&($e(a,e,n),ka(a,e,n))}function lp(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<n?a:n}}function Au(e,n){lp(e,n),(e=e.alternate)&&lp(e,n)}function op(e){if(e.tag===13||e.tag===31){var n=Kn(e,67108864);n!==null&&$e(n,e,67108864),Au(e,67108864)}}function cp(e){if(e.tag===13||e.tag===31){var n=ri();n=mo(n);var a=Kn(e,n);a!==null&&$e(a,e,n),Au(e,n)}}var Bl=!0;function iy(e,n,a,c){var f=j.T;j.T=null;var m=T.p;try{T.p=2,Su(e,n,a,c)}finally{T.p=m,j.T=f}}function ny(e,n,a,c){var f=j.T;j.T=null;var m=T.p;try{T.p=8,Su(e,n,a,c)}finally{T.p=m,j.T=f}}function Su(e,n,a,c){if(Bl){var f=wu(c);if(f===null)ou(e,n,c,Pl,a),hp(e,c);else if(ay(f,e,n,a,c))c.stopPropagation();else if(hp(e,c),n&4&&-1<sy.indexOf(e)){for(;f!==null;){var m=ys(f);if(m!==null)switch(m.tag){case 3:if(m=m.stateNode,m.current.memoizedState.isDehydrated){var x=Gn(m.pendingLanes);if(x!==0){var _=m;for(_.pendingLanes|=2,_.entangledLanes|=2;x;){var R=1<<31-Je(x);_.entanglements[1]|=R,x&=~R}Pi(m),(Ht&6)===0&&(vl=Gt()+500,Ka(0))}}break;case 31:case 13:_=Kn(m,2),_!==null&&$e(_,m,2),Al(),Au(m,2)}if(m=wu(c),m===null&&ou(e,n,c,Pl,a),m===f)break;f=m}f!==null&&c.stopPropagation()}else ou(e,n,c,null,a)}}function wu(e){return e=Eo(e),_u(e)}var Pl=null;function _u(e){if(Pl=null,e=bs(e),e!==null){var n=l(e);if(n===null)e=null;else{var a=n.tag;if(a===13){if(e=o(n),e!==null)return e;e=null}else if(a===31){if(e=u(n),e!==null)return e;e=null}else if(a===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return Pl=e,null}function up(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(hi()){case ue:return 2;case _e:return 8;case Ue:case da:return 32;case fa:return 268435456;default:return 32}default:return 32}}var Eu=!1,Ln=null,jn=null,Bn=null,ir=new Map,nr=new Map,Pn=[],sy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function hp(e,n){switch(e){case"focusin":case"focusout":Ln=null;break;case"dragenter":case"dragleave":jn=null;break;case"mouseover":case"mouseout":Bn=null;break;case"pointerover":case"pointerout":ir.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":nr.delete(n.pointerId)}}function sr(e,n,a,c,f,m){return e===null||e.nativeEvent!==m?(e={blockedOn:n,domEventName:a,eventSystemFlags:c,nativeEvent:m,targetContainers:[f]},n!==null&&(n=ys(n),n!==null&&op(n)),e):(e.eventSystemFlags|=c,n=e.targetContainers,f!==null&&n.indexOf(f)===-1&&n.push(f),e)}function ay(e,n,a,c,f){switch(n){case"focusin":return Ln=sr(Ln,e,n,a,c,f),!0;case"dragenter":return jn=sr(jn,e,n,a,c,f),!0;case"mouseover":return Bn=sr(Bn,e,n,a,c,f),!0;case"pointerover":var m=f.pointerId;return ir.set(m,sr(ir.get(m)||null,e,n,a,c,f)),!0;case"gotpointercapture":return m=f.pointerId,nr.set(m,sr(nr.get(m)||null,e,n,a,c,f)),!0}return!1}function dp(e){var n=bs(e.target);if(n!==null){var a=l(n);if(a!==null){if(n=a.tag,n===13){if(n=o(a),n!==null){e.blockedOn=n,Eh(e.priority,function(){cp(a)});return}}else if(n===31){if(n=u(a),n!==null){e.blockedOn=n,Eh(e.priority,function(){cp(a)});return}}else if(n===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Fl(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var a=wu(e.nativeEvent);if(a===null){a=e.nativeEvent;var c=new a.constructor(a.type,a);_o=c,a.target.dispatchEvent(c),_o=null}else return n=ys(a),n!==null&&op(n),e.blockedOn=a,!1;n.shift()}return!0}function fp(e,n,a){Fl(e)&&a.delete(n)}function ry(){Eu=!1,Ln!==null&&Fl(Ln)&&(Ln=null),jn!==null&&Fl(jn)&&(jn=null),Bn!==null&&Fl(Bn)&&(Bn=null),ir.forEach(fp),nr.forEach(fp)}function zl(e,n){e.blockedOn===n&&(e.blockedOn=null,Eu||(Eu=!0,g.unstable_scheduleCallback(g.unstable_NormalPriority,ry)))}var Il=null;function gp(e){Il!==e&&(Il=e,g.unstable_scheduleCallback(g.unstable_NormalPriority,function(){Il===e&&(Il=null);for(var n=0;n<e.length;n+=3){var a=e[n],c=e[n+1],f=e[n+2];if(typeof c!="function"){if(_u(c||a)===null)continue;break}var m=ys(a);m!==null&&(e.splice(n,3),n-=3,wc(m,{pending:!0,data:f,method:a.method,action:c},c,f))}}))}function Js(e){function n(R){return zl(R,e)}Ln!==null&&zl(Ln,e),jn!==null&&zl(jn,e),Bn!==null&&zl(Bn,e),ir.forEach(n),nr.forEach(n);for(var a=0;a<Pn.length;a++){var c=Pn[a];c.blockedOn===e&&(c.blockedOn=null)}for(;0<Pn.length&&(a=Pn[0],a.blockedOn===null);)dp(a),a.blockedOn===null&&Pn.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],x=f[He]||null;if(typeof m=="function")x||gp(a);else if(x){var _=null;if(m&&m.hasAttribute("formAction")){if(f=m,x=m[He]||null)_=x.formAction;else if(_u(f)!==null)continue}else _=x.action;typeof _=="function"?a[c+1]=_:(a.splice(c,3),c-=3),gp(a)}}}function pp(){function e(m){m.canIntercept&&m.info==="react-transition"&&m.intercept({handler:function(){return new Promise(function(x){return f=x})},focusReset:"manual",scroll:"manual"})}function n(){f!==null&&(f(),f=null),c||setTimeout(a,20)}function a(){if(!c&&!navigation.transition){var m=navigation.currentEntry;m&&m.url!=null&&navigation.navigate(m.url,{state:m.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(a,100),function(){c=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),f!==null&&(f(),f=null)}}}function Cu(e){this._internalRoot=e}Ul.prototype.render=Cu.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(s(409));var a=n.current,c=ri();rp(a,c,e,n,null,null)},Ul.prototype.unmount=Cu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;rp(e.current,2,null,e,null,null),Al(),n[ms]=null}};function Ul(e){this._internalRoot=e}Ul.prototype.unstable_scheduleHydration=function(e){if(e){var n=_h();e={blockedOn:null,target:e,priority:n};for(var a=0;a<Pn.length&&n!==0&&n<Pn[a].priority;a++);Pn.splice(a,0,e),a===0&&dp(e)}};var mp=t.version;if(mp!=="19.2.0")throw Error(s(527,mp,"19.2.0"));T.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(s(188)):(e=Object.keys(e).join(","),Error(s(268,e)));return e=d(n),e=e!==null?p(e):null,e=e===null?null:e.stateNode,e};var ly={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hl.isDisabled&&Hl.supportsFiber)try{Ti=Hl.inject(ly),Le=Hl}catch{}}return rr.createRoot=function(e,n){if(!r(e))throw Error(s(299));var a=!1,c="",f=wf,m=_f,x=Ef;return n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(c=n.identifierPrefix),n.onUncaughtError!==void 0&&(f=n.onUncaughtError),n.onCaughtError!==void 0&&(m=n.onCaughtError),n.onRecoverableError!==void 0&&(x=n.onRecoverableError)),n=sp(e,1,!1,null,null,a,c,null,f,m,x,pp),e[ms]=n.current,lu(e),new Cu(n)},rr.hydrateRoot=function(e,n,a){if(!r(e))throw Error(s(299));var c=!1,f="",m=wf,x=_f,_=Ef,R=null;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(m=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(_=a.onRecoverableError),a.formState!==void 0&&(R=a.formState)),n=sp(e,1,!0,n,a??null,c,f,R,m,x,_,pp),n.context=ap(null),a=n.current,c=ri(),c=mo(c),f=Sn(c),f.callback=null,wn(a,f,c),a=c,n.current.lanes=a,pa(n,a),Pi(n),e[ms]=n.current,lu(e),new Ul(n)},rr.version="19.2.0",rr}var Dp;function yy(){if(Dp)return Mu.exports;Dp=1;function g(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(t){console.error(t)}}return g(),Mu.exports=by(),Mu.exports}var vy=yy(),Jl={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var xy=Jl.exports,Np;function Ay(){return Np||(Np=1,(function(g,t){((i,s)=>{g.exports=s()})(xy,function i(){var s=typeof self<"u"?self:typeof window<"u"?window:s!==void 0?s:{},r,l=!s.document&&!!s.postMessage,o=s.IS_PAPA_WORKER||!1,u={},h=0,d={};function p(D){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(N){var U=I(N);U.chunkSize=parseInt(U.chunkSize),N.step||N.chunk||(U.chunkSize=null),this._handle=new S(U),(this._handle.streamer=this)._config=U}).call(this,D),this.parseChunk=function(N,U){var $=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<$){let st=this._config.newline;st||(tt=this._config.quoteChar||'"',st=this._handle.guessLineEndings(N,tt)),N=[...N.split(st).slice($)].join(st)}this.isFirstChunk&&B(this._config.beforeFirstChunk)&&(tt=this._config.beforeFirstChunk(N))!==void 0&&(N=tt),this.isFirstChunk=!1,this._halted=!1;var $=this._partialLine+N,tt=(this._partialLine="",this._handle.parse($,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(N=tt.meta.cursor,$=(this._finished||(this._partialLine=$.substring(N-this._baseIndex),this._baseIndex=N),tt&&tt.data&&(this._rowCount+=tt.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),o)s.postMessage({results:tt,workerId:d.WORKER_ID,finished:$});else if(B(this._config.chunk)&&!U){if(this._config.chunk(tt,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=tt=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(tt.data),this._completeResults.errors=this._completeResults.errors.concat(tt.errors),this._completeResults.meta=tt.meta),this._completed||!$||!B(this._config.complete)||tt&&tt.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),$||tt&&tt.meta.paused||this._nextChunk(),tt}this._halted=!0},this._sendError=function(N){B(this._config.error)?this._config.error(N):o&&this._config.error&&s.postMessage({workerId:d.WORKER_ID,error:N,finished:!1})}}function b(D){var N;(D=D||{}).chunkSize||(D.chunkSize=d.RemoteChunkSize),p.call(this,D),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(U){this._input=U,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(N=new XMLHttpRequest,this._config.withCredentials&&(N.withCredentials=this._config.withCredentials),l||(N.onload=F(this._chunkLoaded,this),N.onerror=F(this._chunkError,this)),N.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var U,$=this._config.downloadRequestHeaders;for(U in $)N.setRequestHeader(U,$[U])}var tt;this._config.chunkSize&&(tt=this._start+this._config.chunkSize-1,N.setRequestHeader("Range","bytes="+this._start+"-"+tt));try{N.send(this._config.downloadRequestBody)}catch(st){this._chunkError(st.message)}l&&N.status===0&&this._chunkError()}},this._chunkLoaded=function(){N.readyState===4&&(N.status<200||400<=N.status?this._chunkError():(this._start+=this._config.chunkSize||N.responseText.length,this._finished=!this._config.chunkSize||this._start>=(U=>(U=U.getResponseHeader("Content-Range"))!==null?parseInt(U.substring(U.lastIndexOf("/")+1)):-1)(N),this.parseChunk(N.responseText)))},this._chunkError=function(U){U=N.statusText||U,this._sendError(new Error(U))}}function y(D){(D=D||{}).chunkSize||(D.chunkSize=d.LocalChunkSize),p.call(this,D);var N,U,$=typeof FileReader<"u";this.stream=function(tt){this._input=tt,U=tt.slice||tt.webkitSlice||tt.mozSlice,$?((N=new FileReader).onload=F(this._chunkLoaded,this),N.onerror=F(this._chunkError,this)):N=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var tt=this._input,st=(this._config.chunkSize&&(st=Math.min(this._start+this._config.chunkSize,this._input.size),tt=U.call(tt,this._start,st)),N.readAsText(tt,this._config.encoding));$||this._chunkLoaded({target:{result:st}})},this._chunkLoaded=function(tt){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(tt.target.result)},this._chunkError=function(){this._sendError(N.error)}}function A(D){var N;p.call(this,D=D||{}),this.stream=function(U){return N=U,this._nextChunk()},this._nextChunk=function(){var U,$;if(!this._finished)return U=this._config.chunkSize,N=U?($=N.substring(0,U),N.substring(U)):($=N,""),this._finished=!N,this.parseChunk($)}}function w(D){p.call(this,D=D||{});var N=[],U=!0,$=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(tt){this._input=tt,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){$&&N.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),N.length?this.parseChunk(N.shift()):U=!0},this._streamData=F(function(tt){try{N.push(typeof tt=="string"?tt:tt.toString(this._config.encoding)),U&&(U=!1,this._checkIsFinished(),this.parseChunk(N.shift()))}catch(st){this._streamError(st)}},this),this._streamError=F(function(tt){this._streamCleanUp(),this._sendError(tt)},this),this._streamEnd=F(function(){this._streamCleanUp(),$=!0,this._streamData("")},this),this._streamCleanUp=F(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(D){var N,U,$,tt,st=Math.pow(2,53),rt=-st,dt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,j=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,T=this,X=0,et=0,gt=!1,M=!1,H=[],G={data:[],errors:[],meta:{}};function nt(ct){return D.skipEmptyLines==="greedy"?ct.join("").trim()==="":ct.length===1&&ct[0].length===0}function Q(){if(G&&$&&(at("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),$=!1),D.skipEmptyLines&&(G.data=G.data.filter(function(pt){return!nt(pt)})),it()){let pt=function(Pt,Ft){B(D.transformHeader)&&(Pt=D.transformHeader(Pt,Ft)),H.push(Pt)};if(G)if(Array.isArray(G.data[0])){for(var ct=0;it()&&ct<G.data.length;ct++)G.data[ct].forEach(pt);G.data.splice(0,1)}else G.data.forEach(pt)}function lt(pt,Pt){for(var Ft=D.header?{}:[],Nt=0;Nt<pt.length;Nt++){var qt=Nt,Dt=pt[Nt],Dt=((Ze,wt)=>(Wt=>(D.dynamicTypingFunction&&D.dynamicTyping[Wt]===void 0&&(D.dynamicTyping[Wt]=D.dynamicTypingFunction(Wt)),(D.dynamicTyping[Wt]||D.dynamicTyping)===!0))(Ze)?wt==="true"||wt==="TRUE"||wt!=="false"&&wt!=="FALSE"&&((Wt=>{if(dt.test(Wt)&&(Wt=parseFloat(Wt),rt<Wt&&Wt<st))return 1})(wt)?parseFloat(wt):j.test(wt)?new Date(wt):wt===""?null:wt):wt)(qt=D.header?Nt>=H.length?"__parsed_extra":H[Nt]:qt,Dt=D.transform?D.transform(Dt,qt):Dt);qt==="__parsed_extra"?(Ft[qt]=Ft[qt]||[],Ft[qt].push(Dt)):Ft[qt]=Dt}return D.header&&(Nt>H.length?at("FieldMismatch","TooManyFields","Too many fields: expected "+H.length+" fields but parsed "+Nt,et+Pt):Nt<H.length&&at("FieldMismatch","TooFewFields","Too few fields: expected "+H.length+" fields but parsed "+Nt,et+Pt)),Ft}var zt;G&&(D.header||D.dynamicTyping||D.transform)&&(zt=1,!G.data.length||Array.isArray(G.data[0])?(G.data=G.data.map(lt),zt=G.data.length):G.data=lt(G.data,0),D.header&&G.meta&&(G.meta.fields=H),et+=zt)}function it(){return D.header&&H.length===0}function at(ct,lt,zt,pt){ct={type:ct,code:lt,message:zt},pt!==void 0&&(ct.row=pt),G.errors.push(ct)}B(D.step)&&(tt=D.step,D.step=function(ct){G=ct,it()?Q():(Q(),G.data.length!==0&&(X+=ct.data.length,D.preview&&X>D.preview?U.abort():(G.data=G.data[0],tt(G,T))))}),this.parse=function(ct,lt,zt){var pt=D.quoteChar||'"',pt=(D.newline||(D.newline=this.guessLineEndings(ct,pt)),$=!1,D.delimiter?B(D.delimiter)&&(D.delimiter=D.delimiter(ct),G.meta.delimiter=D.delimiter):((pt=((Pt,Ft,Nt,qt,Dt)=>{var Ze,wt,Wt,ci;Dt=Dt||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var ki=0;ki<Dt.length;ki++){for(var ui,qn=Dt[ki],Gt=0,hi=0,ue=0,_e=(Wt=void 0,new E({comments:qt,delimiter:qn,newline:Ft,preview:10}).parse(Pt)),Ue=0;Ue<_e.data.length;Ue++)Nt&&nt(_e.data[Ue])?ue++:(ui=_e.data[Ue].length,hi+=ui,Wt===void 0?Wt=ui:0<ui&&(Gt+=Math.abs(ui-Wt),Wt=ui));0<_e.data.length&&(hi/=_e.data.length-ue),(wt===void 0||Gt<=wt)&&(ci===void 0||ci<hi)&&1.99<hi&&(wt=Gt,Ze=qn,ci=hi)}return{successful:!!(D.delimiter=Ze),bestDelimiter:Ze}})(ct,D.newline,D.skipEmptyLines,D.comments,D.delimitersToGuess)).successful?D.delimiter=pt.bestDelimiter:($=!0,D.delimiter=d.DefaultDelimiter),G.meta.delimiter=D.delimiter),I(D));return D.preview&&D.header&&pt.preview++,N=ct,U=new E(pt),G=U.parse(N,lt,zt),Q(),gt?{meta:{paused:!0}}:G||{meta:{paused:!1}}},this.paused=function(){return gt},this.pause=function(){gt=!0,U.abort(),N=B(D.chunk)?"":N.substring(U.getCharIndex())},this.resume=function(){T.streamer._halted?(gt=!1,T.streamer.parseChunk(N,!0)):setTimeout(T.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,U.abort(),G.meta.aborted=!0,B(D.complete)&&D.complete(G),N=""},this.guessLineEndings=function(Pt,pt){Pt=Pt.substring(0,1048576);var pt=new RegExp(C(pt)+"([^]*?)"+C(pt),"gm"),zt=(Pt=Pt.replace(pt,"")).split("\r"),pt=Pt.split(`
`),Pt=1<pt.length&&pt[0].length<zt[0].length;if(zt.length===1||Pt)return`
`;for(var Ft=0,Nt=0;Nt<zt.length;Nt++)zt[Nt][0]===`
`&&Ft++;return Ft>=zt.length/2?`\r
`:"\r"}}function C(D){return D.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(D){var N=(D=D||{}).delimiter,U=D.newline,$=D.comments,tt=D.step,st=D.preview,rt=D.fastMode,dt=null,j=!1,T=D.quoteChar==null?'"':D.quoteChar,X=T;if(D.escapeChar!==void 0&&(X=D.escapeChar),(typeof N!="string"||-1<d.BAD_DELIMITERS.indexOf(N))&&(N=","),$===N)throw new Error("Comment character same as delimiter");$===!0?$="#":(typeof $!="string"||-1<d.BAD_DELIMITERS.indexOf($))&&($=!1),U!==`
`&&U!=="\r"&&U!==`\r
`&&(U=`
`);var et=0,gt=!1;this.parse=function(M,H,G){if(typeof M!="string")throw new Error("Input must be a string");var nt=M.length,Q=N.length,it=U.length,at=$.length,ct=B(tt),lt=[],zt=[],pt=[],Pt=et=0;if(!M)return Gt();if(rt||rt!==!1&&M.indexOf(T)===-1){for(var Ft=M.split(U),Nt=0;Nt<Ft.length;Nt++){if(pt=Ft[Nt],et+=pt.length,Nt!==Ft.length-1)et+=U.length;else if(G)return Gt();if(!$||pt.substring(0,at)!==$){if(ct){if(lt=[],ci(pt.split(N)),hi(),gt)return Gt()}else ci(pt.split(N));if(st&&st<=Nt)return lt=lt.slice(0,st),Gt(!0)}}return Gt()}for(var qt=M.indexOf(N,et),Dt=M.indexOf(U,et),Ze=new RegExp(C(X)+C(T),"g"),wt=M.indexOf(T,et);;)if(M[et]===T)for(wt=et,et++;;){if((wt=M.indexOf(T,wt+1))===-1)return G||zt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:lt.length,index:et}),ui();if(wt===nt-1)return ui(M.substring(et,wt).replace(Ze,T));if(T===X&&M[wt+1]===X)wt++;else if(T===X||wt===0||M[wt-1]!==X){qt!==-1&&qt<wt+1&&(qt=M.indexOf(N,wt+1));var Wt=ki((Dt=Dt!==-1&&Dt<wt+1?M.indexOf(U,wt+1):Dt)===-1?qt:Math.min(qt,Dt));if(M.substr(wt+1+Wt,Q)===N){pt.push(M.substring(et,wt).replace(Ze,T)),M[et=wt+1+Wt+Q]!==T&&(wt=M.indexOf(T,et)),qt=M.indexOf(N,et),Dt=M.indexOf(U,et);break}if(Wt=ki(Dt),M.substring(wt+1+Wt,wt+1+Wt+it)===U){if(pt.push(M.substring(et,wt).replace(Ze,T)),qn(wt+1+Wt+it),qt=M.indexOf(N,et),wt=M.indexOf(T,et),ct&&(hi(),gt))return Gt();if(st&&lt.length>=st)return Gt(!0);break}zt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:lt.length,index:et}),wt++}}else if($&&pt.length===0&&M.substring(et,et+at)===$){if(Dt===-1)return Gt();et=Dt+it,Dt=M.indexOf(U,et),qt=M.indexOf(N,et)}else if(qt!==-1&&(qt<Dt||Dt===-1))pt.push(M.substring(et,qt)),et=qt+Q,qt=M.indexOf(N,et);else{if(Dt===-1)break;if(pt.push(M.substring(et,Dt)),qn(Dt+it),ct&&(hi(),gt))return Gt();if(st&&lt.length>=st)return Gt(!0)}return ui();function ci(ue){lt.push(ue),Pt=et}function ki(ue){var _e=0;return _e=ue!==-1&&(ue=M.substring(wt+1,ue))&&ue.trim()===""?ue.length:_e}function ui(ue){return G||(ue===void 0&&(ue=M.substring(et)),pt.push(ue),et=nt,ci(pt),ct&&hi()),Gt()}function qn(ue){et=ue,ci(pt),pt=[],Dt=M.indexOf(U,et)}function Gt(ue){if(D.header&&!H&&lt.length&&!j){var _e=lt[0],Ue=Object.create(null),da=new Set(_e);let fa=!1;for(let fn=0;fn<_e.length;fn++){let di=_e[fn];if(Ue[di=B(D.transformHeader)?D.transformHeader(di,fn):di]){let Ti,Le=Ue[di];for(;Ti=di+"_"+Le,Le++,da.has(Ti););da.add(Ti),_e[fn]=Ti,Ue[di]++,fa=!0,(dt=dt===null?{}:dt)[Ti]=di}else Ue[di]=1,_e[fn]=di;da.add(di)}fa&&console.warn("Duplicate headers found and renamed."),j=!0}return{data:lt,errors:zt,meta:{delimiter:N,linebreak:U,aborted:gt,truncated:!!ue,cursor:Pt+(H||0),renamedHeaders:dt}}}function hi(){tt(Gt()),lt=[],zt=[]}},this.abort=function(){gt=!0},this.getCharIndex=function(){return et}}function k(D){var N=D.data,U=u[N.workerId],$=!1;if(N.error)U.userError(N.error,N.file);else if(N.results&&N.results.data){var tt={abort:function(){$=!0,O(N.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:P,resume:P};if(B(U.userStep)){for(var st=0;st<N.results.data.length&&(U.userStep({data:N.results.data[st],errors:N.results.errors,meta:N.results.meta},tt),!$);st++);delete N.results}else B(U.userChunk)&&(U.userChunk(N.results,tt,N.file),delete N.results)}N.finished&&!$&&O(N.workerId,N.results)}function O(D,N){var U=u[D];B(U.userComplete)&&U.userComplete(N),U.terminate(),delete u[D]}function P(){throw new Error("Not implemented.")}function I(D){if(typeof D!="object"||D===null)return D;var N,U=Array.isArray(D)?[]:{};for(N in D)U[N]=I(D[N]);return U}function F(D,N){return function(){D.apply(N,arguments)}}function B(D){return typeof D=="function"}return d.parse=function(D,N){var U=(N=N||{}).dynamicTyping||!1;if(B(U)&&(N.dynamicTypingFunction=U,U={}),N.dynamicTyping=U,N.transform=!!B(N.transform)&&N.transform,!N.worker||!d.WORKERS_SUPPORTED)return U=null,d.NODE_STREAM_INPUT,typeof D=="string"?(D=($=>$.charCodeAt(0)!==65279?$:$.slice(1))(D),U=new(N.download?b:A)(N)):D.readable===!0&&B(D.read)&&B(D.on)?U=new w(N):(s.File&&D instanceof File||D instanceof Object)&&(U=new y(N)),U.stream(D);(U=(()=>{var $;return!!d.WORKERS_SUPPORTED&&($=(()=>{var tt=s.URL||s.webkitURL||null,st=i.toString();return d.BLOB_URL||(d.BLOB_URL=tt.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",st,")();"],{type:"text/javascript"})))})(),($=new s.Worker($)).onmessage=k,$.id=h++,u[$.id]=$)})()).userStep=N.step,U.userChunk=N.chunk,U.userComplete=N.complete,U.userError=N.error,N.step=B(N.step),N.chunk=B(N.chunk),N.complete=B(N.complete),N.error=B(N.error),delete N.worker,U.postMessage({input:D,config:N,workerId:U.id})},d.unparse=function(D,N){var U=!1,$=!0,tt=",",st=`\r
`,rt='"',dt=rt+rt,j=!1,T=null,X=!1,et=((()=>{if(typeof N=="object"){if(typeof N.delimiter!="string"||d.BAD_DELIMITERS.filter(function(H){return N.delimiter.indexOf(H)!==-1}).length||(tt=N.delimiter),typeof N.quotes!="boolean"&&typeof N.quotes!="function"&&!Array.isArray(N.quotes)||(U=N.quotes),typeof N.skipEmptyLines!="boolean"&&typeof N.skipEmptyLines!="string"||(j=N.skipEmptyLines),typeof N.newline=="string"&&(st=N.newline),typeof N.quoteChar=="string"&&(rt=N.quoteChar),typeof N.header=="boolean"&&($=N.header),Array.isArray(N.columns)){if(N.columns.length===0)throw new Error("Option columns is empty");T=N.columns}N.escapeChar!==void 0&&(dt=N.escapeChar+rt),N.escapeFormulae instanceof RegExp?X=N.escapeFormulae:typeof N.escapeFormulae=="boolean"&&N.escapeFormulae&&(X=/^[=+\-@\t\r].*$/)}})(),new RegExp(C(rt),"g"));if(typeof D=="string"&&(D=JSON.parse(D)),Array.isArray(D)){if(!D.length||Array.isArray(D[0]))return gt(null,D,j);if(typeof D[0]=="object")return gt(T||Object.keys(D[0]),D,j)}else if(typeof D=="object")return typeof D.data=="string"&&(D.data=JSON.parse(D.data)),Array.isArray(D.data)&&(D.fields||(D.fields=D.meta&&D.meta.fields||T),D.fields||(D.fields=Array.isArray(D.data[0])?D.fields:typeof D.data[0]=="object"?Object.keys(D.data[0]):[]),Array.isArray(D.data[0])||typeof D.data[0]=="object"||(D.data=[D.data])),gt(D.fields||[],D.data||[],j);throw new Error("Unable to serialize unrecognized input");function gt(H,G,nt){var Q="",it=(typeof H=="string"&&(H=JSON.parse(H)),typeof G=="string"&&(G=JSON.parse(G)),Array.isArray(H)&&0<H.length),at=!Array.isArray(G[0]);if(it&&$){for(var ct=0;ct<H.length;ct++)0<ct&&(Q+=tt),Q+=M(H[ct],ct);0<G.length&&(Q+=st)}for(var lt=0;lt<G.length;lt++){var zt=(it?H:G[lt]).length,pt=!1,Pt=it?Object.keys(G[lt]).length===0:G[lt].length===0;if(nt&&!it&&(pt=nt==="greedy"?G[lt].join("").trim()==="":G[lt].length===1&&G[lt][0].length===0),nt==="greedy"&&it){for(var Ft=[],Nt=0;Nt<zt;Nt++){var qt=at?H[Nt]:Nt;Ft.push(G[lt][qt])}pt=Ft.join("").trim()===""}if(!pt){for(var Dt=0;Dt<zt;Dt++){0<Dt&&!Pt&&(Q+=tt);var Ze=it&&at?H[Dt]:Dt;Q+=M(G[lt][Ze],Dt)}lt<G.length-1&&(!nt||0<zt&&!Pt)&&(Q+=st)}}return Q}function M(H,G){var nt,Q;return H==null?"":H.constructor===Date?JSON.stringify(H).slice(1,25):(Q=!1,X&&typeof H=="string"&&X.test(H)&&(H="'"+H,Q=!0),nt=H.toString().replace(et,dt),(Q=Q||U===!0||typeof U=="function"&&U(H,G)||Array.isArray(U)&&U[G]||((it,at)=>{for(var ct=0;ct<at.length;ct++)if(-1<it.indexOf(at[ct]))return!0;return!1})(nt,d.BAD_DELIMITERS)||-1<nt.indexOf(tt)||nt.charAt(0)===" "||nt.charAt(nt.length-1)===" ")?rt+nt+rt:nt)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!l&&!!s.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=E,d.ParserHandle=S,d.NetworkStreamer=b,d.FileStreamer=y,d.StringStreamer=A,d.ReadableStreamStreamer=w,s.jQuery&&((r=s.jQuery).fn.parse=function(D){var N=D.config||{},U=[];return this.each(function(st){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&s.FileReader)||!this.files||this.files.length===0)return!0;for(var rt=0;rt<this.files.length;rt++)U.push({file:this.files[rt],inputElem:this,instanceConfig:r.extend({},N)})}),$(),this;function $(){if(U.length===0)B(D.complete)&&D.complete();else{var st,rt,dt,j,T=U[0];if(B(D.before)){var X=D.before(T.file,T.inputElem);if(typeof X=="object"){if(X.action==="abort")return st="AbortError",rt=T.file,dt=T.inputElem,j=X.reason,void(B(D.error)&&D.error({name:st},rt,dt,j));if(X.action==="skip")return void tt();typeof X.config=="object"&&(T.instanceConfig=r.extend(T.instanceConfig,X.config))}else if(X==="skip")return void tt()}var et=T.instanceConfig.complete;T.instanceConfig.complete=function(gt){B(et)&&et(gt,T.file,T.inputElem),tt()},d.parse(T.file,T.instanceConfig)}}function tt(){U.splice(0,1),$()}}),o&&(s.onmessage=function(D){D=D.data,d.WORKER_ID===void 0&&D&&(d.WORKER_ID=D.workerId),typeof D.input=="string"?s.postMessage({workerId:d.WORKER_ID,results:d.parse(D.input,D.config),finished:!0}):(s.File&&D.input instanceof File||D.input instanceof Object)&&(D=d.parse(D.input,D.config))&&s.postMessage({workerId:d.WORKER_ID,results:D,finished:!0})}),(b.prototype=Object.create(p.prototype)).constructor=b,(y.prototype=Object.create(p.prototype)).constructor=y,(A.prototype=Object.create(A.prototype)).constructor=A,(w.prototype=Object.create(p.prototype)).constructor=w,d})})(Jl)),Jl.exports}var Sy=Ay();const wy=cy(Sy),_y=g=>new Promise(t=>{const i=[],s=[];let r=null;wy.parse(g,{header:!0,skipEmptyLines:!0,complete:l=>{if(l.errors.length>0&&i.push(...l.errors.map(h=>h.message)),l.data.length===0){t({transactions:[],errors:["No data found in CSV file"]});return}const o=l.meta.fields||[],u=l.data[0];r=Ry.find(h=>h.detect(o,u))||null,r||(i.push("Could not detect bank format. Attempting generic parser..."),r=Oy),console.log(`Detected CSV format: ${r.name}`),l.data.forEach((h,d)=>{try{const p=r.parse(h,d);p&&s.push(p)}catch(p){i.push(`Row ${d+1}: ${p instanceof Error?p.message:"Unknown error"}`)}}),s.length===0&&i.length===0&&i.push("No valid transactions found in CSV file"),t({transactions:s,errors:i})},error:l=>{t({transactions:[],errors:[`Failed to parse CSV: ${l.message}`]})}})}),Ey=(g,t)=>{const i=g.Date||g.date,s=g.Description||g.description,r=g.Category||g.category||"Uncategorized",l=g.Amount||g.amount;if(!i||!s)return console.warn(`Skipping row ${t+1}: Missing required fields`),null;const o=new Date(i);if(isNaN(o.getTime()))throw new Error(`Invalid date: ${i}`);const u=parseFloat(l?.toString().replace(/[$,]/g,"")||"0");if(isNaN(u))throw new Error("Invalid amount format");return{id:`${o.getTime()}-${t}`,date:o,description:s.toString().trim(),category:r.toString().trim(),amount:u,balance:0,isPending:!1,isManual:!1,sortOrder:t}},Cy=(g,t)=>{const i=g["Transaction Date"]||g["Post Date"]||g["Posting Date"],s=g.Description||g.Memo,r=g.Category||g.Type||"Uncategorized",l=g.Amount;if(!i||!s)return null;const o=new Date(i);if(isNaN(o.getTime()))throw new Error(`Invalid date: ${i}`);const u=parseFloat(l?.toString().replace(/[$,]/g,"")||"0");if(isNaN(u))throw new Error("Invalid amount format");return{id:`${o.getTime()}-${t}`,date:o,description:s.toString().trim(),category:r.toString().trim(),amount:u,balance:0,isPending:!1,isManual:!1,sortOrder:t}},Ty=(g,t)=>{const i=g.Date||g["Posted Date"],s=g.Description||g.Payee,r=g.Amount;if(!i||!s)return null;const l=new Date(i);if(isNaN(l.getTime()))throw new Error(`Invalid date: ${i}`);const o=parseFloat(r?.toString().replace(/[$,]/g,"")||"0");if(isNaN(o))throw new Error("Invalid amount format");return{id:`${l.getTime()}-${t}`,date:l,description:s.toString().trim(),category:"Uncategorized",amount:o,balance:0,isPending:!1,isManual:!1,sortOrder:t}},Dy=(g,t)=>{const i=g.Date,s=g.Description,r=g.Amount;if(!i||!s)return null;const l=new Date(i);if(isNaN(l.getTime()))throw new Error(`Invalid date: ${i}`);const o=parseFloat(r?.toString().replace(/[$,]/g,"")||"0");if(isNaN(o))throw new Error("Invalid amount format");return{id:`${l.getTime()}-${t}`,date:l,description:s.toString().trim(),category:"Uncategorized",amount:o,balance:0,isPending:!1,isManual:!1,sortOrder:t}},Ny=(g,t)=>{const i=g["Transaction Date"]||g["Posted Date"],s=g.Description,r=g.Category||"Uncategorized",l=g.Debit||"0",o=g.Credit||"0";if(!i||!s)return null;const u=new Date(i);if(isNaN(u.getTime()))throw new Error(`Invalid date: ${i}`);const h=parseFloat(l.toString().replace(/[$,]/g,""))||0,d=parseFloat(o.toString().replace(/[$,]/g,""))||0,p=d>0?d:-h;return p===0?null:{id:`${u.getTime()}-${t}`,date:u,description:s.toString().trim(),category:r.toString().trim(),amount:p,balance:0,isPending:!1,isManual:!1,sortOrder:t}},My=(g,t)=>{const i=["Date","date","Transaction Date","Post Date","Posted Date","Posting Date"],s=["Description","description","Memo","memo","Payee","payee","Details"],r=["Amount","amount","Transaction Amount"],l=["Category","category","Type","type"],o=i.map(y=>g[y]).find(y=>y),u=s.map(y=>g[y]).find(y=>y),h=r.map(y=>g[y]).find(y=>y),d=l.map(y=>g[y]).find(y=>y)||"Uncategorized";if(!o||!u||!h)return null;const p=new Date(o);if(isNaN(p.getTime()))throw new Error(`Invalid date: ${o}`);const b=parseFloat(h.toString().replace(/[$,]/g,""));if(isNaN(b))throw new Error("Invalid amount format");return{id:`${p.getTime()}-${t}`,date:p,description:u.toString().trim(),category:d.toString().trim(),amount:b,balance:0,isPending:!1,isManual:!1,sortOrder:t}},Ry=[{name:"USAA",detect:g=>{const t=g.join(",").toLowerCase();return t.includes("date")&&(t.includes("description")||t.includes("memo"))&&t.includes("amount")},parse:Ey},{name:"Chase",detect:g=>{const t=g.join(",").toLowerCase();return t.includes("transaction date")||t.includes("posting date")||t.includes("post date")&&t.includes("description")},parse:Cy},{name:"Bank of America",detect:g=>{const t=g.join(",").toLowerCase();return(t.includes("posted date")||t.includes("date"))&&(t.includes("payee")||t.includes("description"))&&t.includes("amount")&&t.includes("running bal")},parse:Ty},{name:"Wells Fargo",detect:g=>{const t=g.join(",").toLowerCase();return t.includes("date")&&t.includes("description")&&t.includes("amount")&&t.includes("check number")},parse:Dy},{name:"Capital One",detect:g=>{const t=g.join(",").toLowerCase();return(t.includes("transaction date")||t.includes("posted date"))&&t.includes("debit")&&t.includes("credit")},parse:Ny}],Oy={name:"Generic",detect:()=>!0,parse:My},Fe=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Hu=[.001,0,0,.001,0,0],Lu=1.35,li={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},zn={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},pr="pdfjs_internal_editor_",_t={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},jt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},ky={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Me={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},to={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ve={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ea={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},lo={ERRORS:0,WARNINGS:1,INFOS:5},mr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},ql={moveTo:0,lineTo:1,curveTo:2,closePath:3},Ly={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let oo=lo.WARNINGS;function jy(g){Number.isInteger(g)&&(oo=g)}function By(){return oo}function co(g){oo>=lo.INFOS&&console.info(`Info: ${g}`)}function St(g){oo>=lo.WARNINGS&&console.warn(`Warning: ${g}`)}function Jt(g){throw new Error(g)}function Bt(g,t){g||Jt(t)}function Py(g){switch(g?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function rm(g,t=null,i=null){if(!g)return null;if(i&&typeof g=="string"&&(i.addDefaultProtocol&&g.startsWith("www.")&&g.match(/\./g)?.length>=2&&(g=`http://${g}`),i.tryConvertEncoding))try{g=Hy(g)}catch{}const s=t?URL.parse(g,t):URL.parse(g);return Py(s)?s:null}function lm(g,t,i=!1){const s=URL.parse(g);return s?(s.hash=t,s.href):i&&rm(g,"http://example.com")?g.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Tt(g,t,i,s=!1){return Object.defineProperty(g,t,{value:i,enumerable:!s,configurable:!0,writable:!1}),i}const gs=(function(){function t(i,s){this.message=i,this.name=s}return t.prototype=new Error,t.constructor=t,t})();class Mp extends gs{constructor(t,i){super(t,"PasswordException"),this.code=i}}class ju extends gs{constructor(t,i){super(t,"UnknownErrorException"),this.details=i}}class qu extends gs{constructor(t){super(t,"InvalidPDFException")}}class no extends gs{constructor(t,i,s){super(t,"ResponseException"),this.status=i,this.missing=s}}class Fy extends gs{constructor(t){super(t,"FormatError")}}class Un extends gs{constructor(t){super(t,"AbortException")}}function om(g){(typeof g!="object"||g?.length===void 0)&&Jt("Invalid argument for bytesToString");const t=g.length,i=8192;if(t<i)return String.fromCharCode.apply(null,g);const s=[];for(let r=0;r<t;r+=i){const l=Math.min(r+i,t),o=g.subarray(r,l);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function xr(g){typeof g!="string"&&Jt("Invalid argument for stringToBytes");const t=g.length,i=new Uint8Array(t);for(let s=0;s<t;++s)i[s]=g.charCodeAt(s)&255;return i}function zy(g){return String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,g&255)}function Iy(){const g=new Uint8Array(4);return g[0]=1,new Uint32Array(g.buffer,0,1)[0]===1}function Uy(){try{return new Function(""),!0}catch{return!1}}class ke{static get isLittleEndian(){return Tt(this,"isLittleEndian",Iy())}static get isEvalSupported(){return Tt(this,"isEvalSupported",Uy())}static get isOffscreenCanvasSupported(){return Tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Tt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:i}=navigator;return Tt(this,"platform",{isAndroid:i.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:i.includes("Firefox")})}static get isCSSRoundSupported(){return Tt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}const Bu=Array.from(Array(256).keys(),g=>g.toString(16).padStart(2,"0"));class ht{static makeHexColor(t,i,s){return`#${Bu[t]}${Bu[i]}${Bu[s]}`}static domMatrixToTransform(t){return[t.a,t.b,t.c,t.d,t.e,t.f]}static scaleMinMax(t,i){let s;t[0]?(t[0]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[0],i[2]*=t[0],t[3]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[3],i[3]*=t[3]):(s=i[0],i[0]=i[1],i[1]=s,s=i[2],i[2]=i[3],i[3]=s,t[1]<0&&(s=i[1],i[1]=i[3],i[3]=s),i[1]*=t[1],i[3]*=t[1],t[2]<0&&(s=i[0],i[0]=i[2],i[2]=s),i[0]*=t[2],i[2]*=t[2]),i[0]+=t[4],i[1]+=t[5],i[2]+=t[4],i[3]+=t[5]}static transform(t,i){return[t[0]*i[0]+t[2]*i[1],t[1]*i[0]+t[3]*i[1],t[0]*i[2]+t[2]*i[3],t[1]*i[2]+t[3]*i[3],t[0]*i[4]+t[2]*i[5]+t[4],t[1]*i[4]+t[3]*i[5]+t[5]]}static multiplyByDOMMatrix(t,i){return[t[0]*i.a+t[2]*i.b,t[1]*i.a+t[3]*i.b,t[0]*i.c+t[2]*i.d,t[1]*i.c+t[3]*i.d,t[0]*i.e+t[2]*i.f+t[4],t[1]*i.e+t[3]*i.f+t[5]]}static applyTransform(t,i,s=0){const r=t[s],l=t[s+1];t[s]=r*i[0]+l*i[2]+i[4],t[s+1]=r*i[1]+l*i[3]+i[5]}static applyTransformToBezier(t,i,s=0){const r=i[0],l=i[1],o=i[2],u=i[3],h=i[4],d=i[5];for(let p=0;p<6;p+=2){const b=t[s+p],y=t[s+p+1];t[s+p]=b*r+y*o+h,t[s+p+1]=b*l+y*u+d}}static applyInverseTransform(t,i){const s=t[0],r=t[1],l=i[0]*i[3]-i[1]*i[2];t[0]=(s*i[3]-r*i[2]+i[2]*i[5]-i[4]*i[3])/l,t[1]=(-s*i[1]+r*i[0]+i[4]*i[1]-i[5]*i[0])/l}static axialAlignedBoundingBox(t,i,s){const r=i[0],l=i[1],o=i[2],u=i[3],h=i[4],d=i[5],p=t[0],b=t[1],y=t[2],A=t[3];let w=r*p+h,S=w,C=r*y+h,E=C,k=u*b+d,O=k,P=u*A+d,I=P;if(l!==0||o!==0){const F=l*p,B=l*y,D=o*b,N=o*A;w+=D,E+=D,C+=N,S+=N,k+=F,I+=F,P+=B,O+=B}s[0]=Math.min(s[0],w,C,S,E),s[1]=Math.min(s[1],k,P,O,I),s[2]=Math.max(s[2],w,C,S,E),s[3]=Math.max(s[3],k,P,O,I)}static inverseTransform(t){const i=t[0]*t[3]-t[1]*t[2];return[t[3]/i,-t[1]/i,-t[2]/i,t[0]/i,(t[2]*t[5]-t[4]*t[3])/i,(t[4]*t[1]-t[5]*t[0])/i]}static singularValueDecompose2dScale(t,i){const s=t[0],r=t[1],l=t[2],o=t[3],u=s**2+r**2,h=s*l+r*o,d=l**2+o**2,p=(u+d)/2,b=Math.sqrt(p**2-(u*d-h**2));i[0]=Math.sqrt(p+b||1),i[1]=Math.sqrt(p-b||1)}static normalizeRect(t){const i=t.slice(0);return t[0]>t[2]&&(i[0]=t[2],i[2]=t[0]),t[1]>t[3]&&(i[1]=t[3],i[3]=t[1]),i}static intersect(t,i){const s=Math.max(Math.min(t[0],t[2]),Math.min(i[0],i[2])),r=Math.min(Math.max(t[0],t[2]),Math.max(i[0],i[2]));if(s>r)return null;const l=Math.max(Math.min(t[1],t[3]),Math.min(i[1],i[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(i[1],i[3]));return l>o?null:[s,l,r,o]}static pointBoundingBox(t,i,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],i),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],i)}static rectBoundingBox(t,i,s,r,l){l[0]=Math.min(l[0],t,s),l[1]=Math.min(l[1],i,r),l[2]=Math.max(l[2],t,s),l[3]=Math.max(l[3],i,r)}static#t(t,i,s,r,l,o,u,h,d,p){if(d<=0||d>=1)return;const b=1-d,y=d*d,A=y*d,w=b*(b*(b*t+3*d*i)+3*y*s)+A*r,S=b*(b*(b*l+3*d*o)+3*y*u)+A*h;p[0]=Math.min(p[0],w),p[1]=Math.min(p[1],S),p[2]=Math.max(p[2],w),p[3]=Math.max(p[3],S)}static#e(t,i,s,r,l,o,u,h,d,p,b,y){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&this.#t(t,i,s,r,l,o,u,h,-b/p,y);return}const A=p**2-4*b*d;if(A<0)return;const w=Math.sqrt(A),S=2*d;this.#t(t,i,s,r,l,o,u,h,(-p+w)/S,y),this.#t(t,i,s,r,l,o,u,h,(-p-w)/S,y)}static bezierBoundingBox(t,i,s,r,l,o,u,h,d){d[0]=Math.min(d[0],t,u),d[1]=Math.min(d[1],i,h),d[2]=Math.max(d[2],t,u),d[3]=Math.max(d[3],i,h),this.#e(t,s,l,u,i,r,o,h,3*(-t+3*(s-l)+u),6*(t-2*s+l),3*(s-t),d),this.#e(t,s,l,u,i,r,o,h,3*(-i+3*(r-o)+h),6*(i-2*r+o),3*(r-i),d)}}function Hy(g){return decodeURIComponent(escape(g))}let Pu=null,Rp=null;function qy(g){return Pu||(Pu=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Rp=new Map([["ﬅ","ſt"]])),g.replaceAll(Pu,(t,i,s)=>i?i.normalize("NFKC"):Rp.get(s))}function cm(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const g=new Uint8Array(32);return crypto.getRandomValues(g),om(g)}const sh="pdfjs_internal_id_";function Gy(g,t,i){if(!Array.isArray(i)||i.length<2)return!1;const[s,r,...l]=i;if(!g(s)&&!Number.isInteger(s)||!t(r))return!1;const o=l.length;let u=!0;switch(r.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;u=!1;break;default:return!1}for(const h of l)if(!(typeof h=="number"||u&&h===null))return!1;return!0}function ze(g,t,i){return Math.min(Math.max(g,t),i)}function um(g){return Uint8Array.prototype.toBase64?g.toBase64():btoa(om(g))}function Vy(g){return Uint8Array.fromBase64?Uint8Array.fromBase64(g):xr(atob(g))}typeof Promise.try!="function"&&(Promise.try=function(g,...t){return new Promise(i=>{i(g(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(g){return g.reduce((t,i)=>t+i,0)});class br{static textContent(t){const i=[],s={items:i,styles:Object.create(null)};function r(l){if(!l)return;let o=null;const u=l.name;if(u==="#text")o=l.value;else if(br.shouldBuildText(u))l?.attributes?.textContent?o=l.attributes.textContent:l.value&&(o=l.value);else return;if(o!==null&&i.push({str:o}),!!l.children)for(const h of l.children)r(h)}return r(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}class hm{static setupStorage(t,i,s,r,l){const o=r.getValue(i,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),l==="print")break;t.addEventListener("change",u=>{r.setValue(i,{value:u.target.checked?u.target.getAttribute("xfaOn"):u.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),l==="print")break;t.addEventListener("input",u=>{r.setValue(i,{value:u.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const u of s.children)u.attributes.value===o.value?u.attributes.selected=!0:u.attributes.hasOwnProperty("selected")&&delete u.attributes.selected}t.addEventListener("input",u=>{const h=u.target.options,d=h.selectedIndex===-1?"":h[h.selectedIndex].value;r.setValue(i,{value:d})});break}}static setAttributes({html:t,element:i,storage:s=null,intent:r,linkService:l}){const{attributes:o}=i,u=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${r}`);for(const[h,d]of Object.entries(o))if(d!=null)switch(h){case"class":d.length&&t.setAttribute(h,d.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",d);break;case"style":Object.assign(t.style,d);break;case"textContent":t.textContent=d;break;default:(!u||h!=="href"&&h!=="newWindow")&&t.setAttribute(h,d)}u&&l.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,i,s)}static render(t){const i=t.annotationStorage,s=t.linkService,r=t.xfaHtml,l=t.intent||"display",o=document.createElement(r.name);r.attributes&&this.setAttributes({html:o,element:r,intent:l,linkService:s});const u=l!=="richText",h=t.div;if(h.append(o),t.viewport){const b=`matrix(${t.viewport.transform.join(",")})`;h.style.transform=b}u&&h.setAttribute("class","xfaLayer xfaFont");const d=[];if(r.children.length===0){if(r.value){const b=document.createTextNode(r.value);o.append(b),u&&br.shouldBuildText(r.name)&&d.push(b)}return{textDivs:d}}const p=[[r,-1,o]];for(;p.length>0;){const[b,y,A]=p.at(-1);if(y+1===b.children.length){p.pop();continue}const w=b.children[++p.at(-1)[1]];if(w===null)continue;const{name:S}=w;if(S==="#text"){const E=document.createTextNode(w.value);d.push(E),A.append(E);continue}const C=w?.attributes?.xmlns?document.createElementNS(w.attributes.xmlns,S):document.createElement(S);if(A.append(C),w.attributes&&this.setAttributes({html:C,element:w,storage:i,intent:l,linkService:s}),w.children?.length>0)p.push([w,-1,C]);else if(w.value){const E=document.createTextNode(w.value);u&&br.shouldBuildText(S)&&d.push(E),C.append(E)}}for(const b of h.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))b.setAttribute("readOnly",!0);return{textDivs:d}}static update(t){const i=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=i,t.div.hidden=!1}}const un="http://www.w3.org/2000/svg";class ha{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}async function Ar(g,t="text"){if(hr(g,document.baseURI)){const i=await fetch(g);if(!i.ok)throw new Error(i.statusText);switch(t){case"arraybuffer":return i.arrayBuffer();case"blob":return i.blob();case"json":return i.json()}return i.text()}return new Promise((i,s)=>{const r=new XMLHttpRequest;r.open("GET",g,!0),r.responseType=t,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(t){case"arraybuffer":case"blob":case"json":i(r.response);return}i(r.responseText);return}s(new Error(r.statusText))}},r.send(null)})}class Sr{constructor({viewBox:t,userUnit:i,scale:s,rotation:r,offsetX:l=0,offsetY:o=0,dontFlip:u=!1}){this.viewBox=t,this.userUnit=i,this.scale=s,this.rotation=r,this.offsetX=l,this.offsetY=o,s*=i;const h=(t[2]+t[0])/2,d=(t[3]+t[1])/2;let p,b,y,A;switch(r%=360,r<0&&(r+=360),r){case 180:p=-1,b=0,y=0,A=1;break;case 90:p=0,b=1,y=1,A=0;break;case 270:p=0,b=-1,y=-1,A=0;break;case 0:p=1,b=0,y=0,A=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}u&&(y=-y,A=-A);let w,S,C,E;p===0?(w=Math.abs(d-t[1])*s+l,S=Math.abs(h-t[0])*s+o,C=(t[3]-t[1])*s,E=(t[2]-t[0])*s):(w=Math.abs(h-t[0])*s+l,S=Math.abs(d-t[1])*s+o,C=(t[2]-t[0])*s,E=(t[3]-t[1])*s),this.transform=[p*s,b*s,y*s,A*s,w-p*s*h-y*s*d,S-b*s*h-A*s*d],this.width=C,this.height=E}get rawDims(){const t=this.viewBox;return Tt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:i=this.rotation,offsetX:s=this.offsetX,offsetY:r=this.offsetY,dontFlip:l=!1}={}){return new Sr({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}convertToViewportPoint(t,i){const s=[t,i];return ht.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const i=[t[0],t[1]];ht.applyTransform(i,this.transform);const s=[t[2],t[3]];return ht.applyTransform(s,this.transform),[i[0],i[1],s[0],s[1]]}convertToPdfPoint(t,i){const s=[t,i];return ht.applyInverseTransform(s,this.transform),s}}class ah extends gs{constructor(t,i=0){super(t,"RenderingCancelledException"),this.extraDelay=i}}function uo(g){const t=g.length;let i=0;for(;i<t&&g[i].trim()==="";)i++;return g.substring(i,i+5).toLowerCase()==="data:"}function rh(g){return typeof g=="string"&&/\.pdf$/i.test(g)}function Yy(g){return[g]=g.split(/[#?]/,1),g.substring(g.lastIndexOf("/")+1)}function Xy(g,t="document.pdf"){if(typeof g!="string")return t;if(uo(g))return St('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const s=(u=>{try{return new URL(u)}catch{try{return new URL(decodeURIComponent(u))}catch{try{return new URL(u,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(u),"https://foo.bar")}catch{return null}}}}})(g);if(!s)return t;const r=u=>{try{let h=decodeURIComponent(u);return h.includes("/")?(h=h.split("/").at(-1),h.test(/^\.pdf$/i)?h:u):h}catch{return u}},l=/\.pdf$/i,o=s.pathname.split("/").at(-1);if(l.test(o))return r(o);if(s.searchParams.size>0){const u=Array.from(s.searchParams.values()).reverse();for(const d of u)if(l.test(d))return r(d);const h=Array.from(s.searchParams.keys()).reverse();for(const d of h)if(l.test(d))return r(d)}if(s.hash){const h=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(s.hash);if(h)return r(h[0])}return t}class Op{started=Object.create(null);times=[];time(t){t in this.started&&St(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||St(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let i=0;for(const{name:s}of this.times)i=Math.max(s.length,i);for(const{name:s,start:r,end:l}of this.times)t.push(`${s.padEnd(i)} ${l-r}ms
`);return t.join("")}}function hr(g,t){const i=t?URL.parse(g,t):URL.parse(g);return i?.protocol==="http:"||i?.protocol==="https:"}function Ci(g){g.preventDefault()}function ce(g){g.preventDefault(),g.stopPropagation()}function $y(g){console.log("Deprecated API usage: "+g)}class Gu{static#t;static toDateObject(t){if(t instanceof Date)return t;if(!t||typeof t!="string")return null;this.#t||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const i=this.#t.exec(t);if(!i)return null;const s=parseInt(i[1],10);let r=parseInt(i[2],10);r=r>=1&&r<=12?r-1:0;let l=parseInt(i[3],10);l=l>=1&&l<=31?l:1;let o=parseInt(i[4],10);o=o>=0&&o<=23?o:0;let u=parseInt(i[5],10);u=u>=0&&u<=59?u:0;let h=parseInt(i[6],10);h=h>=0&&h<=59?h:0;const d=i[7]||"Z";let p=parseInt(i[8],10);p=p>=0&&p<=23?p:0;let b=parseInt(i[9],10)||0;return b=b>=0&&b<=59?b:0,d==="-"?(o+=p,u+=b):d==="+"&&(o-=p,u-=b),new Date(Date.UTC(s,r,l,o,u,h))}}function Ky(g,{scale:t=1,rotation:i=0}){const{width:s,height:r}=g.attributes.style,l=[0,0,parseInt(s),parseInt(r)];return new Sr({viewBox:l,userUnit:1,scale:t,rotation:i})}function wr(g){if(g.startsWith("#")){const t=parseInt(g.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return g.startsWith("rgb(")?g.slice(4,-1).split(",").map(t=>parseInt(t)):g.startsWith("rgba(")?g.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(St(`Not a valid color format: "${g}"`),[0,0,0])}function Qy(g){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const i of g.keys()){t.style.color=i;const s=window.getComputedStyle(t).color;g.set(i,wr(s))}t.remove()}function ae(g){const{a:t,b:i,c:s,d:r,e:l,f:o}=g.getTransform();return[t,i,s,r,l,o]}function Ii(g){const{a:t,b:i,c:s,d:r,e:l,f:o}=g.getTransform().invertSelf();return[t,i,s,r,l,o]}function ds(g,t,i=!1,s=!0){if(t instanceof Sr){const{pageWidth:r,pageHeight:l}=t.rawDims,{style:o}=g,u=ke.isCSSRoundSupported,h=`var(--total-scale-factor) * ${r}px`,d=`var(--total-scale-factor) * ${l}px`,p=u?`round(down, ${h}, var(--scale-round-x))`:`calc(${h})`,b=u?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!i||t.rotation%180===0?(o.width=p,o.height=b):(o.width=b,o.height=p)}s&&g.setAttribute("data-main-rotation",t.rotation)}class Gi{constructor(){const{pixelRatio:t}=Gi;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,i,s,r,l=-1){let o=1/0,u=1/0,h=1/0;s=Gi.capPixels(s,l),s>0&&(o=Math.sqrt(s/(t*i))),r!==-1&&(u=r/t,h=r/i);const d=Math.min(o,u,h);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,i){if(i>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+i/100));return t>0?Math.min(t,s):s}return t}}const Vu=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Wy{static get isDarkMode(){return Tt(this,"isDarkMode",!!window?.matchMedia?.("(prefers-color-scheme: dark)").matches)}}class Zy{static get commentForegroundColor(){const t=document.createElement("span");t.classList.add("comment","sidebar");const{style:i}=t;i.width=i.height="0",i.display="none",i.color="var(--comment-fg-color)",document.body.append(t);const{color:s}=window.getComputedStyle(t);return t.remove(),Tt(this,"commentForegroundColor",wr(s))}}function Jy(g,t,i,s){s=Math.min(Math.max(s??1,0),1);const r=255*(1-s);return g=Math.round(g*s+r),t=Math.round(t*s+r),i=Math.round(i*s+r),[g,t,i]}function kp(g,t){const i=g[0]/255,s=g[1]/255,r=g[2]/255,l=Math.max(i,s,r),o=Math.min(i,s,r),u=(l+o)/2;if(l===o)t[0]=t[1]=0;else{const h=l-o;switch(t[1]=u<.5?h/(l+o):h/(2-l-o),l){case i:t[0]=((s-r)/h+(s<r?6:0))*60;break;case s:t[0]=((r-i)/h+2)*60;break;case r:t[0]=((i-s)/h+4)*60;break}}t[2]=u}function Yu(g,t){const i=g[0],s=g[1],r=g[2],l=(1-Math.abs(2*r-1))*s,o=l*(1-Math.abs(i/60%2-1)),u=r-l/2;switch(Math.floor(i/60)){case 0:t[0]=l+u,t[1]=o+u,t[2]=u;break;case 1:t[0]=o+u,t[1]=l+u,t[2]=u;break;case 2:t[0]=u,t[1]=l+u,t[2]=o+u;break;case 3:t[0]=u,t[1]=o+u,t[2]=l+u;break;case 4:t[0]=o+u,t[1]=u,t[2]=l+u;break;case 5:case 6:t[0]=l+u,t[1]=u,t[2]=o+u;break}}function Lp(g){return g<=.03928?g/12.92:((g+.055)/1.055)**2.4}function jp(g,t,i){Yu(g,i),i.map(Lp);const s=.2126*i[0]+.7152*i[1]+.0722*i[2];Yu(t,i),i.map(Lp);const r=.2126*i[0]+.7152*i[1]+.0722*i[2];return s>r?(s+.05)/(r+.05):(r+.05)/(s+.05)}const Bp=new Map;function tv(g,t){const i=g[0]+g[1]*256+g[2]*65536+t[0]*16777216+t[1]*4294967296+t[2]*1099511627776;let s=Bp.get(i);if(s)return s;const r=new Float32Array(9),l=r.subarray(0,3),o=r.subarray(3,6);kp(g,o);const u=r.subarray(6,9);kp(t,u);const h=u[2]<.5,d=h?12:4.5;if(o[2]=h?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),jp(o,u,l)<d){let p,b;h?(p=o[2],b=1):(p=0,b=o[2]);const y=.005;for(;b-p>y;){const A=o[2]=(p+b)/2;h===jp(o,u,l)<d?p=A:b=A}o[2]=h?b:p}return Yu(o,l),s=ht.makeHexColor(Math.round(l[0]*255),Math.round(l[1]*255),Math.round(l[2]*255)),Bp.set(i,s),s}function dm({html:g,dir:t,className:i},s){const r=document.createDocumentFragment();if(typeof g=="string"){const l=document.createElement("p");l.dir=t||"auto";const o=g.split(/(?:\r\n?|\n)/);for(let u=0,h=o.length;u<h;++u){const d=o[u];l.append(document.createTextNode(d)),u<h-1&&l.append(document.createElement("br"))}r.append(l)}else hm.render({xfaHtml:g,div:r,intent:"richText"});r.firstChild.classList.add("richText",i),s.append(r)}class gr{#t=null;#e=null;#n;#i=null;#r=null;#s=null;#a=null;#l=null;static#c=null;constructor(t){this.#n=t,gr.#c||=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"})}render(){const t=this.#t=document.createElement("div");t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const i=this.#n._uiManager._signal;i instanceof AbortSignal&&!i.aborted&&(t.addEventListener("contextmenu",Ci,{signal:i}),t.addEventListener("pointerdown",gr.#o,{signal:i}));const s=this.#i=document.createElement("div");s.className="buttons",t.append(s);const r=this.#n.toolbarPosition;if(r){const{style:l}=t,o=this.#n._uiManager.direction==="ltr"?1-r[0]:r[0];l.insetInlineEnd=`${100*o}%`,l.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return t}get div(){return this.#t}static#o(t){t.stopPropagation()}#d(t){this.#n._focusEventsAllowed=!1,ce(t)}#h(t){this.#n._focusEventsAllowed=!0,ce(t)}#f(t){const i=this.#n._uiManager._signal;return!(i instanceof AbortSignal)||i.aborted?!1:(t.addEventListener("focusin",this.#d.bind(this),{capture:!0,signal:i}),t.addEventListener("focusout",this.#h.bind(this),{capture:!0,signal:i}),t.addEventListener("contextmenu",Ci,{signal:i}),!0)}hide(){this.#t.classList.add("hidden"),this.#e?.hideDropdown()}show(){this.#t.classList.remove("hidden"),this.#r?.shown(),this.#s?.shown()}addDeleteButton(){const{editorType:t,_uiManager:i}=this.#n,s=document.createElement("button");s.classList.add("basic","deleteButton"),s.tabIndex=0,s.setAttribute("data-l10n-id",gr.#c[t]),this.#f(s)&&s.addEventListener("click",r=>{i.delete()},{signal:i._signal}),this.#i.append(s)}get#m(){const t=document.createElement("div");return t.className="divider",t}async addAltText(t){const i=await t.render();this.#f(i),this.#i.append(i,this.#m),this.#r=t}addComment(t,i=null){if(this.#s)return;const s=t.renderForToolbar();if(!s)return;this.#f(s);const r=this.#a=this.#m;i?(this.#i.insertBefore(s,i),this.#i.insertBefore(r,i)):this.#i.append(s,r),this.#s=t,t.toolbar=this}addColorPicker(t){if(this.#e)return;this.#e=t;const i=t.renderButton();this.#f(i),this.#i.append(i,this.#m)}async addEditSignatureButton(t){const i=this.#l=await t.renderEditButton(this.#n);this.#f(i),this.#i.append(i,this.#m)}removeButton(t){switch(t){case"comment":this.#s?.removeToolbarCommentButton(),this.#s=null,this.#a?.remove(),this.#a=null;break}}async addButton(t,i){switch(t){case"colorPicker":this.addColorPicker(i);break;case"altText":await this.addAltText(i);break;case"editSignature":await this.addEditSignatureButton(i);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(i);break}}async addButtonBefore(t,i,s){const r=this.#i.querySelector(s);r&&t==="comment"&&this.addComment(i,r)}updateEditSignatureButton(t){this.#l&&(this.#l.title=t)}remove(){this.#t.remove(),this.#e?.destroy(),this.#e=null}}class ev{#t=null;#e=null;#n;constructor(t){this.#n=t}#i(){const t=this.#e=document.createElement("div");t.className="editToolbar",t.setAttribute("role","toolbar");const i=this.#n._signal;i instanceof AbortSignal&&!i.aborted&&t.addEventListener("contextmenu",Ci,{signal:i});const s=this.#t=document.createElement("div");return s.className="buttons",t.append(s),this.#n.hasCommentManager()&&this.#s("commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{this.#n.commentSelection("floating_button")}),this.#s("highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{this.#n.highlightSelection("floating_button")}),t}#r(t,i){let s=0,r=0;for(const l of t){const o=l.y+l.height;if(o<s)continue;const u=l.x+(i?l.width:0);if(o>s){r=u,s=o;continue}i?u>r&&(r=u):u<r&&(r=u)}return[i?1-r:r,s]}show(t,i,s){const[r,l]=this.#r(i,s),{style:o}=this.#e||=this.#i();t.append(this.#e),o.insetInlineEnd=`${100*r}%`,o.top=`calc(${100*l}% + var(--editor-toolbar-vert-offset))`}hide(){this.#e.remove()}#s(t,i,s,r){const l=document.createElement("button");l.classList.add("basic",t),l.tabIndex=0,l.setAttribute("data-l10n-id",i);const o=document.createElement("span");l.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",s);const u=this.#n._signal;u instanceof AbortSignal&&!u.aborted&&(l.addEventListener("contextmenu",Ci,{signal:u}),l.addEventListener("click",r,{signal:u})),this.#t.append(l)}}function fm(g,t,i){for(const s of i)t.addEventListener(s,g[s].bind(g))}class iv{#t=0;get id(){return`${pr}${this.#t++}`}}class lh{#t=cm();#e=0;#n=null;static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=t;const l=r.decode().then(()=>(s.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Tt(this,"_isSVGFittingCanvas",l)}async#i(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s===null)return null;if(s?.bitmap)return s.refCounter+=1,s;try{s||={bitmap:null,id:`image_${this.#t}_${this.#e++}`,refCounter:0,isSvg:!1};let r;if(typeof i=="string"?(s.url=i,r=await Ar(i,"blob")):i instanceof File?r=s.file=i:i instanceof Blob&&(r=i),r.type==="image/svg+xml"){const l=lh._isSVGFittingCanvas,o=new FileReader,u=new Image,h=new Promise((d,p)=>{u.onload=()=>{s.bitmap=u,s.isSvg=!0,d()},o.onload=async()=>{const b=s.svgUrl=o.result;u.src=await l?`${b}#svgView(preserveAspectRatio(none))`:b},u.onerror=o.onerror=p});o.readAsDataURL(r),await h}else s.bitmap=await createImageBitmap(r);s.refCounter=1}catch(r){St(r),s=null}return this.#n.set(t,s),s&&this.#n.set(s.id,s),s}async getFromFile(t){const{lastModified:i,name:s,size:r,type:l}=t;return this.#i(`${i}_${s}_${r}_${l}`,t)}async getFromUrl(t){return this.#i(t,t)}async getFromBlob(t,i){const s=await i;return this.#i(t,s)}async getFromId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i)return null;if(i.bitmap)return i.refCounter+=1,i;if(i.file)return this.getFromFile(i.file);if(i.blobPromise){const{blobPromise:s}=i;return delete i.blobPromise,this.getFromBlob(i.id,s)}return this.getFromUrl(i.url)}getFromCanvas(t,i){this.#n||=new Map;let s=this.#n.get(t);if(s?.bitmap)return s.refCounter+=1,s;const r=new OffscreenCanvas(i.width,i.height);return r.getContext("2d").drawImage(i,0,0),s={bitmap:r.transferToImageBitmap(),id:`image_${this.#t}_${this.#e++}`,refCounter:1,isSvg:!1},this.#n.set(t,s),this.#n.set(s.id,s),s}getSvgUrl(t){const i=this.#n.get(t);return i?.isSvg?i.svgUrl:null}deleteId(t){this.#n||=new Map;const i=this.#n.get(t);if(!i||(i.refCounter-=1,i.refCounter!==0))return;const{bitmap:s}=i;if(!i.url&&!i.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),i.blobPromise=r.convertToBlob()}s.close?.(),i.bitmap=null}isValidId(t){return t.startsWith(`image_${this.#t}_`)}}class nv{#t=[];#e=!1;#n;#i=-1;constructor(t=128){this.#n=t}add({cmd:t,undo:i,post:s,mustExec:r,type:l=NaN,overwriteIfSameType:o=!1,keepUndo:u=!1}){if(r&&t(),this.#e)return;const h={cmd:t,undo:i,post:s,type:l};if(this.#i===-1){this.#t.length>0&&(this.#t.length=0),this.#i=0,this.#t.push(h);return}if(o&&this.#t[this.#i].type===l){u&&(h.undo=this.#t[this.#i].undo),this.#t[this.#i]=h;return}const d=this.#i+1;d===this.#n?this.#t.splice(0,1):(this.#i=d,d<this.#t.length&&this.#t.splice(d)),this.#t.push(h)}undo(){if(this.#i===-1)return;this.#e=!0;const{undo:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1,this.#i-=1}redo(){if(this.#i<this.#t.length-1){this.#i+=1,this.#e=!0;const{cmd:t,post:i}=this.#t[this.#i];t(),i?.(),this.#e=!1}}hasSomethingToUndo(){return this.#i!==-1}hasSomethingToRedo(){return this.#i<this.#t.length-1}cleanType(t){if(this.#i!==-1){for(let i=this.#i;i>=0;i--)if(this.#t[i].type!==t){this.#t.splice(i+1,this.#i-i),this.#i=i;return}this.#t.length=0,this.#i=-1}}destroy(){this.#t=null}}class _r{constructor(t){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:i}=ke.platform;for(const[s,r,l={}]of t)for(const o of s){const u=o.startsWith("mac+");i&&u?(this.callbacks.set(o.slice(4),{callback:r,options:l}),this.allKeys.add(o.split("+").at(-1))):!i&&!u&&(this.callbacks.set(o,{callback:r,options:l}),this.allKeys.add(o.split("+").at(-1)))}}#t(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const i=this.buffer.join("+");return this.buffer.length=0,i}exec(t,i){if(!this.allKeys.has(i.key))return;const s=this.callbacks.get(this.#t(i));if(!s)return;const{callback:r,options:{bubbles:l=!1,args:o=[],checker:u=null}}=s;u&&!u(t,i)||(r.bind(t,...o,i)(),l||ce(i))}}class oh{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return Qy(t),Tt(this,"_colors",t)}convert(t){const i=wr(t);if(!window.matchMedia("(forced-colors: active)").matches)return i;for(const[s,r]of this._colors)if(r.every((l,o)=>l===i[o]))return oh._colorsMapping.get(s);return i}getHexCode(t){const i=this._colors.get(t);return i?ht.makeHexColor(...i):t}}class Hn{#t=new AbortController;#e=null;#n=null;#i=new Map;#r=new Map;#s=null;#a=null;#l=null;#c=new nv;#o=null;#d=null;#h=null;#f=0;#m=new Set;#g=null;#u=null;#p=new Set;_editorUndoBar=null;#b=!1;#v=!1;#y=!1;#E=null;#w=null;#x=null;#T=null;#S=!1;#_=null;#M=new iv;#D=!1;#N=!1;#P=!1;#O=null;#L=null;#F=null;#j=null;#G=null;#C=_t.NONE;#A=new Set;#k=null;#z=null;#U=null;#X=null;#Y=null;#$={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1};#H=[0,0];#B=null;#V=null;#Z=null;#J=null;#I=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const t=Hn.prototype,i=o=>o.#V.contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:u})=>{if(u instanceof HTMLInputElement){const{type:h}=u;return h!=="text"&&h!=="number"}return!0},r=this.TRANSLATE_SMALL,l=this.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new _r([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#V.contains(u)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:u})=>!(u instanceof HTMLButtonElement)&&o.#V.contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-l,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[l,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-l],checker:i}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,l],checker:i}]]))}constructor(t,i,s,r,l,o,u,h,d,p,b,y,A,w,S,C){const E=this._signal=this.#t.signal;this.#V=t,this.#Z=i,this.#J=s,this.#s=r,this.#o=l,this.#z=o,this.#Y=h,this._eventBus=u,u._on("editingaction",this.onEditingAction.bind(this),{signal:E}),u._on("pagechanging",this.onPageChanging.bind(this),{signal:E}),u._on("scalechanging",this.onScaleChanging.bind(this),{signal:E}),u._on("rotationchanging",this.onRotationChanging.bind(this),{signal:E}),u._on("setpreference",this.onSetPreference.bind(this),{signal:E}),u._on("switchannotationeditorparams",k=>this.updateParams(k.type,k.value),{signal:E}),window.addEventListener("pointerdown",()=>{this.#N=!0},{capture:!0,signal:E}),window.addEventListener("pointerup",()=>{this.#N=!1},{capture:!0,signal:E}),this.#ot(),this.#dt(),this.#et(),this.#a=h.annotationStorage,this.#E=h.filterFactory,this.#U=d,this.#T=p||null,this.#b=b,this.#v=y,this.#y=A,this.#G=w||null,this.viewParameters={realScale:ha.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=S||null,this._supportsPinchToZoom=C!==!1,l?.setSidebarUiManager(this)}destroy(){this.#I?.resolve(),this.#I=null,this.#t?.abort(),this.#t=null,this._signal=null;for(const t of this.#r.values())t.destroy();this.#r.clear(),this.#i.clear(),this.#p.clear(),this.#j?.clear(),this.#e=null,this.#A.clear(),this.#c.destroy(),this.#s?.destroy(),this.#o?.destroy(),this.#z?.destroy(),this.#_?.hide(),this.#_=null,this.#F?.destroy(),this.#F=null,this.#n=null,this.#w&&(clearTimeout(this.#w),this.#w=null),this.#B&&(clearTimeout(this.#B),this.#B=null),this._editorUndoBar?.destroy(),this.#Y=null}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return this.#G}get useNewAltTextFlow(){return this.#v}get useNewAltTextWhenAddingImage(){return this.#y}get hcmFilter(){return Tt(this,"hcmFilter",this.#U?this.#E.addHCMFilter(this.#U.foreground,this.#U.background):"none")}get direction(){return Tt(this,"direction",getComputedStyle(this.#V).direction)}get _highlightColors(){return Tt(this,"_highlightColors",this.#T?new Map(this.#T.split(",").map(t=>(t=t.split("=").map(i=>i.trim()),t[1]=t[1].toUpperCase(),t))):null)}get highlightColors(){const{_highlightColors:t}=this;if(!t)return Tt(this,"highlightColors",null);const i=new Map,s=!!this.#U;for(const[r,l]of t){const o=r.endsWith("_HCM");if(s&&o){i.set(r.replace("_HCM",""),l);continue}!s&&!o&&i.set(r,l)}return Tt(this,"highlightColors",i)}get highlightColorNames(){return Tt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}getNonHCMColor(t){if(!this._highlightColors)return t;const i=this.highlightColorNames.get(t);return this._highlightColors.get(i)||t}getNonHCMColorName(t){return this.highlightColorNames.get(t)||t}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),this.#h=t}setMainHighlightColorPicker(t){this.#F=t}editAltText(t,i=!1){this.#s?.editAltText(this,t,i)}hasCommentManager(){return!!this.#o}editComment(t,i,s,r){this.#o?.showDialog(this,t,i,s,r)}selectComment(t,i){this.#r.get(t)?.getEditorByUID(i)?.toggleComment(!0,!0)}updateComment(t){this.#o?.updateComment(t.getData())}updatePopupColor(t){this.#o?.updatePopupColor(t)}removeComment(t){this.#o?.removeComments([t.uid])}toggleComment(t,i,s=void 0){this.#o?.toggleCommentPopup(t,i,s)}makeCommentColor(t,i){return t&&this.#o?.makeCommentColor(t,i)||null}getCommentDialogElement(){return this.#o?.dialogElement||null}async waitForEditorsRendered(t){if(this.#r.has(t-1))return;const{resolve:i,promise:s}=Promise.withResolvers(),r=l=>{l.pageNumber===t&&(this._eventBus._off("editorsrendered",r),i())};this._eventBus.on("editorsrendered",r),await s}getSignature(t){this.#z?.getSignature({uiManager:this,editor:t})}get signatureManager(){return this.#z}switchToMode(t,i){this._eventBus.on("annotationeditormodechanged",i,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,i){this._eventBus.dispatch("setpreference",{source:this,name:t,value:i})}onSetPreference({name:t,value:i}){switch(t){case"enableNewAltTextWhenAddingImage":this.#y=i;break}}onPageChanging({pageNumber:t}){this.#f=t-1}focusMainContainer(){this.#V.focus()}findParent(t,i){for(const s of this.#r.values()){const{x:r,y:l,width:o,height:u}=s.div.getBoundingClientRect();if(t>=r&&t<=r+o&&i>=l&&i<=l+u)return s}return null}disableUserSelect(t=!1){this.#Z.classList.toggle("noUserSelect",t)}addShouldRescale(t){this.#p.add(t)}removeShouldRescale(t){this.#p.delete(t)}onScaleChanging({scale:t}){this.commitOrRemove(),this.viewParameters.realScale=t*ha.PDF_TO_CSS_UNITS;for(const i of this.#p)i.onScaleChanging();this.#h?.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}#W({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t}#tt(t){const{currentLayer:i}=this;if(i.hasTextLayer(t))return i;for(const s of this.#r.values())if(s.hasTextLayer(t))return s;return null}highlightSelection(t="",i=!1){const s=document.getSelection();if(!s||s.isCollapsed)return;const{anchorNode:r,anchorOffset:l,focusNode:o,focusOffset:u}=s,h=s.toString(),p=this.#W(s).closest(".textLayer"),b=this.getSelectionBoxes(p);if(!b)return;s.empty();const y=this.#tt(p),A=this.#C===_t.NONE,w=()=>{const S=y?.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:b,anchorNode:r,anchorOffset:l,focusNode:o,focusOffset:u,text:h});A&&this.showAllEditors("highlight",!0,!0),i&&S?.editComment()};if(A){this.switchToMode(_t.HIGHLIGHT,w);return}w()}commentSelection(t=""){this.highlightSelection(t,!0)}#rt(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=this.#W(t).closest(".textLayer"),r=this.getSelectionBoxes(s);r&&(this.#_||=new ev(this),this.#_.show(s,r,this.direction==="ltr"))}getAndRemoveDataFromAnnotationStorage(t){if(!this.#a)return null;const i=`${pr}${t}`,s=this.#a.getRawValue(i);return s&&this.#a.remove(i),s}addToAnnotationStorage(t){!t.isEmpty()&&this.#a&&!this.#a.has(t.id)&&this.#a.setValue(t.id,t)}a11yAlert(t,i=null){const s=this.#J;s&&(s.setAttribute("data-l10n-id",t),i?s.setAttribute("data-l10n-args",JSON.stringify(i)):s.removeAttribute("data-l10n-args"))}#lt(){const t=document.getSelection();if(!t||t.isCollapsed){this.#k&&(this.#_?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}const{anchorNode:i}=t;if(i===this.#k)return;const r=this.#W(t).closest(".textLayer");if(!r){this.#k&&(this.#_?.hide(),this.#k=null,this.#R({hasSelectedText:!1}));return}if(this.#_?.hide(),this.#k=i,this.#R({hasSelectedText:!0}),!(this.#C!==_t.HIGHLIGHT&&this.#C!==_t.NONE)&&(this.#C===_t.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),this.#S=this.isShiftKeyDown,!this.isShiftKeyDown)){const l=this.#C===_t.HIGHLIGHT?this.#tt(r):null;if(l?.toggleDrawing(),this.#N){const o=new AbortController,u=this.combinedSignal(o),h=d=>{d.type==="pointerup"&&d.button!==0||(o.abort(),l?.toggleDrawing(!0),d.type==="pointerup"&&this.#K("main_toolbar"))};window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("blur",h,{signal:u})}else l?.toggleDrawing(!0),this.#K("main_toolbar")}}#K(t=""){this.#C===_t.HIGHLIGHT?this.highlightSelection(t):this.#b&&this.#rt()}#ot(){document.addEventListener("selectionchange",this.#lt.bind(this),{signal:this._signal})}#ct(){if(this.#x)return;this.#x=new AbortController;const t=this.combinedSignal(this.#x);window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})}#ut(){this.#x?.abort(),this.#x=null}blur(){if(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const i of this.#A)if(i.div.contains(t)){this.#L=[i,t],i._focusEventsAllowed=!1;break}}focus(){if(!this.#L)return;const[t,i]=this.#L;this.#L=null,i.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),i.focus()}#et(){if(this.#O)return;this.#O=new AbortController;const t=this.combinedSignal(this.#O);window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})}#ht(){this.#O?.abort(),this.#O=null}#it(){if(this.#d)return;this.#d=new AbortController;const t=this.combinedSignal(this.#d);document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})}#nt(){this.#d?.abort(),this.#d=null}#dt(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})}addEditListeners(){this.#et(),this.#it()}removeEditListeners(){this.#ht(),this.#nt()}dragOver(t){for(const{type:i}of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const i of t.dataTransfer.items)for(const s of this.#u)if(s.isHandlingMimeForPasting(i.type)){s.paste(i,this.currentLayer),t.preventDefault();return}}copy(t){if(t.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const i=[];for(const s of this.#A){const r=s.serialize(!0);r&&i.push(r)}i.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(i))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:i}=t;for(const l of i.items)for(const o of this.#u)if(o.isHandlingMimeForPasting(l.type)){o.paste(l,this.currentLayer);return}let s=i.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(l){St(`paste: "${l.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const r=this.currentLayer;try{const l=[];for(const h of s){const d=await r.deserialize(h);if(!d)return;l.push(d)}const o=()=>{for(const h of l)this.#st(h);this.#at(l)},u=()=>{for(const h of l)h.remove()};this.addCommands({cmd:o,undo:u,mustExec:!0})}catch(l){St(`paste: "${l.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),this.#C!==_t.NONE&&!this.isEditorHandlingKeyboard&&Hn._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,this.#S&&(this.#S=!1,this.#K("main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}#R(t){Object.entries(t).some(([s,r])=>this.#$[s]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#$,t)}),this.#C===_t.HIGHLIGHT&&t.hasSelectedEditor===!1&&this.#q([[jt.HIGHLIGHT_FREE,!0]]))}#q(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})}setEditingState(t){t?(this.#ct(),this.#it(),this.#R({isEditing:this.#C!==_t.NONE,isEmpty:this.#Q(),hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:this.#c.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#ut(),this.#nt(),this.#R({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!this.#u){this.#u=t;for(const i of this.#u)this.#q(i.defaultPropertiesToUpdate)}}getId(){return this.#M.id}get currentLayer(){return this.#r.get(this.#f)}getLayer(t){return this.#r.get(t)}get currentPageIndex(){return this.#f}addLayer(t){this.#r.set(t.pageIndex,t),this.#D?t.enable():t.disable()}removeLayer(t){this.#r.delete(t.pageIndex)}async updateMode(t,i=null,s=!1,r=!1,l=!1){if(this.#C!==t&&!(this.#I&&(await this.#I.promise,!this.#I))){if(this.#I=Promise.withResolvers(),this.#h?.commitOrRemove(),this.#C===_t.POPUP&&this.#o?.hideSidebar(),this.#o?.destroyPopup(),this.#C=t,t===_t.NONE){this.setEditingState(!1),this.#gt();for(const o of this.#i.values())o.hideStandaloneCommentButton();this._editorUndoBar?.hide(),this.toggleComment(null),this.#I.resolve();return}for(const o of this.#i.values())o.addStandaloneCommentButton();t===_t.SIGNATURE&&await this.#z?.loadSignatures(),this.setEditingState(!0),await this.#ft(),this.unselectAll();for(const o of this.#r.values())o.updateMode(t);if(t===_t.POPUP){this.#n||=await this.#Y.getAnnotationsByType(new Set(this.#u.map(h=>h._editorType)));const o=new Set,u=[];for(const h of this.#i.values()){const{annotationElementId:d,hasComment:p,deleted:b}=h;d&&o.add(d),p&&!b&&u.push(h.getData())}for(const h of this.#n){const{id:d,popupRef:p,contentsObj:b}=h;p&&b?.str&&!o.has(d)&&!this.#m.has(d)&&u.push(h)}this.#o?.showSidebar(u)}if(!i){s&&this.addNewEditorFromKeyboard(),this.#I.resolve();return}for(const o of this.#i.values())o.uid===i?(this.setSelected(o),l?o.editComment():r?o.enterInEditMode():o.focus()):o.unselect();this.#I.resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==this.#C&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,i){if(this.#u){switch(t){case jt.CREATE:this.currentLayer.addNewEditor(i);return;case jt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(this.#X||=new Map).set(t,i),this.showAllEditors("highlight",i);break}if(this.hasSelection)for(const s of this.#A)s.updateParams(t,i);else for(const s of this.#u)s.updateDefaultParams(t,i)}}showAllEditors(t,i,s=!1){for(const l of this.#i.values())l.editorType===t&&l.show(i);(this.#X?.get(jt.HIGHLIGHT_SHOW_ALL)??!0)!==i&&this.#q([[jt.HIGHLIGHT_SHOW_ALL,i]])}enableWaiting(t=!1){if(this.#P!==t){this.#P=t;for(const i of this.#r.values())t?i.disableClick():i.enableClick(),i.div.classList.toggle("waiting",t)}}async#ft(){if(!this.#D){this.#D=!0;const t=[];for(const i of this.#r.values())t.push(i.enable());await Promise.all(t);for(const i of this.#i.values())i.enable()}}#gt(){if(this.unselectAll(),this.#D){this.#D=!1;for(const t of this.#r.values())t.disable();for(const t of this.#i.values())t.disable()}}*getEditors(t){for(const i of this.#i.values())i.pageIndex===t&&(yield i)}getEditor(t){return this.#i.get(t)}addEditor(t){this.#i.set(t.id,t)}removeEditor(t){t.div.contains(document.activeElement)&&(this.#w&&clearTimeout(this.#w),this.#w=setTimeout(()=>{this.focusMainContainer(),this.#w=null},0)),this.#i.delete(t.id),t.annotationElementId&&this.#j?.delete(t.annotationElementId),this.unselect(t),(!t.annotationElementId||!this.#m.has(t.annotationElementId))&&this.#a?.remove(t.id)}addDeletedAnnotationElement(t){this.#m.add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return this.#m.has(t)}removeDeletedAnnotationElement(t){this.#m.delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}#st(t){const i=this.#r.get(t.pageIndex);i?i.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))}setActiveEditor(t){this.#e!==t&&(this.#e=t,t&&this.#q(t.propertiesToUpdate))}get#pt(){let t=null;for(t of this.#A);return t}updateUI(t){this.#pt===t&&this.#q(t.propertiesToUpdate)}updateUIForDefaultProperties(t){this.#q(t.defaultPropertiesToUpdate)}toggleSelected(t){if(this.#A.has(t)){this.#A.delete(t),t.unselect(),this.#R({hasSelectedEditor:this.hasSelection});return}this.#A.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}setSelected(t){this.updateToolbar({mode:t.mode,editId:t.id}),this.#h?.commitOrRemove();for(const i of this.#A)i!==t&&i.unselect();this.#A.clear(),this.#A.add(t),t.select(),this.#q(t.propertiesToUpdate),this.#R({hasSelectedEditor:!0})}isSelected(t){return this.#A.has(t)}get firstSelectedEditor(){return this.#A.values().next().value}unselect(t){t.unselect(),this.#A.delete(t),this.#R({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#A.size!==0}get isEnterHandled(){return this.#A.size===1&&this.firstSelectedEditor.isEnterHandled}undo(){this.#c.undo(),this.#R({hasSomethingToUndo:this.#c.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#Q()}),this._editorUndoBar?.hide()}redo(){this.#c.redo(),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:this.#c.hasSomethingToRedo(),isEmpty:this.#Q()})}addCommands(t){this.#c.add(t),this.#R({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#Q()})}cleanUndoStack(t){this.#c.cleanType(t)}#Q(){if(this.#i.size===0)return!0;if(this.#i.size===1)for(const t of this.#i.values())return t.isEmpty();return!1}delete(){this.commitOrRemove();const t=this.currentLayer?.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const i=t?[t]:[...this.#A],s=()=>{this._editorUndoBar?.show(r,i.length===1?i[0].editorType:i.length);for(const l of i)l.remove()},r=()=>{for(const l of i)this.#st(l)};this.addCommands({cmd:s,undo:r,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#at(t){for(const i of this.#A)i.unselect();this.#A.clear();for(const i of t)i.isEmpty()||(this.#A.add(i),i.select());this.#R({hasSelectedEditor:this.hasSelection})}selectAll(){for(const t of this.#A)t.commit();this.#at(this.#i.values())}unselectAll(){if(!(this.#e&&(this.#e.commitOrRemove(),this.#C!==_t.NONE))&&!this.#h?.commitOrRemove()&&this.hasSelection){for(const t of this.#A)t.unselect();this.#A.clear(),this.#R({hasSelectedEditor:!1})}}translateSelectedEditors(t,i,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;this.#H[0]+=t,this.#H[1]+=i;const[r,l]=this.#H,o=[...this.#A],u=1e3;this.#B&&clearTimeout(this.#B),this.#B=setTimeout(()=>{this.#B=null,this.#H[0]=this.#H[1]=0,this.addCommands({cmd:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(r,l),h.translationDone())},undo:()=>{for(const h of o)this.#i.has(h.id)&&(h.translateInPage(-r,-l),h.translationDone())},mustExec:!1})},u);for(const h of o)h.translateInPage(t,i),h.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#g=new Map;for(const t of this.#A)this.#g.set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#g)return!1;this.disableUserSelect(!1);const t=this.#g;this.#g=null;let i=!1;for(const[{x:r,y:l,pageIndex:o},u]of t)u.newX=r,u.newY=l,u.newPageIndex=o,i||=r!==u.savedX||l!==u.savedY||o!==u.savedPageIndex;if(!i)return!1;const s=(r,l,o,u)=>{if(this.#i.has(r.id)){const h=this.#r.get(u);h?r._setParentAndPosition(h,l,o):(r.pageIndex=u,r.x=l,r.y=o)}};return this.addCommands({cmd:()=>{for(const[r,{newX:l,newY:o,newPageIndex:u}]of t)s(r,l,o,u)},undo:()=>{for(const[r,{savedX:l,savedY:o,savedPageIndex:u}]of t)s(r,l,o,u)},mustExec:!0}),!0}dragSelectedEditors(t,i){if(this.#g)for(const s of this.#g.keys())s.drag(t,i)}rebuild(t){if(t.parent===null){const i=this.getLayer(t.pageIndex);i?(i.changeParent(t),i.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){return this.getActive()?.shouldGetKeyboardEvents()||this.#A.size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return this.#e===t}getActive(){return this.#e}getMode(){return this.#C}isEditingMode(){return this.#C!==_t.NONE}get imageManager(){return Tt(this,"imageManager",new lh)}getSelectionBoxes(t){if(!t)return null;const i=document.getSelection();for(let d=0,p=i.rangeCount;d<p;d++)if(!t.contains(i.getRangeAt(d).commonAncestorContainer))return null;const{x:s,y:r,width:l,height:o}=t.getBoundingClientRect();let u;switch(t.getAttribute("data-main-rotation")){case"90":u=(d,p,b,y)=>({x:(p-r)/o,y:1-(d+b-s)/l,width:y/o,height:b/l});break;case"180":u=(d,p,b,y)=>({x:1-(d+b-s)/l,y:1-(p+y-r)/o,width:b/l,height:y/o});break;case"270":u=(d,p,b,y)=>({x:1-(p+y-r)/o,y:(d-s)/l,width:y/o,height:b/l});break;default:u=(d,p,b,y)=>({x:(d-s)/l,y:(p-r)/o,width:b/l,height:y/o});break}const h=[];for(let d=0,p=i.rangeCount;d<p;d++){const b=i.getRangeAt(d);if(!b.collapsed)for(const{x:y,y:A,width:w,height:S}of b.getClientRects())w===0||S===0||h.push(u(y,A,w,S))}return h.length===0?null:h}addChangedExistingAnnotation({annotationElementId:t,id:i}){(this.#l||=new Map).set(t,i)}removeChangedExistingAnnotation({annotationElementId:t}){this.#l?.delete(t)}renderAnnotationElement(t){const i=this.#l?.get(t.data.id);if(!i)return;const s=this.#a.getRawValue(i);s&&(this.#C===_t.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,i,s){const r=this.#j?.get(t);r&&(r.setCanvas(i,s),this.#j.delete(t))}addMissingCanvas(t,i){(this.#j||=new Map).set(t,i)}}class qi{#t=null;#e=!1;#n=null;#i=null;#r=null;#s=null;#a=!1;#l=null;#c=null;#o=null;#d=null;#h=!1;static#f=null;static _l10n=null;constructor(t){this.#c=t,this.#h=t._uiManager.useNewAltTextFlow,qi.#f||=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"})}static initialize(t){qi._l10n??=t}async render(){const t=this.#n=document.createElement("button");t.className="altText",t.tabIndex="0";const i=this.#i=document.createElement("span");t.append(i),this.#h?(t.classList.add("new"),t.setAttribute("data-l10n-id",qi.#f.missing),i.setAttribute("data-l10n-id",qi.#f["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=this.#c._uiManager._signal;t.addEventListener("contextmenu",Ci,{signal:s}),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),this.#c._uiManager.editAltText(this.#c),this.#h&&this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:this.#m}})};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#a=!0,r(l))},{signal:s}),await this.#g(),t}get#m(){return this.#t&&"added"||this.#t===null&&this.guessedText&&"review"||"missing"}finish(){this.#n&&(this.#n.focus({focusVisible:this.#a}),this.#a=!1)}isEmpty(){return this.#h?this.#t===null:!this.#t&&!this.#e}hasData(){return this.#h?this.#t!==null||!!this.#o:this.isEmpty()}get guessedText(){return this.#o}async setGuessedText(t){this.#t===null&&(this.#o=t,this.#d=await qi._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t}),this.#g())}toggleAltTextBadge(t=!1){if(!this.#h||this.#t){this.#l?.remove(),this.#l=null;return}if(!this.#l){const i=this.#l=document.createElement("div");i.className="noAltTextBadge",this.#c.div.append(i)}this.#l.classList.toggle("hidden",!t)}serialize(t){let i=this.#t;return!t&&this.#o===i&&(i=this.#d),{altText:i,decorative:this.#e,guessedText:this.#o,textWithDisclaimer:this.#d}}get data(){return{altText:this.#t,decorative:this.#e}}set data({altText:t,decorative:i,guessedText:s,textWithDisclaimer:r,cancel:l=!1}){s&&(this.#o=s,this.#d=r),!(this.#t===t&&this.#e===i)&&(l||(this.#t=t,this.#e=i),this.#g())}toggle(t=!1){this.#n&&(!t&&this.#s&&(clearTimeout(this.#s),this.#s=null),this.#n.disabled=!t)}shown(){this.#c._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:this.#m}})}destroy(){this.#n?.remove(),this.#n=null,this.#i=null,this.#r=null,this.#l?.remove(),this.#l=null}async#g(){const t=this.#n;if(!t)return;if(this.#h){if(t.classList.toggle("done",!!this.#t),t.setAttribute("data-l10n-id",qi.#f[this.#m]),this.#i?.setAttribute("data-l10n-id",qi.#f[`${this.#m}-label`]),!this.#t){this.#r?.remove();return}}else{if(!this.#t&&!this.#e){t.classList.remove("done"),this.#r?.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=this.#r;if(!i){this.#r=i=document.createElement("span"),i.className="tooltip",i.setAttribute("role","tooltip"),i.id=`alt-text-tooltip-${this.#c.id}`;const r=100,l=this.#c._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(this.#s),this.#s=null},{once:!0}),t.addEventListener("mouseenter",()=>{this.#s=setTimeout(()=>{this.#s=null,this.#r.classList.add("show"),this.#c._reportTelemetry({action:"alt_text_tooltip"})},r)},{signal:l}),t.addEventListener("mouseleave",()=>{this.#s&&(clearTimeout(this.#s),this.#s=null),this.#r?.classList.remove("show")},{signal:l})}this.#e?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=this.#t),i.parentNode||t.append(i),this.#c.getElementForAltText()?.setAttribute("aria-describedby",i.id)}}class Gl{#t=null;#e=null;#n=!1;#i=null;#r=null;#s=null;#a=null;#l=null;#c=!1;#o=null;constructor(t){this.#i=t}renderForToolbar(){const t=this.#e=document.createElement("button");return t.className="comment",this.#d(t,!1)}renderForStandalone(){const t=this.#t=document.createElement("button");t.className="annotationCommentButton";const i=this.#i.commentButtonPosition;if(i){const{style:s}=t;s.insetInlineEnd=`calc(${100*(this.#i._uiManager.direction==="ltr"?1-i[0]:i[0])}% - var(--comment-button-dim))`,s.top=`calc(${100*i[1]}% - var(--comment-button-dim))`;const r=this.#i.commentButtonColor;r&&(s.backgroundColor=r)}return this.#d(t,!0)}focusButton(){setTimeout(()=>{(this.#t??this.#e)?.focus()},0)}onUpdatedColor(){if(!this.#t)return;const t=this.#i.commentButtonColor;t&&(this.#t.style.backgroundColor=t),this.#i._uiManager.updatePopupColor(this.#i)}get commentButtonWidth(){return(this.#t?.getBoundingClientRect().width??0)/this.#i.parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(this.#o)return this.#o;if(!this.#t)return null;const{x:t,y:i,height:s}=this.#t.getBoundingClientRect(),{x:r,y:l,width:o,height:u}=this.#i.parent.boundingClientRect;return[(t-r)/o,(i+s-l)/u]}set commentPopupPositionInLayer(t){this.#o=t}hasDefaultPopupPosition(){return this.#o===null}removeStandaloneCommentButton(){this.#t?.remove(),this.#t=null}removeToolbarCommentButton(){this.#e?.remove(),this.#e=null}setCommentButtonStates({selected:t,hasPopup:i}){this.#t&&(this.#t.classList.toggle("selected",t),this.#t.ariaExpanded=i)}#d(t,i){if(!this.#i._uiManager.hasCommentManager())return null;t.tabIndex="0",t.ariaHasPopup="dialog",i?(t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(t.ariaControlsElements=[this.#i._uiManager.getCommentDialogElement()],t.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const s=this.#i._uiManager._signal;if(!(s instanceof AbortSignal)||s.aborted)return t;t.addEventListener("contextmenu",Ci,{signal:s}),i&&(t.addEventListener("focusin",l=>{this.#i._focusEventsAllowed=!1,ce(l)},{capture:!0,signal:s}),t.addEventListener("focusout",l=>{this.#i._focusEventsAllowed=!0,ce(l)},{capture:!0,signal:s})),t.addEventListener("pointerdown",l=>l.stopPropagation(),{signal:s});const r=l=>{l.preventDefault(),t===this.#e?this.edit():this.#i.toggleComment(!0)};return t.addEventListener("click",r,{capture:!0,signal:s}),t.addEventListener("keydown",l=>{l.target===t&&l.key==="Enter"&&(this.#n=!0,r(l))},{signal:s}),t.addEventListener("pointerenter",()=>{this.#i.toggleComment(!1,!0)},{signal:s}),t.addEventListener("pointerleave",()=>{this.#i.toggleComment(!1,!1)},{signal:s}),t}edit(t){const i=this.commentPopupPositionInLayer;let s,r;if(i)[s,r]=i;else{[s,r]=this.#i.commentButtonPosition;const{width:p,height:b,x:y,y:A}=this.#i;s=y+s*p,r=A+r*b}const l=this.#i.parent.boundingClientRect,{x:o,y:u,width:h,height:d}=l;this.#i._uiManager.editComment(this.#i,o+s*h,u+r*d,{...t,parentDimensions:l})}finish(){this.#e&&(this.#e.focus({focusVisible:this.#n}),this.#n=!1)}isDeleted(){return this.#c||this.#a===""}isEmpty(){return this.#a===null}hasBeenEdited(){return this.isDeleted()||this.#a!==this.#r}serialize(){return this.data}get data(){return{text:this.#a,richText:this.#s,date:this.#l,deleted:this.isDeleted()}}set data(t){if(t!==this.#a&&(this.#s=null),t===null){this.#a="",this.#c=!0;return}this.#a=t,this.#l=new Date,this.#c=!1}setInitialText(t,i=null){this.#r=t,this.data=t,this.#l=null,this.#s=i}shown(){}destroy(){this.#e?.remove(),this.#e=null,this.#t?.remove(),this.#t=null,this.#a="",this.#s=null,this.#l=null,this.#i=null,this.#n=!1,this.#c=!1}}class ho{#t;#e=!1;#n=null;#i;#r;#s;#a;#l=null;#c;#o=null;#d;#h=null;constructor({container:t,isPinchingDisabled:i=null,isPinchingStopped:s=null,onPinchStart:r=null,onPinching:l=null,onPinchEnd:o=null,signal:u}){this.#t=t,this.#n=s,this.#i=i,this.#r=r,this.#s=l,this.#a=o,this.#d=new AbortController,this.#c=AbortSignal.any([u,this.#d.signal]),t.addEventListener("touchstart",this.#f.bind(this),{passive:!1,signal:this.#c})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Gi.pixelRatio}#f(t){if(this.#i?.())return;if(t.touches.length===1){if(this.#l)return;const r=this.#l=new AbortController,l=AbortSignal.any([this.#c,r.signal]),o=this.#t,u={capture:!0,signal:l,passive:!1},h=d=>{d.pointerType==="touch"&&(this.#l?.abort(),this.#l=null)};o.addEventListener("pointerdown",d=>{d.pointerType==="touch"&&(ce(d),h(d))},u),o.addEventListener("pointerup",h,u),o.addEventListener("pointercancel",h,u);return}if(!this.#h){this.#h=new AbortController;const r=AbortSignal.any([this.#c,this.#h.signal]),l=this.#t,o={signal:r,capture:!1,passive:!1};l.addEventListener("touchmove",this.#m.bind(this),o);const u=this.#g.bind(this);l.addEventListener("touchend",u,o),l.addEventListener("touchcancel",u,o),o.capture=!0,l.addEventListener("pointerdown",ce,o),l.addEventListener("pointermove",ce,o),l.addEventListener("pointercancel",ce,o),l.addEventListener("pointerup",ce,o),this.#r?.()}if(ce(t),t.touches.length!==2||this.#n?.()){this.#o=null;return}let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]),this.#o={touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY}}#m(t){if(!this.#o||t.touches.length!==2)return;ce(t);let[i,s]=t.touches;i.identifier>s.identifier&&([i,s]=[s,i]);const{screenX:r,screenY:l}=i,{screenX:o,screenY:u}=s,h=this.#o,{touch0X:d,touch0Y:p,touch1X:b,touch1Y:y}=h,A=b-d,w=y-p,S=o-r,C=u-l,E=Math.hypot(S,C)||1,k=Math.hypot(A,w)||1;if(!this.#e&&Math.abs(k-E)<=ho.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(h.touch0X=r,h.touch0Y=l,h.touch1X=o,h.touch1Y=u,!this.#e){this.#e=!0;return}const O=[(r+o)/2,(l+u)/2];this.#s?.(O,k,E)}#g(t){t.touches.length>=2||(this.#h&&(this.#h.abort(),this.#h=null,this.#a?.()),this.#o&&(ce(t),this.#o=null,this.#e=!1))}destroy(){this.#d?.abort(),this.#d=null,this.#l?.abort(),this.#l=null}}class bt{#t=null;#e=null;#n=null;#i=null;#r=null;#s=!1;#a=null;#l="";#c=null;#o=null;#d=null;#h=null;#f=null;#m="";#g=!1;#u=null;#p=!1;#b=!1;#v=!1;#y=null;#E=0;#w=0;#x=null;#T=null;isSelected=!1;_isCopy=!1;_editToolbar=null;_initialOptions=Object.create(null);_initialData=null;_isVisible=!0;_uiManager=null;_focusEventsAllowed=!0;static _l10n=null;static _l10nResizer=null;#S=!1;#_=bt._zIndex++;static _borderLineWidth=-1;static _colorManager=new oh;static _zIndex=1;static _telemetryTimeout=1e3;static get _resizerKeyboardManager(){const t=bt.prototype._resizeWithKeyboard,i=Hn.TRANSLATE_SMALL,s=Hn.TRANSLATE_BIG;return Tt(this,"_resizerKeyboardManager",new _r([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-i,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[i,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-i]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,i]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],bt.prototype._stopResizingWithKeyboard]]))}constructor(t){this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null,this.annotationElementId=t.annotationElementId||null,this.creationDate=t.creationDate||new Date,this.modificationDate=t.modificationDate||null;const{rotation:i,rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:o}}=this.parent.viewport;this.rotation=i,this.pageRotation=(360+i-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,r],this.pageTranslation=[l,o];const[u,h]=this.parentDimensions;this.x=t.x/u,this.y=t.y/h,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return Tt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const i=new sv({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});i.annotationElementId=t.annotationElementId,i.deleted=!0,i._uiManager.addToAnnotationStorage(i)}static initialize(t,i){if(bt._l10n??=t,bt._l10nResizer||=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"}),bt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);bt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,i){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,i){Jt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#S}set _isDraggable(t){this.#S=t,this.div?.classList.toggle("draggable",t)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[t,i]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*i/(t*2),this.y+=this.width*t/(i*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*i/(t*2),this.y-=this.width*t/(i*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#_}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):(this.#B(),this.#h?.remove(),this.#h=null),this.parent=t}focusin(t){this._focusEventsAllowed&&(this.#g?this.#g=!1:this.parent.setSelected(this))}focusout(t){!this._focusEventsAllowed||!this.isAttachedToDOM||t.relatedTarget?.closest(`#${this.id}`)||(t.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,i,s,r){const[l,o]=this.parentDimensions;[s,r]=this.screenToPageTranslation(s,r),this.x=(t+s)/l,this.y=(i+r)/o,this.fixAndSetPosition()}_moveAfterPaste(t,i){const[s,r]=this.parentDimensions;this.setAt(t*s,i*r,this.width*s,this.height*r),this._onTranslated()}#M([t,i],s,r){[s,r]=this.screenToPageTranslation(s,r),this.x+=s/t,this.y+=r/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}translate(t,i){this.#M(this.parentDimensions,t,i)}translateInPage(t,i){this.#u||=[this.x,this.y,this.width,this.height],this.#M(this.pageDimensions,t,i),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,i){this.#u||=[this.x,this.y,this.width,this.height];const{div:s,parentDimensions:[r,l]}=this;if(this.x+=t/r,this.y+=i/l,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:b,y}=this.div.getBoundingClientRect();this.parent.findNewParent(this,b,y)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:u}=this;const[h,d]=this.getBaseTranslation();o+=h,u+=d;const{style:p}=s;p.left=`${(100*o).toFixed(2)}%`,p.top=`${(100*u).toFixed(2)}%`,this._onTranslating(o,u),s.scrollIntoView({block:"nearest"})}_onTranslating(t,i){}_onTranslated(t,i){}get _hasBeenMoved(){return!!this.#u&&(this.#u[0]!==this.x||this.#u[1]!==this.y)}get _hasBeenResized(){return!!this.#u&&(this.#u[2]!==this.width||this.#u[3]!==this.height)}getBaseTranslation(){const[t,i]=this.parentDimensions,{_borderLineWidth:s}=bt,r=s/t,l=s/i;switch(this.rotation){case 90:return[-r,l];case 180:return[r,l];case 270:return[r,-l];default:return[-r,-l]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:i},pageDimensions:[s,r]}=this;let{x:l,y:o,width:u,height:h}=this;if(u*=s,h*=r,l*=s,o*=r,this._mustFixPosition)switch(t){case 0:l=ze(l,0,s-u),o=ze(o,0,r-h);break;case 90:l=ze(l,0,s-h),o=ze(o,u,r);break;case 180:l=ze(l,u,s),o=ze(o,h,r);break;case 270:l=ze(l,h,s),o=ze(o,0,r-u);break}this.x=l/=s,this.y=o/=r;const[d,p]=this.getBaseTranslation();l+=d,o+=p,i.left=`${(100*l).toFixed(2)}%`,i.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}static#D(t,i,s){switch(s){case 90:return[i,-t];case 180:return[-t,-i];case 270:return[-i,t];default:return[t,i]}}screenToPageTranslation(t,i){return bt.#D(t,i,this.parentRotation)}pageTranslationToScreen(t,i){return bt.#D(t,i,360-this.parentRotation)}#N(t){switch(t){case 90:{const[i,s]=this.pageDimensions;return[0,-i/s,s/i,0]}case 180:return[-1,0,0,-1];case 270:{const[i,s]=this.pageDimensions;return[0,i/s,-s/i,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[i,s]}=this;return[i*t,s*t]}setDims(){const{div:{style:t},width:i,height:s}=this;t.width=`${(100*i).toFixed(2)}%`,t.height=`${(100*s).toFixed(2)}%`}getInitialTranslation(){return[0,0]}#P(){if(this.#c)return;this.#c=document.createElement("div"),this.#c.classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],i=this._uiManager._signal;for(const s of t){const r=document.createElement("div");this.#c.append(r),r.classList.add("resizer",s),r.setAttribute("data-resizer-name",s),r.addEventListener("pointerdown",this.#O.bind(this,s),{signal:i}),r.addEventListener("contextmenu",Ci,{signal:i}),r.tabIndex=-1}this.div.prepend(this.#c)}#O(t,i){i.preventDefault();const{isMac:s}=ke.platform;if(i.button!==0||i.ctrlKey&&s)return;this.#n?.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,this.#o=[i.screenX,i.screenY];const l=new AbortController,o=this._uiManager.combinedSignal(l);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",this.#j.bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",ce,{passive:!1,signal:o}),window.addEventListener("contextmenu",Ci,{signal:o}),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const u=this.parent.div.style.cursor,h=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(i.target).cursor;const d=()=>{l.abort(),this.parent.togglePointerEvents(!0),this.#n?.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=u,this.div.style.cursor=h,this.#F()};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})}#L(t,i,s,r){this.width=s,this.height=r,this.x=t,this.y=i,this.setDims(),this.fixAndSetPosition(),this._onResized()}_onResized(){}#F(){if(!this.#d)return;const{savedX:t,savedY:i,savedWidth:s,savedHeight:r}=this.#d;this.#d=null;const l=this.x,o=this.y,u=this.width,h=this.height;l===t&&o===i&&u===s&&h===r||this.addCommands({cmd:this.#L.bind(this,l,o,u,h),undo:this.#L.bind(this,t,i,s,r),mustExec:!0})}static _round(t){return Math.round(t*1e4)/1e4}#j(t,i){const[s,r]=this.parentDimensions,l=this.x,o=this.y,u=this.width,h=this.height,d=bt.MIN_SIZE/s,p=bt.MIN_SIZE/r,b=this.#N(this.rotation),y=(j,T)=>[b[0]*j+b[2]*T,b[1]*j+b[3]*T],A=this.#N(360-this.rotation),w=(j,T)=>[A[0]*j+A[2]*T,A[1]*j+A[3]*T];let S,C,E=!1,k=!1;switch(t){case"topLeft":E=!0,S=(j,T)=>[0,0],C=(j,T)=>[j,T];break;case"topMiddle":S=(j,T)=>[j/2,0],C=(j,T)=>[j/2,T];break;case"topRight":E=!0,S=(j,T)=>[j,0],C=(j,T)=>[0,T];break;case"middleRight":k=!0,S=(j,T)=>[j,T/2],C=(j,T)=>[0,T/2];break;case"bottomRight":E=!0,S=(j,T)=>[j,T],C=(j,T)=>[0,0];break;case"bottomMiddle":S=(j,T)=>[j/2,T],C=(j,T)=>[j/2,0];break;case"bottomLeft":E=!0,S=(j,T)=>[0,T],C=(j,T)=>[j,0];break;case"middleLeft":k=!0,S=(j,T)=>[0,T/2],C=(j,T)=>[j,T/2];break}const O=S(u,h),P=C(u,h);let I=y(...P);const F=bt._round(l+I[0]),B=bt._round(o+I[1]);let D=1,N=1,U,$;if(i.fromKeyboard)({deltaX:U,deltaY:$}=i);else{const{screenX:j,screenY:T}=i,[X,et]=this.#o;[U,$]=this.screenToPageTranslation(j-X,T-et),this.#o[0]=j,this.#o[1]=T}if([U,$]=w(U/s,$/r),E){const j=Math.hypot(u,h);D=N=Math.max(Math.min(Math.hypot(P[0]-O[0]-U,P[1]-O[1]-$)/j,1/u,1/h),d/u,p/h)}else k?D=ze(Math.abs(P[0]-O[0]-U),d,1)/u:N=ze(Math.abs(P[1]-O[1]-$),p,1)/h;const tt=bt._round(u*D),st=bt._round(h*N);I=y(...C(tt,st));const rt=F-I[0],dt=B-I[1];this.#u||=[this.x,this.y,this.width,this.height],this.width=tt,this.height=st,this.x=rt,this.y=dt,this.setDims(),this.fixAndSetPosition(),this._onResizing()}_onResizing(){}altTextFinish(){this.#n?.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||this.#b)return this._editToolbar;this._editToolbar=new gr(this),this.div.append(this._editToolbar.render());const{toolbarButtons:t}=this;if(t)for(const[i,s]of t)await this._editToolbar.addButton(i,s);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){this._editToolbar?.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){this._editToolbar?.removeButton("comment")}removeEditToolbar(){this._editToolbar?.remove(),this._editToolbar=null,this.#n?.destroy()}addContainer(t){const i=this._editToolbar?.div;i?i.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return this.#n||(qi.initialize(bt._l10n),this.#n=new qi(this),this.#t&&(this.#n.data=this.#t,this.#t=null)),this.#n}get altTextData(){return this.#n?.data}set altTextData(t){this.#n&&(this.#n.data=t)}get guessedAltText(){return this.#n?.guessedText}async setGuessedAltText(t){await this.#n?.setGuessedText(t)}serializeAltText(t){return this.#n?.serialize(t)}hasAltText(){return!!this.#n&&!this.#n.isEmpty()}hasAltTextData(){return this.#n?.hasData()??!1}focusCommentButton(){this.#i?.focusButton()}addCommentButton(){return this.#i||=new Gl(this)}addStandaloneCommentButton(){if(this.#r){this._uiManager.isEditingMode()&&this.#r.classList.remove("hidden");return}this.hasComment&&(this.#r=this.#i.renderForStandalone(),this.div.append(this.#r))}removeStandaloneCommentButton(){this.#i.removeStandaloneCommentButton(),this.#r=null}hideStandaloneCommentButton(){this.#r?.classList.add("hidden")}get comment(){const{data:{richText:t,text:i,date:s,deleted:r}}=this.#i;return{text:i,richText:t,date:s,deleted:r,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(t){this.#i||=new Gl(this),this.#i.data=t,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:t,popupRef:i,richText:s}){if(!i||(this.#i||=new Gl(this),this.#i.setInitialText(t,s),!this.annotationElementId))return;const r=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);r&&this.updateFromAnnotationLayer(r)}get hasEditedComment(){return this.#i?.hasBeenEdited()}get hasDeletedComment(){return this.#i?.isDeleted()}get hasComment(){return!!this.#i&&!this.#i.isEmpty()&&!this.#i.isDeleted()}async editComment(t){this.#i||=new Gl(this),this.#i.edit(t)}toggleComment(t,i=void 0){this.hasComment&&this._uiManager.toggleComment(this,t,i)}setSelectedCommentButton(t){this.#i.setSelectedButton(t)}addComment(t){if(this.hasEditedComment){const[,,,r]=t.rect,[l]=this.pageDimensions,[o]=this.pageTranslation,u=o+l+1,h=r-100,d=u+180;t.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[u,h,d,r]}}}updateFromAnnotationLayer({popup:{contents:t,deleted:i}}){this.#i.data=i?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=this.#s?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),this.#U();const[i,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/i).toFixed(2)}%`,t.style.maxHeight=`${(100*i/s).toFixed(2)}%`);const[r,l]=this.getInitialTranslation();return this.translate(r,l),fm(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(this.#T||=new ho({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:this.#G.bind(this),onPinching:this.#C.bind(this),onPinchEnd:this.#A.bind(this),signal:this._uiManager._signal})),this.addStandaloneCommentButton(),this._uiManager._editorUndoBar?.hide(),t}#G(){this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height},this.#n?.toggle(!1),this.parent.togglePointerEvents(!1)}#C(t,i,s){let l=.7*(s/i)+1-.7;if(l===1)return;const o=this.#N(this.rotation),u=(F,B)=>[o[0]*F+o[2]*B,o[1]*F+o[3]*B],[h,d]=this.parentDimensions,p=this.x,b=this.y,y=this.width,A=this.height,w=bt.MIN_SIZE/h,S=bt.MIN_SIZE/d;l=Math.max(Math.min(l,1/y,1/A),w/y,S/A);const C=bt._round(y*l),E=bt._round(A*l);if(C===y&&E===A)return;this.#u||=[p,b,y,A];const k=u(y/2,A/2),O=bt._round(p+k[0]),P=bt._round(b+k[1]),I=u(C/2,E/2);this.x=O-I[0],this.y=P-I[1],this.width=C,this.height=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}#A(){this.#n?.toggle(!0),this.parent.togglePointerEvents(!0),this.#F()}pointerdown(t){const{isMac:i}=ke.platform;if(t.button!==0||t.ctrlKey&&i){t.preventDefault();return}if(this.#g=!0,this._isDraggable){this.#z(t);return}this.#k(t)}#k(t){const{isMac:i}=ke.platform;t.ctrlKey&&!i||t.shiftKey||t.metaKey&&i?this.parent.toggleSelected(this):this.parent.setSelected(this)}#z(t){const{isSelected:i}=this;this._uiManager.setUpDragSession();let s=!1;const r=new AbortController,l=this._uiManager.combinedSignal(r),o={capture:!0,passive:!1,signal:l},u=d=>{r.abort(),this.#a=null,this.#g=!1,this._uiManager.endDragSession()||this.#k(d),s&&this._onStopDragging()};i&&(this.#E=t.clientX,this.#w=t.clientY,this.#a=t.pointerId,this.#l=t.pointerType,window.addEventListener("pointermove",d=>{s||(s=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:b,pointerId:y}=d;if(y!==this.#a){ce(d);return}const[A,w]=this.screenToPageTranslation(p-this.#E,b-this.#w);this.#E=p,this.#w=b,this._uiManager.dragSelectedEditors(A,w)},o),window.addEventListener("touchmove",ce,o),window.addEventListener("pointerdown",d=>{d.pointerType===this.#l&&(this.#T||d.isPrimary)&&u(d),ce(d)},o));const h=d=>{if(!this.#a||this.#a===d.pointerId){u(d);return}ce(d)};window.addEventListener("pointerup",h,{signal:l}),window.addEventListener("blur",h,{signal:l})}_onStartDragging(){}_onStopDragging(){}moveInDOM(){this.#y&&clearTimeout(this.#y),this.#y=setTimeout(()=>{this.#y=null,this.parent?.moveEditorInDOM(this)},0)}_setParentAndPosition(t,i,s){t.changeParent(this),this.x=i,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,i,s=this.rotation){const r=this.parentScale,[l,o]=this.pageDimensions,[u,h]=this.pageTranslation,d=t/r,p=i/r,b=this.x*l,y=this.y*o,A=this.width*l,w=this.height*o;switch(s){case 0:return[b+d+u,o-y-p-w+h,b+d+A+u,o-y-p+h];case 90:return[b+p+u,o-y+d+h,b+p+w+u,o-y+d+A+h];case 180:return[b-d-A+u,o-y+p+h,b-d+u,o-y+p+w+h];case 270:return[b-p-w+u,o-y-d-A+h,b-p+u,o-y-d+h];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,i){const[s,r,l,o]=t,u=l-s,h=o-r;switch(this.rotation){case 0:return[s,i-o,u,h];case 90:return[s,i-r,h,u];case 180:return[l,i-r,u,h];case 270:return[l,i-o,h,u];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&bt._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){this.#i?.onUpdatedColor()}getData(){const{comment:{text:t,color:i,date:s,opacity:r,deleted:l,richText:o},uid:u,pageIndex:h,creationDate:d,modificationDate:p}=this;return{id:u,pageIndex:h,rect:this.getPDFRect(),richText:o,contentsObj:{str:t},creationDate:d,modificationDate:s||p,popupRef:!l,color:i,opacity:r}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),this.#b=!0,!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),this.#b=!1,!0):!1}isInEditMode(){return this.#b}shouldGetKeyboardEvents(){return this.#v}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:i,bottom:s,right:r}=this.getClientDimensions(),{innerHeight:l,innerWidth:o}=window;return i<o&&r>0&&t<l&&s>0}#U(){if(this.#f||!this.div)return;this.#f=new AbortController;const t=this._uiManager.combinedSignal(this.#f);this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})}rebuild(){this.#U()}rotate(t){}resize(){}serializeDeleted(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:this._initialData?.popupRef||""}}serialize(t=!1,i=null){return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:this._initialData?.popupRef||""}}static async deserialize(t,i,s){const r=new this.prototype.constructor({parent:i,id:i.getNextId(),uiManager:s,annotationElementId:t.annotationElementId,creationDate:t.creationDate,modificationDate:t.modificationDate});r.rotation=t.rotation,r.#t=t.accessibilityData,r._isCopy=t.isCopy||!1;const[l,o]=r.pageDimensions,[u,h,d,p]=r.getRectInCurrentCoords(t.rect,o);return r.x=u/l,r.y=h/o,r.width=d/l,r.height=p/o,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){if(this.#f?.abort(),this.#f=null,this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#y&&(clearTimeout(this.#y),this.#y=null),this.#B(),this.removeEditToolbar(),this.#x){for(const t of this.#x.values())clearTimeout(t);this.#x=null}this.parent=null,this.#T?.destroy(),this.#T=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#P(),this.#c.classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[t,i]}=this,[s,r,l,o]=this.getPDFRect();return[bt._round(s+(l-s)*t),bt._round(r+(o-r)*(1-i))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return this.#i.commentPopupPositionInLayer}set commentPopupPosition(t){this.#i.commentPopupPositionInLayer=t}hasDefaultPopupPosition(){return this.#i.hasDefaultPopupPosition()}get commentButtonWidth(){return this.#i.commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(t){this.#i.setCommentButtonStates(t)}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),this.#d={savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height};const i=this.#c.children;if(!this.#e){this.#e=Array.from(i);const o=this.#X.bind(this),u=this.#Y.bind(this),h=this._uiManager._signal;for(const d of this.#e){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:h}),d.addEventListener("blur",u,{signal:h}),d.addEventListener("focus",this.#$.bind(this,p),{signal:h}),d.setAttribute("data-l10n-id",bt._l10nResizer[p])}}const s=this.#e[0];let r=0;for(const o of i){if(o===s)break;r++}const l=(360-this.rotation+this.parentRotation)%360/90*(this.#e.length/4);if(l!==r){if(l<r)for(let u=0;u<r-l;u++)this.#c.append(this.#c.firstChild);else if(l>r)for(let u=0;u<l-r;u++)this.#c.firstChild.before(this.#c.lastChild);let o=0;for(const u of i){const d=this.#e[o++].getAttribute("data-resizer-name");u.setAttribute("data-l10n-id",bt._l10nResizer[d])}}this.#H(0),this.#v=!0,this.#c.firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}#X(t){bt._resizerKeyboardManager.exec(this,t)}#Y(t){this.#v&&t.relatedTarget?.parentNode!==this.#c&&this.#B()}#$(t){this.#m=this.#v?t:""}#H(t){if(this.#e)for(const i of this.#e)i.tabIndex=t}_resizeWithKeyboard(t,i){this.#v&&this.#j(this.#m,{deltaX:t,deltaY:i,fromKeyboard:!0})}#B(){this.#v=!1,this.#H(-1),this.#F()}_stopResizingWithKeyboard(){this.#B(),this.div.focus()}select(){if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),this.div?.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{this.div?.classList.contains("selectedEditor")&&this._editToolbar?.show()});return}this._editToolbar?.show(),this.#n?.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>this.div?.focus({preventScroll:!0}),0)}unselect(){this.isSelected&&(this.isSelected=!1,this.#c?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),this._editToolbar?.hide(),this.#n?.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(t,i){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){t.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return this.#p}set isEditing(t){this.#p=t,this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,i=!1){if(i){this.#x||=new Map;const{action:s}=t;let r=this.#x.get(s);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(t),this.#x.delete(s),this.#x.size===0&&(this.#x=null)},bt._telemetryTimeout),this.#x.set(s,r);return}t.type||=this.editorType,this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),this.#s=!1}disable(){this.div&&(this.div.tabIndex=-1),this.#s=!0}updateFakeAnnotationElement(t){if(!this.#h&&!this.deleted){this.#h=t.addFakeAnnotation(this);return}if(this.deleted){this.#h.remove(),this.#h=null;return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&this.#h.updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;let i=t.container.querySelector(".annotationContent");if(!i)i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),t.container.prepend(i);else if(i.nodeName==="CANVAS"){const s=i;i=document.createElement("div"),i.classList.add("annotationContent",this.editorType),s.before(i)}return i}resetAnnotationElement(t){const{firstChild:i}=t.container;i?.nodeName==="DIV"&&i.classList.contains("annotationContent")&&i.remove()}}class sv extends bt{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Pp=3285377520,wi=4294901760,Ui=65535;class gm{constructor(t){this.h1=t?t&4294967295:Pp,this.h2=t?t&4294967295:Pp}update(t){let i,s;if(typeof t=="string"){i=new Uint8Array(t.length*2),s=0;for(let S=0,C=t.length;S<C;S++){const E=t.charCodeAt(S);E<=255?i[s++]=E:(i[s++]=E>>>8,i[s++]=E&255)}}else if(ArrayBuffer.isView(t))i=t.slice(),s=i.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=s>>2,l=s-r*4,o=new Uint32Array(i.buffer,0,r);let u=0,h=0,d=this.h1,p=this.h2;const b=3432918353,y=461845907,A=b&Ui,w=y&Ui;for(let S=0;S<r;S++)S&1?(u=o[S],u=u*b&wi|u*A&Ui,u=u<<15|u>>>17,u=u*y&wi|u*w&Ui,d^=u,d=d<<13|d>>>19,d=d*5+3864292196):(h=o[S],h=h*b&wi|h*A&Ui,h=h<<15|h>>>17,h=h*y&wi|h*w&Ui,p^=h,p=p<<13|p>>>19,p=p*5+3864292196);switch(u=0,l){case 3:u^=i[r*4+2]<<16;case 2:u^=i[r*4+1]<<8;case 1:u^=i[r*4],u=u*b&wi|u*A&Ui,u=u<<15|u>>>17,u=u*y&wi|u*w&Ui,r&1?d^=u:p^=u}this.h1=d,this.h2=p}hexdigest(){let t=this.h1,i=this.h2;return t^=i>>>1,t=t*3981806797&wi|t*36045&Ui,i=i*4283543511&wi|((i<<16|t>>>16)*2950163797&wi)>>>16,t^=i>>>1,t=t*444984403&wi|t*60499&Ui,i=i*3301882366&wi|((i<<16|t>>>16)*3120437893&wi)>>>16,t^=i>>>1,(t>>>0).toString(16).padStart(8,"0")+(i>>>0).toString(16).padStart(8,"0")}}const Xu=Object.freeze({map:null,hash:"",transfer:void 0});class ch{#t=!1;#e=null;#n=null;#i=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,i){const s=this.#i.get(t);return s===void 0?i:Object.assign(i,s)}getRawValue(t){return this.#i.get(t)}remove(t){const i=this.#i.get(t);if(i!==void 0&&(i instanceof bt&&this.#n.delete(i.annotationElementId),this.#i.delete(t),this.#i.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const s of this.#i.values())if(s instanceof bt)return;this.onAnnotationEditor(null)}}setValue(t,i){const s=this.#i.get(t);let r=!1;if(s!==void 0)for(const[l,o]of Object.entries(i))s[l]!==o&&(r=!0,s[l]=o);else r=!0,this.#i.set(t,i);r&&this.#r(),i instanceof bt&&((this.#n||=new Map).set(i.annotationElementId,i),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(i.constructor._type))}has(t){return this.#i.has(t)}get size(){return this.#i.size}#r(){this.#t||(this.#t=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#t&&(this.#t=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new pm(this)}get serializable(){if(this.#i.size===0)return Xu;const t=new Map,i=new gm,s=[],r=Object.create(null);let l=!1;for(const[o,u]of this.#i){const h=u instanceof bt?u.serialize(!1,r):u;h&&(t.set(o,h),i.update(`${o}:${JSON.stringify(h)}`),l||=!!h.bitmap)}if(l)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:i.hexdigest(),transfer:s}:Xu}get editorStats(){let t=null;const i=new Map;let s=0,r=0;for(const l of this.#i.values()){if(!(l instanceof bt)){l.popup&&(l.popup.deleted?r+=1:s+=1);continue}l.isCommentDeleted?r+=1:l.hasEditedComment&&(s+=1);const o=l.telemetryFinalData;if(!o)continue;const{type:u}=o;i.has(u)||i.set(u,Object.getPrototypeOf(l).constructor),t||=Object.create(null);const h=t[u]||=new Map;for(const[d,p]of Object.entries(o)){if(d==="type")continue;let b=h.get(d);b||(b=new Map,h.set(d,b));const y=b.get(p)??0;b.set(p,y+1)}}if((r>0||s>0)&&(t||=Object.create(null),t.comments={deleted:r,edited:s}),!t)return null;for(const[l,o]of i)t[l]=o.computeTelemetryFinalData(t[l]);return t}resetModifiedIds(){this.#e=null}updateEditor(t,i){const s=this.#n?.get(t);return s?(s.updateFromAnnotationLayer(i),!0):!1}getEditor(t){return this.#n?.get(t)||null}get modifiedIds(){if(this.#e)return this.#e;const t=[];if(this.#n)for(const i of this.#n.values())i.serialize()&&t.push(i.annotationElementId);return this.#e={ids:new Set(t),hash:t.join(",")}}[Symbol.iterator](){return this.#i.entries()}}class pm extends ch{#t;constructor(t){super();const{map:i,hash:s,transfer:r}=t.serializable,l=structuredClone(i,r?{transfer:r}:null);this.#t={map:l,hash:s,transfer:r}}get print(){Jt("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#t}get modifiedIds(){return Tt(this,"modifiedIds",{ids:new Set,hash:""})}}class av{#t=new Set;constructor({ownerDocument:t=globalThis.document,styleElement:i=null}){this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const i=this.styleElement.sheet;i.insertRule(t,i.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),this.#t.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:i,_inspectFont:s}){if(!(!t||this.#t.has(t.loadedName))){if(Bt(!i,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:r,src:l,style:o}=t,u=new FontFace(r,l,o);this.addNativeFontFace(u);try{await u.load(),this.#t.add(r),s?.(t)}catch{St(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(u)}return}Jt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(r){throw St(`Failed to load font '${s.family}': '${r}'.`),t.disableFontFace=!0,r}}return}const i=t.createFontFaceRule();if(i){if(this.insertRule(i),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const r=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,r)})}}get isFontLoadingAPISupported(){const t=!!this._document?.fonts;return Tt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Tt(this,"isSyncFontLoadingSupported",Fe||ke.platform.isFirefox)}_queueLoadingCallback(t){function i(){for(Bt(!r.done,"completeRequest() cannot be called twice."),r.done=!0;s.length>0&&s[0].done;){const l=s.shift();setTimeout(l.callback,0)}}const{loadingRequests:s}=this,r={done:!1,complete:i,callback:t};return s.push(r),r}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Tt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,i){function s(P,I){return P.charCodeAt(I)<<24|P.charCodeAt(I+1)<<16|P.charCodeAt(I+2)<<8|P.charCodeAt(I+3)&255}function r(P,I,F,B){const D=P.substring(0,I),N=P.substring(I+F);return D+B+N}let l,o;const u=this._document.createElement("canvas");u.width=1,u.height=1;const h=u.getContext("2d");let d=0;function p(P,I){if(++d>30){St("Load test font never loaded."),I();return}if(h.font="30px "+P,h.fillText(".",0,20),h.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(p.bind(null,P,I))}const b=`lt${Date.now()}${this.loadTestFontId++}`;let y=this._loadTestFont;y=r(y,976,b.length,b);const w=16,S=1482184792;let C=s(y,w);for(l=0,o=b.length-3;l<o;l+=4)C=C-S+s(b,l)|0;l<b.length&&(C=C-S+s(b+"XXX",l)|0),y=r(y,w,4,zy(C));const E=`url(data:font/opentype;base64,${btoa(y)});`,k=`@font-face {font-family:"${b}";src:${E}}`;this.insertRule(k);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const P of[t.loadedName,b]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=P,O.append(I)}this._document.body.append(O),p(b,()=>{O.remove(),i.complete()})}}class rv{#t;constructor(t,i=null,s,r){this.compiledGlyphs=Object.create(null),this.#t=t,this._inspectFont=i,s&&Object.assign(this,s),r&&(this.charProcOperatorList=r)}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const i={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(i.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,i)}return this._inspectFont?.(this),t}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${um(this.data)});`;let i;if(!this.cssFontInfo)i=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),i=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${t}}`}return this._inspectFont?.(this,t),i}getPathGenerator(t,i){if(this.compiledGlyphs[i]!==void 0)return this.compiledGlyphs[i];const s=this.loadedName+"_path_"+i;let r;try{r=t.get(s)}catch(o){St(`getPathGenerator - ignoring character: "${o}".`)}const l=new Path2D(r||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[i]=l}get black(){return this.#t.black}get bold(){return this.#t.bold}get disableFontFace(){return this.#t.disableFontFace??!1}get fontExtraProperties(){return this.#t.fontExtraProperties??!1}get isInvalidPDFjsFont(){return this.#t.isInvalidPDFjsFont}get isType3Font(){return this.#t.isType3Font}get italic(){return this.#t.italic}get missingFile(){return this.#t.missingFile}get remeasure(){return this.#t.remeasure}get vertical(){return this.#t.vertical}get ascent(){return this.#t.ascent}get defaultWidth(){return this.#t.defaultWidth}get descent(){return this.#t.descent}get bbox(){return this.#t.bbox}get fontMatrix(){return this.#t.fontMatrix}get fallbackName(){return this.#t.fallbackName}get loadedName(){return this.#t.loadedName}get mimetype(){return this.#t.mimetype}get name(){return this.#t.name}get data(){return this.#t.data}clearData(){this.#t.clearData()}get cssFontInfo(){return this.#t.cssFontInfo}get systemFontInfo(){return this.#t.systemFontInfo}get defaultVMetrics(){return this.#t.defaultVMetrics}}function lv(g){if(g instanceof URL)return g.href;if(typeof g=="string"){if(Fe)return g;const t=URL.parse(g,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function ov(g){if(Fe&&typeof Buffer<"u"&&g instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(g instanceof Uint8Array&&g.byteLength===g.buffer.byteLength)return g;if(typeof g=="string")return xr(g);if(g instanceof ArrayBuffer||ArrayBuffer.isView(g)||typeof g=="object"&&!isNaN(g?.length))return new Uint8Array(g);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Vl(g){if(typeof g!="string")return null;if(g.endsWith("/"))return g;throw new Error(`Invalid factory url: "${g}" must include trailing slash.`)}const $u=g=>typeof g=="object"&&Number.isInteger(g?.num)&&g.num>=0&&Number.isInteger(g?.gen)&&g.gen>=0,cv=g=>typeof g=="object"&&typeof g?.name=="string",uv=Gy.bind(null,$u,cv);class hv{#t=new Map;#e=Promise.resolve();postMessage(t,i){const s={data:structuredClone(t,i?{transfer:i}:null)};this.#e.then(()=>{for(const[r]of this.#t)r.call(this,s)})}addEventListener(t,i,s=null){let r=null;if(s?.signal instanceof AbortSignal){const{signal:l}=s;if(l.aborted){St("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,i);r=()=>l.removeEventListener("abort",o),l.addEventListener("abort",o)}this.#t.set(i,r)}removeEventListener(t,i){this.#t.get(i)?.(),this.#t.delete(i)}terminate(){for(const[,t]of this.#t)t?.();this.#t.clear()}}const Yl={DATA:1,ERROR:2},ye={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Fp(){}function Qe(g){if(g instanceof Un||g instanceof qu||g instanceof Mp||g instanceof no||g instanceof ju)return g;switch(g instanceof Error||typeof g=="object"&&g!==null||Jt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),g.name){case"AbortException":return new Un(g.message);case"InvalidPDFException":return new qu(g.message);case"PasswordException":return new Mp(g.message,g.code);case"ResponseException":return new no(g.message,g.status,g.missing);case"UnknownErrorException":return new ju(g.message,g.details)}return new ju(g.message,g.toString())}class dr{#t=new AbortController;constructor(t,i,s){this.sourceName=t,this.targetName=i,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",this.#e.bind(this),{signal:this.#t.signal})}#e({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){this.#i(t);return}if(t.callback){const s=t.callbackId,r=this.callbackCapabilities[s];if(!r)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Yl.DATA)r.resolve(t.data);else if(t.callback===Yl.ERROR)r.reject(Qe(t.reason));else throw new Error("Unexpected callback case");return}const i=this.actionHandler[t.action];if(!i)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,r=t.sourceName,l=this.comObj;Promise.try(i,t.data).then(function(o){l.postMessage({sourceName:s,targetName:r,callback:Yl.DATA,callbackId:t.callbackId,data:o})},function(o){l.postMessage({sourceName:s,targetName:r,callback:Yl.ERROR,callbackId:t.callbackId,reason:Qe(o)})});return}if(t.streamId){this.#n(t);return}i(t.data)}on(t,i){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=i}send(t,i,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:i},s)}sendWithPromise(t,i,s){const r=this.callbackId++,l=Promise.withResolvers();this.callbackCapabilities[r]=l;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:r,data:i},s)}catch(o){l.reject(o)}return l.promise}sendWithStream(t,i,s,r){const l=this.streamId++,o=this.sourceName,u=this.targetName,h=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[l]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},h.postMessage({sourceName:o,targetName:u,action:t,streamId:l,data:i,desiredSize:d.desiredSize},r),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[l].pullCall=p,h.postMessage({sourceName:o,targetName:u,stream:ye.PULL,streamId:l,desiredSize:d.desiredSize}),p.promise},cancel:d=>{Bt(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[l].cancelCall=p,this.streamControllers[l].isClosed=!0,h.postMessage({sourceName:o,targetName:u,stream:ye.CANCEL,streamId:l,reason:Qe(d)}),p.promise}},s)}#n(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,o=this,u=this.actionHandler[t.action],h={enqueue(d,p=1,b){if(this.isCancelled)return;const y=this.desiredSize;this.desiredSize-=p,y>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),l.postMessage({sourceName:s,targetName:r,stream:ye.ENQUEUE,streamId:i,chunk:d},b)},close(){this.isCancelled||(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ye.CLOSE,streamId:i}),delete o.streamSinks[i])},error(d){Bt(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,l.postMessage({sourceName:s,targetName:r,stream:ye.ERROR,streamId:i,reason:Qe(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};h.sinkCapability.resolve(),h.ready=h.sinkCapability.promise,this.streamSinks[i]=h,Promise.try(u,t.data,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ye.START_COMPLETE,streamId:i,success:!0})},function(d){l.postMessage({sourceName:s,targetName:r,stream:ye.START_COMPLETE,streamId:i,reason:Qe(d)})})}#i(t){const i=t.streamId,s=this.sourceName,r=t.sourceName,l=this.comObj,o=this.streamControllers[i],u=this.streamSinks[i];switch(t.stream){case ye.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Qe(t.reason));break;case ye.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Qe(t.reason));break;case ye.PULL:if(!u){l.postMessage({sourceName:s,targetName:r,stream:ye.PULL_COMPLETE,streamId:i,success:!0});break}u.desiredSize<=0&&t.desiredSize>0&&u.sinkCapability.resolve(),u.desiredSize=t.desiredSize,Promise.try(u.onPull||Fp).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ye.PULL_COMPLETE,streamId:i,success:!0})},function(d){l.postMessage({sourceName:s,targetName:r,stream:ye.PULL_COMPLETE,streamId:i,reason:Qe(d)})});break;case ye.ENQUEUE:if(Bt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case ye.CLOSE:if(Bt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this.#r(o,i);break;case ye.ERROR:Bt(o,"error should have stream controller"),o.controller.error(Qe(t.reason)),this.#r(o,i);break;case ye.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Qe(t.reason)),this.#r(o,i);break;case ye.CANCEL:if(!u)break;const h=Qe(t.reason);Promise.try(u.onCancel||Fp,h).then(function(){l.postMessage({sourceName:s,targetName:r,stream:ye.CANCEL_COMPLETE,streamId:i,success:!0})},function(d){l.postMessage({sourceName:s,targetName:r,stream:ye.CANCEL_COMPLETE,streamId:i,reason:Qe(d)})}),u.sinkCapability.reject(h),u.isCancelled=!0,delete this.streamSinks[i];break;default:throw new Error("Unexpected stream case")}}async#r(t,i){await Promise.allSettled([t.startCall?.promise,t.pullCall?.promise,t.cancelCall?.promise]),delete this.streamControllers[i]}destroy(){this.#t?.abort(),this.#t=null}}class mm{#t=!1;constructor({enableHWA:t=!1}){this.#t=t}create(t,i){if(t<=0||i<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,i);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!this.#t})}}reset(t,i,s){if(!t.canvas)throw new Error("Canvas is not specified");if(i<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=i,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,i){Jt("Abstract method `_createCanvas` called.")}}class dv extends mm{constructor({ownerDocument:t=globalThis.document,enableHWA:i=!1}){super({enableHWA:i}),this._document=t}_createCanvas(t,i){const s=this._document.createElement("canvas");return s.width=t,s.height=i,s}}class bm{constructor({baseUrl:t=null,isCompressed:i=!0}){this.baseUrl=t,this.isCompressed=i}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const i=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(i).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${i}`)})}async _fetch(t){Jt("Abstract method `_fetch` called.")}}class zp extends bm{async _fetch(t){const i=await Ar(t,this.isCompressed?"arraybuffer":"text");return i instanceof ArrayBuffer?new Uint8Array(i):xr(i)}}class ym{addFilter(t){return"none"}addHCMFilter(t,i){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,i,s,r,l){return"none"}destroy(t=!1){}}class fv extends ym{#t;#e;#n;#i;#r;#s;#a=0;constructor({docId:t,ownerDocument:i=globalThis.document}){super(),this.#i=t,this.#r=i}get#l(){return this.#e||=new Map}get#c(){return this.#s||=new Map}get#o(){if(!this.#n){const t=this.#r.createElement("div"),{style:i}=t;i.visibility="hidden",i.contain="strict",i.width=i.height=0,i.position="absolute",i.top=i.left=0,i.zIndex=-1;const s=this.#r.createElementNS(un,"svg");s.setAttribute("width",0),s.setAttribute("height",0),this.#n=this.#r.createElementNS(un,"defs"),t.append(s),s.append(this.#n),this.#r.body.append(t)}return this.#n}#d(t){if(t.length===1){const h=t[0],d=new Array(256);for(let b=0;b<256;b++)d[b]=h[b]/255;const p=d.join(",");return[p,p,p]}const[i,s,r]=t,l=new Array(256),o=new Array(256),u=new Array(256);for(let h=0;h<256;h++)l[h]=i[h]/255,o[h]=s[h]/255,u[h]=r[h]/255;return[l.join(","),o.join(","),u.join(",")]}#h(t){if(this.#t===void 0){this.#t="";const i=this.#r.URL;i!==this.#r.baseURI&&(uo(i)?St('#createUrl: ignore "data:"-URL for performance reasons.'):this.#t=lm(i,""))}return`url(${this.#t}#${t})`}addFilter(t){if(!t)return"none";let i=this.#l.get(t);if(i)return i;const[s,r,l]=this.#d(t),o=t.length===1?s:`${s}${r}${l}`;if(i=this.#l.get(o),i)return this.#l.set(t,i),i;const u=`g_${this.#i}_transfer_map_${this.#a++}`,h=this.#h(u);this.#l.set(t,h),this.#l.set(o,h);const d=this.#g(u);return this.#p(s,r,l,d),h}addHCMFilter(t,i){const s=`${t}-${i}`,r="base";let l=this.#c.get(r);if(l?.key===s||(l?(l.filter?.remove(),l.key=s,l.url="none",l.filter=null):(l={key:s,url:"none",filter:null},this.#c.set(r,l)),!t||!i))return l.url;const o=this.#v(t);t=ht.makeHexColor(...o);const u=this.#v(i);if(i=ht.makeHexColor(...u),this.#o.style.color="",t==="#000000"&&i==="#ffffff"||t===i)return l.url;const h=new Array(256);for(let A=0;A<=255;A++){const w=A/255;h[A]=w<=.03928?w/12.92:((w+.055)/1.055)**2.4}const d=h.join(","),p=`g_${this.#i}_hcm_filter`,b=l.filter=this.#g(p);this.#p(d,d,d,b),this.#m(b);const y=(A,w)=>{const S=o[A]/255,C=u[A]/255,E=new Array(w+1);for(let k=0;k<=w;k++)E[k]=S+k/w*(C-S);return E.join(",")};return this.#p(y(0,5),y(1,5),y(2,5),b),l.url=this.#h(p),l.url}addAlphaFilter(t){let i=this.#l.get(t);if(i)return i;const[s]=this.#d([t]),r=`alpha_${s}`;if(i=this.#l.get(r),i)return this.#l.set(t,i),i;const l=`g_${this.#i}_alpha_map_${this.#a++}`,o=this.#h(l);this.#l.set(t,o),this.#l.set(r,o);const u=this.#g(l);return this.#b(s,u),o}addLuminosityFilter(t){let i=this.#l.get(t||"luminosity");if(i)return i;let s,r;if(t?([s]=this.#d([t]),r=`luminosity_${s}`):r="luminosity",i=this.#l.get(r),i)return this.#l.set(t,i),i;const l=`g_${this.#i}_luminosity_map_${this.#a++}`,o=this.#h(l);this.#l.set(t,o),this.#l.set(r,o);const u=this.#g(l);return this.#f(u),t&&this.#b(s,u),o}addHighlightHCMFilter(t,i,s,r,l){const o=`${i}-${s}-${r}-${l}`;let u=this.#c.get(t);if(u?.key===o||(u?(u.filter?.remove(),u.key=o,u.url="none",u.filter=null):(u={key:o,url:"none",filter:null},this.#c.set(t,u)),!i||!s))return u.url;const[h,d]=[i,s].map(this.#v.bind(this));let p=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),b=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[y,A]=[r,l].map(this.#v.bind(this));b<p&&([p,b,y,A]=[b,p,A,y]),this.#o.style.color="";const w=(E,k,O)=>{const P=new Array(256),I=(b-p)/O,F=E/255,B=(k-E)/(255*O);let D=0;for(let N=0;N<=O;N++){const U=Math.round(p+N*I),$=F+N*B;for(let tt=D;tt<=U;tt++)P[tt]=$;D=U+1}for(let N=D;N<256;N++)P[N]=P[D-1];return P.join(",")},S=`g_${this.#i}_hcm_${t}_filter`,C=u.filter=this.#g(S);return this.#m(C),this.#p(w(y[0],A[0],5),w(y[1],A[1],5),w(y[2],A[2],5),C),u.url=this.#h(S),u.url}destroy(t=!1){t&&this.#s?.size||(this.#n?.parentNode.parentNode.remove(),this.#n=null,this.#e?.clear(),this.#e=null,this.#s?.clear(),this.#s=null,this.#a=0)}#f(t){const i=this.#r.createElementNS(un,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(i)}#m(t){const i=this.#r.createElementNS(un,"feColorMatrix");i.setAttribute("type","matrix"),i.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(i)}#g(t){const i=this.#r.createElementNS(un,"filter");return i.setAttribute("color-interpolation-filters","sRGB"),i.setAttribute("id",t),this.#o.append(i),i}#u(t,i,s){const r=this.#r.createElementNS(un,i);r.setAttribute("type","discrete"),r.setAttribute("tableValues",s),t.append(r)}#p(t,i,s,r){const l=this.#r.createElementNS(un,"feComponentTransfer");r.append(l),this.#u(l,"feFuncR",t),this.#u(l,"feFuncG",i),this.#u(l,"feFuncB",s)}#b(t,i){const s=this.#r.createElementNS(un,"feComponentTransfer");i.append(s),this.#u(s,"feFuncA",t)}#v(t){return this.#o.style.color=t,wr(getComputedStyle(this.#o).getPropertyValue("color"))}}class vm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load font data at: ${i}`)})}async _fetch(t){Jt("Abstract method `_fetch` called.")}}class Ip extends vm{async _fetch(t){const i=await Ar(t,"arraybuffer");return new Uint8Array(i)}}class xm{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const i=`${this.baseUrl}${t}`;return this._fetch(i).catch(s=>{throw new Error(`Unable to load wasm data at: ${i}`)})}async _fetch(t){Jt("Abstract method `_fetch` called.")}}class Up extends xm{async _fetch(t){const i=await Ar(t,"arraybuffer");return new Uint8Array(i)}}Fe&&St("Please use the `legacy` build in Node.js environments.");async function uh(g){const i=await process.getBuiltinModule("fs").promises.readFile(g);return new Uint8Array(i)}class gv extends ym{}class pv extends mm{_createCanvas(t,i){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,i)}}class mv extends bm{async _fetch(t){return uh(t)}}class bv extends vm{async _fetch(t){return uh(t)}}class yv extends xm{async _fetch(t){return uh(t)}}const ta="__forcedDependency",{floor:Hp,ceil:qp}=Math;function Xl(g,t,i,s,r,l){g[t*4+0]=Math.min(g[t*4+0],i),g[t*4+1]=Math.min(g[t*4+1],s),g[t*4+2]=Math.max(g[t*4+2],r),g[t*4+3]=Math.max(g[t*4+3],l)}const Ku=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];class vv{#t;#e;constructor(t,i){this.#t=t,this.#e=i}get length(){return this.#t.length}isEmpty(t){return this.#t[t]===Ku}minX(t){return this.#e[t*4+0]/256}minY(t){return this.#e[t*4+1]/256}maxX(t){return(this.#e[t*4+2]+1)/256}maxY(t){return(this.#e[t*4+3]+1)/256}}const $l=(g,t)=>{if(!g)return;let i=g.get(t);return i||(i={dependencies:new Set,isRenderingOperation:!1},g.set(t,i)),i};class xv{#t={__proto__:null};#e={__proto__:null,transform:[],moveText:[],sameLineText:[],[ta]:[]};#n=new Map;#i=[];#r=[];#s=[[1,0,0,1,0,0]];#a=[-1/0,-1/0,1/0,1/0];#l=new Float64Array([1/0,1/0,-1/0,-1/0]);#c=-1;#o=new Set;#d=new Map;#h=new Map;#f;#m;#g;#u;#p;constructor(t,i,s=!1){this.#f=t.width,this.#m=t.height,this.#b(i),s&&(this.#p=new Map)}growOperationsCount(t){t>=this.#u.length&&this.#b(t,this.#u)}#b(t,i){const s=new ArrayBuffer(t*4);this.#g=new Uint8ClampedArray(s),this.#u=new Uint32Array(s),i&&i.length>0?(this.#u.set(i),this.#u.fill(Ku,i.length)):this.#u.fill(Ku)}save(t){return this.#t={__proto__:this.#t},this.#e={__proto__:this.#e,transform:{__proto__:this.#e.transform},moveText:{__proto__:this.#e.moveText},sameLineText:{__proto__:this.#e.sameLineText},[ta]:{__proto__:this.#e[ta]}},this.#a={__proto__:this.#a},this.#i.push(t),this}restore(t){const i=Object.getPrototypeOf(this.#t);if(i===null)return this;this.#t=i,this.#e=Object.getPrototypeOf(this.#e),this.#a=Object.getPrototypeOf(this.#a);const s=this.#i.pop();return s!==void 0&&($l(this.#p,t)?.dependencies.add(s),this.#u[t]=this.#u[s]),this}recordOpenMarker(t){return this.#i.push(t),this}getOpenMarker(){return this.#i.length===0?null:this.#i.at(-1)}recordCloseMarker(t){const i=this.#i.pop();return i!==void 0&&($l(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}beginMarkedContent(t){return this.#r.push(t),this}endMarkedContent(t){const i=this.#r.pop();return i!==void 0&&($l(this.#p,t)?.dependencies.add(i),this.#u[t]=this.#u[i]),this}pushBaseTransform(t){return this.#s.push(ht.multiplyByDOMMatrix(this.#s.at(-1),t.getTransform())),this}popBaseTransform(){return this.#s.length>1&&this.#s.pop(),this}recordSimpleData(t,i){return this.#t[t]=i,this}recordIncrementalData(t,i){return this.#e[t].push(i),this}resetIncrementalData(t,i){return this.#e[t].length=0,this}recordNamedData(t,i){return this.#n.set(t,i),this}recordSimpleDataFromNamed(t,i,s){this.#t[t]=this.#n.get(i)??s}recordFutureForcedDependency(t,i){return this.recordIncrementalData(ta,i),this}inheritSimpleDataAsFutureForcedDependencies(t){for(const i of t)i in this.#t&&this.recordFutureForcedDependency(i,this.#t[i]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const t of this.#o)this.recordFutureForcedDependency(ta,t);return this}resetBBox(t){return this.#c!==t&&(this.#c=t,this.#l[0]=1/0,this.#l[1]=1/0,this.#l[2]=-1/0,this.#l[3]=-1/0),this}recordClipBox(t,i,s,r,l,o){const u=ht.multiplyByDOMMatrix(this.#s.at(-1),i.getTransform()),h=[1/0,1/0,-1/0,-1/0];ht.axialAlignedBoundingBox([s,l,r,o],u,h);const d=ht.intersect(this.#a,h);return d?(this.#a[0]=d[0],this.#a[1]=d[1],this.#a[2]=d[2],this.#a[3]=d[3]):(this.#a[0]=this.#a[1]=1/0,this.#a[2]=this.#a[3]=-1/0),this}recordBBox(t,i,s,r,l,o){const u=this.#a;if(u[0]===1/0)return this;const h=ht.multiplyByDOMMatrix(this.#s.at(-1),i.getTransform());if(u[0]===-1/0)return ht.axialAlignedBoundingBox([s,l,r,o],h,this.#l),this;const d=[1/0,1/0,-1/0,-1/0];return ht.axialAlignedBoundingBox([s,l,r,o],h,d),this.#l[0]=Math.min(this.#l[0],Math.max(d[0],u[0])),this.#l[1]=Math.min(this.#l[1],Math.max(d[1],u[1])),this.#l[2]=Math.max(this.#l[2],Math.min(d[2],u[2])),this.#l[3]=Math.max(this.#l[3],Math.min(d[3],u[3])),this}recordCharacterBBox(t,i,s,r=1,l=0,o=0,u){const h=s.bbox;let d,p;if(h&&(d=h[2]!==h[0]&&h[3]!==h[1]&&this.#h.get(s),d!==!1&&(p=[0,0,0,0],ht.axialAlignedBoundingBox(h,s.fontMatrix,p),(r!==1||l!==0||o!==0)&&ht.scaleMinMax([r,0,0,-r,l,o],p),d)))return this.recordBBox(t,i,p[0],p[2],p[1],p[3]);if(!u)return this.recordFullPageBBox(t);const b=u();return h&&p&&d===void 0&&(d=p[0]<=l-b.actualBoundingBoxLeft&&p[2]>=l+b.actualBoundingBoxRight&&p[1]<=o-b.actualBoundingBoxAscent&&p[3]>=o+b.actualBoundingBoxDescent,this.#h.set(s,d),d)?this.recordBBox(t,i,p[0],p[2],p[1],p[3]):this.recordBBox(t,i,l-b.actualBoundingBoxLeft,l+b.actualBoundingBoxRight,o-b.actualBoundingBoxAscent,o+b.actualBoundingBoxDescent)}recordFullPageBBox(t){return this.#l[0]=Math.max(0,this.#a[0]),this.#l[1]=Math.max(0,this.#a[1]),this.#l[2]=Math.min(this.#f,this.#a[2]),this.#l[3]=Math.min(this.#m,this.#a[3]),this}getSimpleIndex(t){return this.#t[t]}recordDependencies(t,i){const s=this.#o,r=this.#t,l=this.#e;for(const o of i)o in this.#t?s.add(r[o]):o in l&&l[o].forEach(s.add,s);return this}recordNamedDependency(t,i){return this.#n.has(i)&&this.#o.add(this.#n.get(i)),this}recordOperation(t,i=!1){if(this.recordDependencies(t,[ta]),this.#p){const s=$l(this.#p,t),{dependencies:r}=s;this.#o.forEach(r.add,r),this.#i.forEach(r.add,r),this.#r.forEach(r.add,r),r.delete(t),s.isRenderingOperation=!0}if(this.#c===t){const s=Hp(this.#l[0]*256/this.#f),r=Hp(this.#l[1]*256/this.#m),l=qp(this.#l[2]*256/this.#f),o=qp(this.#l[3]*256/this.#m);Xl(this.#g,t,s,r,l,o);for(const u of this.#o)u!==t&&Xl(this.#g,u,s,r,l,o);for(const u of this.#i)u!==t&&Xl(this.#g,u,s,r,l,o);for(const u of this.#r)u!==t&&Xl(this.#g,u,s,r,l,o);i||(this.#o.clear(),this.#c=-1)}return this}recordShowTextOperation(t,i=!1){const s=Array.from(this.#o);this.recordOperation(t,i),this.recordIncrementalData("sameLineText",t);for(const r of s)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(t,i=!1){return this.#c===t&&(this.#c=-1,this.#a[0]=Math.max(this.#a[0],this.#l[0]),this.#a[1]=Math.max(this.#a[1],this.#l[1]),this.#a[2]=Math.min(this.#a[2],this.#l[2]),this.#a[3]=Math.min(this.#a[3],this.#l[3]),i||this.#o.clear()),this}_takePendingDependencies(){const t=this.#o;return this.#o=new Set,t}_extractOperation(t){const i=this.#d.get(t);return this.#d.delete(t),i}_pushPendingDependencies(t){for(const i of t)this.#o.add(i)}take(){return this.#h.clear(),new vv(this.#u,this.#g)}takeDebugMetadata(){return this.#p}}class so{#t;#e;#n;#i=0;#r=0;constructor(t,i,s){if(t instanceof so&&t.#n===!!s)return t;this.#t=t,this.#e=i,this.#n=!!s}growOperationsCount(){throw new Error("Unreachable")}save(t){return this.#r++,this.#t.save(this.#e),this}restore(t){return this.#r>0&&(this.#t.restore(this.#e),this.#r--),this}recordOpenMarker(t){return this.#i++,this}getOpenMarker(){return this.#i>0?this.#e:this.#t.getOpenMarker()}recordCloseMarker(t){return this.#i--,this}beginMarkedContent(t){return this}endMarkedContent(t){return this}pushBaseTransform(t){return this.#t.pushBaseTransform(t),this}popBaseTransform(){return this.#t.popBaseTransform(),this}recordSimpleData(t,i){return this.#t.recordSimpleData(t,this.#e),this}recordIncrementalData(t,i){return this.#t.recordIncrementalData(t,this.#e),this}resetIncrementalData(t,i){return this.#t.resetIncrementalData(t,this.#e),this}recordNamedData(t,i){return this}recordSimpleDataFromNamed(t,i,s){return this.#t.recordSimpleDataFromNamed(t,i,this.#e),this}recordFutureForcedDependency(t,i){return this.#t.recordFutureForcedDependency(t,this.#e),this}inheritSimpleDataAsFutureForcedDependencies(t){return this.#t.inheritSimpleDataAsFutureForcedDependencies(t),this}inheritPendingDependenciesAsFutureForcedDependencies(){return this.#t.inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(t){return this.#n||this.#t.resetBBox(this.#e),this}recordClipBox(t,i,s,r,l,o){return this.#n||this.#t.recordClipBox(this.#e,i,s,r,l,o),this}recordBBox(t,i,s,r,l,o){return this.#n||this.#t.recordBBox(this.#e,i,s,r,l,o),this}recordCharacterBBox(t,i,s,r,l,o,u){return this.#n||this.#t.recordCharacterBBox(this.#e,i,s,r,l,o,u),this}recordFullPageBBox(t){return this.#n||this.#t.recordFullPageBBox(this.#e),this}getSimpleIndex(t){return this.#t.getSimpleIndex(t)}recordDependencies(t,i){return this.#t.recordDependencies(this.#e,i),this}recordNamedDependency(t,i){return this.#t.recordNamedDependency(this.#e,i),this}recordOperation(t){return this.#t.recordOperation(this.#e,!0),this}recordShowTextOperation(t){return this.#t.recordShowTextOperation(this.#e,!0),this}bboxToClipBoxDropOperation(t){return this.#n||this.#t.bboxToClipBoxDropOperation(this.#e,!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const _i={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Oe={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function Qu(g,t){if(!t)return;const i=t[2]-t[0],s=t[3]-t[1],r=new Path2D;r.rect(t[0],t[1],i,s),g.clip(r)}class hh{isModifyingCurrentTransform(){return!1}getPattern(){Jt("Abstract method `getPattern` called.")}}class Av extends hh{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let i;this._type==="axial"?i=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(i=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)i.addColorStop(s[0],s[1]);return i}getPattern(t,i,s,r){let l;if(r===Oe.STROKE||r===Oe.FILL){const o=i.current.getClippedPathBoundingBox(r,ae(t))||[0,0,0,0],u=Math.ceil(o[2]-o[0])||1,h=Math.ceil(o[3]-o[1])||1,d=i.cachedCanvases.getCanvas("pattern",u,h),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-o[0],-o[1]),s=ht.transform(s,[1,0,0,1,o[0],o[1]]),p.transform(...i.baseTransform),this.matrix&&p.transform(...this.matrix),Qu(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),l=t.createPattern(d.canvas,"no-repeat");const b=new DOMMatrix(s);l.setTransform(b)}else Qu(t,this._bbox),l=this._createGradient(t);return l}}function Fu(g,t,i,s,r,l,o,u){const h=t.coords,d=t.colors,p=g.data,b=g.width*4;let y;h[i+1]>h[s+1]&&(y=i,i=s,s=y,y=l,l=o,o=y),h[s+1]>h[r+1]&&(y=s,s=r,r=y,y=o,o=u,u=y),h[i+1]>h[s+1]&&(y=i,i=s,s=y,y=l,l=o,o=y);const A=(h[i]+t.offsetX)*t.scaleX,w=(h[i+1]+t.offsetY)*t.scaleY,S=(h[s]+t.offsetX)*t.scaleX,C=(h[s+1]+t.offsetY)*t.scaleY,E=(h[r]+t.offsetX)*t.scaleX,k=(h[r+1]+t.offsetY)*t.scaleY;if(w>=k)return;const O=d[l],P=d[l+1],I=d[l+2],F=d[o],B=d[o+1],D=d[o+2],N=d[u],U=d[u+1],$=d[u+2],tt=Math.round(w),st=Math.round(k);let rt,dt,j,T,X,et,gt,M;for(let H=tt;H<=st;H++){if(H<C){const at=H<w?0:(w-H)/(w-C);rt=A-(A-S)*at,dt=O-(O-F)*at,j=P-(P-B)*at,T=I-(I-D)*at}else{let at;H>k?at=1:C===k?at=0:at=(C-H)/(C-k),rt=S-(S-E)*at,dt=F-(F-N)*at,j=B-(B-U)*at,T=D-(D-$)*at}let G;H<w?G=0:H>k?G=1:G=(w-H)/(w-k),X=A-(A-E)*G,et=O-(O-N)*G,gt=P-(P-U)*G,M=I-(I-$)*G;const nt=Math.round(Math.min(rt,X)),Q=Math.round(Math.max(rt,X));let it=b*H+nt*4;for(let at=nt;at<=Q;at++)G=(rt-at)/(rt-X),G<0?G=0:G>1&&(G=1),p[it++]=dt-(dt-et)*G|0,p[it++]=j-(j-gt)*G|0,p[it++]=T-(T-M)*G|0,p[it++]=255}}function Sv(g,t,i){const s=t.coords,r=t.colors;let l,o;switch(t.type){case"lattice":const u=t.verticesPerRow,h=Math.floor(s.length/u)-1,d=u-1;for(l=0;l<h;l++){let p=l*u;for(let b=0;b<d;b++,p++)Fu(g,i,s[p],s[p+1],s[p+u],r[p],r[p+1],r[p+u]),Fu(g,i,s[p+u+1],s[p+1],s[p+u],r[p+u+1],r[p+1],r[p+u])}break;case"triangles":for(l=0,o=s.length;l<o;l+=3)Fu(g,i,s[l],s[l+1],s[l+2],r[l],r[l+1],r[l+2]);break;default:throw new Error("illegal figure")}}class wv extends hh{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,i,s){const u=Math.floor(this._bounds[0]),h=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-u,p=Math.ceil(this._bounds[3])-h,b=Math.min(Math.ceil(Math.abs(d*t[0]*1.1)),3e3),y=Math.min(Math.ceil(Math.abs(p*t[1]*1.1)),3e3),A=d/b,w=p/y,S={coords:this._coords,colors:this._colors,offsetX:-u,offsetY:-h,scaleX:1/A,scaleY:1/w},C=b+4,E=y+4,k=s.getCanvas("mesh",C,E),O=k.context,P=O.createImageData(b,y);if(i){const F=P.data;for(let B=0,D=F.length;B<D;B+=4)F[B]=i[0],F[B+1]=i[1],F[B+2]=i[2],F[B+3]=255}for(const F of this._figures)Sv(P,F,S);return O.putImageData(P,2,2),{canvas:k.canvas,offsetX:u-2*A,offsetY:h-2*w,scaleX:A,scaleY:w}}isModifyingCurrentTransform(){return!0}getPattern(t,i,s,r){Qu(t,this._bbox);const l=new Float32Array(2);if(r===Oe.SHADING)ht.singularValueDecompose2dScale(ae(t),l);else if(this.matrix){ht.singularValueDecompose2dScale(this.matrix,l);const[u,h]=l;ht.singularValueDecompose2dScale(i.baseTransform,l),l[0]*=u,l[1]*=h}else ht.singularValueDecompose2dScale(i.baseTransform,l);const o=this._createMeshCanvas(l,r===Oe.SHADING?null:this._background,i.cachedCanvases);return r!==Oe.SHADING&&(t.setTransform(...i.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class _v extends hh{getPattern(){return"hotpink"}}function Ev(g){switch(g[0]){case"RadialAxial":return new Av(g);case"Mesh":return new wv(g);case"Dummy":return new _v}throw new Error(`Unknown IR type: ${g[0]}`)}const Gp={COLORED:1,UNCOLORED:2};class dh{static MAX_PATTERN_SIZE=3e3;constructor(t,i,s,r){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=i,this.canvasGraphicsFactory=s,this.baseTransform=r}createPatternCanvas(t,i){const{bbox:s,operatorList:r,paintType:l,tilingType:o,color:u,canvasGraphicsFactory:h}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),co("TilingType: "+o);const b=s[0],y=s[1],A=s[2],w=s[3],S=A-b,C=w-y,E=new Float32Array(2);ht.singularValueDecompose2dScale(this.matrix,E);const[k,O]=E;ht.singularValueDecompose2dScale(this.baseTransform,E);const P=k*E[0],I=O*E[1];let F=S,B=C,D=!1,N=!1;const U=Math.ceil(d*P),$=Math.ceil(p*I),tt=Math.ceil(S*P),st=Math.ceil(C*I);U>=tt?F=d:D=!0,$>=st?B=p:N=!0;const rt=this.getSizeAndScale(F,this.ctx.canvas.width,P),dt=this.getSizeAndScale(B,this.ctx.canvas.height,I),j=t.cachedCanvases.getCanvas("pattern",rt.size,dt.size),T=j.context,X=h.createCanvasGraphics(T,i);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,l,u),T.translate(-rt.scale*b,-dt.scale*y),X.transform(0,rt.scale,0,0,dt.scale,0,0),T.save(),X.dependencyTracker?.save(),this.clipBbox(X,b,y,A,w),X.baseTransform=ae(X.ctx),X.executeOperatorList(r),X.endDrawing(),X.dependencyTracker?.restore(),T.restore(),D||N){const et=j.canvas;D&&(F=d),N&&(B=p);const gt=this.getSizeAndScale(F,this.ctx.canvas.width,P),M=this.getSizeAndScale(B,this.ctx.canvas.height,I),H=gt.size,G=M.size,nt=t.cachedCanvases.getCanvas("pattern-workaround",H,G),Q=nt.context,it=D?Math.floor(S/d):0,at=N?Math.floor(C/p):0;for(let ct=0;ct<=it;ct++)for(let lt=0;lt<=at;lt++)Q.drawImage(et,H*ct,G*lt,H,G,0,0,H,G);return{canvas:nt.canvas,scaleX:gt.scale,scaleY:M.scale,offsetX:b,offsetY:y}}return{canvas:j.canvas,scaleX:rt.scale,scaleY:dt.scale,offsetX:b,offsetY:y}}getSizeAndScale(t,i,s){const r=Math.max(dh.MAX_PATTERN_SIZE,i);let l=Math.ceil(t*s);return l>=r?l=r:s=l/t,{scale:s,size:l}}clipBbox(t,i,s,r,l){const o=r-i,u=l-s;t.ctx.rect(i,s,o,u),ht.axialAlignedBoundingBox([i,s,r,l],ae(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,i,s){const r=t.ctx,l=t.current;switch(i){case Gp.COLORED:const{fillStyle:o,strokeStyle:u}=this.ctx;r.fillStyle=l.fillColor=o,r.strokeStyle=l.strokeColor=u;break;case Gp.UNCOLORED:r.fillStyle=r.strokeStyle=s,l.fillColor=l.strokeColor=s;break;default:throw new Fy(`Unsupported paint type: ${i}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,i,s,r,l){let o=s;r!==Oe.SHADING&&(o=ht.transform(o,i.baseTransform),this.matrix&&(o=ht.transform(o,this.matrix)));const u=this.createPatternCanvas(i,l);let h=new DOMMatrix(o);h=h.translate(u.offsetX,u.offsetY),h=h.scale(1/u.scaleX,1/u.scaleY);const d=t.createPattern(u.canvas,"repeat");return d.setTransform(h),d}}function Cv({src:g,srcPos:t=0,dest:i,width:s,height:r,nonBlackColor:l=4294967295,inverseDecode:o=!1}){const u=ke.isLittleEndian?4278190080:255,[h,d]=o?[l,u]:[u,l],p=s>>3,b=s&7,y=g.length;i=new Uint32Array(i.buffer);let A=0;for(let w=0;w<r;w++){for(const C=t+p;t<C;t++){const E=t<y?g[t]:255;i[A++]=E&128?d:h,i[A++]=E&64?d:h,i[A++]=E&32?d:h,i[A++]=E&16?d:h,i[A++]=E&8?d:h,i[A++]=E&4?d:h,i[A++]=E&2?d:h,i[A++]=E&1?d:h}if(b===0)continue;const S=t<y?g[t++]:255;for(let C=0;C<b;C++)i[A++]=S&1<<7-C?d:h}return{srcPos:t,destPos:A}}const Vp=16,Yp=100,Tv=15,Xp=10,We=16,zu=new DOMMatrix,oi=new Float32Array(2),sa=new Float32Array([1/0,1/0,-1/0,-1/0]);function Dv(g,t){if(g._removeMirroring)throw new Error("Context is already forwarding operations.");g.__originalSave=g.save,g.__originalRestore=g.restore,g.__originalRotate=g.rotate,g.__originalScale=g.scale,g.__originalTranslate=g.translate,g.__originalTransform=g.transform,g.__originalSetTransform=g.setTransform,g.__originalResetTransform=g.resetTransform,g.__originalClip=g.clip,g.__originalMoveTo=g.moveTo,g.__originalLineTo=g.lineTo,g.__originalBezierCurveTo=g.bezierCurveTo,g.__originalRect=g.rect,g.__originalClosePath=g.closePath,g.__originalBeginPath=g.beginPath,g._removeMirroring=()=>{g.save=g.__originalSave,g.restore=g.__originalRestore,g.rotate=g.__originalRotate,g.scale=g.__originalScale,g.translate=g.__originalTranslate,g.transform=g.__originalTransform,g.setTransform=g.__originalSetTransform,g.resetTransform=g.__originalResetTransform,g.clip=g.__originalClip,g.moveTo=g.__originalMoveTo,g.lineTo=g.__originalLineTo,g.bezierCurveTo=g.__originalBezierCurveTo,g.rect=g.__originalRect,g.closePath=g.__originalClosePath,g.beginPath=g.__originalBeginPath,delete g._removeMirroring},g.save=function(){t.save(),this.__originalSave()},g.restore=function(){t.restore(),this.__originalRestore()},g.translate=function(i,s){t.translate(i,s),this.__originalTranslate(i,s)},g.scale=function(i,s){t.scale(i,s),this.__originalScale(i,s)},g.transform=function(i,s,r,l,o,u){t.transform(i,s,r,l,o,u),this.__originalTransform(i,s,r,l,o,u)},g.setTransform=function(i,s,r,l,o,u){t.setTransform(i,s,r,l,o,u),this.__originalSetTransform(i,s,r,l,o,u)},g.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},g.rotate=function(i){t.rotate(i),this.__originalRotate(i)},g.clip=function(i){t.clip(i),this.__originalClip(i)},g.moveTo=function(i,s){t.moveTo(i,s),this.__originalMoveTo(i,s)},g.lineTo=function(i,s){t.lineTo(i,s),this.__originalLineTo(i,s)},g.bezierCurveTo=function(i,s,r,l,o,u){t.bezierCurveTo(i,s,r,l,o,u),this.__originalBezierCurveTo(i,s,r,l,o,u)},g.rect=function(i,s,r,l){t.rect(i,s,r,l),this.__originalRect(i,s,r,l)},g.closePath=function(){t.closePath(),this.__originalClosePath()},g.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class Nv{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,i,s){let r;return this.cache[t]!==void 0?(r=this.cache[t],this.canvasFactory.reset(r,i,s)):(r=this.canvasFactory.create(i,s),this.cache[t]=r),r}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const i=this.cache[t];this.canvasFactory.destroy(i),delete this.cache[t]}}}function Kl(g,t,i,s,r,l,o,u,h,d){const[p,b,y,A,w,S]=ae(g);if(b===0&&y===0){const k=o*p+w,O=Math.round(k),P=u*A+S,I=Math.round(P),F=(o+h)*p+w,B=Math.abs(Math.round(F)-O)||1,D=(u+d)*A+S,N=Math.abs(Math.round(D)-I)||1;return g.setTransform(Math.sign(p),0,0,Math.sign(A),O,I),g.drawImage(t,i,s,r,l,0,0,B,N),g.setTransform(p,b,y,A,w,S),[B,N]}if(p===0&&A===0){const k=u*y+w,O=Math.round(k),P=o*b+S,I=Math.round(P),F=(u+d)*y+w,B=Math.abs(Math.round(F)-O)||1,D=(o+h)*b+S,N=Math.abs(Math.round(D)-I)||1;return g.setTransform(0,Math.sign(b),Math.sign(y),0,O,I),g.drawImage(t,i,s,r,l,0,0,N,B),g.setTransform(p,b,y,A,w,S),[N,B]}g.drawImage(t,i,s,r,l,o,u,h,d);const C=Math.hypot(p,b),E=Math.hypot(y,A);return[C*h,E*d]}class $p{alphaIsShape=!1;fontSize=0;fontSizeScale=1;textMatrix=null;textMatrixScale=1;fontMatrix=Hu;leading=0;x=0;y=0;lineX=0;lineY=0;charSpacing=0;wordSpacing=0;textHScale=1;textRenderingMode=Me.FILL;textRise=0;fillColor="#000000";strokeColor="#000000";patternFill=!1;patternStroke=!1;fillAlpha=1;strokeAlpha=1;lineWidth=1;activeSMask=null;transferMaps="none";constructor(t,i,s){s?.(this),this.clipBox=new Float32Array([0,0,t,i]),this.minMax=sa.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=Oe.FILL,i=null){const s=this.minMax.slice();if(t===Oe.STROKE){i||Jt("Stroke bounding box must include transform."),ht.singularValueDecompose2dScale(i,oi);const r=oi[0]*this.lineWidth/2,l=oi[1]*this.lineWidth/2;s[0]-=r,s[1]-=l,s[2]+=r,s[3]+=l}return s}updateClipFromPath(){const t=ht.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(sa,0)}getClippedPathBoundingBox(t=Oe.FILL,i=null){return ht.intersect(this.clipBox,this.getPathBoundingBox(t,i))}}function Kp(g,t){if(t instanceof ImageData){g.putImageData(t,0,0);return}const i=t.height,s=t.width,r=i%We,l=(i-r)/We,o=r===0?l:l+1,u=g.createImageData(s,We);let h=0,d;const p=t.data,b=u.data;let y,A,w,S;if(t.kind===to.GRAYSCALE_1BPP){const C=p.byteLength,E=new Uint32Array(b.buffer,0,b.byteLength>>2),k=E.length,O=s+7>>3,P=4294967295,I=ke.isLittleEndian?4278190080:255;for(y=0;y<o;y++){for(w=y<l?We:r,d=0,A=0;A<w;A++){const F=C-h;let B=0;const D=F>O?s:F*8-7,N=D&-8;let U=0,$=0;for(;B<N;B+=8)$=p[h++],E[d++]=$&128?P:I,E[d++]=$&64?P:I,E[d++]=$&32?P:I,E[d++]=$&16?P:I,E[d++]=$&8?P:I,E[d++]=$&4?P:I,E[d++]=$&2?P:I,E[d++]=$&1?P:I;for(;B<D;B++)U===0&&($=p[h++],U=128),E[d++]=$&U?P:I,U>>=1}for(;d<k;)E[d++]=0;g.putImageData(u,0,y*We)}}else if(t.kind===to.RGBA_32BPP){for(A=0,S=s*We*4,y=0;y<l;y++)b.set(p.subarray(h,h+S)),h+=S,g.putImageData(u,0,A),A+=We;y<o&&(S=s*r*4,b.set(p.subarray(h,h+S)),g.putImageData(u,0,A))}else if(t.kind===to.RGB_24BPP)for(w=We,S=s*w,y=0;y<o;y++){for(y>=l&&(w=r,S=s*w),d=0,A=S;A--;)b[d++]=p[h++],b[d++]=p[h++],b[d++]=p[h++],b[d++]=255;g.putImageData(u,0,y*We)}else throw new Error(`bad image kind: ${t.kind}`)}function Qp(g,t){if(t.bitmap){g.drawImage(t.bitmap,0,0);return}const i=t.height,s=t.width,r=i%We,l=(i-r)/We,o=r===0?l:l+1,u=g.createImageData(s,We);let h=0;const d=t.data,p=u.data;for(let b=0;b<o;b++){const y=b<l?We:r;({srcPos:h}=Cv({src:d,srcPos:h,dest:p,width:s,height:y,nonBlackColor:0})),g.putImageData(u,0,b*We)}}function lr(g,t){const i=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of i)g[s]!==void 0&&(t[s]=g[s]);g.setLineDash!==void 0&&(t.setLineDash(g.getLineDash()),t.lineDashOffset=g.lineDashOffset)}function Ql(g){g.strokeStyle=g.fillStyle="#000000",g.fillRule="nonzero",g.globalAlpha=1,g.lineWidth=1,g.lineCap="butt",g.lineJoin="miter",g.miterLimit=10,g.globalCompositeOperation="source-over",g.font="10px sans-serif",g.setLineDash!==void 0&&(g.setLineDash([]),g.lineDashOffset=0);const{filter:t}=g;t!=="none"&&t!==""&&(g.filter="none")}function Wp(g,t){if(t)return!0;ht.singularValueDecompose2dScale(g,oi);const i=Math.fround(Gi.pixelRatio*ha.PDF_TO_CSS_UNITS);return oi[0]<=i&&oi[1]<=i}const Mv=["butt","round","square"],Rv=["miter","round","bevel"],Ov={},Zp={};class ra{constructor(t,i,s,r,l,{optionalContentConfig:o,markedContentStack:u=null},h,d,p){this.ctx=t,this.current=new $p(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=i,this.objs=s,this.canvasFactory=r,this.filterFactory=l,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=u||[],this.optionalContentConfig=o,this.cachedCanvases=new Nv(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=h,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(t,i,s=null){return typeof i=="string"?(this.dependencyTracker?.recordNamedDependency(t,i),i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i)):s}beginDrawing({transform:t,viewport:i,transparency:s=!1,background:r=null}){const l=this.ctx.canvas.width,o=this.ctx.canvas.height,u=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,l,o),this.ctx.fillStyle=u,s){const h=this.cachedCanvases.getCanvas("transparent",l,o);this.compositeCtx=this.ctx,this.transparentCanvas=h.canvas,this.ctx=h.context,this.ctx.save(),this.ctx.transform(...ae(this.compositeCtx))}this.ctx.save(),Ql(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...i.transform),this.viewportScale=i.scale,this.baseTransform=ae(this.ctx)}executeOperatorList(t,i,s,r,l){const o=t.argsArray,u=t.fnArray;let h=i||0;const d=o.length;if(d===h)return h;const p=d-h>Xp&&typeof s=="function",b=p?Date.now()+Tv:0;let y=0;const A=this.commonObjs,w=this.objs;let S,C;for(;;){if(r!==void 0&&h===r.nextBreakPoint)return r.breakIt(h,s),h;if(!l||l(h))if(S=u[h],C=o[h]??null,S!==mr.dependency)C===null?this[S](h):this[S](h,...C);else for(const E of C){this.dependencyTracker?.recordNamedData(E,h);const k=E.startsWith("g_")?A:w;if(!k.has(E))return k.get(E,s),h}if(h++,h===d)return h;if(p&&++y>Xp){if(Date.now()>b)return s(),h;y=0}}}#t(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#t(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const i of t.values())typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&(i.width=i.height=0);t.clear()}this._cachedBitmapsMap.clear(),this.#e()}#e(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const i=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=i}}}_scaleImage(t,i){const s=t.width??t.displayWidth,r=t.height??t.displayHeight;let l=Math.max(Math.hypot(i[0],i[1]),1),o=Math.max(Math.hypot(i[2],i[3]),1),u=s,h=r,d="prescale1",p,b;for(;l>2&&u>1||o>2&&h>1;){let y=u,A=h;l>2&&u>1&&(y=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u/2),l/=u/y),o>2&&h>1&&(A=h>=16384?Math.floor(h/2)-1||1:Math.ceil(h)/2,o/=h/A),p=this.cachedCanvases.getCanvas(d,y,A),b=p.context,b.clearRect(0,0,y,A),b.drawImage(t,0,0,u,h,0,0,y,A),t=p.canvas,u=y,h=A,d=d==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:u,paintHeight:h}}_createMaskCanvas(t,i){const s=this.ctx,{width:r,height:l}=i,o=this.current.fillColor,u=this.current.patternFill,h=ae(s);let d,p,b,y;if((i.bitmap||i.data)&&i.count>1){const U=i.bitmap||i.data.buffer;p=JSON.stringify(u?h:[h.slice(0,4),o]),d=this._cachedBitmapsMap.get(U),d||(d=new Map,this._cachedBitmapsMap.set(U,d));const $=d.get(p);if($&&!u){const tt=Math.round(Math.min(h[0],h[2])+h[4]),st=Math.round(Math.min(h[1],h[3])+h[5]);return this.dependencyTracker?.recordDependencies(t,_i.transformAndFill),{canvas:$,offsetX:tt,offsetY:st}}b=$}b||(y=this.cachedCanvases.getCanvas("maskCanvas",r,l),Qp(y.context,i));let A=ht.transform(h,[1/r,0,0,-1/l,0,0]);A=ht.transform(A,[1,0,0,1,0,-l]);const w=sa.slice();ht.axialAlignedBoundingBox([0,0,r,l],A,w);const[S,C,E,k]=w,O=Math.round(E-S)||1,P=Math.round(k-C)||1,I=this.cachedCanvases.getCanvas("fillCanvas",O,P),F=I.context,B=S,D=C;F.translate(-B,-D),F.transform(...A),b||(b=this._scaleImage(y.canvas,Ii(F)),b=b.img,d&&u&&d.set(p,b)),F.imageSmoothingEnabled=Wp(ae(F),i.interpolate),Kl(F,b,0,0,b.width,b.height,0,0,r,l),F.globalCompositeOperation="source-in";const N=ht.transform(Ii(F),[1,0,0,1,-B,-D]);return F.fillStyle=u?o.getPattern(s,this,N,Oe.FILL,t):o,F.fillRect(0,0,r,l),d&&!u&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,I.canvas)),this.dependencyTracker?.recordDependencies(t,_i.transformAndFill),{canvas:I.canvas,offsetX:Math.round(B),offsetY:Math.round(D)}}setLineWidth(t,i){this.dependencyTracker?.recordSimpleData("lineWidth",t),i!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=i,this.ctx.lineWidth=i}setLineCap(t,i){this.dependencyTracker?.recordSimpleData("lineCap",t),this.ctx.lineCap=Mv[i]}setLineJoin(t,i){this.dependencyTracker?.recordSimpleData("lineJoin",t),this.ctx.lineJoin=Rv[i]}setMiterLimit(t,i){this.dependencyTracker?.recordSimpleData("miterLimit",t),this.ctx.miterLimit=i}setDash(t,i,s){this.dependencyTracker?.recordSimpleData("dash",t);const r=this.ctx;r.setLineDash!==void 0&&(r.setLineDash(i),r.lineDashOffset=s)}setRenderingIntent(t,i){}setFlatness(t,i){}setGState(t,i){for(const[s,r]of i)switch(s){case"LW":this.setLineWidth(t,r);break;case"LC":this.setLineCap(t,r);break;case"LJ":this.setLineJoin(t,r);break;case"ML":this.setMiterLimit(t,r);break;case"D":this.setDash(t,r[0],r[1]);break;case"RI":this.setRenderingIntent(t,r);break;case"FL":this.setFlatness(t,r);break;case"Font":this.setFont(t,r[0],r[1]);break;case"CA":this.dependencyTracker?.recordSimpleData("strokeAlpha",t),this.current.strokeAlpha=r;break;case"ca":this.dependencyTracker?.recordSimpleData("fillAlpha",t),this.ctx.globalAlpha=this.current.fillAlpha=r;break;case"BM":this.dependencyTracker?.recordSimpleData("globalCompositeOperation",t),this.ctx.globalCompositeOperation=r;break;case"SMask":this.dependencyTracker?.recordSimpleData("SMask",t),this.current.activeSMask=r?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.dependencyTracker?.recordSimpleData("filter",t),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(r);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(t){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const i=this.ctx.canvas.width,s=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,l=this.cachedCanvases.getCanvas(r,i,s);this.suspendedCtx=this.ctx;const o=this.ctx=l.context;o.setTransform(this.suspendedCtx.getTransform()),lr(this.suspendedCtx,o),Dv(o,this.suspendedCtx),this.setGState(t,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lr(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const i=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,i,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,i,s,r){const l=r[0],o=r[1],u=r[2]-l,h=r[3]-o;u===0||h===0||(this.genericComposeSMask(i.context,s,u,h,i.subtype,i.backdrop,i.transferMap,l,o,i.offsetX,i.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,i,s,r,l,o,u,h,d,p,b){let y=t.canvas,A=h-p,w=d-b;if(o)if(A<0||w<0||A+s>y.width||w+r>y.height){const C=this.cachedCanvases.getCanvas("maskExtension",s,r),E=C.context;E.drawImage(y,-A,-w),E.globalCompositeOperation="destination-atop",E.fillStyle=o,E.fillRect(0,0,s,r),E.globalCompositeOperation="source-over",y=C.canvas,A=w=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const C=new Path2D;C.rect(A,w,s,r),t.clip(C),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(A,w,s,r),t.restore()}i.save(),i.globalAlpha=1,i.setTransform(1,0,0,1,0,0),l==="Alpha"&&u?i.filter=this.filterFactory.addAlphaFilter(u):l==="Luminosity"&&(i.filter=this.filterFactory.addLuminosityFilter(u));const S=new Path2D;S.rect(h,d,s,r),i.clip(S),i.globalCompositeOperation="destination-in",i.drawImage(y,A,w,s,r,h,d,s,r),i.restore()}save(t){this.inSMaskMode&&lr(this.ctx,this.suspendedCtx),this.ctx.save();const i=this.current;this.stateStack.push(i),this.current=i.clone(),this.dependencyTracker?.save(t)}restore(t){if(this.dependencyTracker?.restore(t),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&lr(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,i,s,r,l,o,u){this.dependencyTracker?.recordIncrementalData("transform",t),this.ctx.transform(i,s,r,l,o,u),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,i,s,r){let[l]=s;if(!r){l||=s[0]=new Path2D,this[i](t,l);return}if(this.dependencyTracker!==null){const o=i===mr.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(t).recordBBox(t,this.ctx,r[0]-o,r[2]+o,r[1]-o,r[3]+o).recordDependencies(t,["transform"])}if(!(l instanceof Path2D)){const o=s[0]=new Path2D;for(let u=0,h=l.length;u<h;)switch(l[u++]){case ql.moveTo:o.moveTo(l[u++],l[u++]);break;case ql.lineTo:o.lineTo(l[u++],l[u++]);break;case ql.curveTo:o.bezierCurveTo(l[u++],l[u++],l[u++],l[u++],l[u++],l[u++]);break;case ql.closePath:o.closePath();break;default:St(`Unrecognized drawing path operator: ${l[u-1]}`);break}l=o}ht.axialAlignedBoundingBox(r,ae(this.ctx),this.current.minMax),this[i](t,l),this._pathStartIdx=t}closePath(t){this.ctx.closePath()}stroke(t,i,s=!0){const r=this.ctx,l=this.current.strokeColor;if(r.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof l=="object"&&l?.getPattern){const o=l.isModifyingCurrentTransform()?r.getTransform():null;if(r.save(),r.strokeStyle=l.getPattern(r,this,Ii(r),Oe.STROKE,t),o){const u=new Path2D;u.addPath(i,r.getTransform().invertSelf().multiplySelf(o)),i=u}this.rescaleAndStroke(i,!1),r.restore()}else this.rescaleAndStroke(i,!0);this.dependencyTracker?.recordDependencies(t,_i.stroke),s&&this.consumePath(t,i,this.current.getClippedPathBoundingBox(Oe.STROKE,ae(this.ctx))),r.globalAlpha=this.current.fillAlpha}closeStroke(t,i){this.stroke(t,i)}fill(t,i,s=!0){const r=this.ctx,l=this.current.fillColor,o=this.current.patternFill;let u=!1;if(o){const d=l.isModifyingCurrentTransform()?r.getTransform():null;if(this.dependencyTracker?.save(t),r.save(),r.fillStyle=l.getPattern(r,this,Ii(r),Oe.FILL,t),d){const p=new Path2D;p.addPath(i,r.getTransform().invertSelf().multiplySelf(d)),i=p}u=!0}const h=this.current.getClippedPathBoundingBox();this.contentVisible&&h!==null&&(this.pendingEOFill?(r.fill(i,"evenodd"),this.pendingEOFill=!1):r.fill(i)),this.dependencyTracker?.recordDependencies(t,_i.fill),u&&(r.restore(),this.dependencyTracker?.restore(t)),s&&this.consumePath(t,i,h)}eoFill(t,i){this.pendingEOFill=!0,this.fill(t,i)}fillStroke(t,i){this.fill(t,i,!1),this.stroke(t,i,!1),this.consumePath(t,i)}eoFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}closeFillStroke(t,i){this.fillStroke(t,i)}closeEOFillStroke(t,i){this.pendingEOFill=!0,this.fillStroke(t,i)}endPath(t,i){this.consumePath(t,i)}rawFillPath(t,i){this.ctx.fill(i),this.dependencyTracker?.recordDependencies(t,_i.rawFillPath).recordOperation(t)}clip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Ov}eoClip(t){this.dependencyTracker?.recordFutureForcedDependency("clipMode",t),this.pendingClip=Zp}beginText(t){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,this.dependencyTracker?.recordOpenMarker(t).resetIncrementalData("sameLineText").resetIncrementalData("moveText",t)}endText(t){const i=this.pendingTextPaths,s=this.ctx;if(this.dependencyTracker){const{dependencyTracker:r}=this;i!==void 0&&r.recordFutureForcedDependency("textClip",r.getOpenMarker()).recordFutureForcedDependency("textClip",t),r.recordCloseMarker(t)}if(i!==void 0){const r=new Path2D,l=s.getTransform().invertSelf();for(const{transform:o,x:u,y:h,fontSize:d,path:p}of i)p&&r.addPath(p,new DOMMatrix(o).preMultiplySelf(l).translate(u,h).scale(d,-d));s.clip(r)}delete this.pendingTextPaths}setCharSpacing(t,i){this.dependencyTracker?.recordSimpleData("charSpacing",t),this.current.charSpacing=i}setWordSpacing(t,i){this.dependencyTracker?.recordSimpleData("wordSpacing",t),this.current.wordSpacing=i}setHScale(t,i){this.dependencyTracker?.recordSimpleData("hScale",t),this.current.textHScale=i/100}setLeading(t,i){this.dependencyTracker?.recordSimpleData("leading",t),this.current.leading=-i}setFont(t,i,s){this.dependencyTracker?.recordSimpleData("font",t).recordSimpleDataFromNamed("fontObj",i,t);const r=this.commonObjs.get(i),l=this.current;if(!r)throw new Error(`Can't find font for ${i}`);if(l.fontMatrix=r.fontMatrix||Hu,(l.fontMatrix[0]===0||l.fontMatrix[3]===0)&&St("Invalid font matrix for font "+i),s<0?(s=-s,l.fontDirection=-1):l.fontDirection=1,this.current.font=r,this.current.fontSize=s,r.isType3Font)return;const o=r.loadedName||"sans-serif",u=r.systemFontInfo?.css||`"${o}", ${r.fallbackName}`;let h="normal";r.black?h="900":r.bold&&(h="bold");const d=r.italic?"italic":"normal";let p=s;s<Vp?p=Vp:s>Yp&&(p=Yp),this.current.fontSizeScale=s/p,this.ctx.font=`${d} ${h} ${p}px ${u}`}setTextRenderingMode(t,i){this.dependencyTracker?.recordSimpleData("textRenderingMode",t),this.current.textRenderingMode=i}setTextRise(t,i){this.dependencyTracker?.recordSimpleData("textRise",t),this.current.textRise=i}moveText(t,i,s){this.dependencyTracker?.resetIncrementalData("sameLineText").recordIncrementalData("moveText",t),this.current.x=this.current.lineX+=i,this.current.y=this.current.lineY+=s}setLeadingMoveText(t,i,s){this.setLeading(t,-s),this.moveText(t,i,s)}setTextMatrix(t,i){this.dependencyTracker?.recordSimpleData("textMatrix",t);const{current:s}=this;s.textMatrix=i,s.textMatrixScale=Math.hypot(i[0],i[1]),s.x=s.lineX=0,s.y=s.lineY=0}nextLine(t){this.moveText(t,0,this.current.leading),this.dependencyTracker?.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??t)}#n(t,i,s){const r=new Path2D;return r.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(i)),r}paintChar(t,i,s,r,l,o){const u=this.ctx,h=this.current,d=h.font,p=h.textRenderingMode,b=h.fontSize/h.fontSizeScale,y=p&Me.FILL_STROKE_MASK,A=!!(p&Me.ADD_TO_PATH_FLAG),w=h.patternFill&&!d.missingFile,S=h.patternStroke&&!d.missingFile;let C;if((d.disableFontFace||A||w||S)&&!d.missingFile&&(C=d.getPathGenerator(this.commonObjs,i)),C&&(d.disableFontFace||w||S)){u.save(),u.translate(s,r),u.scale(b,-b),this.dependencyTracker?.recordCharacterBBox(t,u,d);let E;if(y===Me.FILL||y===Me.FILL_STROKE)if(l){E=u.getTransform(),u.setTransform(...l);const k=this.#n(C,E,l);u.fill(k)}else u.fill(C);if(y===Me.STROKE||y===Me.FILL_STROKE)if(o){E||=u.getTransform(),u.setTransform(...o);const{a:k,b:O,c:P,d:I}=E,F=ht.inverseTransform(o),B=ht.transform([k,O,P,I,0,0],F);ht.singularValueDecompose2dScale(B,oi),u.lineWidth*=Math.max(oi[0],oi[1])/b,u.stroke(this.#n(C,E,o))}else u.lineWidth/=b,u.stroke(C);u.restore()}else(y===Me.FILL||y===Me.FILL_STROKE)&&(u.fillText(i,s,r),this.dependencyTracker?.recordCharacterBBox(t,u,d,b,s,r,()=>u.measureText(i))),(y===Me.STROKE||y===Me.FILL_STROKE)&&(this.dependencyTracker&&this.dependencyTracker?.recordCharacterBBox(t,u,d,b,s,r,()=>u.measureText(i)).recordDependencies(t,_i.stroke),u.strokeText(i,s,r));A&&((this.pendingTextPaths||=[]).push({transform:ae(u),x:s,y:r,fontSize:b,path:C}),this.dependencyTracker?.recordCharacterBBox(t,u,d,b,s,r))}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const i=t.getImageData(0,0,10,10).data;let s=!1;for(let r=3;r<i.length;r+=4)if(i[r]>0&&i[r]<255){s=!0;break}return Tt(this,"isFontSubpixelAAEnabled",s)}showText(t,i){this.dependencyTracker&&(this.dependencyTracker.recordDependencies(t,_i.showText).resetBBox(t),this.current.textRenderingMode&Me.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",t).inheritPendingDependenciesAsFutureForcedDependencies());const s=this.current,r=s.font;if(r.isType3Font){this.showType3Text(t,i),this.dependencyTracker?.recordShowTextOperation(t);return}const l=s.fontSize;if(l===0){this.dependencyTracker?.recordOperation(t);return}const o=this.ctx,u=s.fontSizeScale,h=s.charSpacing,d=s.wordSpacing,p=s.fontDirection,b=s.textHScale*p,y=i.length,A=r.vertical,w=A?1:-1,S=r.defaultVMetrics,C=l*s.fontMatrix[0],E=s.textRenderingMode===Me.FILL&&!r.disableFontFace&&!s.patternFill;o.save(),s.textMatrix&&o.transform(...s.textMatrix),o.translate(s.x,s.y+s.textRise),p>0?o.scale(b,-1):o.scale(b,1);let k,O;if(s.patternFill){o.save();const D=s.fillColor.getPattern(o,this,Ii(o),Oe.FILL,t);k=ae(o),o.restore(),o.fillStyle=D}if(s.patternStroke){o.save();const D=s.strokeColor.getPattern(o,this,Ii(o),Oe.STROKE,t);O=ae(o),o.restore(),o.strokeStyle=D}let P=s.lineWidth;const I=s.textMatrixScale;if(I===0||P===0){const D=s.textRenderingMode&Me.FILL_STROKE_MASK;(D===Me.STROKE||D===Me.FILL_STROKE)&&(P=this.getSinglePixelWidth())}else P/=I;if(u!==1&&(o.scale(u,u),P/=u),o.lineWidth=P,r.isInvalidPDFjsFont){const D=[];let N=0;for(const $ of i)D.push($.unicode),N+=$.width;const U=D.join("");if(o.fillText(U,0,0),this.dependencyTracker!==null){const $=o.measureText(U);this.dependencyTracker.recordBBox(t,this.ctx,-$.actualBoundingBoxLeft,$.actualBoundingBoxRight,-$.actualBoundingBoxAscent,$.actualBoundingBoxDescent).recordShowTextOperation(t)}s.x+=N*C*b,o.restore(),this.compose();return}let F=0,B;for(B=0;B<y;++B){const D=i[B];if(typeof D=="number"){F+=w*D*l/1e3;continue}let N=!1;const U=(D.isSpace?d:0)+h,$=D.fontChar,tt=D.accent;let st,rt,dt=D.width;if(A){const X=D.vmetric||S,et=-(D.vmetric?X[1]:dt*.5)*C,gt=X[2]*C;dt=X?-X[0]:dt,st=et/u,rt=(F+gt)/u}else st=F/u,rt=0;let j;if(r.remeasure&&dt>0){j=o.measureText($);const X=j.width*1e3/l*u;if(dt<X&&this.isFontSubpixelAAEnabled){const et=dt/X;N=!0,o.save(),o.scale(et,1),st/=et}else dt!==X&&(st+=(dt-X)/2e3*l/u)}if(this.contentVisible&&(D.isInFont||r.missingFile)){if(E&&!tt)o.fillText($,st,rt),this.dependencyTracker?.recordCharacterBBox(t,o,j?{bbox:null}:r,l/u,st,rt,()=>j??o.measureText($));else if(this.paintChar(t,$,st,rt,k,O),tt){const X=st+l*tt.offset.x/u,et=rt-l*tt.offset.y/u;this.paintChar(t,tt.fontChar,X,et,k,O)}}const T=A?dt*C-U*p:dt*C+U*p;F+=T,N&&o.restore()}A?s.y-=F:s.x+=F*b,o.restore(),this.compose(),this.dependencyTracker?.recordShowTextOperation(t)}showType3Text(t,i){const s=this.ctx,r=this.current,l=r.font,o=r.fontSize,u=r.fontDirection,h=l.vertical?1:-1,d=r.charSpacing,p=r.wordSpacing,b=r.textHScale*u,y=r.fontMatrix||Hu,A=i.length,w=r.textRenderingMode===Me.INVISIBLE;let S,C,E,k;if(w||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,s.save(),r.textMatrix&&s.transform(...r.textMatrix),s.translate(r.x,r.y+r.textRise),s.scale(b,u);const O=this.dependencyTracker;for(this.dependencyTracker=O?new so(O,t):null,S=0;S<A;++S){if(C=i[S],typeof C=="number"){k=h*C*o/1e3,this.ctx.translate(k,0),r.x+=k*b;continue}const P=(C.isSpace?p:0)+d,I=l.charProcOperatorList[C.operatorListId];I?this.contentVisible&&(this.save(),s.scale(o,o),s.transform(...y),this.executeOperatorList(I),this.restore()):St(`Type3 character "${C.operatorListId}" is not available.`);const F=[C.width,0];ht.applyTransform(F,y),E=F[0]*o+P,s.translate(E,0),r.x+=E*b}s.restore(),O&&(this.dependencyTracker=O)}setCharWidth(t,i,s){}setCharWidthAndBounds(t,i,s,r,l,o,u){const h=new Path2D;h.rect(r,l,o-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordBBox(t,this.ctx,r,o,l,u).recordClipBox(t,this.ctx,r,o,l,u),this.endPath(t)}getColorN_Pattern(t,i){let s;if(i[0]==="TilingPattern"){const r=this.baseTransform||ae(this.ctx),l={createCanvasGraphics:(o,u)=>new ra(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new so(this.dependencyTracker,u,!0):null)};s=new dh(i,this.ctx,l,r)}else s=this._getPattern(t,i[1],i[2]);return s}setStrokeColorN(t,...i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.current.strokeColor=this.getColorN_Pattern(t,i),this.current.patternStroke=!0}setFillColorN(t,...i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.current.fillColor=this.getColorN_Pattern(t,i),this.current.patternFill=!0}setStrokeRGBColor(t,i){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor=i,this.current.patternStroke=!1}setStrokeTransparent(t){this.dependencyTracker?.recordSimpleData("strokeColor",t),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,i){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor=i,this.current.patternFill=!1}setFillTransparent(t){this.dependencyTracker?.recordSimpleData("fillColor",t),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,i,s=null){let r;return this.cachedPatterns.has(i)?r=this.cachedPatterns.get(i):(r=Ev(this.getObject(t,i)),this.cachedPatterns.set(i,r)),s&&(r.matrix=s),r}shadingFill(t,i){if(!this.contentVisible)return;const s=this.ctx;this.save(t);const r=this._getPattern(t,i);s.fillStyle=r.getPattern(s,this,Ii(s),Oe.SHADING,t);const l=Ii(s);if(l){const{width:o,height:u}=s.canvas,h=sa.slice();ht.axialAlignedBoundingBox([0,0,o,u],l,h);const[d,p,b,y]=h;this.ctx.fillRect(d,p,b-d,y-p)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.dependencyTracker?.resetBBox(t).recordFullPageBBox(t).recordDependencies(t,_i.transform).recordDependencies(t,_i.fill).recordOperation(t),this.compose(this.current.getClippedPathBoundingBox()),this.restore(t)}beginInlineImage(){Jt("Should not call beginInlineImage")}beginImageData(){Jt("Should not call beginImageData")}paintFormXObjectBegin(t,i,s){if(this.contentVisible&&(this.save(t),this.baseTransformStack.push(this.baseTransform),i&&this.transform(t,...i),this.baseTransform=ae(this.ctx),s)){ht.axialAlignedBoundingBox(s,this.baseTransform,this.current.minMax);const[r,l,o,u]=s,h=new Path2D;h.rect(r,l,o-r,u-l),this.ctx.clip(h),this.dependencyTracker?.recordClipBox(t,this.ctx,r,o,l,u),this.endPath(t)}}paintFormXObjectEnd(t){this.contentVisible&&(this.restore(t),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t,i){if(!this.contentVisible)return;this.save(t),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const s=this.ctx;i.isolated||co("TODO: Support non-isolated groups."),i.knockout&&St("Knockout groups not supported.");const r=ae(s);if(i.matrix&&s.transform(...i.matrix),!i.bbox)throw new Error("Bounding box is required.");let l=sa.slice();ht.axialAlignedBoundingBox(i.bbox,ae(s),l);const o=[0,0,s.canvas.width,s.canvas.height];l=ht.intersect(l,o)||[0,0,0,0];const u=Math.floor(l[0]),h=Math.floor(l[1]),d=Math.max(Math.ceil(l[2])-u,1),p=Math.max(Math.ceil(l[3])-h,1);this.current.startNewPathAndClipBox([0,0,d,p]);let b="groupAt"+this.groupLevel;i.smask&&(b+="_smask_"+this.smaskCounter++%2);const y=this.cachedCanvases.getCanvas(b,d,p),A=y.context;A.translate(-u,-h),A.transform(...r);let w=new Path2D;const[S,C,E,k]=i.bbox;if(w.rect(S,C,E-S,k-C),i.matrix){const O=new Path2D;O.addPath(w,new DOMMatrix(i.matrix)),w=O}A.clip(w),i.smask&&this.smaskStack.push({canvas:y.canvas,context:A,offsetX:u,offsetY:h,subtype:i.smask.subtype,backdrop:i.smask.backdrop,transferMap:i.smask.transferMap||null,startTransformInverse:null}),(!i.smask||this.dependencyTracker)&&(s.setTransform(1,0,0,1,0,0),s.translate(u,h),s.save()),lr(s,A),this.ctx=A,this.dependencyTracker?.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(s),this.setGState(t,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++}endGroup(t,i){if(!this.contentVisible)return;this.groupLevel--;const s=this.ctx,r=this.groupStack.pop();if(this.ctx=r,this.ctx.imageSmoothingEnabled=!1,this.dependencyTracker?.popBaseTransform(),i.smask)this.tempSMask=this.smaskStack.pop(),this.restore(t),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const l=ae(this.ctx);this.restore(t),this.ctx.save(),this.ctx.setTransform(...l);const o=sa.slice();ht.axialAlignedBoundingBox([0,0,s.canvas.width,s.canvas.height],l,o),this.ctx.drawImage(s.canvas,0,0),this.ctx.restore(),this.compose(o)}}beginAnnotation(t,i,s,r,l,o){if(this.#t(),Ql(this.ctx),this.ctx.save(),this.save(t),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),s){const u=s[2]-s[0],h=s[3]-s[1];if(o&&this.annotationCanvasMap){r=r.slice(),r[4]-=s[0],r[5]-=s[1],s=s.slice(),s[0]=s[1]=0,s[2]=u,s[3]=h,ht.singularValueDecompose2dScale(ae(this.ctx),oi);const{viewportScale:d}=this,p=Math.ceil(u*this.outputScaleX*d),b=Math.ceil(h*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,b);const{canvas:y,context:A}=this.annotationCanvas;this.annotationCanvasMap.set(i,y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=A,this.ctx.save(),this.ctx.setTransform(oi[0],0,0,-oi[1],0,h*oi[1]),Ql(this.ctx)}else{Ql(this.ctx),this.endPath(t);const d=new Path2D;d.rect(s[0],s[1],u,h),this.ctx.clip(d)}}this.current=new $p(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(t,...r),this.transform(t,...l)}endAnnotation(t){this.annotationCanvas&&(this.ctx.restore(),this.#e(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t,i){if(!this.contentVisible)return;const s=i.count;i=this.getObject(t,i.data,i),i.count=s;const r=this.ctx,l=this._createMaskCanvas(t,i),o=l.canvas;r.save(),r.setTransform(1,0,0,1,0,0),r.drawImage(o,l.offsetX,l.offsetY),this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,l.offsetX,l.offsetX+o.width,l.offsetY,l.offsetY+o.height).recordOperation(t),r.restore(),this.compose()}paintImageMaskXObjectRepeat(t,i,s,r=0,l=0,o,u){if(!this.contentVisible)return;i=this.getObject(t,i.data,i);const h=this.ctx;h.save();const d=ae(h);h.transform(s,r,l,o,0,0);const p=this._createMaskCanvas(t,i);h.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]),this.dependencyTracker?.resetBBox(t);for(let b=0,y=u.length;b<y;b+=2){const A=ht.transform(d,[s,r,l,o,u[b],u[b+1]]);h.drawImage(p.canvas,A[4],A[5]),this.dependencyTracker?.recordBBox(t,this.ctx,A[4],A[4]+p.canvas.width,A[5],A[5]+p.canvas.height)}h.restore(),this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageMaskXObjectGroup(t,i){if(!this.contentVisible)return;const s=this.ctx,r=this.current.fillColor,l=this.current.patternFill;this.dependencyTracker?.resetBBox(t).recordDependencies(t,_i.transformAndFill);for(const o of i){const{data:u,width:h,height:d,transform:p}=o,b=this.cachedCanvases.getCanvas("maskCanvas",h,d),y=b.context;y.save();const A=this.getObject(t,u,o);Qp(y,A),y.globalCompositeOperation="source-in",y.fillStyle=l?r.getPattern(y,this,Ii(s),Oe.FILL,t):r,y.fillRect(0,0,h,d),y.restore(),s.save(),s.transform(...p),s.scale(1,-1),Kl(s,b.canvas,0,0,h,d,0,-1,1,1),this.dependencyTracker?.recordBBox(t,s,0,h,0,d),s.restore()}this.compose(),this.dependencyTracker?.recordOperation(t)}paintImageXObject(t,i){if(!this.contentVisible)return;const s=this.getObject(t,i);if(!s){St("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t,s)}paintImageXObjectRepeat(t,i,s,r,l){if(!this.contentVisible)return;const o=this.getObject(t,i);if(!o){St("Dependent image isn't ready yet");return}const u=o.width,h=o.height,d=[];for(let p=0,b=l.length;p<b;p+=2)d.push({transform:[s,0,0,r,l[p],l[p+1]],x:0,y:0,w:u,h});this.paintInlineImageXObjectGroup(t,o,d)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:i,width:s,height:r}=t,l=this.cachedCanvases.getCanvas("inlineImage",s,r),o=l.context;return o.filter=this.current.transferMaps,o.drawImage(i,0,0),o.filter="none",l.canvas}paintInlineImageXObject(t,i){if(!this.contentVisible)return;const s=i.width,r=i.height,l=this.ctx;this.save(t);const{filter:o}=l;o!=="none"&&o!==""&&(l.filter="none"),l.scale(1/s,-1/r);let u;if(i.bitmap)u=this.applyTransferMapsToBitmap(i);else if(typeof HTMLElement=="function"&&i instanceof HTMLElement||!i.data)u=i;else{const p=this.cachedCanvases.getCanvas("inlineImage",s,r).context;Kp(p,i),u=this.applyTransferMapsToCanvas(p)}const h=this._scaleImage(u,Ii(l));l.imageSmoothingEnabled=Wp(ae(l),i.interpolate),this.dependencyTracker?.resetBBox(t).recordBBox(t,l,0,s,-r,0).recordDependencies(t,_i.imageXObject).recordOperation(t),Kl(l,h.img,0,0,h.paintWidth,h.paintHeight,0,-r,s,r),this.compose(),this.restore(t)}paintInlineImageXObjectGroup(t,i,s){if(!this.contentVisible)return;const r=this.ctx;let l;if(i.bitmap)l=i.bitmap;else{const o=i.width,u=i.height,d=this.cachedCanvases.getCanvas("inlineImage",o,u).context;Kp(d,i),l=this.applyTransferMapsToCanvas(d)}this.dependencyTracker?.resetBBox(t);for(const o of s)r.save(),r.transform(...o.transform),r.scale(1,-1),Kl(r,l,o.x,o.y,o.w,o.h,0,-1,1,1),this.dependencyTracker?.recordBBox(t,r,0,1,-1,0),r.restore();this.dependencyTracker?.recordOperation(t),this.compose()}paintSolidColorImageMask(t){this.contentVisible&&(this.dependencyTracker?.resetBBox(t).recordBBox(t,this.ctx,0,1,0,1).recordDependencies(t,_i.fill).recordOperation(t),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t,i){}markPointProps(t,i,s){}beginMarkedContent(t,i){this.dependencyTracker?.beginMarkedContent(t),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,i,s){this.dependencyTracker?.beginMarkedContent(t),i==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(t){this.dependencyTracker?.endMarkedContent(t),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(t){}endCompat(t){}consumePath(t,i,s){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(s);const l=this.ctx;this.pendingClip?(r||(this.pendingClip===Zp?l.clip(i,"evenodd"):l.clip(i)),this.pendingClip=null,this.dependencyTracker?.bboxToClipBoxDropOperation(t).recordFutureForcedDependency("clipPath",t)):this.dependencyTracker?.recordOperation(t),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ae(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const i=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),r=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,r)/i}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:i,b:s,c:r,d:l}=this.ctx.getTransform();let o,u;if(s===0&&r===0){const h=Math.abs(i),d=Math.abs(l);if(h===d)if(t===0)o=u=1/h;else{const p=h*t;o=u=p<1?1/p:1}else if(t===0)o=1/h,u=1/d;else{const p=h*t,b=d*t;o=p<1?1/p:1,u=b<1?1/b:1}}else{const h=Math.abs(i*l-s*r),d=Math.hypot(i,s),p=Math.hypot(r,l);if(t===0)o=p/h,u=d/h;else{const b=t*h;o=p>b?p/b:1,u=d>b?d/b:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=u}return this._cachedScaleForStroking}rescaleAndStroke(t,i){const{ctx:s,current:{lineWidth:r}}=this,[l,o]=this.getScaleForStroking();if(l===o){s.lineWidth=(r||1)*l,s.stroke(t);return}const u=s.getLineDash();i&&s.save(),s.scale(l,o),zu.a=1/l,zu.d=1/o;const h=new Path2D;if(h.addPath(t,zu),u.length>0){const d=Math.max(l,o);s.setLineDash(u.map(p=>p/d)),s.lineDashOffset/=d}s.lineWidth=r||1,s.stroke(h),i&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}}for(const g in mr)ra.prototype[g]!==void 0&&(ra.prototype[mr[g]]=ra.prototype[g]);class la{#t;#e;#n;static strings=["fontFamily","fontWeight","italicAngle"];static write(t){const i=new TextEncoder,s={};let r=0;for(const d of la.strings){const p=i.encode(t[d]);s[d]=p,r+=4+p.length}const l=new ArrayBuffer(r),o=new Uint8Array(l),u=new DataView(l);let h=0;for(const d of la.strings){const p=s[d],b=p.length;u.setUint32(h,b),o.set(p,h+4),h+=4+b}return Bt(h===l.byteLength,"CssFontInfo.write: Buffer overflow"),l}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}#i(t){Bt(t<la.strings.length,"Invalid string index");let i=0;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get fontFamily(){return this.#i(0)}get fontWeight(){return this.#i(1)}get italicAngle(){return this.#i(2)}}class oa{#t;#e;#n;static strings=["css","loadedName","baseFontName","src"];static write(t){const i=new TextEncoder,s={};let r=0;for(const y of oa.strings){const A=i.encode(t[y]);s[y]=A,r+=4+A.length}r+=4;let l,o,u=1+r;t.style&&(l=i.encode(t.style.style),o=i.encode(t.style.weight),u+=4+l.length+4+o.length);const h=new ArrayBuffer(u),d=new Uint8Array(h),p=new DataView(h);let b=0;p.setUint8(b++,t.guessFallback?1:0),p.setUint32(b,0),b+=4,r=0;for(const y of oa.strings){const A=s[y],w=A.length;r+=4+w,p.setUint32(b,w),d.set(A,b+4),b+=4+w}return p.setUint32(b-r-4,r),t.style&&(p.setUint32(b,l.length),d.set(l,b+4),b+=4+l.length,p.setUint32(b,o.length),d.set(o,b+4),b+=4+o.length),Bt(b<=h.byteLength,"SubstitionInfo.write: Buffer overflow"),h.transferToFixedLength(b)}constructor(t){this.#t=t,this.#e=new DataView(this.#t),this.#n=new TextDecoder}get guessFallback(){return this.#e.getUint8(0)!==0}#i(t){Bt(t<oa.strings.length,"Invalid string index");let i=5;for(let r=0;r<t;r++)i+=this.#e.getUint32(i)+4;const s=this.#e.getUint32(i);return this.#n.decode(new Uint8Array(this.#t,i+4,s))}get css(){return this.#i(0)}get loadedName(){return this.#i(1)}get baseFontName(){return this.#i(2)}get src(){return this.#i(3)}get style(){let t=1;t+=4+this.#e.getUint32(t);const i=this.#e.getUint32(t),s=this.#n.decode(new Uint8Array(this.#t,t+4,i));t+=4+i;const r=this.#e.getUint32(t),l=this.#n.decode(new Uint8Array(this.#t,t+4,r));return{style:s,weight:l}}}class Qt{static bools=["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"];static numbers=["ascent","defaultWidth","descent"];static strings=["fallbackName","loadedName","mimetype","name"];static#t=Math.ceil(this.bools.length*2/8);static#e=this.#t+this.numbers.length*8;static#n=this.#e+1+8;static#i=this.#n+1+48;static#r=this.#i+1+6;#s;#a;#l;constructor({data:t,extra:i}){this.#s=t,this.#a=new TextDecoder,this.#l=new DataView(this.#s),i&&Object.assign(this,i)}#c(t){Bt(t<Qt.bools.length,"Invalid boolean index");const i=Math.floor(t/4),s=t*2%8,r=this.#l.getUint8(i)>>s&3;return r===0?void 0:r===2}get black(){return this.#c(0)}get bold(){return this.#c(1)}get disableFontFace(){return this.#c(2)}get fontExtraProperties(){return this.#c(3)}get isInvalidPDFjsFont(){return this.#c(4)}get isType3Font(){return this.#c(5)}get italic(){return this.#c(6)}get missingFile(){return this.#c(7)}get remeasure(){return this.#c(8)}get vertical(){return this.#c(9)}#o(t){return Bt(t<Qt.numbers.length,"Invalid number index"),this.#l.getFloat64(Qt.#t+t*8)}get ascent(){return this.#o(0)}get defaultWidth(){return this.#o(1)}get descent(){return this.#o(2)}get bbox(){let t=Qt.#e;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<4;r++)s.push(this.#l.getInt16(t,!0)),t+=2;return s}get fontMatrix(){let t=Qt.#n;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<6;r++)s.push(this.#l.getFloat64(t,!0)),t+=8;return s}get defaultVMetrics(){let t=Qt.#i;if(this.#l.getUint8(t)===0)return;t+=1;const s=[];for(let r=0;r<3;r++)s.push(this.#l.getInt16(t,!0)),t+=2;return s}#d(t){Bt(t<Qt.strings.length,"Invalid string index");let i=Qt.#r+4;for(let l=0;l<t;l++)i+=this.#l.getUint32(i)+4;const s=this.#l.getUint32(i),r=new Uint8Array(s);return r.set(new Uint8Array(this.#s,i+4,s)),this.#a.decode(r)}get fallbackName(){return this.#d(0)}get loadedName(){return this.#d(1)}get mimetype(){return this.#d(2)}get name(){return this.#d(3)}get data(){let t=Qt.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);t+=4+r;const l=this.#l.getUint32(t);if(l!==0)return new Uint8Array(this.#s,t+4,l)}clearData(){let t=Qt.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);t+=4+r;const l=this.#l.getUint32(t);new Uint8Array(this.#s,t+4,l).fill(0),this.#l.setUint32(t,0)}get cssFontInfo(){let t=Qt.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);t+=4+s;const r=this.#l.getUint32(t);if(r===0)return null;const l=new Uint8Array(r);return l.set(new Uint8Array(this.#s,t+4,r)),new la(l.buffer)}get systemFontInfo(){let t=Qt.#r;const i=this.#l.getUint32(t);t+=4+i;const s=this.#l.getUint32(t);if(s===0)return null;const r=new Uint8Array(s);return r.set(new Uint8Array(this.#s,t+4,s)),new oa(r.buffer)}static write(t){const i=t.systemFontInfo?oa.write(t.systemFontInfo):null,s=t.cssFontInfo?la.write(t.cssFontInfo):null,r=new TextEncoder,l={};let o=0;for(const S of Qt.strings)l[S]=r.encode(t[S]),o+=4+l[S].length;const u=Qt.#r+4+o+4+(i?i.byteLength:0)+4+(s?s.byteLength:0)+4+(t.data?t.data.length:0),h=new ArrayBuffer(u),d=new Uint8Array(h),p=new DataView(h);let b=0;const y=Qt.bools.length;let A=0,w=0;for(let S=0;S<y;S++){const C=t[Qt.bools[S]];A|=(C===void 0?0:C?2:1)<<w,w+=2,(w===8||S===y-1)&&(p.setUint8(b++,A),A=0,w=0)}Bt(b===Qt.#t,"FontInfo.write: Boolean properties offset mismatch");for(const S of Qt.numbers)p.setFloat64(b,t[S]),b+=8;if(Bt(b===Qt.#e,"FontInfo.write: Number properties offset mismatch"),t.bbox){p.setUint8(b++,4);for(const S of t.bbox)p.setInt16(b,S,!0),b+=2}else p.setUint8(b++,0),b+=8;if(Bt(b===Qt.#n,"FontInfo.write: BBox properties offset mismatch"),t.fontMatrix){p.setUint8(b++,6);for(const S of t.fontMatrix)p.setFloat64(b,S,!0),b+=8}else p.setUint8(b++,0),b+=48;if(Bt(b===Qt.#i,"FontInfo.write: FontMatrix properties offset mismatch"),t.defaultVMetrics){p.setUint8(b++,1);for(const S of t.defaultVMetrics)p.setInt16(b,S,!0),b+=2}else p.setUint8(b++,0),b+=6;Bt(b===Qt.#r,"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(Qt.#r,0),b+=4;for(const S of Qt.strings){const C=l[S],E=C.length;p.setUint32(b,E),d.set(C,b+4),b+=4+E}if(p.setUint32(Qt.#r,b-Qt.#r-4),!i)p.setUint32(b,0),b+=4;else{const S=i.byteLength;p.setUint32(b,S),Bt(b+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(i),b+4),b+=4+S}if(!s)p.setUint32(b,0),b+=4;else{const S=s.byteLength;p.setUint32(b,S),Bt(b+4+S<=h.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(s),b+4),b+=4+S}return t.data===void 0?(p.setUint32(b,0),b+=4):(p.setUint32(b,t.data.length),d.set(t.data,b+4),b+=4+t.data.length),Bt(b<=h.byteLength,"FontInfo.write: Buffer overflow"),h.transferToFixedLength(b)}}class ca{static#t=null;static#e="";static get workerPort(){return this.#t}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");this.#t=t}static get workerSrc(){return this.#e}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");this.#e=t}}class kv{#t;#e;constructor({parsedData:t,rawData:i}){this.#t=t,this.#e=i}getRaw(){return this.#e}get(t){return this.#t.get(t)??null}[Symbol.iterator](){return this.#t.entries()}}const ia=Symbol("INTERNAL");class Lv{#t=!1;#e=!1;#n=!1;#i=!0;constructor(t,{name:i,intent:s,usage:r,rbGroups:l}){this.#t=!!(t&li.DISPLAY),this.#e=!!(t&li.PRINT),this.name=i,this.intent=s,this.usage=r,this.rbGroups=l}get visible(){if(this.#n)return this.#i;if(!this.#i)return!1;const{print:t,view:i}=this.usage;return this.#t?i?.viewState!=="OFF":this.#e?t?.printState!=="OFF":!0}_setVisible(t,i,s=!1){t!==ia&&Jt("Internal method `_setVisible` called."),this.#n=s,this.#i=i}}class jv{#t=null;#e=new Map;#n=null;#i=null;constructor(t,i=li.DISPLAY){if(this.renderingIntent=i,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,this.#i=t.order;for(const s of t.groups)this.#e.set(s.id,new Lv(i,s));if(t.baseState==="OFF")for(const s of this.#e.values())s._setVisible(ia,!1);for(const s of t.on)this.#e.get(s)._setVisible(ia,!0);for(const s of t.off)this.#e.get(s)._setVisible(ia,!1);this.#n=this.getHash()}}#r(t){const i=t.length;if(i<2)return!0;const s=t[0];for(let r=1;r<i;r++){const l=t[r];let o;if(Array.isArray(l))o=this.#r(l);else if(this.#e.has(l))o=this.#e.get(l).visible;else return St(`Optional content group not found: ${l}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"}isVisible(t){if(this.#e.size===0)return!0;if(!t)return co("Optional content group not defined."),!0;if(t.type==="OCG")return this.#e.has(t.id)?this.#e.get(t.id).visible:(St(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return this.#r(t.expression);if(!t.policy||t.policy==="AnyOn"){for(const i of t.ids){if(!this.#e.has(i))return St(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const i of t.ids){if(!this.#e.has(i))return St(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const i of t.ids){if(!this.#e.has(i))return St(`Optional content group not found: ${i}`),!0;if(!this.#e.get(i).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const i of t.ids){if(!this.#e.has(i))return St(`Optional content group not found: ${i}`),!0;if(this.#e.get(i).visible)return!1}return!0}return St(`Unknown optional content policy ${t.policy}.`),!0}return St(`Unknown group type ${t.type}.`),!0}setVisibility(t,i=!0,s=!0){const r=this.#e.get(t);if(!r){St(`Optional content group not found: ${t}`);return}if(s&&i&&r.rbGroups.length)for(const l of r.rbGroups)for(const o of l)o!==t&&this.#e.get(o)?._setVisible(ia,!1,!0);r._setVisible(ia,!!i,!0),this.#t=null}setOCGState({state:t,preserveRB:i}){let s;for(const r of t){switch(r){case"ON":case"OFF":case"Toggle":s=r;continue}const l=this.#e.get(r);if(l)switch(s){case"ON":this.setVisibility(r,!0,i);break;case"OFF":this.setVisibility(r,!1,i);break;case"Toggle":this.setVisibility(r,!l.visible,i);break}}this.#t=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#e.size?this.#i?this.#i.slice():[...this.#e.keys()]:null}getGroup(t){return this.#e.get(t)||null}getHash(){if(this.#t!==null)return this.#t;const t=new gm;for(const[i,s]of this.#e)t.update(`${i}:${s.visible}`);return this.#t=t.hexdigest()}[Symbol.iterator](){return this.#e.entries()}}class Bv{constructor(t,{disableRange:i=!1,disableStream:s=!1}){Bt(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:l,progressiveDone:o,contentDispositionFilename:u}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=u,l?.length>0){const h=l instanceof Uint8Array&&l.byteLength===l.buffer.byteLength?l.buffer:new Uint8Array(l).buffer;this._queuedChunks.push(h)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!i,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((h,d)=>{this._onReceiveData({begin:h,chunk:d})}),t.addProgressListener((h,d)=>{this._onProgress({loaded:h,total:d})}),t.addProgressiveReadListener(h=>{this._onReceiveData({chunk:h})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:i}){const s=i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength?i.buffer:new Uint8Array(i).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const r=this._rangeReaders.some(function(l){return l._begin!==t?!1:(l._enqueue(s),!0)});Bt(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(t){t.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:t.loaded}):this._fullRequestReader?.onProgress?.({loaded:t.loaded,total:t.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const i=this._rangeReaders.indexOf(t);i>=0&&this._rangeReaders.splice(i,1)}getFullReader(){Bt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Pv(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Fv(this,t,i);return this._pdfDataRangeTransport.requestDataRange(t,i),this._rangeReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeReaders.slice(0))i.cancel(t);this._pdfDataRangeTransport.abort()}}class Pv{constructor(t,i,s=!1,r=null){this._stream=t,this._done=s||!1,this._filename=rh(r)?r:null,this._queuedChunks=i||[],this._loaded=0;for(const l of this._queuedChunks)this._loaded+=l.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Fv{constructor(t,i,s){this._stream=t,this._begin=i,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function zv(g){let t=!0,i=s("filename\\*","i").exec(g);if(i){i=i[1];let p=u(i);return p=unescape(p),p=h(p),p=d(p),l(p)}if(i=o(g),i){const p=d(i);return l(p)}if(i=s("filename","i").exec(g),i){i=i[1];let p=u(i);return p=d(p),l(p)}function s(p,b){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',b)}function r(p,b){if(p){if(!/^[\x00-\xFF]+$/.test(b))return b;try{const y=new TextDecoder(p,{fatal:!0}),A=xr(b);b=y.decode(A),t=!1}catch{}}return b}function l(p){return t&&/[\x80-\xff]/.test(p)&&(p=r("utf-8",p),t&&(p=r("iso-8859-1",p))),p}function o(p){const b=[];let y;const A=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(y=A.exec(p))!==null;){let[,S,C,E]=y;if(S=parseInt(S,10),S in b){if(S===0)break;continue}b[S]=[C,E]}const w=[];for(let S=0;S<b.length&&S in b;++S){let[C,E]=b[S];E=u(E),C&&(E=unescape(E),S===0&&(E=h(E))),w.push(E)}return w.join("")}function u(p){if(p.startsWith('"')){const b=p.slice(1).split('\\"');for(let y=0;y<b.length;++y){const A=b[y].indexOf('"');A!==-1&&(b[y]=b[y].slice(0,A),b.length=y+1),b[y]=b[y].replaceAll(/\\(.)/g,"$1")}p=b.join('"')}return p}function h(p){const b=p.indexOf("'");if(b===-1)return p;const y=p.slice(0,b),w=p.slice(b+1).replace(/^[^']*'/,"");return r(y,w)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(b,y,A,w){if(A==="q"||A==="Q")return w=w.replaceAll("_"," "),w=w.replaceAll(/=([0-9a-fA-F]{2})/g,function(S,C){return String.fromCharCode(parseInt(C,16))}),r(y,w);try{w=atob(w)}catch{}return r(y,w)})}return""}function Am(g,t){const i=new Headers;if(!g||!t||typeof t!="object")return i;for(const s in t){const r=t[s];r!==void 0&&i.append(s,r)}return i}function fo(g){return URL.parse(g)?.origin??null}function Sm({responseHeaders:g,isHttp:t,rangeChunkSize:i,disableRange:s}){const r={allowRangeRequests:!1,suggestedLength:void 0},l=parseInt(g.get("Content-Length"),10);return!Number.isInteger(l)||(r.suggestedLength=l,l<=2*i)||s||!t||g.get("Accept-Ranges")!=="bytes"||(g.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function wm(g){const t=g.get("Content-Disposition");if(t){let i=zv(t);if(i.includes("%"))try{i=decodeURIComponent(i)}catch{}if(rh(i))return i}return null}function Er(g,t){return new no(`Unexpected server response (${g}) while retrieving PDF "${t}".`,g,g===404||g===0&&t.startsWith("file:"))}function _m(g){return g===200||g===206}function Em(g,t,i){return{method:"GET",headers:g,signal:i.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function Cm(g){return g instanceof Uint8Array?g.buffer:g instanceof ArrayBuffer?g:(St(`getArrayBuffer - unexpected data format: ${g}`),new Uint8Array(g).buffer)}class Iv{_responseOrigin=null;constructor(t){this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Am(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Uv(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Hv(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Uv{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const i=t.source;this._withCredentials=i.withCredentials||!1,this._contentLength=i.length,this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange;const s=new Headers(t.headers),r=i.url;fetch(r,Em(s,this._withCredentials,this._abortController)).then(l=>{if(t._responseOrigin=fo(l.url),!_m(l.status))throw Er(l.status,r);this._reader=l.body.getReader(),this._headersCapability.resolve();const o=l.headers,{allowRangeRequests:u,suggestedLength:h}=Sm({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=u,this._contentLength=h||this._contentLength,this._filename=wm(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Un("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:Cm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}class Hv{constructor(t,i,s){this._stream=t,this._reader=null,this._loaded=0;const r=t.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const l=new Headers(t.headers);l.append("Range",`bytes=${i}-${s-1}`);const o=r.url;fetch(o,Em(l,this._withCredentials,this._abortController)).then(u=>{const h=fo(u.url);if(h!==t._responseOrigin)throw new Error(`Expected range response-origin "${h}" to match "${t._responseOrigin}".`);if(!_m(u.status))throw Er(u.status,o);this._readCapability.resolve(),this._reader=u.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:t,done:i}=await this._reader.read();return i?{value:t,done:i}:(this._loaded+=t.byteLength,this.onProgress?.({loaded:this._loaded}),{value:Cm(t),done:!1})}cancel(t){this._reader?.cancel(t),this._abortController.abort()}}const Iu=200,Uu=206;function qv(g){const t=g.response;return typeof t!="string"?t:xr(t).buffer}class Gv{_responseOrigin=null;constructor({url:t,httpHeaders:i,withCredentials:s}){this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Am(this.isHttp,i),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const i=new XMLHttpRequest,s=this.currXhrId++,r=this.pendingRequests[s]={xhr:i};i.open("GET",this.url),i.withCredentials=this.withCredentials;for(const[l,o]of this.headers)i.setRequestHeader(l,o);return this.isHttp&&"begin"in t&&"end"in t?(i.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),r.expectedStatus=Uu):r.expectedStatus=Iu,i.responseType="arraybuffer",Bt(t.onError,"Expected `onError` callback to be provided."),i.onerror=()=>{t.onError(i.status)},i.onreadystatechange=this.onStateChange.bind(this,s),i.onprogress=this.onProgress.bind(this,s),r.onHeadersReceived=t.onHeadersReceived,r.onDone=t.onDone,r.onError=t.onError,r.onProgress=t.onProgress,i.send(null),s}onProgress(t,i){const s=this.pendingRequests[t];s&&s.onProgress?.(i)}onStateChange(t,i){const s=this.pendingRequests[t];if(!s)return;const r=s.xhr;if(r.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),r.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],r.status===0&&this.isHttp){s.onError(r.status);return}const l=r.status||Iu;if(!(l===Iu&&s.expectedStatus===Uu)&&l!==s.expectedStatus){s.onError(r.status);return}const u=qv(r);if(l===Uu){const h=r.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(h);d?s.onDone({begin:parseInt(d[1],10),chunk:u}):(St('Missing or invalid "Content-Range" header.'),s.onError(0))}else u?s.onDone({begin:0,chunk:u}):s.onError(r.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const i=this.pendingRequests[t].xhr;delete this.pendingRequests[t],i.abort()}}class Vv{constructor(t){this._source=t,this._manager=new Gv(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const i=this._rangeRequestReaders.indexOf(t);i>=0&&this._rangeRequestReaders.splice(i,1)}getFullReader(){return Bt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Yv(this._manager,this._source),this._fullRequestReader}getRangeReader(t,i){const s=new Xv(this._manager,t,i);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Yv{constructor(t,i){this._manager=t,this._url=i.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=i.disableRange||!1,this._contentLength=i.length,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,i=this._manager.getRequestXhr(t);this._manager._responseOrigin=fo(i.responseURL);const s=i.getAllResponseHeaders(),r=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(u=>{const[h,...d]=u.split(": ");return[h,d.join(": ")]}):[]),{allowRangeRequests:l,suggestedLength:o}=Sm({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});l&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=wm(r),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Er(t,this._url),this._headersCapability.reject(this._storedError);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){this.onProgress?.({loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Xv{constructor(t,i,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:i,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){const t=fo(this._manager.getRequestXhr(this._requestId)?.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){this.onClosed?.(this)}_onDone(t){const i=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:i,done:!1}):this._queuedChunk=i,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??=Er(t,this._url);for(const i of this._requests)i.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){this.isStreamingSupported||this.onProgress?.({loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const i=this._queuedChunk;return this._queuedChunk=null,{value:i,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const i of this._requests)i.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const $v=/^[a-z][a-z0-9\-+.]+:/i;function Kv(g){if($v.test(g))return new URL(g);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(g))}class Qv{constructor(t){this.source=t,this.url=Kv(t.url),Bt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return Bt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Wv(this),this._fullRequestReader}getRangeReader(t,i){if(i<=this._progressiveDataLength)return null;const s=new Zv(this,t,i);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){this._fullRequestReader?.cancel(t);for(const i of this._rangeRequestReaders.slice(0))i.cancel(t)}}class Wv{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=t.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=Er(0,this._url.href)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Un("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Zv{constructor(t,i,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=t.source;this._isStreamingSupported=!r.disableStream;const l=process.getBuiltinModule("fs");this._setReadableStream(l.createReadStream(this._url,{start:i,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const or=Symbol("INITIAL_DATA");class Tm{#t=Object.create(null);#e(t){return this.#t[t]||={...Promise.withResolvers(),data:or}}get(t,i=null){if(i){const r=this.#e(t);return r.promise.then(()=>i(r.data)),null}const s=this.#t[t];if(!s||s.data===or)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const i=this.#t[t];return!!i&&i.data!==or}delete(t){const i=this.#t[t];return!i||i.data===or?!1:(delete this.#t[t],!0)}resolve(t,i=null){const s=this.#e(t);s.data=i,s.resolve()}clear(){for(const t in this.#t){const{data:i}=this.#t[t];i?.bitmap?.close()}this.#t=Object.create(null)}*[Symbol.iterator](){for(const t in this.#t){const{data:i}=this.#t[t];i!==or&&(yield[t,i])}}}const Jv=1e5,Jp=30;class Pe{#t=Promise.withResolvers();#e=null;#n=!1;#i=!!globalThis.FontInspector?.enabled;#r=null;#s=null;#a=0;#l=0;#c=null;#o=null;#d=0;#h=0;#f=Object.create(null);#m=[];#g=null;#u=[];#p=new WeakMap;#b=null;static#v=new Map;static#y=new Map;static#E=new WeakMap;static#w=null;static#x=new Set;constructor({textContentSource:t,container:i,viewport:s}){if(t instanceof ReadableStream)this.#g=t;else if(typeof t=="object")this.#g=new ReadableStream({start(h){h.enqueue(t),h.close()}});else throw new Error('No "textContentSource" parameter specified.');this.#e=this.#o=i,this.#h=s.scale*Gi.pixelRatio,this.#d=s.rotation,this.#s={div:null,properties:null,ctx:null};const{pageWidth:r,pageHeight:l,pageX:o,pageY:u}=s.rawDims;this.#b=[1,0,0,-1,-o,u+l],this.#l=r,this.#a=l,Pe.#N(),ds(i,s),this.#t.promise.finally(()=>{Pe.#x.delete(this),this.#s=null,this.#f=null}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:i}=ke.platform;return Tt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&i?"Calibri, ":""}sans-serif`],["monospace",`${t&&i?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{this.#c.read().then(({value:i,done:s})=>{if(s){this.#t.resolve();return}this.#r??=i.lang,Object.assign(this.#f,i.styles),this.#T(i.items),t()},this.#t.reject)};return this.#c=this.#g.getReader(),Pe.#x.add(this),t(),this.#t.promise}update({viewport:t,onBefore:i=null}){const s=t.scale*Gi.pixelRatio,r=t.rotation;if(r!==this.#d&&(i?.(),this.#d=r,ds(this.#o,{rotation:r})),s!==this.#h){i?.(),this.#h=s;const l={div:null,properties:null,ctx:Pe.#M(this.#r)};for(const o of this.#u)l.properties=this.#p.get(o),l.div=o,this.#_(l)}}cancel(){const t=new Un("TextLayer task cancelled.");this.#c?.cancel(t).catch(()=>{}),this.#c=null,this.#t.reject(t)}get textDivs(){return this.#u}get textContentItemsStr(){return this.#m}#T(t){if(this.#n)return;this.#s.ctx??=Pe.#M(this.#r);const i=this.#u,s=this.#m;for(const r of t){if(i.length>Jv){St("Ignoring additional textDivs for performance reasons."),this.#n=!0;return}if(r.str===void 0){if(r.type==="beginMarkedContentProps"||r.type==="beginMarkedContent"){const l=this.#e;this.#e=document.createElement("span"),this.#e.classList.add("markedContent"),r.id&&this.#e.setAttribute("id",`${r.id}`),l.append(this.#e)}else r.type==="endMarkedContent"&&(this.#e=this.#e.parentNode);continue}s.push(r.str),this.#S(r)}}#S(t){const i=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};this.#u.push(i);const r=ht.transform(this.#b,t.transform);let l=Math.atan2(r[1],r[0]);const o=this.#f[t.fontName];o.vertical&&(l+=Math.PI/2);let u=this.#i&&o.fontSubstitution||o.fontFamily;u=Pe.fontFamilyMap.get(u)||u;const h=Math.hypot(r[2],r[3]),d=h*Pe.#P(u,o,this.#r);let p,b;l===0?(p=r[4],b=r[5]-d):(p=r[4]+d*Math.sin(l),b=r[5]-d*Math.cos(l));const y="calc(var(--total-scale-factor) *",A=i.style;this.#e===this.#o?(A.left=`${(100*p/this.#l).toFixed(2)}%`,A.top=`${(100*b/this.#a).toFixed(2)}%`):(A.left=`${y}${p.toFixed(2)}px)`,A.top=`${y}${b.toFixed(2)}px)`),A.fontSize=`${y}${(Pe.#w*h).toFixed(2)}px)`,A.fontFamily=u,s.fontSize=h,i.setAttribute("role","presentation"),i.textContent=t.str,i.dir=t.dir,this.#i&&(i.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),l!==0&&(s.angle=l*(180/Math.PI));let w=!1;if(t.str.length>1)w=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const S=Math.abs(t.transform[0]),C=Math.abs(t.transform[3]);S!==C&&Math.max(S,C)/Math.min(S,C)>1.5&&(w=!0)}if(w&&(s.canvasWidth=o.vertical?t.height:t.width),this.#p.set(i,s),this.#s.div=i,this.#s.properties=s,this.#_(this.#s),s.hasText&&this.#e.append(i),s.hasEOL){const S=document.createElement("br");S.setAttribute("role","presentation"),this.#e.append(S)}}#_(t){const{div:i,properties:s,ctx:r}=t,{style:l}=i;let o="";if(Pe.#w>1&&(o=`scale(${1/Pe.#w})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:u}=l,{canvasWidth:h,fontSize:d}=s;Pe.#D(r,d*this.#h,u);const{width:p}=r.measureText(i.textContent);p>0&&(o=`scaleX(${h*this.#h/p}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(l.transform=o)}static cleanup(){if(!(this.#x.size>0)){this.#v.clear();for(const{canvas:t}of this.#y.values())t.remove();this.#y.clear()}}static#M(t=null){let i=this.#y.get(t||="");if(!i){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),i=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.#y.set(t,i),this.#E.set(i,{size:0,family:""})}return i}static#D(t,i,s){const r=this.#E.get(t);i===r.size&&s===r.family||(t.font=`${i}px ${s}`,r.size=i,r.family=s)}static#N(){if(this.#w!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),this.#w=t.getBoundingClientRect().height,t.remove()}static#P(t,i,s){const r=this.#v.get(t);if(r)return r;const l=this.#M(s);l.canvas.width=l.canvas.height=Jp,this.#D(l,Jp,t);const o=l.measureText(""),u=o.fontBoundingBoxAscent,h=Math.abs(o.fontBoundingBoxDescent);l.canvas.width=l.canvas.height=0;let d=.8;return u?d=u/(u+h):(ke.platform.isFirefox&&St("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),i.ascent?d=i.ascent:i.descent&&(d=1+i.descent)),this.#v.set(t,d),d}}const tx=100;function Dm(g={}){typeof g=="string"||g instanceof URL?g={url:g}:(g instanceof ArrayBuffer||ArrayBuffer.isView(g))&&(g={data:g});const t=new fh,{docId:i}=t,s=g.url?lv(g.url):null,r=g.data?ov(g.data):null,l=g.httpHeaders||null,o=g.withCredentials===!0,u=g.password??null,h=g.range instanceof Nm?g.range:null,d=Number.isInteger(g.rangeChunkSize)&&g.rangeChunkSize>0?g.rangeChunkSize:2**16;let p=g.worker instanceof yr?g.worker:null;const b=g.verbosity,y=typeof g.docBaseUrl=="string"&&!uo(g.docBaseUrl)?g.docBaseUrl:null,A=Vl(g.cMapUrl),w=g.cMapPacked!==!1,S=g.CMapReaderFactory||(Fe?mv:zp),C=Vl(g.iccUrl),E=Vl(g.standardFontDataUrl),k=g.StandardFontDataFactory||(Fe?bv:Ip),O=Vl(g.wasmUrl),P=g.WasmFactory||(Fe?yv:Up),I=g.stopAtErrors!==!0,F=Number.isInteger(g.maxImageSize)&&g.maxImageSize>-1?g.maxImageSize:-1,B=g.isEvalSupported!==!1,D=typeof g.isOffscreenCanvasSupported=="boolean"?g.isOffscreenCanvasSupported:!Fe,N=typeof g.isImageDecoderSupported=="boolean"?g.isImageDecoderSupported:!Fe&&(ke.platform.isFirefox||!globalThis.chrome),U=Number.isInteger(g.canvasMaxAreaInBytes)?g.canvasMaxAreaInBytes:-1,$=typeof g.disableFontFace=="boolean"?g.disableFontFace:Fe,tt=g.fontExtraProperties===!0,st=g.enableXfa===!0,rt=g.ownerDocument||globalThis.document,dt=g.disableRange===!0,j=g.disableStream===!0,T=g.disableAutoFetch===!0,X=g.pdfBug===!0,et=g.CanvasFactory||(Fe?pv:dv),gt=g.FilterFactory||(Fe?gv:fv),M=g.enableHWA===!0,H=g.useWasm!==!1,G=h?h.length:g.length??NaN,nt=typeof g.useSystemFonts=="boolean"?g.useSystemFonts:!Fe&&!$,Q=typeof g.useWorkerFetch=="boolean"?g.useWorkerFetch:!!(S===zp&&k===Ip&&P===Up&&A&&E&&O&&hr(A,document.baseURI)&&hr(E,document.baseURI)&&hr(O,document.baseURI)),it=null;jy(b);const at={canvasFactory:new et({ownerDocument:rt,enableHWA:M}),filterFactory:new gt({docId:i,ownerDocument:rt}),cMapReaderFactory:Q?null:new S({baseUrl:A,isCompressed:w}),standardFontDataFactory:Q?null:new k({baseUrl:E}),wasmFactory:Q?null:new P({baseUrl:O})};p||(p=yr.create({verbosity:b,port:ca.workerPort}),t._worker=p);const ct={docId:i,apiVersion:"5.4.296",data:r,password:u,disableAutoFetch:T,rangeChunkSize:d,length:G,docBaseUrl:y,enableXfa:st,evaluatorOptions:{maxImageSize:F,disableFontFace:$,ignoreErrors:I,isEvalSupported:B,isOffscreenCanvasSupported:D,isImageDecoderSupported:N,canvasMaxAreaInBytes:U,fontExtraProperties:tt,useSystemFonts:nt,useWasm:H,useWorkerFetch:Q,cMapUrl:A,iccUrl:C,standardFontDataUrl:E,wasmUrl:O}},lt={ownerDocument:rt,pdfBug:X,styleElement:it,loadingParams:{disableAutoFetch:T,enableXfa:st}};return p.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const zt=p.messageHandler.sendWithPromise("GetDocRequest",ct,r?[r.buffer]:null);let pt;if(h)pt=new Bv(h,{disableRange:dt,disableStream:j});else if(!r){if(!s)throw new Error("getDocument - no `url` parameter provided.");const Pt=hr(s)?Iv:Fe?Qv:Vv;pt=new Pt({url:s,length:G,httpHeaders:l,withCredentials:o,rangeChunkSize:d,disableRange:dt,disableStream:j})}return zt.then(Pt=>{if(t.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ft=new dr(i,Pt,p.port),Nt=new nx(Ft,t,pt,lt,at,M);t._transport=Nt,Ft.send("Ready",null)})}).catch(t._capability.reject),t}class fh{static#t=0;_capability=Promise.withResolvers();_transport=null;_worker=null;docId=`d${fh.#t++}`;destroyed=!1;onPassword=null;onProgress=null;get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(t){throw this._worker?.port&&delete this._worker._pendingDestroy,t}this._transport=null,this._worker?.destroy(),this._worker=null}async getData(){return this._transport.getData()}}class Nm{#t=Promise.withResolvers();#e=[];#n=[];#i=[];#r=[];constructor(t,i,s=!1,r=null){this.length=t,this.initialData=i,this.progressiveDone=s,this.contentDispositionFilename=r}addRangeListener(t){this.#r.push(t)}addProgressListener(t){this.#i.push(t)}addProgressiveReadListener(t){this.#n.push(t)}addProgressiveDoneListener(t){this.#e.push(t)}onDataRange(t,i){for(const s of this.#r)s(t,i)}onDataProgress(t,i){this.#t.promise.then(()=>{for(const s of this.#i)s(t,i)})}onDataProgressiveRead(t){this.#t.promise.then(()=>{for(const i of this.#n)i(t)})}onDataProgressiveDone(){this.#t.promise.then(()=>{for(const t of this.#e)t()})}transportReady(){this.#t.resolve()}requestDataRange(t,i){Jt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class ex{constructor(t,i){this._pdfInfo=t,this._transport=i}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(t,i){return this._transport.getAnnotationsByType(t,i)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(i)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}class ix{#t=!1;constructor(t,i,s,r=!1){this._pageIndex=t,this._pageInfo=i,this._transport=s,this._stats=r?new Op:null,this._pdfBug=r,this.commonObjs=s.commonObjs,this.objs=new Tm,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:i=this.rotate,offsetX:s=0,offsetY:r=0,dontFlip:l=!1}={}){return new Sr({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:i,offsetX:s,offsetY:r,dontFlip:l})}getAnnotations({intent:t="display"}={}){const{renderingIntent:i}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,i)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Tt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:t,canvas:i=t.canvas,viewport:s,intent:r="display",annotationMode:l=zn.ENABLE,transform:o=null,background:u=null,optionalContentConfigPromise:h=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:b=null,isEditing:y=!1,recordOperations:A=!1,operationsFilter:w=null}){this._stats?.time("Overall");const S=this._transport.getRenderingIntent(r,l,b,y),{renderingIntent:C,cacheKey:E}=S;this.#t=!1,h||=this._transport.getOptionalContentConfig(C);let k=this._intentStates.get(E);k||(k=Object.create(null),this._intentStates.set(E,k)),k.streamReaderCancelTimeout&&(clearTimeout(k.streamReaderCancelTimeout),k.streamReaderCancelTimeout=null);const O=!!(C&li.PRINT);k.displayReadyCapability||(k.displayReadyCapability=Promise.withResolvers(),k.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(S));const P=!!(this._pdfBug&&globalThis.StepperManager?.enabled),I=!this.recordedBBoxes&&(A||P),F=N=>{if(k.renderTasks.delete(B),I){const U=B.gfx?.dependencyTracker.take();U&&(B.stepper&&B.stepper.setOperatorBBoxes(U,B.gfx.dependencyTracker.takeDebugMetadata()),A&&(this.recordedBBoxes=U))}O&&(this.#t=!0),this.#e(),N?(B.capability.reject(N),this._abortOperatorList({intentState:k,reason:N instanceof Error?N:new Error(N)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),globalThis.Stats?.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},B=new aa({callback:F,params:{canvas:i,canvasContext:t,dependencyTracker:I?new xv(i,k.operatorList.length,P):null,viewport:s,transform:o,background:u},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:k.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!O,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:w});(k.renderTasks||=new Set).add(B);const D=B.task;return Promise.all([k.displayReadyCapability.promise,h]).then(([N,U])=>{if(this.destroyed){F();return}if(this._stats?.time("Rendering"),!(U.renderingIntent&C))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");B.initializeGraphics({transparency:N,optionalContentConfig:U}),B.operatorListChanged()}).catch(F),D}getOperatorList({intent:t="display",annotationMode:i=zn.ENABLE,printAnnotationStorage:s=null,isEditing:r=!1}={}){function l(){u.operatorList.lastChunk&&(u.opListReadCapability.resolve(u.operatorList),u.renderTasks.delete(h))}const o=this._transport.getRenderingIntent(t,i,s,r,!0);let u=this._intentStates.get(o.cacheKey);u||(u=Object.create(null),this._intentStates.set(o.cacheKey,u));let h;return u.opListReadCapability||(h=Object.create(null),h.operatorListChanged=l,u.opListReadCapability=Promise.withResolvers(),(u.renderTasks||=new Set).add(h),u.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(o)),u.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:i=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:i===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>br.textContent(s));const i=this.streamTextContent(t);return new Promise(function(s,r){function l(){o.read().then(function({value:h,done:d}){if(d){s(u);return}u.lang??=h.lang,Object.assign(u.styles,h.styles),u.items.push(...h.items),l()},r)}const o=i.getReader(),u={items:[],styles:Object.create(null),lang:null};l()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const i of this._intentStates.values())if(this._abortOperatorList({intentState:i,reason:new Error("Page was destroyed."),force:!0}),!i.opListReadCapability)for(const s of i.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),this.#t=!1,Promise.all(t)}cleanup(t=!1){this.#t=!0;const i=this.#e();return t&&i&&(this._stats&&=new Op),i}#e(){if(!this.#t||this.destroyed)return!1;for(const{renderTasks:t,operatorList:i}of this._intentStates.values())if(t.size>0||!i.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}_startRenderPage(t,i){const s=this._intentStates.get(i);s&&(this._stats?.timeEnd("Page Request"),s.displayReadyCapability?.resolve(t))}_renderPageChunk(t,i){for(let s=0,r=t.length;s<r;s++)i.operatorList.fnArray.push(t.fnArray[s]),i.operatorList.argsArray.push(t.argsArray[s]);i.operatorList.lastChunk=t.lastChunk,i.operatorList.separateAnnots=t.separateAnnots;for(const s of i.renderTasks)s.operatorListChanged();t.lastChunk&&this.#e()}_pumpOperatorList({renderingIntent:t,cacheKey:i,annotationStorageSerializable:s,modifiedIds:r}){const{map:l,transfer:o}=s,h=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:i,annotationStorage:l,modifiedIds:r},o).getReader(),d=this._intentStates.get(i);d.streamReader=h;const p=()=>{h.read().then(({value:b,done:y})=>{if(y){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(b,d),p())},b=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const y of d.renderTasks)y.operatorListChanged();this.#e()}if(d.displayReadyCapability)d.displayReadyCapability.reject(b);else if(d.opListReadCapability)d.opListReadCapability.reject(b);else throw b}})};p()}_abortOperatorList({intentState:t,reason:i,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(i instanceof ah){let r=tx;i.extraDelay>0&&i.extraDelay<1e3&&(r+=i.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:i,force:!0})},r);return}}if(t.streamReader.cancel(new Un(i.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[r,l]of this._intentStates)if(l===t){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}var In,Ri,dn,cs,ro,us,hs,Ie,eo,Mm,Rm,fr,ua,io;const se=class se{constructor({name:t=null,port:i=null,verbosity:s=By()}={}){Fi(this,Ie);Fi(this,In,Promise.withResolvers());Fi(this,Ri,null);Fi(this,dn,null);Fi(this,cs,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,i){if(ne(se,hs).has(i))throw new Error("Cannot use more than one PDFWorker per port.");ne(se,hs).set(i,this),zi(this,Ie,Mm).call(this,i)}else zi(this,Ie,Rm).call(this)}get promise(){return ne(this,In).promise}get port(){return ne(this,dn)}get messageHandler(){return ne(this,Ri)}destroy(){this.destroyed=!0,ne(this,cs)?.terminate(),Ke(this,cs,null),ne(se,hs).delete(ne(this,dn)),Ke(this,dn,null),ne(this,Ri)?.destroy(),Ke(this,Ri,null)}static create(t){const i=ne(this,hs).get(t?.port);if(i){if(i._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return i}return new se(t)}static get workerSrc(){if(ca.workerSrc)return ca.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Tt(this,"_setupFakeWorkerGlobal",(async()=>ne(this,ua,io)?ne(this,ua,io):(await import(this.workerSrc)).WorkerMessageHandler)())}};In=new WeakMap,Ri=new WeakMap,dn=new WeakMap,cs=new WeakMap,ro=new WeakMap,us=new WeakMap,hs=new WeakMap,Ie=new WeakSet,eo=function(){ne(this,In).resolve(),ne(this,Ri).send("configure",{verbosity:this.verbosity})},Mm=function(t){Ke(this,dn,t),Ke(this,Ri,new dr("main","worker",t)),ne(this,Ri).on("ready",()=>{}),zi(this,Ie,eo).call(this)},Rm=function(){if(ne(se,us)||ne(se,ua,io)){zi(this,Ie,fr).call(this);return}let{workerSrc:t}=se;try{se._isSameOrigin(window.location,t)||(t=se._createCDNWrapper(new URL(t,window.location).href));const i=new Worker(t,{type:"module"}),s=new dr("main","worker",i),r=()=>{l.abort(),s.destroy(),i.terminate(),this.destroyed?ne(this,In).reject(new Error("Worker was destroyed")):zi(this,Ie,fr).call(this)},l=new AbortController;i.addEventListener("error",()=>{ne(this,cs)||r()},{signal:l.signal}),s.on("test",u=>{if(l.abort(),this.destroyed||!u){r();return}Ke(this,Ri,s),Ke(this,dn,i),Ke(this,cs,i),zi(this,Ie,eo).call(this)}),s.on("ready",u=>{if(l.abort(),this.destroyed){r();return}try{o()}catch{zi(this,Ie,fr).call(this)}});const o=()=>{const u=new Uint8Array;s.send("test",u,[u.buffer])};o();return}catch{co("The worker has been disabled.")}zi(this,Ie,fr).call(this)},fr=function(){ne(se,us)||(St("Setting up fake worker."),Ke(se,us,!0)),se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){ne(this,In).reject(new Error("Worker was destroyed"));return}const i=new hv;Ke(this,dn,i);const s=`fake${yp(se,ro)._++}`,r=new dr(s+"_worker",s,i);t.setup(r,i),Ke(this,Ri,new dr(s,s+"_worker",i)),zi(this,Ie,eo).call(this)}).catch(t=>{ne(this,In).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},ua=new WeakSet,io=function(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}},Fi(se,ua),Fi(se,ro,0),Fi(se,us,!1),Fi(se,hs,new WeakMap),Fe&&(Ke(se,us,!0),ca.workerSrc||="./pdf.worker.mjs"),se._isSameOrigin=(t,i)=>{const s=URL.parse(t);if(!s?.origin||s.origin==="null")return!1;const r=new URL(i,s);return s.origin===r.origin},se._createCDNWrapper=t=>{const i=`await import("${t}");`;return URL.createObjectURL(new Blob([i],{type:"text/javascript"}))},se.fromPort=t=>{if($y("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!t?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return se.create(t)};let yr=se;class nx{#t=new Map;#e=new Map;#n=new Map;#i=new Map;#r=null;constructor(t,i,s,r,l,o){this.messageHandler=t,this.loadingTask=i,this.commonObjs=new Tm,this.fontLoader=new av({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=l.canvasFactory,this.filterFactory=l.filterFactory,this.cMapReaderFactory=l.cMapReaderFactory,this.standardFontDataFactory=l.standardFontDataFactory,this.wasmFactory=l.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}#s(t,i=null){const s=this.#t.get(t);if(s)return s;const r=this.messageHandler.sendWithPromise(t,i);return this.#t.set(t,r),r}get annotationStorage(){return Tt(this,"annotationStorage",new ch)}getRenderingIntent(t,i=zn.ENABLE,s=null,r=!1,l=!1){let o=li.DISPLAY,u=Xu;switch(t){case"any":o=li.ANY;break;case"display":break;case"print":o=li.PRINT;break;default:St(`getRenderingIntent - invalid intent: ${t}`)}const h=o&li.PRINT&&s instanceof pm?s:this.annotationStorage;switch(i){case zn.DISABLE:o+=li.ANNOTATIONS_DISABLE;break;case zn.ENABLE:break;case zn.ENABLE_FORMS:o+=li.ANNOTATIONS_FORMS;break;case zn.ENABLE_STORAGE:o+=li.ANNOTATIONS_STORAGE,u=h.serializable;break;default:St(`getRenderingIntent - invalid annotationMode: ${i}`)}r&&(o+=li.IS_EDITING),l&&(o+=li.OPLIST);const{ids:d,hash:p}=h.modifiedIds,b=[o,u.hash,p];return{renderingIntent:o,cacheKey:b.join("_"),annotationStorageSerializable:u,modifiedIds:d}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const s of this.#e.values())t.push(s._destroy());this.#e.clear(),this.#n.clear(),this.#i.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const i=this.messageHandler.sendWithPromise("Terminate",null);return t.push(i),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(),Pe.cleanup(),this._networkStream?.cancelAllRequests(new Un("Worker was terminated.")),this.messageHandler?.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:i}=this;t.on("GetReader",(s,r)=>{Bt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=l=>{this._lastProgress={loaded:l.loaded,total:l.total}},r.onPull=()=>{this._fullReader.read().then(function({value:l,done:o}){if(o){r.close();return}Bt(l instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{r.error(l)})},r.onCancel=l=>{this._fullReader.cancel(l),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:l,contentLength:o}=this._fullReader;return(!r||!l)&&(this._lastProgress&&i.onProgress?.(this._lastProgress),this._fullReader.onProgress=u=>{i.onProgress?.({loaded:u.loaded,total:u.total})}),{isStreamingSupported:r,isRangeSupported:l,contentLength:o}}),t.on("GetRangeReader",(s,r)=>{Bt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const l=this._networkStream.getRangeReader(s.begin,s.end);if(!l){r.close();return}r.onPull=()=>{l.read().then(function({value:o,done:u}){if(u){r.close();return}Bt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{r.error(o)})},r.onCancel=o=>{l.cancel(o),r.ready.catch(u=>{if(!this.destroyed)throw u})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,i._capability.resolve(new ex(s,this))}),t.on("DocException",s=>{i._capability.reject(Qe(s))}),t.on("PasswordRequest",s=>{this.#r=Promise.withResolvers();try{if(!i.onPassword)throw Qe(s);const r=l=>{l instanceof Error?this.#r.reject(l):this.#r.resolve({password:l})};i.onPassword(r,s.code)}catch(r){this.#r.reject(r)}return this.#r.promise}),t.on("DataLoaded",s=>{i.onProgress?.({loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;this.#e.get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,r,l])=>{if(this.destroyed||this.commonObjs.has(s))return null;switch(r){case"Font":if("error"in l){const p=l.error;St(`Error during font loading: ${p}`),this.commonObjs.resolve(s,p);break}const o=new Qt(l),u=this._params.pdfBug&&globalThis.FontInspector?.enabled?(p,b)=>globalThis.FontInspector.fontAdded(p,b):null,h=new rv(o,u,l.extra,l.charProcOperatorList);this.fontLoader.bind(h).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!h.fontExtraProperties&&h.data&&h.clearData(),this.commonObjs.resolve(s,h)});break;case"CopyLocalImage":const{imageRef:d}=l;Bt(d,"The imageRef must be defined.");for(const p of this.#e.values())for(const[,b]of p.objs)if(b?.ref===d)return b.dataLen?(this.commonObjs.resolve(s,structuredClone(b)),b.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,l);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),t.on("obj",([s,r,l,o])=>{if(this.destroyed)return;const u=this.#e.get(r);if(!u.objs.has(s)){if(u._intentStates.size===0){o?.bitmap?.close();return}switch(l){case"Image":case"Pattern":u.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${l}`)}}}),t.on("DocProgress",s=>{this.destroyed||i.onProgress?.({loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const r=this[s.type];if(!r)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return r.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&St("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:i}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:this._fullReader?.filename??null},i).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const i=t-1,s=this.#n.get(i);if(s)return s;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:i}).then(l=>{if(this.destroyed)throw new Error("Transport destroyed");l.refStr&&this.#i.set(l.refStr,t);const o=new ix(i,l,this,this._params.pdfBug);return this.#e.set(i,o),o});return this.#n.set(i,r),r}getPageIndex(t){return $u(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,i){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:i})}getFieldObjects(){return this.#s("GetFieldObjects")}hasJSActions(){return this.#s("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(t,i){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:t,pageIndexesToSkip:i})}getDocJSActions(){return this.#s("GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return this.#s("GetOptionalContentConfig").then(i=>new jv(i,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",i=this.#t.get(t);if(i)return i;const s=this.messageHandler.sendWithPromise(t,null).then(r=>({info:r[0],metadata:r[1]?new kv(r[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#t.set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const i of this.#e.values())if(!i.cleanup())throw new Error(`startCleanup: Page ${i.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),this.#t.clear(),this.filterFactory.destroy(!0),Pe.cleanup()}}cachedPageNumber(t){if(!$u(t))return null;const i=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return this.#i.get(i)??null}}class sx{#t=null;onContinue=null;onError=null;constructor(t){this.#t=t}get promise(){return this.#t.capability.promise}cancel(t=0){this.#t.cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=this.#t.operatorList;if(!t)return!1;const{annotationCanvasMap:i}=this.#t;return t.form||t.canvas&&i?.size>0}}class aa{#t=null;static#e=new WeakSet;constructor({callback:t,params:i,objs:s,commonObjs:r,annotationCanvasMap:l,operatorList:o,pageIndex:u,canvasFactory:h,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:b=!1,pageColors:y=null,enableHWA:A=!1,operationsFilter:w=null}){this.callback=t,this.params=i,this.objs=s,this.commonObjs=r,this.annotationCanvasMap=l,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=u,this.canvasFactory=h,this.filterFactory=d,this._pdfBug=b,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new sx(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=i.canvas,this._canvasContext=i.canvas?null:i.canvasContext,this._enableHWA=A,this._dependencyTracker=i.dependencyTracker,this._operationsFilter=w}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:i}){if(this.cancelled)return;if(this._canvas){if(aa.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");aa.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:r,background:l,dependencyTracker:o}=this.params,u=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new ra(u,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:r,viewport:s,transparency:t,background:l}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(t=null,i=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=null),aa.#e.delete(this._canvas),t||=new ah(`Rendering cancelled, page ${this._pageIndex+1}`,i),this.callback(t),this.task.onError?.(t)}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.gfx.dependencyTracker?.growOperationsCount(this.operatorList.fnArray.length),this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?this.#t=window.requestAnimationFrame(()=>{this.#t=null,this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),aa.#e.delete(this._canvas),this.callback())))}}const Om="5.4.296",ax="f56dc8601";class Ei{#t=null;#e=null;#n;#i=null;#r=!1;#s=!1;#a=null;#l;#c=null;#o=null;static#d=null;static get _keyboardManager(){return Tt(this,"_keyboardManager",new _r([[["Escape","mac+Escape"],Ei.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ei.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ei.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ei.prototype._moveToPrevious],[["Home","mac+Home"],Ei.prototype._moveToBeginning],[["End","mac+End"],Ei.prototype._moveToEnd]]))}constructor({editor:t=null,uiManager:i=null}){t?(this.#s=!1,this.#a=t):this.#s=!0,this.#o=t?._uiManager||i,this.#l=this.#o._eventBus,this.#n=t?.color?.toUpperCase()||this.#o?.highlightColors.values().next().value||"#FFFF98",Ei.#d||=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"})}renderButton(){const t=this.#t=document.createElement("button");t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.ariaHasPopup="true",this.#a&&(t.ariaControls=`${this.#a.id}_colorpicker_dropdown`);const i=this.#o._signal;t.addEventListener("click",this.#g.bind(this),{signal:i}),t.addEventListener("keydown",this.#m.bind(this),{signal:i});const s=this.#e=document.createElement("span");return s.className="swatch",s.ariaHidden="true",s.style.backgroundColor=this.#n,t.append(s),t}renderMainDropdown(){const t=this.#i=this.#h();return t.ariaOrientation="horizontal",t.ariaLabelledBy="highlightColorPickerLabel",t}#h(){const t=document.createElement("div"),i=this.#o._signal;t.addEventListener("contextmenu",Ci,{signal:i}),t.className="dropdown",t.role="listbox",t.ariaMultiSelectable="false",t.ariaOrientation="vertical",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),this.#a&&(t.id=`${this.#a.id}_colorpicker_dropdown`);for(const[s,r]of this.#o.highlightColors){const l=document.createElement("button");l.tabIndex="0",l.role="option",l.setAttribute("data-color",r),l.title=s,l.setAttribute("data-l10n-id",Ei.#d[s]);const o=document.createElement("span");l.append(o),o.className="swatch",o.style.backgroundColor=r,l.ariaSelected=r===this.#n,l.addEventListener("click",this.#f.bind(this,r),{signal:i}),t.append(l)}return t.addEventListener("keydown",this.#m.bind(this),{signal:i}),t}#f(t,i){i.stopPropagation(),this.#l.dispatch("switchannotationeditorparams",{source:this,type:jt.HIGHLIGHT_COLOR,value:t}),this.updateColor(t)}_colorSelectFromKeyboard(t){if(t.target===this.#t){this.#g(t);return}const i=t.target.getAttribute("data-color");i&&this.#f(i,t)}_moveToNext(t){if(!this.#p){this.#g(t);return}if(t.target===this.#t){this.#i.firstChild?.focus();return}t.target.nextSibling?.focus()}_moveToPrevious(t){if(t.target===this.#i?.firstChild||t.target===this.#t){this.#p&&this._hideDropdownFromKeyboard();return}this.#p||this.#g(t),t.target.previousSibling?.focus()}_moveToBeginning(t){if(!this.#p){this.#g(t);return}this.#i.firstChild?.focus()}_moveToEnd(t){if(!this.#p){this.#g(t);return}this.#i.lastChild?.focus()}#m(t){Ei._keyboardManager.exec(this,t)}#g(t){if(this.#p){this.hideDropdown();return}if(this.#r=t.detail===0,this.#c||(this.#c=new AbortController,window.addEventListener("pointerdown",this.#u.bind(this),{signal:this.#o.combinedSignal(this.#c)})),this.#t.ariaExpanded="true",this.#i){this.#i.classList.remove("hidden");return}const i=this.#i=this.#h();this.#t.append(i)}#u(t){this.#i?.contains(t.target)||this.hideDropdown()}hideDropdown(){this.#i?.classList.add("hidden"),this.#t.ariaExpanded="false",this.#c?.abort(),this.#c=null}get#p(){return this.#i&&!this.#i.classList.contains("hidden")}_hideDropdownFromKeyboard(){if(!this.#s){if(!this.#p){this.#a?.unselect();return}this.hideDropdown(),this.#t.focus({preventScroll:!0,focusVisible:this.#r})}}updateColor(t){if(this.#e&&(this.#e.style.backgroundColor=t),!this.#i)return;const i=this.#o.highlightColors.values();for(const s of this.#i.children)s.ariaSelected=i.next().value===t.toUpperCase()}destroy(){this.#t?.remove(),this.#t=null,this.#e=null,this.#i?.remove(),this.#i=null}}class vr{#t=null;#e=null;#n=null;static#i=null;constructor(t){this.#e=t,this.#n=t._uiManager,vr.#i||=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"})}renderButton(){if(this.#t)return this.#t;const{editorType:t,colorType:i,colorValue:s}=this.#e,r=this.#t=document.createElement("input");return r.type="color",r.value=s||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",vr.#i[t]),r.addEventListener("input",()=>{this.#n.updateParams(i,r.value)},{signal:this.#n._signal}),r}update(t){this.#t&&(this.#t.value=t)}destroy(){this.#t?.remove(),this.#t=null}hideDropdown(){}}function tm(g){return Math.floor(Math.max(0,Math.min(1,g))*255).toString(16).padStart(2,"0")}function cr(g){return Math.max(0,Math.min(255,255*g))}class em{static CMYK_G([t,i,s,r]){return["G",1-Math.min(1,.3*t+.59*s+.11*i+r)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=cr(t),[t,t,t]}static G_HTML([t]){const i=tm(t);return`#${i}${i}${i}`}static RGB_G([t,i,s]){return["G",.3*t+.59*i+.11*s]}static RGB_rgb(t){return t.map(cr)}static RGB_HTML(t){return`#${t.map(tm).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,i,s,r]){return["RGB",1-Math.min(1,t+r),1-Math.min(1,s+r),1-Math.min(1,i+r)]}static CMYK_rgb([t,i,s,r]){return[cr(1-Math.min(1,t+r)),cr(1-Math.min(1,s+r)),cr(1-Math.min(1,i+r))]}static CMYK_HTML(t){const i=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(i)}static RGB_CMYK([t,i,s]){const r=1-t,l=1-i,o=1-s,u=Math.min(r,l,o);return["CMYK",r,l,o,u]}}class rx{create(t,i,s=!1){if(t<=0||i<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),s||(r.setAttribute("width",`${t}px`),r.setAttribute("height",`${i}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${t} ${i}`),r}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){Jt("Abstract method `_createSVG` called.")}}class ao extends rx{_createSVG(t){return document.createElementNS(un,t)}}const lx=9,fs=new WeakSet,ox=new Date().getTimezoneOffset()*60*1e3;class im{static create(t){switch(t.data.annotationType){case ve.LINK:return new gh(t);case ve.TEXT:return new ux(t);case ve.WIDGET:switch(t.data.fieldType){case"Tx":return new hx(t);case"Btn":return t.data.radioButton?new km(t):t.data.checkBox?new fx(t):new gx(t);case"Ch":return new px(t);case"Sig":return new dx(t)}return new ps(t);case ve.POPUP:return new Wu(t);case ve.FREETEXT:return new Lm(t);case ve.LINE:return new bx(t);case ve.SQUARE:return new yx(t);case ve.CIRCLE:return new vx(t);case ve.POLYLINE:return new jm(t);case ve.CARET:return new Ax(t);case ve.INK:return new ph(t);case ve.POLYGON:return new xx(t);case ve.HIGHLIGHT:return new Bm(t);case ve.UNDERLINE:return new Sx(t);case ve.SQUIGGLY:return new wx(t);case ve.STRIKEOUT:return new _x(t);case ve.STAMP:return new Pm(t);case ve.FILEATTACHMENT:return new Ex(t);default:return new re(t)}}}class re{#t=null;#e=!1;#n=null;constructor(t,{isRenderable:i=!1,ignoreBorder:s=!1,createQuadrilaterals:r=!1}={}){this.isRenderable=i,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableComment=t.enableComment,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,i&&(this.container=this._createContainer(s)),r&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:t,richText:i}){return!!(t?.str||i?.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return re._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){const{data:t}=this,i=this.annotationStorage?.getEditor(t.id);return i?i.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){const t=this.annotationStorage?.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:i,inkLists:s,rect:r}=this.data;let l=-1/0,o=-1/0;if(i?.length>=8){for(let u=0;u<i.length;u+=8)i[u+1]>o?(o=i[u+1],l=i[u+2]):i[u+1]===o&&(l=Math.max(l,i[u+2]));return[l,o]}if(s?.length>=1){for(const u of s)for(let h=0,d=u.length;h<d;h+=2)u[h+1]>o?(o=u[h+1],l=u[h]):u[h+1]===o&&(l=Math.max(l,u[h]));if(l!==1/0)return[l,o]}return r?[r[2],r[3]]:null}_normalizePoint(t){const{page:{view:i},viewport:{rawDims:{pageWidth:s,pageHeight:r,pageX:l,pageY:o}}}=this.parent;return t[1]=i[3]-t[1]+i[1],t[0]=100*(t[0]-l)/s,t[1]=100*(t[1]-o)/r,t}get commentText(){const{data:t}=this;return this.annotationStorage.getRawValue(`${pr}${t.id}`)?.popup?.contents||t.contentsObj?.str||""}set commentText(t){const{data:i}=this,s={deleted:!t,contents:t||""};this.annotationStorage.updateEditor(i.id,{popup:s})||this.annotationStorage.setValue(`${pr}${i.id}`,{id:i.id,annotationType:i.annotationType,pageIndex:this.parent.page._pageIndex,popup:s,popupRef:i.popupRef,modificationDate:new Date}),t||this.removePopup()}removePopup(){(this.#n?.popup||this.popup)?.remove(),this.#n=this.popup=null}updateEdited(t){if(!this.container)return;t.rect&&(this.#t||={rect:this.data.rect.slice(0)});const{rect:i,popup:s}=t;i&&this.#i(i);let r=this.#n?.popup||this.popup;!r&&s?.text&&(this._createPopup(s),r=this.#n.popup),r&&(r.updateEdited(t),s?.deleted&&(r.remove(),this.#n=null,this.popup=null))}resetEdited(){this.#t&&(this.#i(this.#t.rect),this.#n?.popup.resetEdited(),this.#t=null)}#i(t){const{container:{style:i},data:{rect:s,rotation:r},parent:{viewport:{rawDims:{pageWidth:l,pageHeight:o,pageX:u,pageY:h}}}}=this;s?.splice(0,4,...t),i.left=`${100*(t[0]-u)/l}%`,i.top=`${100*(o-t[3]+h)/o}%`,r===0?(i.width=`${100*(t[2]-t[0])/l}%`,i.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(r)}_createContainer(t){const{data:i,parent:{page:s,viewport:r}}=this,l=document.createElement("section");l.setAttribute("data-annotation-id",i.id),!(this instanceof ps)&&!(this instanceof gh)&&(l.tabIndex=0);const{style:o}=l;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,i.alternativeText&&(l.title=i.alternativeText),i.noRotate&&l.classList.add("norotate"),!i.rect||this instanceof Wu){const{rotation:S}=i;return!i.hasOwnCanvas&&S!==0&&this.setRotation(S,l),l}const{width:u,height:h}=this;if(!t&&i.borderStyle.width>0){o.borderWidth=`${i.borderStyle.width}px`;const S=i.borderStyle.horizontalCornerRadius,C=i.borderStyle.verticalCornerRadius;if(S>0||C>0){const k=`calc(${S}px * var(--total-scale-factor)) / calc(${C}px * var(--total-scale-factor))`;o.borderRadius=k}else if(this instanceof km){const k=`calc(${u}px * var(--total-scale-factor)) / calc(${h}px * var(--total-scale-factor))`;o.borderRadius=k}switch(i.borderStyle.style){case ea.SOLID:o.borderStyle="solid";break;case ea.DASHED:o.borderStyle="dashed";break;case ea.BEVELED:St("Unimplemented border style: beveled");break;case ea.INSET:St("Unimplemented border style: inset");break;case ea.UNDERLINE:o.borderBottomStyle="solid";break}const E=i.borderColor||null;E?(this.#e=!0,o.borderColor=ht.makeHexColor(E[0]|0,E[1]|0,E[2]|0)):o.borderWidth=0}const d=ht.normalizeRect([i.rect[0],s.view[3]-i.rect[1]+s.view[1],i.rect[2],s.view[3]-i.rect[3]+s.view[1]]),{pageWidth:p,pageHeight:b,pageX:y,pageY:A}=r.rawDims;o.left=`${100*(d[0]-y)/p}%`,o.top=`${100*(d[1]-A)/b}%`;const{rotation:w}=i;return i.hasOwnCanvas||w===0?(o.width=`${100*u/p}%`,o.height=`${100*h/b}%`):this.setRotation(w,l),l}setRotation(t,i=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:r}=this.parent.viewport.rawDims;let{width:l,height:o}=this;t%180!==0&&([l,o]=[o,l]),i.style.width=`${100*l/s}%`,i.style.height=`${100*o/r}%`,i.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(i,s,r)=>{const l=r.detail[i],o=l[0],u=l.slice(1);r.target.style[s]=em[`${o}_HTML`](u),this.annotationStorage.setValue(this.data.id,{[s]:em[`${o}_rgb`](u)})};return Tt(this,"_commonActions",{display:i=>{const{display:s}=i.detail,r=s%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:s===1||s===2})},print:i=>{this.annotationStorage.setValue(this.data.id,{noPrint:!i.detail.print})},hidden:i=>{const{hidden:s}=i.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:i=>{setTimeout(()=>i.target.focus({preventScroll:!1}),0)},userName:i=>{i.target.title=i.detail.userName},readonly:i=>{i.target.disabled=i.detail.readonly},required:i=>{this._setRequired(i.target,i.detail.required)},bgColor:i=>{t("bgColor","backgroundColor",i)},fillColor:i=>{t("fillColor","backgroundColor",i)},fgColor:i=>{t("fgColor","color",i)},textColor:i=>{t("textColor","color",i)},borderColor:i=>{t("borderColor","borderColor",i)},strokeColor:i=>{t("strokeColor","borderColor",i)},rotation:i=>{const s=i.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,i){const s=this._commonActions;for(const r of Object.keys(i.detail))(t[r]||s[r])?.(i)}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const i=this.annotationStorage.getRawValue(this.data.id);if(!i)return;const s=this._commonActions;for(const[r,l]of Object.entries(i)){const o=s[r];if(o){const u={detail:{[r]:l},target:t};o(u),delete i[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[i,s,r,l]=this.data.rect.map(S=>Math.fround(S));if(t.length===8){const[S,C,E,k]=t.subarray(2,6);if(r===S&&l===C&&i===E&&s===k)return}const{style:o}=this.container;let u;if(this.#e){const{borderColor:S,borderWidth:C}=o;o.borderWidth=0,u=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${S}" stroke-width="${C}">`],this.container.classList.add("hasBorder")}const h=r-i,d=l-s,{svgFactory:p}=this,b=p.createElement("svg");b.classList.add("quadrilateralsContainer"),b.setAttribute("width",0),b.setAttribute("height",0),b.role="none";const y=p.createElement("defs");b.append(y);const A=p.createElement("clipPath"),w=`clippath_${this.data.id}`;A.setAttribute("id",w),A.setAttribute("clipPathUnits","objectBoundingBox"),y.append(A);for(let S=2,C=t.length;S<C;S+=8){const E=t[S],k=t[S+1],O=t[S+2],P=t[S+3],I=p.createElement("rect"),F=(O-i)/h,B=(l-k)/d,D=(E-O)/h,N=(k-P)/d;I.setAttribute("x",F),I.setAttribute("y",B),I.setAttribute("width",D),I.setAttribute("height",N),A.append(I),u?.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${B}" width="${D}" height="${N}"/>`)}this.#e&&(u.push("</g></svg>')"),o.backgroundImage=u.join("")),this.container.append(b),this.container.style.clipPath=`url(#${w})`}_createPopup(t=null){const{data:i}=this;let s,r;t?(s={str:t.text},r=t.date):(s=i.contentsObj,r=i.modificationDate);const l=this.#n=new Wu({data:{color:i.color,titleObj:i.titleObj,modificationDate:r,contentsObj:s,richText:i.richText,parentRect:i.rect,borderStyle:0,id:`popup_${i.id}`,rotation:i.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]});this.parent._commentManager||this.parent.div.append(l.render())}get hasPopupElement(){return!!(this.#n||this.popup||this.data.popupRef)}get extraPopupElement(){return this.#n}render(){Jt("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,i=null){const s=[];if(this._fieldObjects){const r=this._fieldObjects[t];if(r)for(const{page:l,id:o,exportValues:u}of r){if(l===-1||o===i)continue;const h=typeof u=="string"?u:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!fs.has(d)){St(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:h,domElement:d})}return s}for(const r of document.getElementsByName(t)){const{exportValue:l}=r,o=r.getAttribute("data-element-id");o!==i&&fs.has(r)&&s.push({id:o,exportValue:l,domElement:r})}return s}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const i of t)i.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:i}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:t,editId:i,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}class cx extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.editor=t.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:t}=this;t.hasComment&&(this._createPopup(t.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(t){this.editor.comment=t,t||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}class gh extends re{constructor(t,i=null){super(t,{isRenderable:!0,ignoreBorder:!!i?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:i}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let r=!1;return t.url?(i.addLinkAttributes(s,t.url,t.newWindow),r=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),r=!0):t.attachment?(this.#e(s,t.attachment,t.overlaidText,t.attachmentDest),r=!0):t.setOCGState?(this.#n(s,t.setOCGState,t.overlaidText),r=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),r=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),r=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(s,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(s),this.container}#t(){this.container.setAttribute("data-internal-link","")}_bindLink(t,i,s=""){t.href=this.linkService.getDestinationHash(i),t.onclick=()=>(i&&this.linkService.goToDestination(i),!1),(i||i==="")&&this.#t(),s&&(t.title=s)}_bindNamedAction(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(i),!1),s&&(t.title=s),this.#t()}#e(t,i,s="",r=null){t.href=this.linkService.getAnchorUrl(""),i.description?t.title=i.description:s&&(t.title=s),t.onclick=()=>(this.downloadManager?.openOrDownloadData(i.content,i.filename,r),!1),this.#t()}#n(t,i,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(i),!1),s&&(t.title=s),this.#t()}_bindJSAction(t,i){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(i.actions)){const l=s.get(r);l&&(t[l]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i.id,name:r}}),!1))}i.overlaidText&&(t.title=i.overlaidText),t.onclick||(t.onclick=()=>!1),this.#t()}_bindResetFormAction(t,i){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),this.#t(),!this._fieldObjects){St('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{s?.();const{fields:r,refs:l,include:o}=i,u=[];if(r.length!==0||l.length!==0){const p=new Set(l);for(const b of r){const y=this._fieldObjects[b]||[];for(const{id:A}of y)p.add(A)}for(const b of Object.values(this._fieldObjects))for(const y of b)p.has(y.id)===o&&u.push(y)}else for(const p of Object.values(this._fieldObjects))u.push(...p);const h=this.annotationStorage,d=[];for(const p of u){const{id:b}=p;switch(d.push(b),p.type){case"text":{const A=p.defaultValue||"";h.setValue(b,{value:A});break}case"checkbox":case"radiobutton":{const A=p.defaultValue===p.exportValues;h.setValue(b,{value:A});break}case"combobox":case"listbox":{const A=p.defaultValue||"";h.setValue(b,{value:A});break}default:continue}const y=document.querySelector(`[data-element-id="${b}"]`);if(y){if(!fs.has(y)){St(`_bindResetFormAction - element not allowed: ${b}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:d,name:"ResetForm"}}),!1}}}class ux extends re{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class ps extends re{render(){return this.container}showElementAndHideCanvas(t){this.data.hasOwnCanvas&&(t.previousSibling?.nodeName==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ke.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,i,s,r,l){s.includes("mouse")?t.addEventListener(s,o=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{if(s==="blur"){if(!i.focused||!o.relatedTarget)return;i.focused=!1}else if(s==="focus"){if(i.focused)return;i.focused=!0}l&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:l(o)}})})}_setEventListeners(t,i,s,r){for(const[l,o]of s)(o==="Action"||this.data.actions?.[o])&&((o==="Focus"||o==="Blur")&&(i||={focused:!1}),this._setEventListener(t,i,l,o,r),o==="Focus"&&!this.data.actions?.Blur?this._setEventListener(t,i,"blur","Blur",null):o==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(t,i,"focus","Focus",null))}_setBackgroundColor(t){const i=this.data.backgroundColor||null;t.style.backgroundColor=i===null?"transparent":ht.makeHexColor(i[0],i[1],i[2])}_setTextStyle(t){const i=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||lx,l=t.style;let o;const u=2,h=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u),p=Math.round(d/(Lu*r))||1,b=d/p;o=Math.min(r,h(b/Lu))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-u);o=Math.min(r,h(d/Lu))}l.fontSize=`calc(${o}px * var(--total-scale-factor))`,l.color=ht.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(l.textAlign=i[this.data.textAlignment])}_setRequired(t,i){i?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",i)}}class hx extends ps{constructor(t){const i=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:i})}setPropertyOnSiblings(t,i,s,r){const l=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[i]=s),l.setValue(o.id,{[r]:s})}render(){const t=this.annotationStorage,i=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const r=t.getValue(i,{value:this.data.fieldValue});let l=r.value||"";const o=t.getValue(i,{charLimit:this.data.maxLen}).charLimit;o&&l.length>o&&(l=l.slice(0,o));let u=r.formattedValue||this.data.textContent?.join(`
`)||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const h={userValue:l,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=u??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",u??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),fs.add(s),s.setAttribute("data-element-id",i),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=0;const{datetimeFormat:d,datetimeType:p,timeStep:b}=this.data,y=!!p&&this.enableScripting;d&&(s.title=d),this._setRequired(s,this.data.required),o&&(s.maxLength=o),s.addEventListener("input",w=>{t.setValue(i,{value:w.target.value}),this.setPropertyOnSiblings(s,"value",w.target.value,"value"),h.formattedValue=null}),s.addEventListener("resetform",w=>{const S=this.data.defaultFieldValue??"";s.value=h.userValue=S,h.formattedValue=null});let A=w=>{const{formattedValue:S}=h;S!=null&&(w.target.value=S),w.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",S=>{if(h.focused)return;const{target:C}=S;if(y&&(C.type=p,b&&(C.step=b)),h.userValue){const E=h.userValue;if(y)if(p==="time"){const k=new Date(E),O=[k.getHours(),k.getMinutes(),k.getSeconds()];C.value=O.map(P=>P.toString().padStart(2,"0")).join(":")}else C.value=new Date(E-ox).toISOString().split(p==="date"?"T":".",1)[0];else C.value=E}h.lastCommittedValue=C.value,h.commitKey=1,this.data.actions?.Focus||(h.focused=!0)}),s.addEventListener("updatefromsandbox",S=>{this.showElementAndHideCanvas(S.target);const C={value(E){h.userValue=E.detail.value??"",y||t.setValue(i,{value:h.userValue.toString()}),E.target.value=h.userValue},formattedValue(E){const{formattedValue:k}=E.detail;h.formattedValue=k,k!=null&&E.target!==document.activeElement&&(E.target.value=k);const O={formattedValue:k};y&&(O.value=k),t.setValue(i,O)},selRange(E){E.target.setSelectionRange(...E.detail.selRange)},charLimit:E=>{const{charLimit:k}=E.detail,{target:O}=E;if(k===0){O.removeAttribute("maxLength");return}O.setAttribute("maxLength",k);let P=h.userValue;!P||P.length<=k||(P=P.slice(0,k),O.value=h.userValue=P,t.setValue(i,{value:P}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:P,willCommit:!0,commitKey:1,selStart:O.selectionStart,selEnd:O.selectionEnd}}))}};this._dispatchEventFromSandbox(C,S)}),s.addEventListener("keydown",S=>{h.commitKey=1;let C=-1;if(S.key==="Escape"?C=0:S.key==="Enter"&&!this.data.multiLine?C=2:S.key==="Tab"&&(h.commitKey=3),C===-1)return;const{value:E}=S.target;h.lastCommittedValue!==E&&(h.lastCommittedValue=E,h.userValue=E,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:C,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}))});const w=A;A=null,s.addEventListener("blur",S=>{if(!h.focused||!S.relatedTarget)return;this.data.actions?.Blur||(h.focused=!1);const{target:C}=S;let{value:E}=C;if(y){if(E&&p==="time"){const k=E.split(":").map(O=>parseInt(O,10));E=new Date(2e3,0,1,k[0],k[1],k[2]||0).valueOf(),C.step=""}else E.includes("T")||(E=`${E}T00:00`),E=new Date(E).valueOf();C.type="text"}h.userValue=E,h.lastCommittedValue!==E&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:E,willCommit:!0,commitKey:h.commitKey,selStart:S.target.selectionStart,selEnd:S.target.selectionEnd}}),w(S)}),this.data.actions?.Keystroke&&s.addEventListener("beforeinput",S=>{h.lastCommittedValue=null;const{data:C,target:E}=S,{value:k,selectionStart:O,selectionEnd:P}=E;let I=O,F=P;switch(S.inputType){case"deleteWordBackward":{const B=k.substring(0,O).match(/\w*[^\w]*$/);B&&(I-=B[0].length);break}case"deleteWordForward":{const B=k.substring(O).match(/^[^\w]*\w*/);B&&(F+=B[0].length);break}case"deleteContentBackward":O===P&&(I-=1);break;case"deleteContentForward":O===P&&(F+=1);break}S.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:k,change:C||"",willCommit:!1,selStart:I,selEnd:F}})}),this._setEventListeners(s,h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],S=>S.target.value)}if(A&&s.addEventListener("blur",A),this.data.comb){const S=(this.data.rect[2]-this.data.rect[0])/o;s.classList.add("comb"),s.style.letterSpacing=`calc(${S}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class dx extends ps{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class fx extends ps{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.exportValue===i.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",t.setValue(s,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const l=document.createElement("input");return fs.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="checkbox",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.setAttribute("exportValue",i.exportValue),l.tabIndex=0,l.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const d of this._getElementsByName(u,s)){const p=h&&d.exportValue===i.exportValue;d.domElement&&(d.domElement.checked=p),t.setValue(d.id,{value:p})}t.setValue(s,{value:h})}),l.addEventListener("resetform",o=>{const u=i.defaultFieldValue||"Off";o.target.checked=u===i.exportValue}),this.enableScripting&&this.hasJSActions&&(l.addEventListener("updatefromsandbox",o=>{const u={value(h){h.target.checked=h.detail.value!=="Off",t.setValue(s,{value:h.target.checked})}};this._dispatchEventFromSandbox(u,o)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class km extends ps{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,i=this.data,s=i.id;let r=t.getValue(s,{value:i.fieldValue===i.buttonValue}).value;if(typeof r=="string"&&(r=r!==i.buttonValue,t.setValue(s,{value:r})),r)for(const o of this._getElementsByName(i.fieldName,s))t.setValue(o.id,{value:!1});const l=document.createElement("input");if(fs.add(l),l.setAttribute("data-element-id",s),l.disabled=i.readOnly,this._setRequired(l,this.data.required),l.type="radio",l.name=i.fieldName,r&&l.setAttribute("checked",!0),l.tabIndex=0,l.addEventListener("change",o=>{const{name:u,checked:h}=o.target;for(const d of this._getElementsByName(u,s))t.setValue(d.id,{value:!1});t.setValue(s,{value:h})}),l.addEventListener("resetform",o=>{const u=i.defaultFieldValue;o.target.checked=u!=null&&u===i.buttonValue}),this.enableScripting&&this.hasJSActions){const o=i.buttonValue;l.addEventListener("updatefromsandbox",u=>{const h={value:d=>{const p=o===d.detail.value;for(const b of this._getElementsByName(d.target.name)){const y=p&&b.id===s;b.domElement&&(b.domElement.checked=y),t.setValue(b.id,{value:y})}}};this._dispatchEventFromSandbox(h,u)}),this._setEventListeners(l,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],u=>u.target.checked)}return this._setBackgroundColor(l),this._setDefaultPropertiesFromJS(l),this.container.append(l),this.container}}class gx extends gh{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const i=t.lastChild;return this.enableScripting&&this.hasJSActions&&i&&(this._setDefaultPropertiesFromJS(i),i.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class px extends ps{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,i=this.data.id,s=t.getValue(i,{value:this.data.fieldValue}),r=document.createElement("select");fs.add(r),r.setAttribute("data-element-id",i),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let l=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",p=>{const b=this.data.defaultFieldValue;for(const y of r.options)y.selected=y.value===b});for(const p of this.data.options){const b=document.createElement("option");b.textContent=p.displayValue,b.value=p.exportValue,s.value.includes(p.exportValue)&&(b.setAttribute("selected",!0),l=!1),r.append(b)}let o=null;if(l){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),r.prepend(p),o=()=>{p.remove(),r.removeEventListener("input",o),o=null},r.addEventListener("input",o)}const u=p=>{const b=p?"value":"textContent",{options:y,multiple:A}=r;return A?Array.prototype.filter.call(y,w=>w.selected).map(w=>w[b]):y.selectedIndex===-1?null:y[y.selectedIndex][b]};let h=u(!1);const d=p=>{const b=p.target.options;return Array.prototype.map.call(b,y=>({displayValue:y.textContent,exportValue:y.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",p=>{const b={value(y){o?.();const A=y.detail.value,w=new Set(Array.isArray(A)?A:[A]);for(const S of r.options)S.selected=w.has(S.value);t.setValue(i,{value:u(!0)}),h=u(!1)},multipleSelection(y){r.multiple=!0},remove(y){const A=r.options,w=y.detail.remove;A[w].selected=!1,r.remove(w),A.length>0&&Array.prototype.findIndex.call(A,C=>C.selected)===-1&&(A[0].selected=!0),t.setValue(i,{value:u(!0),items:d(y)}),h=u(!1)},clear(y){for(;r.length!==0;)r.remove(0);t.setValue(i,{value:null,items:[]}),h=u(!1)},insert(y){const{index:A,displayValue:w,exportValue:S}=y.detail.insert,C=r.children[A],E=document.createElement("option");E.textContent=w,E.value=S,C?C.before(E):r.append(E),t.setValue(i,{value:u(!0),items:d(y)}),h=u(!1)},items(y){const{items:A}=y.detail;for(;r.length!==0;)r.remove(0);for(const w of A){const{displayValue:S,exportValue:C}=w,E=document.createElement("option");E.textContent=S,E.value=C,r.append(E)}r.options.length>0&&(r.options[0].selected=!0),t.setValue(i,{value:u(!0),items:d(y)}),h=u(!1)},indices(y){const A=new Set(y.detail.indices);for(const w of y.target.options)w.selected=A.has(w.index);t.setValue(i,{value:u(!0)}),h=u(!1)},editable(y){y.target.disabled=!y.detail.editable}};this._dispatchEventFromSandbox(b,p)}),r.addEventListener("input",p=>{const b=u(!0),y=u(!1);t.setValue(i,{value:b}),p.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:i,name:"Keystroke",value:h,change:y,changeEx:b,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):r.addEventListener("input",function(p){t.setValue(i,{value:u(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Wu extends re{constructor(t){const{data:i,elements:s,parent:r}=t,l=!!r._commentManager;if(super(t,{isRenderable:!l&&re._hasPopupData(i)}),this.elements=s,l&&re._hasPopupData(i)){const o=this.popup=this.#t();for(const u of s)u.popup=o}else this.popup=null}#t(){return new mx({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const i=this.popup=this.#t(),s=[];for(const r of this.elements)r.popup=i,r.container.ariaHasPopup="dialog",s.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(r=>`${sh}${r}`).join(",")),this.container}}class mx{#t=null;#e=this.#G.bind(this);#n=this.#z.bind(this);#i=this.#k.bind(this);#r=this.#A.bind(this);#s=null;#a=null;#l=null;#c=null;#o=null;#d=null;#h=null;#f=!1;#m=null;#g=null;#u=null;#p=null;#b=null;#v=null;#y=null;#E=null;#w=null;#x=null;#T=!1;#S=null;#_=null;constructor({container:t,color:i,elements:s,titleObj:r,modificationDate:l,contentsObj:o,richText:u,parent:h,rect:d,parentRect:p,open:b,commentManager:y=null}){this.#a=t,this.#w=r,this.#l=o,this.#E=u,this.#d=h,this.#s=i,this.#y=d,this.#h=p,this.#o=s,this.#t=y,this.#S=s[0],this.#c=Gu.toDateObject(l),this.trigger=s.flatMap(A=>A.getElementsToTriggerPopup()),y?this.renderCommentButton():(this.#M(),this.#a.hidden=!0,b&&this.#A())}#M(){if(this.#g)return;this.#g=new AbortController;const{signal:t}=this.#g;for(const i of this.trigger)i.addEventListener("click",this.#r,{signal:t}),i.addEventListener("pointerenter",this.#i,{signal:t}),i.addEventListener("pointerleave",this.#n,{signal:t}),i.classList.add("popupTriggerArea");for(const i of this.#o)i.container?.addEventListener("keydown",this.#e,{signal:t})}#D(){const t=this.#o.find(i=>i.hasCommentButton);t&&(this.#b=t._normalizePoint(t.commentButtonPosition))}renderCommentButton(){if(this.#p||(this.#b||this.#D(),!this.#b))return;const{signal:t}=this.#g=new AbortController,i=!!this.#S.extraPopupElement,s=()=>{this.#t.toggleCommentPopup(this,!0,void 0,!i)},r=()=>{this.#t.toggleCommentPopup(this,!1,!0,!i)},l=()=>{this.#t.toggleCommentPopup(this,!1,!1)};if(i){this.#p=this.#S.container;for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",s,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",l,{signal:t}),o.classList.add("popupTriggerArea")}else{const o=this.#p=document.createElement("button");o.className="annotationCommentButton";const u=this.#S.container;o.style.zIndex=u.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),this.#P(),this.#N(),o.addEventListener("keydown",this.#e,{signal:t}),o.addEventListener("click",s,{signal:t}),o.addEventListener("pointerenter",r,{signal:t}),o.addEventListener("pointerleave",l,{signal:t}),u.after(o)}}#N(){if(this.#S.extraPopupElement&&!this.#S.editor)return;this.renderCommentButton();const[t,i]=this.#b,{style:s}=this.#p;s.left=`calc(${t}%)`,s.top=`calc(${i}% - var(--comment-button-dim))`}#P(){this.#S.extraPopupElement||(this.renderCommentButton(),this.#p.style.backgroundColor=this.commentButtonColor||"")}get commentButtonColor(){const{color:t,opacity:i}=this.#S.commentData;return t?this.#d._commentManager.makeCommentColor(t,i):null}focusCommentButton(){setTimeout(()=>{this.#p?.focus()},0)}getData(){const{richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}=this.#S.commentData;return{contentsObj:{str:this.comment},richText:t,color:i,opacity:s,creationDate:r,modificationDate:l}}get elementBeforePopup(){return this.#p}get comment(){return this.#_||=this.#S.commentText,this.#_}set comment(t){t!==this.comment&&(this.#S.commentText=this.#_=t)}get parentBoundingClientRect(){return this.#S.layer.getBoundingClientRect()}setCommentButtonStates({selected:t,hasPopup:i}){this.#p&&(this.#p.classList.toggle("selected",t),this.#p.ariaExpanded=i)}setSelectedCommentButton(t){this.#p.classList.toggle("selected",t)}get commentPopupPosition(){if(this.#v)return this.#v;const{x:t,y:i,height:s}=this.#p.getBoundingClientRect(),{x:r,y:l,width:o,height:u}=this.#S.layer.getBoundingClientRect();return[(t-r)/o,(i+s-l)/u]}set commentPopupPosition(t){this.#v=t}hasDefaultPopupPosition(){return this.#v===null}get commentButtonPosition(){return this.#b}get commentButtonWidth(){return this.#p.getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(t){const[i,s]=this.#v||this.commentButtonPosition.map(d=>d/100),r=this.parentBoundingClientRect,{x:l,y:o,width:u,height:h}=r;this.#t.showDialog(null,this,l+i*u,o+s*h,{...t,parentDimensions:r})}render(){if(this.#m)return;const t=this.#m=document.createElement("div");if(t.className="popup",this.#s){const s=t.style.outlineColor=ht.makeHexColor(...this.#s);t.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`}const i=document.createElement("span");if(i.className="header",this.#w?.str){const s=document.createElement("span");s.className="title",i.append(s),{dir:s.dir,str:s.textContent}=this.#w}if(t.append(i),this.#c){const s=document.createElement("time");s.className="popupDate",s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:this.#c.valueOf()})),s.dateTime=this.#c.toISOString(),i.append(s)}dm({html:this.#O||this.#l.str,dir:this.#l?.dir,className:"popupContent"},t),this.#a.append(t)}get#O(){const t=this.#E,i=this.#l;return t?.str&&(!i?.str||i.str===t.str)&&this.#E.html||null}get#L(){return this.#O?.attributes?.style?.fontSize||0}get#F(){return this.#O?.attributes?.style?.color||null}#j(t){const i=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:i}]}},r={style:{color:this.#F,fontSize:this.#L?`calc(${this.#L}px * var(--total-scale-factor))`:""}};for(const l of t.split(`
`))i.push({name:"span",value:l,attributes:r});return s}#G(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&this.#f)&&this.#A()}updateEdited({rect:t,popup:i,deleted:s}){if(this.#t){s?(this.remove(),this.#_=null):i&&(i.deleted?this.remove():(this.#P(),this.#_=i.text)),t&&(this.#b=null,this.#D(),this.#N());return}if(s||i?.deleted){this.remove();return}this.#M(),this.#x||={contentsObj:this.#l,richText:this.#E},t&&(this.#u=null),i&&i.text&&(this.#E=this.#j(i.text),this.#c=Gu.toDateObject(i.date),this.#l=null),this.#m?.remove(),this.#m=null}resetEdited(){this.#x&&({contentsObj:this.#l,richText:this.#E}=this.#x,this.#x=null,this.#m?.remove(),this.#m=null,this.#u=null)}remove(){if(this.#g?.abort(),this.#g=null,this.#m?.remove(),this.#m=null,this.#T=!1,this.#f=!1,this.#p?.remove(),this.#p=null,this.trigger)for(const t of this.trigger)t.classList.remove("popupTriggerArea")}#C(){if(this.#u!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:r,pageY:l}}}=this.#d;let o=!!this.#h,u=o?this.#h:this.#y;for(const w of this.#o)if(!u||ht.intersect(w.data.rect,u)!==null){u=w.data.rect,o=!0;break}const h=ht.normalizeRect([u[0],t[3]-u[1]+t[1],u[2],t[3]-u[3]+t[1]]),p=o?u[2]-u[0]+5:0,b=h[0]+p,y=h[1];this.#u=[100*(b-r)/i,100*(y-l)/s];const{style:A}=this.#a;A.left=`${this.#u[0]}%`,A.top=`${this.#u[1]}%`}#A(){if(this.#t){this.#t.toggleCommentPopup(this,!1);return}this.#f=!this.#f,this.#f?(this.#k(),this.#a.addEventListener("click",this.#r),this.#a.addEventListener("keydown",this.#e)):(this.#z(),this.#a.removeEventListener("click",this.#r),this.#a.removeEventListener("keydown",this.#e))}#k(){this.#m||this.render(),this.isVisible?this.#f&&this.#a.classList.add("focused"):(this.#C(),this.#a.hidden=!1,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)+1e3)}#z(){this.#a.classList.remove("focused"),!(this.#f||!this.isVisible)&&(this.#a.hidden=!0,this.#a.style.zIndex=parseInt(this.#a.style.zIndex)-1e3)}forceHide(){this.#T=this.isVisible,this.#T&&(this.#a.hidden=!0)}maybeShow(){this.#t||(this.#M(),this.#T&&(this.#m||this.#k(),this.#T=!1,this.#a.hidden=!1))}get isVisible(){return this.#t?!1:this.#a.hidden===!1}}class Lm extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=_t.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const i of this.textContent){const s=document.createElement("span");s.textContent=i,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class bx extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=this.#t=this.svgFactory.createElement("svg:line");return l.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),l.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),l.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),l.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),l.setAttribute("stroke-width",t.borderStyle.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class yx extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:rect");return o.setAttribute("x",l/2),o.setAttribute("y",l/2),o.setAttribute("width",i-l),o.setAttribute("height",s-l),o.setAttribute("stroke-width",l||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class vx extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const{data:t,width:i,height:s}=this,r=this.svgFactory.create(i,s,!0),l=t.borderStyle.width,o=this.#t=this.svgFactory.createElement("svg:ellipse");return o.setAttribute("cx",i/2),o.setAttribute("cy",s/2),o.setAttribute("rx",i/2-l/2),o.setAttribute("ry",s/2-l/2),o.setAttribute("stroke-width",l||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class jm extends re{#t=null;constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:i,borderStyle:s,popupRef:r},width:l,height:o}=this;if(!i)return this.container;const u=this.svgFactory.create(l,o,!0);let h=[];for(let p=0,b=i.length;p<b;p+=2){const y=i[p]-t[0],A=t[3]-i[p+1];h.push(`${y},${A}`)}h=h.join(" ");const d=this.#t=this.svgFactory.createElement(this.svgElementName);return d.setAttribute("points",h),d.setAttribute("stroke-width",s.width||1),d.setAttribute("stroke","transparent"),d.setAttribute("fill","transparent"),u.append(d),this.container.append(u),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}}class xx extends jm{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ax extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class ph extends re{#t=null;#e=[];constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?_t.HIGHLIGHT:_t.INK}#n(t,i){switch(t){case 90:return{transform:`rotate(90) translate(${-i[0]},${i[1]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};case 180:return{transform:`rotate(180) translate(${-i[2]},${i[1]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]};case 270:return{transform:`rotate(270) translate(${-i[2]},${i[3]}) scale(1,-1)`,width:i[3]-i[1],height:i[2]-i[0]};default:return{transform:`translate(${-i[0]},${i[3]}) scale(1,-1)`,width:i[2]-i[0],height:i[3]-i[1]}}}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:i,inkLists:s,borderStyle:r,popupRef:l}}=this,{transform:o,width:u,height:h}=this.#n(i,t),d=this.svgFactory.create(u,h,!0),p=this.#t=this.svgFactory.createElement("svg:g");d.append(p),p.setAttribute("stroke-width",r.width||1),p.setAttribute("stroke-linecap","round"),p.setAttribute("stroke-linejoin","round"),p.setAttribute("stroke-miterlimit",10),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),p.setAttribute("transform",o);for(let b=0,y=s.length;b<y;b++){const A=this.svgFactory.createElement(this.svgElementName);this.#e.push(A),A.setAttribute("points",s[b].join(",")),p.append(A)}return!l&&this.hasPopupData&&this._createPopup(),this.container.append(d),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:i,points:s,rect:r}=t,l=this.#t;if(i>=0&&l.setAttribute("stroke-width",i||1),s)for(let o=0,u=this.#e.length;o<u;o++)this.#e[o].setAttribute("points",s[o].join(","));if(r){const{transform:o,width:u,height:h}=this.#n(this.data.rotation,r);l.parentElement.setAttribute("viewBox",`0 0 ${u} ${h}`),l.setAttribute("transform",o)}}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Bm extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=_t.HIGHLIGHT}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),t){const s=document.createElement("mark");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Sx extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class wx extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),t){const s=document.createElement("u");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class _x extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:t,popupRef:i}}=this;if(!i&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),t){const s=document.createElement("s");s.classList.add("overlaidText"),s.textContent=t,this.container.append(s)}return this.container}}class Pm extends re{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=_t.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}class Ex extends re{#t=null;constructor(t){super(t,{isRenderable:!0});const{file:i}=this.data;this.filename=i.filename,this.content=i.content,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,...i})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:i}=this;let s;i.hasAppearance||i.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(i.name)?"paperclip":"pushpin"}.svg`,i.fillAlpha&&i.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(i.fillAlpha*100)}%);`)),s.addEventListener("dblclick",this.#e.bind(this)),this.#t=s;const{isMac:r}=ke.platform;return t.addEventListener("keydown",l=>{l.key==="Enter"&&(r?l.metaKey:l.ctrlKey)&&this.#e()}),!i.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return this.#t}addHighlightArea(){this.container.classList.add("highlightArea")}#e(){this.downloadManager?.openOrDownloadData(this.content,this.filename)}}class mh{#t=null;#e=null;#n=null;#i=new Map;#r=null;#s=null;constructor({div:t,accessibilityManager:i,annotationCanvasMap:s,annotationEditorUIManager:r,page:l,viewport:o,structTreeLayer:u,commentManager:h,linkService:d,annotationStorage:p}){this.div=t,this.#t=i,this.#e=s,this.#r=u||null,this.#s=d||null,this.#n=p||new ch,this.page=l,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=r,this._commentManager=h||null}hasEditableAnnotations(){return this.#i.size>0}async#a(t,i,s){const r=t.firstChild||t,l=r.id=`${sh}${i}`,o=await this.#r?.getAriaAttributes(l);if(o)for(const[u,h]of o)r.setAttribute(u,h);s?s.at(-1).container.after(t):(this.div.append(t),this.#t?.moveElementInDOM(this.div,t,r,!1))}async render(t){const{annotations:i}=t,s=this.div;ds(s,this.viewport);const r=new Map,l={data:null,layer:s,linkService:this.#s,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new ao,annotationStorage:this.#n,enableComment:t.enableComment===!0,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const o of i){if(o.noHTML)continue;const u=o.annotationType===ve.POPUP;if(u){const p=r.get(o.id);if(!p)continue;l.elements=p}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;l.data=o;const h=im.create(l);if(!h.isRenderable)continue;if(!u&&o.popupRef){const p=r.get(o.popupRef);p?p.push(h):r.set(o.popupRef,[h])}const d=h.render();o.hidden&&(d.style.visibility="hidden"),await this.#a(d,o.id,l.elements),h.extraPopupElement?.popup?.renderCommentButton(),h._isEditable&&(this.#i.set(h.data.id,h),this._annotationEditorUIManager?.renderAnnotationElement(h))}this.#l()}async addLinkAnnotations(t){const i={data:null,layer:this.div,linkService:this.#s,svgFactory:new ao,parent:this};for(const s of t){s.borderStyle||=mh._defaultBorderStyle,i.data=s;const r=im.create(i);if(!r.isRenderable)continue;const l=r.render();await this.#a(l,s.id,null)}}update({viewport:t}){const i=this.div;this.viewport=t,ds(i,{rotation:t.rotation}),this.#l(),i.hidden=!1}#l(){if(!this.#e)return;const t=this.div;for(const[i,s]of this.#e){const r=t.querySelector(`[data-annotation-id="${i}"]`);if(!r)continue;s.className="annotationContent";const{firstChild:l}=r;l?l.nodeName==="CANVAS"?l.replaceWith(s):l.classList.contains("annotationContent")?l.after(s):l.before(s):r.append(s);const o=this.#i.get(i);o&&(o._hasNoCanvas?(this._annotationEditorUIManager?.setMissingCanvas(i,r.id,s),o._hasNoCanvas=!1):o.canvas=s)}this.#e.clear()}getEditableAnnotations(){return Array.from(this.#i.values())}getEditableAnnotation(t){return this.#i.get(t)}addFakeAnnotation(t){const{div:i}=this,{id:s,rotation:r}=t,l=new cx({data:{id:s,rect:t.getPDFRect(),rotation:r},editor:t,layer:i,parent:this,enableComment:!!this._commentManager,linkService:this.#s,annotationStorage:this.#n}),o=l.render();return i.append(o),this.#t?.moveElementInDOM(i,o,o,!1),l.createOrUpdatePopup(),l}static get _defaultBorderStyle(){return Tt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ea.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}const Wl=/\r\n?|\n/g;class we extends bt{#t="";#e=`${this.id}-editor`;#n=null;#i;_colorPicker=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const t=we.prototype,i=l=>l.isEmpty(),s=Hn.TRANSLATE_SMALL,r=Hn.TRANSLATE_BIG;return Tt(this,"_keyboardManager",new _r([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:i}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:i}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:i}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[r,0],checker:i}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:i}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:i}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:i}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,r],checker:i}]]))}static _type="freetext";static _editorType=_t.FREETEXT;constructor(t){super({...t,name:"freeTextEditor"}),this.color=t.color||we._defaultColor||bt._defaultLineColor,this.#i=t.fontSize||we._defaultFontSize,this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(t,i){bt.initialize(t,i);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,i){switch(t){case jt.FREETEXT_SIZE:we._defaultFontSize=i;break;case jt.FREETEXT_COLOR:we._defaultColor=i;break}}updateParams(t,i){switch(t){case jt.FREETEXT_SIZE:this.#r(i);break;case jt.FREETEXT_COLOR:this.#s(i);break}}static get defaultPropertiesToUpdate(){return[[jt.FREETEXT_SIZE,we._defaultFontSize],[jt.FREETEXT_COLOR,we._defaultColor||bt._defaultLineColor]]}get propertiesToUpdate(){return[[jt.FREETEXT_SIZE,this.#i],[jt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||=new vr(this),[["colorPicker",this._colorPicker]]}get colorType(){return jt.FREETEXT_COLOR}#r(t){const i=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-this.#i)*this.parentScale),this.#i=r,this.#l()},s=this.#i;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}onUpdatedColor(){this.editorDiv.style.color=this.color,this._colorPicker?.update(this.color),super.onUpdatedColor()}#s(t){const i=r=>{this.color=r,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:i.bind(this,t),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(t,i){this._uiManager.translateSelectedEditors(t,i,!0)}getInitialTranslation(){const t=this.parentScale;return[-we._internalPadding*t,-(we._internalPadding+this.#i)*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.#n=new AbortController;const t=this._uiManager.combinedSignal(this.#n);return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#e),this._isDraggable=!0,this.#n?.abort(),this.#n=null,this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}#a(){const t=[];this.editorDiv.normalize();let i=null;for(const s of this.editorDiv.childNodes)i?.nodeType===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(we.#c(s)),i=s);return t.join(`
`)}#l(){const[t,i]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:r,div:l}=this,o=l.style.display,u=l.classList.contains("hidden");l.classList.remove("hidden"),l.style.display="hidden",r.div.append(this.div),s=l.getBoundingClientRect(),l.remove(),l.style.display=o,l.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/i):(this.width=s.height/t,this.height=s.width/i),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=this.#t,i=this.#t=this.#a().trimEnd();if(t===i)return;const s=r=>{if(this.#t=r,!r){this.remove();return}this.#o(),this._uiManager.rebuild(this),this.#l()};this.addCommands({cmd:()=>{s(i)},undo:()=>{s(t)},mustExec:!1}),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){we._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,i;(this._isCopy||this.annotationElementId)&&(t=this.x,i=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#e),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,l]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[u,h]=this.getInitialTranslation();[u,h]=this.pageTranslationToScreen(u,h);const[d,p]=this.pageDimensions,[b,y]=this.pageTranslation;let A,w;switch(this.rotation){case 0:A=t+(o[0]-b)/d,w=i+this.height-(o[1]-y)/p;break;case 90:A=t+(o[0]-b)/d,w=i-(o[1]-y)/p,[u,h]=[h,-u];break;case 180:A=t-this.width+(o[0]-b)/d,w=i-(o[1]-y)/p,[u,h]=[-u,-h];break;case 270:A=t+(o[0]-b-this.height*p)/d,w=i+(o[1]-y-this.width*d)/p,[u,h]=[-h,u];break}this.setAt(A*r,w*l,u,h)}else this._moveAfterPaste(t,i);this.#o(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}static#c(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(Wl,"")}editorDivPaste(t){const i=t.clipboardData||window.clipboardData,{types:s}=i;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const r=we.#h(i.getData("text")||"").replaceAll(Wl,`
`);if(!r)return;const l=window.getSelection();if(!l.rangeCount)return;this.editorDiv.normalize(),l.deleteFromDocument();const o=l.getRangeAt(0);if(!r.includes(`
`)){o.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),l.collapseToStart();return}const{startContainer:u,startOffset:h}=o,d=[],p=[];if(u.nodeType===Node.TEXT_NODE){const A=u.parentElement;if(p.push(u.nodeValue.slice(h).replaceAll(Wl,"")),A!==this.editorDiv){let w=d;for(const S of this.editorDiv.childNodes){if(S===A){w=p;continue}w.push(we.#c(S))}}d.push(u.nodeValue.slice(0,h).replaceAll(Wl,""))}else if(u===this.editorDiv){let A=d,w=0;for(const S of this.editorDiv.childNodes)w++===h&&(A=p),A.push(we.#c(S))}this.#t=`${d.join(`
`)}${r}${p.join(`
`)}`,this.#o();const b=new Range;let y=Math.sumPrecise(d.map(A=>A.length));for(const{firstChild:A}of this.editorDiv.childNodes)if(A.nodeType===Node.TEXT_NODE){const w=A.nodeValue.length;if(y<=w){b.setStart(A,y),b.setEnd(A,y);break}y-=w}l.removeAllRanges(),l.addRange(b)}#o(){if(this.editorDiv.replaceChildren(),!!this.#t)for(const t of this.#t.split(`
`)){const i=document.createElement("div");i.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(i)}}#d(){return this.#t.replaceAll(" "," ")}static#h(t){return t.replaceAll(" "," ")}get contentDiv(){return this.editorDiv}getPDFRect(){const t=we._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,i,s){let r=null;if(t instanceof Lm){const{data:{defaultAppearanceData:{fontSize:o,fontColor:u},rect:h,rotation:d,id:p,popupRef:b,richText:y,contentsObj:A,creationDate:w,modificationDate:S},textContent:C,textPosition:E,parent:{page:{pageNumber:k}}}=t;if(!C||C.length===0)return null;r=t={annotationType:_t.FREETEXT,color:Array.from(u),fontSize:o,value:C.join(`
`),position:E,pageIndex:k-1,rect:h.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:b,comment:A?.str||null,richText:y,creationDate:w,modificationDate:S}}const l=await super.deserialize(t,i,s);return l.#i=t.fontSize,l.color=ht.makeHexColor(...t.color),l.#t=we.#h(t.value),l._initialData=r,t.comment&&l.setCommentData(t),l}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i=bt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:i,fontSize:this.#i,value:this.#d()});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!this.#f(s)?null:(s.id=this.annotationElementId,s)}#f(t){const{value:i,fontSize:s,color:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==i||t.fontSize!==s||t.color.some((o,u)=>o!==r[u])||t.pageIndex!==l}renderAnnotationElement(t){const i=super.renderAnnotationElement(t);if(!i)return null;const{style:s}=i;s.fontSize=`calc(${this.#i}px * var(--total-scale-factor))`,s.color=this.color,i.replaceChildren();for(const r of this.#t.split(`
`)){const l=document.createElement("div");l.append(r?document.createTextNode(r):document.createElement("br")),i.append(l)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:this.#t}}),i}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}}class ot{static PRECISION=1e-4;toSVGPath(){Jt("Abstract method `toSVGPath` must be implemented.")}get box(){Jt("Abstract getter `box` must be implemented.")}serialize(t,i){Jt("Abstract method `serialize` must be implemented.")}static _rescale(t,i,s,r,l,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=i+t[u]*r,o[u+1]=s+t[u+1]*l;return o}static _rescaleAndSwap(t,i,s,r,l,o){o||=new Float32Array(t.length);for(let u=0,h=t.length;u<h;u+=2)o[u]=i+t[u+1]*r,o[u+1]=s+t[u]*l;return o}static _translate(t,i,s,r){r||=new Float32Array(t.length);for(let l=0,o=t.length;l<o;l+=2)r[l]=i+t[l],r[l+1]=s+t[l+1];return r}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,i,s,r,l){switch(l){case 90:return[1-i/s,t/r];case 180:return[1-t/s,1-i/r];case 270:return[i/s,1-t/r];default:return[t/s,i/r]}}static _normalizePagePoint(t,i,s){switch(s){case 90:return[1-i,t];case 180:return[1-t,1-i];case 270:return[i,1-t];default:return[t,i]}}static createBezierPoints(t,i,s,r,l,o){return[(t+5*s)/6,(i+5*r)/6,(5*s+l)/6,(5*r+o)/6,(s+l)/2,(r+o)/2]}}class os{#t;#e=[];#n;#i;#r=[];#s=new Float32Array(18);#a;#l;#c;#o;#d;#h;#f=[];static#m=8;static#g=2;static#u=os.#m+os.#g;constructor({x:t,y:i},s,r,l,o,u=0){this.#t=s,this.#h=l*r,this.#i=o,this.#s.set([NaN,NaN,NaN,NaN,t,i],6),this.#n=u,this.#o=os.#m*r,this.#c=os.#u*r,this.#d=r,this.#f.push(t,i)}isEmpty(){return isNaN(this.#s[8])}#p(){const t=this.#s.subarray(4,6),i=this.#s.subarray(16,18),[s,r,l,o]=this.#t;return[(this.#a+(t[0]-i[0])/2-s)/l,(this.#l+(t[1]-i[1])/2-r)/o,(this.#a+(i[0]-t[0])/2-s)/l,(this.#l+(i[1]-t[1])/2-r)/o]}add({x:t,y:i}){this.#a=t,this.#l=i;const[s,r,l,o]=this.#t;let[u,h,d,p]=this.#s.subarray(8,12);const b=t-d,y=i-p,A=Math.hypot(b,y);if(A<this.#c)return!1;const w=A-this.#o,S=w/A,C=S*b,E=S*y;let k=u,O=h;u=d,h=p,d+=C,p+=E,this.#f?.push(t,i);const P=-E/w,I=C/w,F=P*this.#h,B=I*this.#h;return this.#s.set(this.#s.subarray(2,8),0),this.#s.set([d+F,p+B],4),this.#s.set(this.#s.subarray(14,18),12),this.#s.set([d-F,p-B],16),isNaN(this.#s[6])?(this.#r.length===0&&(this.#s.set([u+F,h+B],2),this.#r.push(NaN,NaN,NaN,NaN,(u+F-s)/l,(h+B-r)/o),this.#s.set([u-F,h-B],14),this.#e.push(NaN,NaN,NaN,NaN,(u-F-s)/l,(h-B-r)/o)),this.#s.set([k,O,u,h,d,p],6),!this.isEmpty()):(this.#s.set([k,O,u,h,d,p],6),Math.abs(Math.atan2(O-h,k-u)-Math.atan2(E,C))<Math.PI/2?([u,h,d,p]=this.#s.subarray(2,6),this.#r.push(NaN,NaN,NaN,NaN,((u+d)/2-s)/l,((h+p)/2-r)/o),[u,h,k,O]=this.#s.subarray(14,18),this.#e.push(NaN,NaN,NaN,NaN,((k+u)/2-s)/l,((O+h)/2-r)/o),!0):([k,O,u,h,d,p]=this.#s.subarray(0,6),this.#r.push(((k+5*u)/6-s)/l,((O+5*h)/6-r)/o,((5*u+d)/6-s)/l,((5*h+p)/6-r)/o,((u+d)/2-s)/l,((h+p)/2-r)/o),[d,p,u,h,k,O]=this.#s.subarray(12,18),this.#e.push(((k+5*u)/6-s)/l,((O+5*h)/6-r)/o,((5*u+d)/6-s)/l,((5*h+p)/6-r)/o,((u+d)/2-s)/l,((h+p)/2-r)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=this.#r,i=this.#e;if(isNaN(this.#s[6])&&!this.isEmpty())return this.#b();const s=[];s.push(`M${t[4]} ${t[5]}`);for(let r=6;r<t.length;r+=6)isNaN(t[r])?s.push(`L${t[r+4]} ${t[r+5]}`):s.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);this.#y(s);for(let r=i.length-6;r>=6;r-=6)isNaN(i[r])?s.push(`L${i[r+4]} ${i[r+5]}`):s.push(`C${i[r]} ${i[r+1]} ${i[r+2]} ${i[r+3]} ${i[r+4]} ${i[r+5]}`);return this.#v(s),s.join(" ")}#b(){const[t,i,s,r]=this.#t,[l,o,u,h]=this.#p();return`M${(this.#s[2]-t)/s} ${(this.#s[3]-i)/r} L${(this.#s[4]-t)/s} ${(this.#s[5]-i)/r} L${l} ${o} L${u} ${h} L${(this.#s[16]-t)/s} ${(this.#s[17]-i)/r} L${(this.#s[14]-t)/s} ${(this.#s[15]-i)/r} Z`}#v(t){const i=this.#e;t.push(`L${i[4]} ${i[5]} Z`)}#y(t){const[i,s,r,l]=this.#t,o=this.#s.subarray(4,6),u=this.#s.subarray(16,18),[h,d,p,b]=this.#p();t.push(`L${(o[0]-i)/r} ${(o[1]-s)/l} L${h} ${d} L${p} ${b} L${(u[0]-i)/r} ${(u[1]-s)/l}`)}newFreeDrawOutline(t,i,s,r,l,o){return new Fm(t,i,s,r,l,o)}getOutlines(){const t=this.#r,i=this.#e,s=this.#s,[r,l,o,u]=this.#t,h=new Float32Array((this.#f?.length??0)+2);for(let b=0,y=h.length-2;b<y;b+=2)h[b]=(this.#f[b]-r)/o,h[b+1]=(this.#f[b+1]-l)/u;if(h[h.length-2]=(this.#a-r)/o,h[h.length-1]=(this.#l-l)/u,isNaN(s[6])&&!this.isEmpty())return this.#E(h);const d=new Float32Array(this.#r.length+24+this.#e.length);let p=t.length;for(let b=0;b<p;b+=2){if(isNaN(t[b])){d[b]=d[b+1]=NaN;continue}d[b]=t[b],d[b+1]=t[b+1]}p=this.#x(d,p);for(let b=i.length-6;b>=6;b-=6)for(let y=0;y<6;y+=2){if(isNaN(i[b+y])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=i[b+y],d[p+1]=i[b+y+1],p+=2}return this.#w(d,p),this.newFreeDrawOutline(d,h,this.#t,this.#d,this.#n,this.#i)}#E(t){const i=this.#s,[s,r,l,o]=this.#t,[u,h,d,p]=this.#p(),b=new Float32Array(36);return b.set([NaN,NaN,NaN,NaN,(i[2]-s)/l,(i[3]-r)/o,NaN,NaN,NaN,NaN,(i[4]-s)/l,(i[5]-r)/o,NaN,NaN,NaN,NaN,u,h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(i[16]-s)/l,(i[17]-r)/o,NaN,NaN,NaN,NaN,(i[14]-s)/l,(i[15]-r)/o],0),this.newFreeDrawOutline(b,t,this.#t,this.#d,this.#n,this.#i)}#w(t,i){const s=this.#e;return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],i),i+=6}#x(t,i){const s=this.#s.subarray(4,6),r=this.#s.subarray(16,18),[l,o,u,h]=this.#t,[d,p,b,y]=this.#p();return t.set([NaN,NaN,NaN,NaN,(s[0]-l)/u,(s[1]-o)/h,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,b,y,NaN,NaN,NaN,NaN,(r[0]-l)/u,(r[1]-o)/h],i),i+=24}}class Fm extends ot{#t;#e=new Float32Array(4);#n;#i;#r;#s;#a;constructor(t,i,s,r,l,o){super(),this.#a=t,this.#r=i,this.#t=s,this.#s=r,this.#n=l,this.#i=o,this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],this.#l(o);const[u,h,d,p]=this.#e;for(let b=0,y=t.length;b<y;b+=2)t[b]=(t[b]-u)/d,t[b+1]=(t[b+1]-h)/p;for(let b=0,y=i.length;b<y;b+=2)i[b]=(i[b]-u)/d,i[b+1]=(i[b+1]-h)/p}toSVGPath(){const t=[`M${this.#a[4]} ${this.#a[5]}`];for(let i=6,s=this.#a.length;i<s;i+=6){if(isNaN(this.#a[i])){t.push(`L${this.#a[i+4]} ${this.#a[i+5]}`);continue}t.push(`C${this.#a[i]} ${this.#a[i+1]} ${this.#a[i+2]} ${this.#a[i+3]} ${this.#a[i+4]} ${this.#a[i+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,i,s,r],l){const o=s-t,u=r-i;let h,d;switch(l){case 0:h=ot._rescale(this.#a,t,r,o,-u),d=ot._rescale(this.#r,t,r,o,-u);break;case 90:h=ot._rescaleAndSwap(this.#a,t,i,o,u),d=ot._rescaleAndSwap(this.#r,t,i,o,u);break;case 180:h=ot._rescale(this.#a,s,i,-o,u),d=ot._rescale(this.#r,s,i,-o,u);break;case 270:h=ot._rescaleAndSwap(this.#a,s,r,-o,-u),d=ot._rescaleAndSwap(this.#r,s,r,-o,-u);break}return{outline:Array.from(h),points:[Array.from(d)]}}#l(t){const i=this.#a;let s=i[4],r=i[5];const l=[s,r,s,r];let o=s,u=r,h=s,d=r;const p=t?Math.max:Math.min,b=new Float32Array(4);for(let A=6,w=i.length;A<w;A+=6){const S=i[A+4],C=i[A+5];isNaN(i[A])?(ht.pointBoundingBox(S,C,l),u>C?(o=S,u=C):u===C&&(o=p(o,S)),d<C?(h=S,d=C):d===C&&(h=p(h,S))):(b[0]=b[1]=1/0,b[2]=b[3]=-1/0,ht.bezierBoundingBox(s,r,...i.slice(A,A+6),b),ht.rectBoundingBox(b[0],b[1],b[2],b[3],l),u>b[1]?(o=b[0],u=b[1]):u===b[1]&&(o=p(o,b[0])),d<b[3]?(h=b[2],d=b[3]):d===b[3]&&(h=p(h,b[2]))),s=S,r=C}const y=this.#e;y[0]=l[0]-this.#n,y[1]=l[1]-this.#n,y[2]=l[2]-l[0]+2*this.#n,y[3]=l[3]-l[1]+2*this.#n,this.firstPoint=[o,u],this.lastPoint=[h,d]}get box(){return this.#e}newOutliner(t,i,s,r,l,o=0){return new os(t,i,s,r,l,o)}getNewOutline(t,i){const[s,r,l,o]=this.#e,[u,h,d,p]=this.#t,b=l*d,y=o*p,A=s*d+u,w=r*p+h,S=this.newOutliner({x:this.#r[0]*b+A,y:this.#r[1]*y+w},this.#t,this.#s,t,this.#i,i??this.#n);for(let C=2;C<this.#r.length;C+=2)S.add({x:this.#r[C]*b+A,y:this.#r[C+1]*y+w});return S.getOutlines()}}class Zu{#t;#e;#n;#i=[];#r=[];constructor(t,i=0,s=0,r=!0){const l=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:S,y:C,width:E,height:k}of t){const O=Math.floor((S-i)/o)*o,P=Math.ceil((S+E+i)/o)*o,I=Math.floor((C-i)/o)*o,F=Math.ceil((C+k+i)/o)*o,B=[O,I,F,!0],D=[P,I,F,!1];this.#i.push(B,D),ht.rectBoundingBox(O,I,P,F,l)}const u=l[2]-l[0]+2*s,h=l[3]-l[1]+2*s,d=l[0]-s,p=l[1]-s;let b=r?-1/0:1/0,y=1/0;const A=this.#i.at(r?-1:-2),w=[A[0],A[2]];for(const S of this.#i){const[C,E,k,O]=S;!O&&r?E<y?(y=E,b=C):E===y&&(b=Math.max(b,C)):O&&!r&&(E<y?(y=E,b=C):E===y&&(b=Math.min(b,C))),S[0]=(C-d)/u,S[1]=(E-p)/h,S[2]=(k-p)/h}this.#t=new Float32Array([d,p,u,h]),this.#e=[b,y],this.#n=w}getOutlines(){this.#i.sort((i,s)=>i[0]-s[0]||i[1]-s[1]||i[2]-s[2]);const t=[];for(const i of this.#i)i[3]?(t.push(...this.#o(i)),this.#l(i)):(this.#c(i),t.push(...this.#o(i)));return this.#s(t)}#s(t){const i=[],s=new Set;for(const o of t){const[u,h,d]=o;i.push([u,h,o],[u,d,o])}i.sort((o,u)=>o[1]-u[1]||o[0]-u[0]);for(let o=0,u=i.length;o<u;o+=2){const h=i[o][2],d=i[o+1][2];h.push(d),d.push(h),s.add(h),s.add(d)}const r=[];let l;for(;s.size>0;){const o=s.values().next().value;let[u,h,d,p,b]=o;s.delete(o);let y=u,A=h;for(l=[u,d],r.push(l);;){let w;if(s.has(p))w=p;else if(s.has(b))w=b;else break;s.delete(w),[u,h,d,p,b]=w,y!==u&&(l.push(y,A,u,A===h?h:d),y=u),A=A===h?d:h}l.push(y,A)}return new Cx(r,this.#t,this.#e,this.#n)}#a(t){const i=this.#r;let s=0,r=i.length-1;for(;s<=r;){const l=s+r>>1,o=i[l][0];if(o===t)return l;o<t?s=l+1:r=l-1}return r+1}#l([,t,i]){const s=this.#a(t);this.#r.splice(s,0,[t,i])}#c([,t,i]){const s=this.#a(t);for(let r=s;r<this.#r.length;r++){const[l,o]=this.#r[r];if(l!==t)break;if(l===t&&o===i){this.#r.splice(r,1);return}}for(let r=s-1;r>=0;r--){const[l,o]=this.#r[r];if(l!==t)break;if(l===t&&o===i){this.#r.splice(r,1);return}}}#o(t){const[i,s,r]=t,l=[[i,s,r]],o=this.#a(r);for(let u=0;u<o;u++){const[h,d]=this.#r[u];for(let p=0,b=l.length;p<b;p++){const[,y,A]=l[p];if(!(d<=y||A<=h)){if(y>=h){if(A>d)l[p][1]=d;else{if(b===1)return[];l.splice(p,1),p--,b--}continue}l[p][2]=h,A>d&&l.push([i,d,A])}}}return l}}class Cx extends ot{#t;#e;constructor(t,i,s,r){super(),this.#e=t,this.#t=i,this.firstPoint=s,this.lastPoint=r}toSVGPath(){const t=[];for(const i of this.#e){let[s,r]=i;t.push(`M${s} ${r}`);for(let l=2;l<i.length;l+=2){const o=i[l],u=i[l+1];o===s?(t.push(`V${u}`),r=u):u===r&&(t.push(`H${o}`),s=o)}t.push("Z")}return t.join(" ")}serialize([t,i,s,r],l){const o=[],u=s-t,h=r-i;for(const d of this.#e){const p=new Array(d.length);for(let b=0;b<d.length;b+=2)p[b]=t+d[b]*u,p[b+1]=r-d[b+1]*h;o.push(p)}return o}get box(){return this.#t}get classNamesForOutlining(){return["highlightOutline"]}}class Ju extends os{newFreeDrawOutline(t,i,s,r,l,o){return new Tx(t,i,s,r,l,o)}}class Tx extends Fm{newOutliner(t,i,s,r,l,o=0){return new Ju(t,i,s,r,l,o)}}class fe extends bt{#t=null;#e=0;#n;#i=null;#r=null;#s=null;#a=null;#l=0;#c=null;#o=null;#d=null;#h=!1;#f=null;#m=null;#g=null;#u="";#p;#b="";static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=12;static _type="highlight";static _editorType=_t.HIGHLIGHT;static _freeHighlightId=-1;static _freeHighlight=null;static _freeHighlightClipId="";static get _keyboardManager(){const t=fe.prototype;return Tt(this,"_keyboardManager",new _r([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}constructor(t){super({...t,name:"highlightEditor"}),this.color=t.color||fe._defaultColor,this.#p=t.thickness||fe._defaultThickness,this.opacity=t.opacity||fe._defaultOpacity,this.#n=t.boxes||null,this.#b=t.methodOfCreation||"",this.#u=t.text||"",this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(this.#h=!0,this.#y(t),this.#S()):this.#n&&(this.#t=t.anchorNode,this.#e=t.anchorOffset,this.#a=t.focusNode,this.#l=t.focusOffset,this.#v(),this.#S(),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:this.#h?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:this.#p,methodOfCreation:this.#b}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}#v(){const t=new Zu(this.#n,.001);this.#o=t.getOutlines(),[this.x,this.y,this.width,this.height]=this.#o.box;const i=new Zu(this.#n,.0025,.001,this._uiManager.direction==="ltr");this.#s=i.getOutlines();const{firstPoint:s}=this.#o;this.#f=[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height];const{lastPoint:r}=this.#s;this.#m=[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height]}#y({highlightOutlines:t,highlightId:i,clipPathId:s}){this.#o=t;const r=1.5;if(this.#s=t.getNewOutline(this.#p/2+r,.0025),i>=0)this.#d=i,this.#i=s,this.parent.drawLayer.finalizeDraw(i,{bbox:t.box,path:{d:t.toSVGPath()}}),this.#g=this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},!0);else if(this.parent){const b=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(this.#d,{bbox:fe.#_(this.#o.box,(b-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(this.#g,{bbox:fe.#_(this.#s.box,b),path:{d:this.#s.toSVGPath()}})}const[l,o,u,h]=t.box;switch(this.rotation){case 0:this.x=l,this.y=o,this.width=u,this.height=h;break;case 90:{const[b,y]=this.parentDimensions;this.x=o,this.y=1-l,this.width=u*y/b,this.height=h*b/y;break}case 180:this.x=1-l,this.y=1-o,this.width=u,this.height=h;break;case 270:{const[b,y]=this.parentDimensions;this.x=1-o,this.y=l,this.width=u*y/b,this.height=h*b/y;break}}const{firstPoint:d}=t;this.#f=[(d[0]-l)/u,(d[1]-o)/h];const{lastPoint:p}=this.#s;this.#m=[(p[0]-l)/u,(p[1]-o)/h]}static initialize(t,i){bt.initialize(t,i),fe._defaultColor||=i.highlightColors?.values().next().value||"#fff066"}static updateDefaultParams(t,i){switch(t){case jt.HIGHLIGHT_COLOR:fe._defaultColor=i;break;case jt.HIGHLIGHT_THICKNESS:fe._defaultThickness=i;break}}translateInPage(t,i){}get toolbarPosition(){return this.#m}get commentButtonPosition(){return this.#f}updateParams(t,i){switch(t){case jt.HIGHLIGHT_COLOR:this.#E(i);break;case jt.HIGHLIGHT_THICKNESS:this.#w(i);break}}static get defaultPropertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,fe._defaultColor],[jt.HIGHLIGHT_THICKNESS,fe._defaultThickness]]}get propertiesToUpdate(){return[[jt.HIGHLIGHT_COLOR,this.color||fe._defaultColor],[jt.HIGHLIGHT_THICKNESS,this.#p||fe._defaultThickness],[jt.HIGHLIGHT_FREE,this.#h]]}onUpdatedColor(){this.parent?.drawLayer.updateProperties(this.#d,{root:{fill:this.color,"fill-opacity":this.opacity}}),this.#r?.updateColor(this.color),super.onUpdatedColor()}#E(t){const i=(l,o)=>{this.color=l,this.opacity=o,this.onUpdatedColor()},s=this.color,r=this.opacity;this.addCommands({cmd:i.bind(this,t,fe._defaultOpacity),undo:i.bind(this,s,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)}#w(t){const i=this.#p,s=r=>{this.#p=r,this.#x(r)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:jt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",this.#r=new Ei({editor:this})]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(this.#N())}getBaseTranslation(){return[0,0]}getRect(t,i){return super.getRect(t,i,this.#N())}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){this.#T(),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#S(),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?this.#T():t&&(this.#S(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),this.show(this._isVisible),i&&this.select()}#x(t){this.#h&&(this.#y({highlightOutlines:this.#o.getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}#T(){this.#d===null||!this.parent||(this.parent.drawLayer.remove(this.#d),this.#d=null,this.parent.drawLayer.remove(this.#g),this.#g=null)}#S(t=this.parent){this.#d===null&&({id:this.#d,clipPathId:this.#i}=t.drawLayer.draw({bbox:this.#o.box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:this.#h},path:{d:this.#o.toSVGPath()}},!1,!0),this.#g=t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:this.#h},bbox:this.#s.box,path:{d:this.#s.toSVGPath()}},this.#h),this.#c&&(this.#c.style.clipPath=this.#i))}static#_([t,i,s,r],l){switch(l){case 90:return[1-i-r,t,r,s];case 180:return[1-t-s,1-i-r,s,r];case 270:return[i,1-t-s,r,s]}return[t,i,s,r]}rotate(t){const{drawLayer:i}=this.parent;let s;this.#h?(t=(t-this.rotation+360)%360,s=fe.#_(this.#o.box,t)):s=fe.#_([this.x,this.y,this.width,this.height],t),i.updateProperties(this.#d,{bbox:s,root:{"data-main-rotation":t}}),i.updateProperties(this.#g,{bbox:fe.#_(this.#s.box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();this.#u&&(t.setAttribute("aria-label",this.#u),t.setAttribute("role","mark")),this.#h?t.classList.add("free"):this.div.addEventListener("keydown",this.#M.bind(this),{signal:this._uiManager._signal});const i=this.#c=document.createElement("div");return t.append(i),i.setAttribute("aria-hidden","true"),i.className="internal",i.style.clipPath=this.#i,this.setDims(this.width,this.height),fm(this,this.#c,["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!0}})}pointerleave(){this.isSelected||this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1}})}#M(t){fe._keyboardManager.exec(this,t)}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:this.#D(!0);break;case 1:case 3:this.#D(!1);break}}#D(t){if(!this.#t)return;const i=window.getSelection();t?i.setPosition(this.#t,this.#e):i.setPosition(this.#a,this.#l)}select(){super.select(),this.#g&&this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{hovered:!1,selected:!0}})}unselect(){super.unselect(),this.#g&&(this.parent?.drawLayer.updateProperties(this.#g,{rootClass:{selected:!1}}),this.#h||this.#D(!1))}get _mustFixPosition(){return!this.#h}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(this.#d,{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(this.#g,{rootClass:{hidden:!t}}))}#N(){return this.#h?this.rotation:0}#P(){if(this.#h)return null;const[t,i]=this.pageDimensions,[s,r]=this.pageTranslation,l=this.#n,o=new Float32Array(l.length*8);let u=0;for(const{x:h,y:d,width:p,height:b}of l){const y=h*t+s,A=(1-d)*i+r;o[u]=o[u+4]=y,o[u+1]=o[u+3]=A,o[u+2]=o[u+6]=y+p*t,o[u+5]=o[u+7]=A-b*i,u+=8}return o}#O(t){return this.#o.serialize(t,this.#N())}static startHighlighting(t,i,{target:s,x:r,y:l}){const{x:o,y:u,width:h,height:d}=s.getBoundingClientRect(),p=new AbortController,b=t.combinedSignal(p),y=A=>{p.abort(),this.#F(t,A)};window.addEventListener("blur",y,{signal:b}),window.addEventListener("pointerup",y,{signal:b}),window.addEventListener("pointerdown",ce,{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",Ci,{signal:b}),s.addEventListener("pointermove",this.#L.bind(this,t),{signal:b}),this._freeHighlight=new Ju({x:r,y:l},[o,u,h,d],t.scale,this._defaultThickness/2,i,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static#L(t,i){this._freeHighlight.add(i)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}static#F(t,i){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(i,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}static async deserialize(t,i,s){let r=null;if(t instanceof Bm){const{data:{quadPoints:w,rect:S,rotation:C,id:E,color:k,opacity:O,popupRef:P,richText:I,contentsObj:F,creationDate:B,modificationDate:D},parent:{page:{pageNumber:N}}}=t;r=t={annotationType:_t.HIGHLIGHT,color:Array.from(k),opacity:O,quadPoints:w,boxes:null,pageIndex:N-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:P,richText:I,comment:F?.str||null,creationDate:B,modificationDate:D}}else if(t instanceof ph){const{data:{inkLists:w,rect:S,rotation:C,id:E,color:k,borderStyle:{rawWidth:O},popupRef:P,richText:I,contentsObj:F,creationDate:B,modificationDate:D},parent:{page:{pageNumber:N}}}=t;r=t={annotationType:_t.HIGHLIGHT,color:Array.from(k),thickness:O,inkLists:w,boxes:null,pageIndex:N-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,popupRef:P,richText:I,comment:F?.str||null,creationDate:B,modificationDate:D}}const{color:l,quadPoints:o,inkLists:u,opacity:h}=t,d=await super.deserialize(t,i,s);d.color=ht.makeHexColor(...l),d.opacity=h||1,u&&(d.#p=t.thickness),d._initialData=r,t.comment&&d.setCommentData(t);const[p,b]=d.pageDimensions,[y,A]=d.pageTranslation;if(o){const w=d.#n=[];for(let S=0;S<o.length;S+=8)w.push({x:(o[S]-y)/p,y:1-(o[S+1]-A)/b,width:(o[S+2]-o[S])/p,height:(o[S+1]-o[S+5])/b});d.#v(),d.#S(),d.rotate(d.rotation)}else if(u){d.#h=!0;const w=u[0],S={x:w[0]-y,y:b-(w[1]-A)},C=new Ju(S,[0,0,p,b],1,d.#p/2,!0,.001);for(let O=0,P=w.length;O<P;O+=2)S.x=w[O]-y,S.y=b-(w[O+1]-A),C.add(S);const{id:E,clipPathId:k}=i.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:d.color,"fill-opacity":d._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:C.toSVGPath()}},!0,!0);d.#y({highlightOutlines:C.getOutlines(),highlightId:E,clipPathId:k}),d.#S(),d.rotate(d.parentRotation)}return d}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const i=bt._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:i,opacity:this.opacity,thickness:this.#p,quadPoints:this.#P(),outlines:this.#O(s.rect)}),this.addComment(s),this.annotationElementId&&!this.#j(s)?null:(s.id=this.annotationElementId,s)}#j(t){const{color:i}=this._initialData;return this.hasEditedComment||t.color.some((s,r)=>s!==i[r])}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}class zm{#t=Object.create(null);updateProperty(t,i){this[t]=i,this.updateSVGProperty(t,i)}updateProperties(t){if(t)for(const[i,s]of Object.entries(t))i.startsWith("_")||this.updateProperty(i,s)}updateSVGProperty(t,i){this.#t[t]=i}toSVGProperties(){const t=this.#t;return this.#t=Object.create(null),{root:t}}reset(){this.#t=Object.create(null)}updateAll(t=this){this.updateProperties(t)}clone(){Jt("Not implemented")}}class xt extends bt{#t=null;#e;_colorPicker=null;_drawId=null;static _currentDrawId=-1;static _currentParent=null;static#n=null;static#i=null;static#r=null;static#s=NaN;static#a=null;static#l=null;static#c=NaN;static _INNER_MARGIN=3;constructor(t){super(t),this.#e=t.mustBeCommitted||!1,this._addOutlines(t)}onUpdatedColor(){this._colorPicker?.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(this.#o(t),this.#f())}#o({drawOutlines:t,drawId:i,drawingOptions:s}){this.#t=t,this._drawingOptions||=s,this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),i>=0?(this._drawId=i,this.parent.drawLayer.finalizeDraw(i,t.defaultProperties)):this._drawId=this.#d(t,this.parent),this.#u(t.box)}#d(t,i){const{id:s}=i.drawLayer.draw(xt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s}static _mergeSVGProperties(t,i){const s=new Set(Object.keys(t));for(const[r,l]of Object.entries(i))s.has(r)?Object.assign(t[r],l):t[r]=l;return t}static getDefaultDrawingOptions(t){Jt("Not implemented")}static get typesMap(){Jt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,i){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,i),this._currentParent&&(xt.#n.updateProperty(s,i),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,i){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,i)}static get defaultPropertiesToUpdate(){const t=[],i=this._defaultDrawingOptions;for(const[s,r]of this.typesMap)t.push([s,i[r]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:i}=this;for(const[s,r]of this.constructor.typesMap)t.push([s,i[r]]);return t}_updateProperty(t,i,s){const r=this._drawingOptions,l=r[i],o=u=>{r.updateProperty(i,u);const h=this.#t.updateProperty(i,u);h&&this.#u(h),this.parent?.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:o.bind(this,s),undo:o.bind(this,l),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){this.parent?.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(this.#t.getPathResizingSVGProperties(this.#g()),{bbox:this.#p()}))}_onResized(){this.parent?.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(this.#t.getPathResizedSVGProperties(this.#g()),{bbox:this.#p()}))}_onTranslating(t,i){this.parent?.drawLayer.updateProperties(this._drawId,{bbox:this.#p()})}_onTranslated(){this.parent?.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties(this.#t.getPathTranslatedSVGProperties(this.#g(),this.parentDimensions),{bbox:this.#p()}))}_onStartDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){this.parent?.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,this.#e&&(this.#e=!1,this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){this.#h(),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.#f(),this.#u(this.#t.box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){let i=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),this.#h()):t&&(this._uiManager.addShouldRescale(this),this.#f(t),i=!this.parent&&this.div?.classList.contains("selectedEditor")),super.setParent(t),i&&this.select()}#h(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}#f(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=this.#d(this.#t,t)}}#m([t,i,s,r]){const{parentDimensions:[l,o],rotation:u}=this;switch(u){case 90:return[i,1-t,s*(o/l),r*(l/o)];case 180:return[1-t,1-i,s,r];case 270:return[1-i,t,s*(o/l),r*(l/o)];default:return[t,i,s,r]}}#g(){const{x:t,y:i,width:s,height:r,parentDimensions:[l,o],rotation:u}=this;switch(u){case 90:return[1-i,t,s*(l/o),r*(o/l)];case 180:return[1-t,1-i,s,r];case 270:return[i,1-t,s*(l/o),r*(o/l)];default:return[t,i,s,r]}}#u(t){[this.x,this.y,this.width,this.height]=this.#m(t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}#p(){const{x:t,y:i,width:s,height:r,rotation:l,parentRotation:o,parentDimensions:[u,h]}=this;switch((l*4+o)/90){case 1:return[1-i-r,t,r,s];case 2:return[1-t-s,1-i-r,s,r];case 3:return[i,1-t-s,r,s];case 4:return[t,i-s*(u/h),r*(h/u),s*(u/h)];case 5:return[1-i,t,s*(u/h),r*(h/u)];case 6:return[1-t-r*(h/u),1-i,r*(h/u),s*(u/h)];case 7:return[i-s*(u/h),1-t-r*(h/u),s*(u/h),r*(h/u)];case 8:return[t-s,i-r,s,r];case 9:return[1-i,t-s,r,s];case 10:return[1-t,1-i,s,r];case 11:return[i-r,1-t,r,s];case 12:return[t-r*(h/u),i,r*(h/u),s*(u/h)];case 13:return[1-i-s*(u/h),t-r*(h/u),s*(u/h),r*(h/u)];case 14:return[1-t,1-i-s*(u/h),r*(h/u),s*(u/h)];case 15:return[i,1-t,s*(u/h),r*(h/u)];default:return[t,i,s,r]}}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,xt._mergeSVGProperties({bbox:this.#p()},this.#t.updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&this.#u(this.#t.updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,i;this._isCopy&&(t=this.x,i=this.y);const s=super.render();s.classList.add("draw");const r=document.createElement("div");return s.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,i),s}static createDrawerInstance(t,i,s,r,l){Jt("Not implemented")}static startDrawing(t,i,s,r){const{target:l,offsetX:o,offsetY:u,pointerId:h,pointerType:d}=r;if(xt.#a&&xt.#a!==d)return;const{viewport:{rotation:p}}=t,{width:b,height:y}=l.getBoundingClientRect(),A=xt.#i=new AbortController,w=t.combinedSignal(A);if(xt.#s||=h,xt.#a??=d,window.addEventListener("pointerup",S=>{xt.#s===S.pointerId?this._endDraw(S):xt.#l?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointercancel",S=>{xt.#s===S.pointerId?this._currentParent.endDrawingSession():xt.#l?.delete(S.pointerId)},{signal:w}),window.addEventListener("pointerdown",S=>{xt.#a===S.pointerType&&((xt.#l||=new Set).add(S.pointerId),xt.#n.isCancellable()&&(xt.#n.removeLastElement(),xt.#n.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:w}),window.addEventListener("contextmenu",Ci,{signal:w}),l.addEventListener("pointermove",this._drawMove.bind(this),{signal:w}),l.addEventListener("touchmove",S=>{S.timeStamp===xt.#c&&ce(S)},{signal:w}),t.toggleDrawing(),i._editorUndoBar?.hide(),xt.#n){t.drawLayer.updateProperties(this._currentDrawId,xt.#n.startNew(o,u,b,y,p));return}i.updateUIForDefaultProperties(this),xt.#n=this.createDrawerInstance(o,u,b,y,p),xt.#r=this.getDefaultDrawingOptions(),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(xt.#r.toSVGProperties(),xt.#n.defaultSVGProperties),!0,!1)}static _drawMove(t){if(xt.#c=-1,!xt.#n)return;const{offsetX:i,offsetY:s,pointerId:r}=t;if(xt.#s===r){if(xt.#l?.size>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,xt.#n.add(i,s)),xt.#c=t.timeStamp,ce(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,xt.#n=null,xt.#r=null,xt.#a=null,xt.#c=NaN),xt.#i&&(xt.#i.abort(),xt.#i=null,xt.#s=NaN,xt.#l=null)}static _endDraw(t){const i=this._currentParent;if(i){if(i.toggleDrawing(!0),this._cleanup(!1),t?.target===i.div&&i.drawLayer.updateProperties(this._currentDrawId,xt.#n.end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=xt.#n,r=this._currentDrawId,l=s.getLastElement();i.addCommands({cmd:()=>{i.drawLayer.updateProperties(r,s.setLastElement(l))},undo:()=>{i.drawLayer.updateProperties(r,s.removeLastElement())},mustExec:!1,type:jt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const i=this._currentParent;if(!i)return null;if(i.toggleDrawing(!0),i.cleanUndoStack(jt.DRAW_STEP),!xt.#n.isEmpty()){const{pageDimensions:[s,r],scale:l}=i,o=i.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:xt.#n.getOutlines(s*l,r*l,l,this._INNER_MARGIN),drawingOptions:xt.#r,mustBeCommitted:!t});return this._cleanup(!0),o}return i.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,i,s,r,l,o){Jt("Not implemented")}static async deserialize(t,i,s){const{rawDims:{pageWidth:r,pageHeight:l,pageX:o,pageY:u}}=i.viewport,h=this.deserializeDraw(o,u,r,l,this._INNER_MARGIN,t),d=await super.deserialize(t,i,s);return d.createDrawingOptions(t),d.#o({drawOutlines:h}),d.#f(),d.onScaleChanging(),d.rotate(),d}serializeDraw(t){const[i,s]=this.pageTranslation,[r,l]=this.pageDimensions;return this.#t.serialize([i,s,r,l],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}class Dx{#t=new Float64Array(6);#e;#n;#i;#r;#s;#a="";#l=0;#c=new Cr;#o;#d;constructor(t,i,s,r,l,o){this.#o=s,this.#d=r,this.#i=l,this.#r=o,[t,i]=this.#h(t,i);const u=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i],this.#n=[{line:u,points:this.#s}],this.#t.set(u,0)}updateProperty(t,i){t==="stroke-width"&&(this.#r=i)}#h(t,i){return ot._normalizePoint(t,i,this.#o,this.#d,this.#i)}isEmpty(){return!this.#n||this.#n.length===0}isCancellable(){return this.#s.length<=10}add(t,i){[t,i]=this.#h(t,i);const[s,r,l,o]=this.#t.subarray(2,6),u=t-l,h=i-o;return Math.hypot(this.#o*u,this.#d*h)<=2?null:(this.#s.push(t,i),isNaN(s)?(this.#t.set([l,o,t,i],2),this.#e.push(NaN,NaN,NaN,NaN,t,i),{path:{d:this.toSVGPath()}}):(isNaN(this.#t[0])&&this.#e.splice(6,6),this.#t.set([s,r,l,o,t,i],0),this.#e.push(...ot.createBezierPoints(s,r,l,o,t,i)),{path:{d:this.toSVGPath()}}))}end(t,i){const s=this.add(t,i);return s||(this.#s.length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,i,s,r,l){this.#o=s,this.#d=r,this.#i=l,[t,i]=this.#h(t,i);const o=this.#e=[NaN,NaN,NaN,NaN,t,i];this.#s=[t,i];const u=this.#n.at(-1);return u&&(u.line=new Float32Array(u.line),u.points=new Float32Array(u.points)),this.#n.push({line:o,points:this.#s}),this.#t.set(o,0),this.#l=0,this.toSVGPath(),null}getLastElement(){return this.#n.at(-1)}setLastElement(t){return this.#n?(this.#n.push(t),this.#e=t.line,this.#s=t.points,this.#l=0,{path:{d:this.toSVGPath()}}):this.#c.setLastElement(t)}removeLastElement(){if(!this.#n)return this.#c.removeLastElement();this.#n.pop(),this.#a="";for(let t=0,i=this.#n.length;t<i;t++){const{line:s,points:r}=this.#n[t];this.#e=s,this.#s=r,this.#l=0,this.toSVGPath()}return{path:{d:this.#a}}}toSVGPath(){const t=ot.svgRound(this.#e[4]),i=ot.svgRound(this.#e[5]);if(this.#s.length===2)return this.#a=`${this.#a} M ${t} ${i} Z`,this.#a;if(this.#s.length<=6){const r=this.#a.lastIndexOf("M");this.#a=`${this.#a.slice(0,r)} M ${t} ${i}`,this.#l=6}if(this.#s.length===4){const r=ot.svgRound(this.#e[10]),l=ot.svgRound(this.#e[11]);return this.#a=`${this.#a} L ${r} ${l}`,this.#l=12,this.#a}const s=[];this.#l===0&&(s.push(`M ${t} ${i}`),this.#l=6);for(let r=this.#l,l=this.#e.length;r<l;r+=6){const[o,u,h,d,p,b]=this.#e.slice(r,r+6).map(ot.svgRound);s.push(`C${o} ${u} ${h} ${d} ${p} ${b}`)}return this.#a+=s.join(" "),this.#l=this.#e.length,this.#a}getOutlines(t,i,s,r){const l=this.#n.at(-1);return l.line=new Float32Array(l.line),l.points=new Float32Array(l.points),this.#c.build(this.#n,t,i,s,this.#i,this.#r,r),this.#t=null,this.#e=null,this.#n=null,this.#a=null,this.#c}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}class Cr extends ot{#t;#e=0;#n;#i;#r;#s;#a;#l;#c;build(t,i,s,r,l,o,u){this.#r=i,this.#s=s,this.#a=r,this.#l=l,this.#c=o,this.#n=u??0,this.#i=t,this.#h()}get thickness(){return this.#c}setLastElement(t){return this.#i.push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return this.#i.pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:i}of this.#i){if(t.push(`M${ot.svgRound(i[4])} ${ot.svgRound(i[5])}`),i.length===6){t.push("Z");continue}if(i.length===12&&isNaN(i[6])){t.push(`L${ot.svgRound(i[10])} ${ot.svgRound(i[11])}`);continue}for(let s=6,r=i.length;s<r;s+=6){const[l,o,u,h,d,p]=i.subarray(s,s+6).map(ot.svgRound);t.push(`C${l} ${o} ${u} ${h} ${d} ${p}`)}}return t.join("")}serialize([t,i,s,r],l){const o=[],u=[],[h,d,p,b]=this.#d();let y,A,w,S,C,E,k,O,P;switch(this.#l){case 0:P=ot._rescale,y=t,A=i+r,w=s,S=-r,C=t+h*s,E=i+(1-d-b)*r,k=t+(h+p)*s,O=i+(1-d)*r;break;case 90:P=ot._rescaleAndSwap,y=t,A=i,w=s,S=r,C=t+d*s,E=i+h*r,k=t+(d+b)*s,O=i+(h+p)*r;break;case 180:P=ot._rescale,y=t+s,A=i,w=-s,S=r,C=t+(1-h-p)*s,E=i+d*r,k=t+(1-h)*s,O=i+(d+b)*r;break;case 270:P=ot._rescaleAndSwap,y=t+s,A=i+r,w=-s,S=-r,C=t+(1-d-b)*s,E=i+(1-h-p)*r,k=t+(1-d)*s,O=i+(1-h)*r;break}for(const{line:I,points:F}of this.#i)o.push(P(I,y,A,w,S,l?new Array(I.length):null)),u.push(P(F,y,A,w,S,l?new Array(F.length):null));return{lines:o,points:u,rect:[C,E,k,O]}}static deserialize(t,i,s,r,l,{paths:{lines:o,points:u},rotation:h,thickness:d}){const p=[];let b,y,A,w,S;switch(h){case 0:S=ot._rescale,b=-t/s,y=i/r+1,A=1/s,w=-1/r;break;case 90:S=ot._rescaleAndSwap,b=-i/r,y=-t/s,A=1/r,w=1/s;break;case 180:S=ot._rescale,b=t/s+1,y=-i/r,A=-1/s,w=1/r;break;case 270:S=ot._rescaleAndSwap,b=i/r+1,y=t/s+1,A=-1/r,w=-1/s;break}if(!o){o=[];for(const E of u){const k=E.length;if(k===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1]]));continue}if(k===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,E[0],E[1],NaN,NaN,NaN,NaN,E[2],E[3]]));continue}const O=new Float32Array(3*(k-2));o.push(O);let[P,I,F,B]=E.subarray(0,4);O.set([NaN,NaN,NaN,NaN,P,I],0);for(let D=4;D<k;D+=2){const N=E[D],U=E[D+1];O.set(ot.createBezierPoints(P,I,F,B,N,U),(D-2)*3),[P,I,F,B]=[F,B,N,U]}}}for(let E=0,k=o.length;E<k;E++)p.push({line:S(o[E].map(O=>O??NaN),b,y,A,w),points:S(u[E].map(O=>O??NaN),b,y,A,w)});const C=new this.prototype.constructor;return C.build(p,s,r,1,h,d,l),C}#o(t=this.#c){const i=this.#n+t/2*this.#a;return this.#l%180===0?[i/this.#r,i/this.#s]:[i/this.#s,i/this.#r]}#d(){const[t,i,s,r]=this.#t,[l,o]=this.#o(0);return[t+l,i+o,s-2*l,r-2*o]}#h(){const t=this.#t=new Float32Array([1/0,1/0,-1/0,-1/0]);for(const{line:r}of this.#i){if(r.length<=12){for(let u=4,h=r.length;u<h;u+=6)ht.pointBoundingBox(r[u],r[u+1],t);continue}let l=r[4],o=r[5];for(let u=6,h=r.length;u<h;u+=6){const[d,p,b,y,A,w]=r.subarray(u,u+6);ht.bezierBoundingBox(l,o,d,p,b,y,A,w,t),l=A,o=w}}const[i,s]=this.#o();t[0]=ze(t[0]-i,0,1),t[1]=ze(t[1]-s,0,1),t[2]=ze(t[2]+i,0,1),t[3]=ze(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]}get box(){return this.#t}updateProperty(t,i){return t==="stroke-width"?this.#f(i):null}#f(t){const[i,s]=this.#o();this.#c=t;const[r,l]=this.#o(),[o,u]=[r-i,l-s],h=this.#t;return h[0]-=o,h[1]-=u,h[2]+=2*o,h[3]+=2*u,h}updateParentDimensions([t,i],s){const[r,l]=this.#o();this.#r=t,this.#s=i,this.#a=s;const[o,u]=this.#o(),h=o-r,d=u-l,p=this.#t;return p[0]-=h,p[1]-=d,p[2]+=2*h,p[3]+=2*d,p}updateRotation(t){return this.#e=t,{path:{transform:this.rotationTransform}}}get viewBox(){return this.#t.map(ot.svgRound).join(" ")}get defaultProperties(){const[t,i]=this.#t;return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(i)}`}}}get rotationTransform(){const[,,t,i]=this.#t;let s=0,r=0,l=0,o=0,u=0,h=0;switch(this.#e){case 90:r=i/t,l=-t/i,u=t;break;case 180:s=-1,o=-1,u=t,h=i;break;case 270:r=-i/t,l=t/i,h=i;break;default:return""}return`matrix(${s} ${r} ${l} ${o} ${ot.svgRound(u)} ${ot.svgRound(h)})`}getPathResizingSVGProperties([t,i,s,r]){const[l,o]=this.#o(),[u,h,d,p]=this.#t;if(Math.abs(d-l)<=ot.PRECISION||Math.abs(p-o)<=ot.PRECISION){const S=t+s/2-(u+d/2),C=i+r/2-(h+p/2);return{path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(i)}`,transform:`${this.rotationTransform} translate(${S} ${C})`}}}const b=(s-2*l)/(d-2*l),y=(r-2*o)/(p-2*o),A=d/s,w=p/r;return{path:{"transform-origin":`${ot.svgRound(u)} ${ot.svgRound(h)}`,transform:`${this.rotationTransform} scale(${A} ${w}) translate(${ot.svgRound(l)} ${ot.svgRound(o)}) scale(${b} ${y}) translate(${ot.svgRound(-l)} ${ot.svgRound(-o)})`}}}getPathResizedSVGProperties([t,i,s,r]){const[l,o]=this.#o(),u=this.#t,[h,d,p,b]=u;if(u[0]=t,u[1]=i,u[2]=s,u[3]=r,Math.abs(p-l)<=ot.PRECISION||Math.abs(b-o)<=ot.PRECISION){const C=t+s/2-(h+p/2),E=i+r/2-(d+b/2);for(const{line:k,points:O}of this.#i)ot._translate(k,C,E,k),ot._translate(O,C,E,O);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const y=(s-2*l)/(p-2*l),A=(r-2*o)/(b-2*o),w=-y*(h+l)+t+l,S=-A*(d+o)+i+o;if(y!==1||A!==1||w!==0||S!==0)for(const{line:C,points:E}of this.#i)ot._rescale(C,w,S,y,A,C),ot._rescale(E,w,S,y,A,E);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(i)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,i],s){const[r,l]=s,o=this.#t,u=t-o[0],h=i-o[1];if(this.#r===r&&this.#s===l)for(const{line:d,points:p}of this.#i)ot._translate(d,u,h,d),ot._translate(p,u,h,p);else{const d=this.#r/r,p=this.#s/l;this.#r=r,this.#s=l;for(const{line:b,points:y}of this.#i)ot._rescale(b,u,h,d,p,b),ot._rescale(y,u,h,d,p,y);o[2]*=d,o[3]*=p}return o[0]=t,o[1]=i,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(t)} ${ot.svgRound(i)}`}}}get defaultSVGProperties(){const t=this.#t;return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ot.svgRound(t[0])} ${ot.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}class go extends zm{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:bt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,i){t==="stroke-width"&&(i??=this["stroke-width"],i*=this._viewParameters.realScale),super.updateSVGProperty(t,i)}clone(){const t=new go(this._viewParameters);return t.updateAll(this),t}}class bh extends xt{static _type="ink";static _editorType=_t.INK;static _defaultDrawingOptions=null;constructor(t){super({...t,name:"inkEditor"}),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,i){bt.initialize(t,i),this._defaultDrawingOptions=new go(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!0}static get typesMap(){return Tt(this,"typesMap",new Map([[jt.INK_THICKNESS,"stroke-width"],[jt.INK_COLOR,"stroke"],[jt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,i,s,r,l){return new Dx(t,i,s,r,l,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,i,s,r,l,o){return Cr.deserialize(t,i,s,r,l,o)}static async deserialize(t,i,s){let r=null;if(t instanceof ph){const{data:{inkLists:o,rect:u,rotation:h,id:d,color:p,opacity:b,borderStyle:{rawWidth:y},popupRef:A,richText:w,contentsObj:S,creationDate:C,modificationDate:E},parent:{page:{pageNumber:k}}}=t;r=t={annotationType:_t.INK,color:Array.from(p),thickness:y,opacity:b,paths:{points:o},boxes:null,pageIndex:k-1,rect:u.slice(0),rotation:h,annotationElementId:d,id:d,deleted:!1,popupRef:A,richText:w,comment:S?.str||null,creationDate:C,modificationDate:E}}const l=await super.deserialize(t,i,s);return l._initialData=r,t.comment&&l.setCommentData(t),l}get toolbarButtons(){return this._colorPicker||=new vr(this),[["colorPicker",this._colorPicker]]}get colorType(){return jt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:i,parent:s}=this;i.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,i.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:i,opacity:s}){this._drawingOptions=bh.getDefaultDrawingOptions({stroke:ht.makeHexColor(...t),"stroke-width":i,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:r,"stroke-opacity":l,"stroke-width":o}}=this,u=Object.assign(super.serialize(t),{color:bt._colorManager.convert(r),opacity:l,thickness:o,paths:{lines:i,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!this.#t(u)?null:(u.id=this.annotationElementId,u)}#t(t){const{color:i,thickness:s,opacity:r,pageIndex:l}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((o,u)=>o!==i[u])||t.thickness!==s||t.opacity!==r||t.pageIndex!==l}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:i,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:i,popup:this.comment}),null}}class th extends Cr{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Zl=8,ur=3;class na{static#t={maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16};static#e(t,i,s,r){return s-=t,r-=i,s===0?r>0?0:4:s===1?r+6:2-r}static#n=new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]);static#i(t,i,s,r,l,o,u){const h=this.#e(s,r,l,o);for(let d=0;d<8;d++){const p=(-d+h-u+16)%8,b=this.#n[2*p],y=this.#n[2*p+1];if(t[(s+b)*i+(r+y)]!==0)return p}return-1}static#r(t,i,s,r,l,o,u){const h=this.#e(s,r,l,o);for(let d=0;d<8;d++){const p=(d+h+u+16)%8,b=this.#n[2*p],y=this.#n[2*p+1];if(t[(s+b)*i+(r+y)]!==0)return p}return-1}static#s(t,i,s,r){const l=t.length,o=new Int32Array(l);for(let p=0;p<l;p++)o[p]=t[p]<=r?1:0;for(let p=1;p<s-1;p++)o[p*i]=o[p*i+i-1]=0;for(let p=0;p<i;p++)o[p]=o[i*s-1-p]=0;let u=1,h;const d=[];for(let p=1;p<s-1;p++){h=1;for(let b=1;b<i-1;b++){const y=p*i+b,A=o[y];if(A===0)continue;let w=p,S=b;if(A===1&&o[y-1]===0)u+=1,S-=1;else if(A>=1&&o[y+1]===0)u+=1,S+=1,A>1&&(h=A);else{A!==1&&(h=Math.abs(A));continue}const C=[b,p],E=S===b+1,k={isHole:E,points:C,id:u,parent:0};d.push(k);let O;for(const $ of d)if($.id===h){O=$;break}O?O.isHole?k.parent=E?O.parent:h:k.parent=E?h:O.parent:k.parent=E?h:0;const P=this.#i(o,i,p,b,w,S,0);if(P===-1){o[y]=-u,o[y]!==1&&(h=Math.abs(o[y]));continue}let I=this.#n[2*P],F=this.#n[2*P+1];const B=p+I,D=b+F;w=B,S=D;let N=p,U=b;for(;;){const $=this.#r(o,i,N,U,w,S,1);I=this.#n[2*$],F=this.#n[2*$+1];const tt=N+I,st=U+F;C.push(st,tt);const rt=N*i+U;if(o[rt+1]===0?o[rt]=-u:o[rt]===1&&(o[rt]=u),tt===p&&st===b&&N===B&&U===D){o[y]!==1&&(h=Math.abs(o[y]));break}else w=N,S=U,N=tt,U=st}}}return d}static#a(t,i,s,r){if(s-i<=4){for(let B=i;B<s-2;B+=2)r.push(t[B],t[B+1]);return}const l=t[i],o=t[i+1],u=t[s-4]-l,h=t[s-3]-o,d=Math.hypot(u,h),p=u/d,b=h/d,y=p*o-b*l,A=h/u,w=1/d,S=Math.atan(A),C=Math.cos(S),E=Math.sin(S),k=w*(Math.abs(C)+Math.abs(E)),O=w*(1-k+k**2),P=Math.max(Math.atan(Math.abs(E+C)*O),Math.atan(Math.abs(E-C)*O));let I=0,F=i;for(let B=i+2;B<s-2;B+=2){const D=Math.abs(y-p*t[B+1]+b*t[B]);D>I&&(F=B,I=D)}I>(d*P)**2?(this.#a(t,i,F+2,r),this.#a(t,F,s,r)):r.push(l,o)}static#l(t){const i=[],s=t.length;return this.#a(t,0,s,i),i.push(t[s-2],t[s-1]),i.length<=4?null:i}static#c(t,i,s,r,l,o){const u=new Float32Array(o**2),h=-2*r**2,d=o>>1;for(let S=0;S<o;S++){const C=(S-d)**2;for(let E=0;E<o;E++)u[S*o+E]=Math.exp((C+(E-d)**2)/h)}const p=new Float32Array(256),b=-2*l**2;for(let S=0;S<256;S++)p[S]=Math.exp(S**2/b);const y=t.length,A=new Uint8Array(y),w=new Uint32Array(256);for(let S=0;S<s;S++)for(let C=0;C<i;C++){const E=S*i+C,k=t[E];let O=0,P=0;for(let F=0;F<o;F++){const B=S+F-d;if(!(B<0||B>=s))for(let D=0;D<o;D++){const N=C+D-d;if(N<0||N>=i)continue;const U=t[B*i+N],$=u[F*o+D]*p[Math.abs(U-k)];O+=U*$,P+=$}}const I=A[E]=Math.round(O/P);w[I]++}return[A,w]}static#o(t){const i=new Uint32Array(256);for(const s of t)i[s]++;return i}static#d(t){const i=t.length,s=new Uint8ClampedArray(i>>2);let r=-1/0,l=1/0;for(let u=0,h=s.length;u<h;u++){const d=s[u]=t[u<<2];r=Math.max(r,d),l=Math.min(l,d)}const o=255/(r-l);for(let u=0,h=s.length;u<h;u++)s[u]=(s[u]-l)*o;return s}static#h(t){let i,s=-1/0,r=-1/0;const l=t.findIndex(h=>h!==0);let o=l,u=l;for(i=l;i<256;i++){const h=t[i];h>s&&(i-o>r&&(r=i-o,u=i-1),s=h,o=i)}for(i=u-1;i>=0&&!(t[i]>t[i+1]);i--);return i}static#f(t){const i=t,{width:s,height:r}=t,{maxDim:l}=this.#t;let o=s,u=r;if(s>l||r>l){let y=s,A=r,w=Math.log2(Math.max(s,r)/l);const S=Math.floor(w);w=w===S?S-1:S;for(let E=0;E<w;E++){o=Math.ceil(y/2),u=Math.ceil(A/2);const k=new OffscreenCanvas(o,u);k.getContext("2d").drawImage(t,0,0,y,A,0,0,o,u),y=o,A=u,t!==i&&t.close(),t=k.transferToImageBitmap()}const C=Math.min(l/o,l/u);o=Math.round(o*C),u=Math.round(u*C)}const d=new OffscreenCanvas(o,u).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,u),d.filter="grayscale(1)",d.drawImage(t,0,0,t.width,t.height,0,0,o,u);const p=d.getImageData(0,0,o,u).data;return[this.#d(p),o,u]}static extractContoursFromText(t,{fontFamily:i,fontStyle:s,fontWeight:r},l,o,u,h){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const b=200,y=p.font=`${s} ${r} ${b}px ${i}`,{actualBoundingBoxLeft:A,actualBoundingBoxRight:w,actualBoundingBoxAscent:S,actualBoundingBoxDescent:C,fontBoundingBoxAscent:E,fontBoundingBoxDescent:k,width:O}=p.measureText(t),P=1.5,I=Math.ceil(Math.max(Math.abs(A)+Math.abs(w)||0,O)*P),F=Math.ceil(Math.max(Math.abs(S)+Math.abs(C)||b,Math.abs(E)+Math.abs(k)||b)*P);d=new OffscreenCanvas(I,F),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=y,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,I,F),p.fillStyle="black",p.fillText(t,I*(P-1)/2,F*(3-P)/2);const B=this.#d(p.getImageData(0,0,I,F).data),D=this.#o(B),N=this.#h(D),U=this.#s(B,I,F,N);return this.processDrawnLines({lines:{curves:U,width:I,height:F},pageWidth:l,pageHeight:o,rotation:u,innerMargin:h,mustSmooth:!0,areContours:!0})}static process(t,i,s,r,l){const[o,u,h]=this.#f(t),[d,p]=this.#c(o,u,h,Math.hypot(u,h)*this.#t.sigmaSFactor,this.#t.sigmaR,this.#t.kernelSize),b=this.#h(p),y=this.#s(d,u,h,b);return this.processDrawnLines({lines:{curves:y,width:u,height:h},pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:l,mustSmooth:o,areContours:u}){r%180!==0&&([i,s]=[s,i]);const{curves:h,width:d,height:p}=t,b=t.thickness??0,y=[],A=Math.min(i/d,s/p),w=A/i,S=A/s,C=[];for(const{points:k}of h){const O=o?this.#l(k):k;if(!O)continue;C.push(O);const P=O.length,I=new Float32Array(P),F=new Float32Array(3*(P===2?2:P-2));if(y.push({line:F,points:I}),P===2){I[0]=O[0]*w,I[1]=O[1]*S,F.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[B,D,N,U]=O;B*=w,D*=S,N*=w,U*=S,I.set([B,D,N,U],0),F.set([NaN,NaN,NaN,NaN,B,D],0);for(let $=4;$<P;$+=2){const tt=I[$]=O[$]*w,st=I[$+1]=O[$+1]*S;F.set(ot.createBezierPoints(B,D,N,U,tt,st),($-2)*3),[B,D,N,U]=[N,U,tt,st]}}if(y.length===0)return null;const E=u?new th:new Cr;return E.build(y,i,s,1,r,u?0:b,l),{outline:E,newCurves:C,areContours:u,thickness:b,width:d,height:p}}static async compressSignature({outlines:t,areContours:i,thickness:s,width:r,height:l}){let o=1/0,u=-1/0,h=0;for(const O of t){h+=O.length;for(let P=2,I=O.length;P<I;P++){const F=O[P]-O[P-2];o=Math.min(o,F),u=Math.max(u,F)}}let d;o>=-128&&u<=127?d=Int8Array:o>=-32768&&u<=32767?d=Int16Array:d=Int32Array;const p=t.length,b=Zl+ur*p,y=new Uint32Array(b);let A=0;y[A++]=b*Uint32Array.BYTES_PER_ELEMENT+(h-2*p)*d.BYTES_PER_ELEMENT,y[A++]=0,y[A++]=r,y[A++]=l,y[A++]=i?0:1,y[A++]=Math.max(0,Math.floor(s??0)),y[A++]=p,y[A++]=d.BYTES_PER_ELEMENT;for(const O of t)y[A++]=O.length-2,y[A++]=O[0],y[A++]=O[1];const w=new CompressionStream("deflate-raw"),S=w.writable.getWriter();await S.ready,S.write(y);const C=d.prototype.constructor;for(const O of t){const P=new C(O.length-2);for(let I=2,F=O.length;I<F;I++)P[I-2]=O[I]-O[I-2];S.write(P)}S.close();const E=await new Response(w.readable).arrayBuffer(),k=new Uint8Array(E);return um(k)}static async decompressSignature(t){try{const i=Vy(t),{readable:s,writable:r}=new DecompressionStream("deflate-raw"),l=r.getWriter();await l.ready,l.write(i).then(async()=>{await l.ready,await l.close()}).catch(()=>{});let o=null,u=0;for await(const O of s)o||=new Uint8Array(new Uint32Array(O.buffer,0,4)[0]),o.set(O,u),u+=O.length;const h=new Uint32Array(o.buffer,0,o.length>>2),d=h[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=h[2],b=h[3],y=h[4]===0,A=h[5],w=h[6],S=h[7],C=[],E=(Zl+ur*w)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(S){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(o.buffer,E);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(o.buffer,E);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(o.buffer,E);break}u=0;for(let O=0;O<w;O++){const P=h[ur*O+Zl],I=new Float32Array(P+2);C.push(I);for(let F=0;F<ur-1;F++)I[F]=h[ur*O+Zl+F+1];for(let F=0;F<P;F++)I[F+2]=I[F]+k[u++]}return{areContours:y,thickness:A,outlines:C,width:p,height:b}}catch(i){return St(`decompressSignature: ${i}`),null}}}class yh extends zm{constructor(){super(),super.updateProperties({fill:bt._defaultLineColor,"stroke-width":0})}clone(){const t=new yh;return t.updateAll(this),t}}class vh extends go{constructor(t){super(t),super.updateProperties({stroke:bt._defaultLineColor,"stroke-width":1})}clone(){const t=new vh(this._viewParameters);return t.updateAll(this),t}}class Hi extends xt{#t=!1;#e=null;#n=null;#i=null;static _type="signature";static _editorType=_t.SIGNATURE;static _defaultDrawingOptions=null;constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"}),this._willKeepAspectRatio=!0,this.#n=t.signatureData||null,this.#e=null,this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,i){bt.initialize(t,i),this._defaultDrawingOptions=new yh,this._defaultDrawnSignatureOptions=new vh(i.viewParameters)}static getDefaultDrawingOptions(t){const i=this._defaultDrawingOptions.clone();return i.updateProperties(t),i}static get supportMultipleDrawings(){return!1}static get typesMap(){return Tt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!this.#e}}static computeTelemetryFinalData(t){const i=t.get("hasDescription");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,i;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,i=this.y),super.render(),this._drawId===null)if(this.#n){const{lines:r,mustSmooth:l,areContours:o,description:u,uuid:h,heightInPage:d}=this.#n,{rawDims:{pageWidth:p,pageHeight:b},rotation:y}=this.parent.viewport,A=na.processDrawnLines({lines:r,pageWidth:p,pageHeight:b,rotation:y,innerMargin:Hi._INNER_MARGIN,mustSmooth:l,areContours:o});this.addSignature(A,d,u,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:this.#e||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,i)),this.div}setUuid(t){this.#i=t,this.addEditToolbar()}getUuid(){return this.#i}get description(){return this.#e}set description(t){this.#e=t,this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(i=>{i?.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:i,thickness:s,width:r,height:l}=this.#n,o=Math.max(r,l),u=na.processDrawnLines({lines:{curves:t.map(h=>({points:h})),thickness:s,width:r,height:l},pageWidth:o,pageHeight:o,rotation:0,innerMargin:0,mustSmooth:!1,areContours:i});return{areContours:i,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,i,s,r){const{x:l,y:o}=this,{outline:u}=this.#n=t;this.#t=u instanceof th,this.description=s;let h;this.#t?h=Hi.getDefaultDrawingOptions():(h=Hi._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:h});const[,d]=this.pageDimensions;let p=i/d;p=p>=1?.5:p,this.width*=p/this.height,this.width>=1&&(p*=.9/this.width,this.width=.9),this.height=p,this.setDims(),this.x=l,this.y=o,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return na.process(t,i,s,r,Hi._INNER_MARGIN)}getFromText(t,i){const{rawDims:{pageWidth:s,pageHeight:r},rotation:l}=this.parent.viewport;return na.extractContoursFromText(t,i,s,r,l,Hi._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:i,pageHeight:s},rotation:r}=this.parent.viewport;return na.processDrawnLines({lines:t,pageWidth:i,pageHeight:s,rotation:r,innerMargin:Hi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:i}){t?this._drawingOptions=Hi.getDefaultDrawingOptions():(this._drawingOptions=Hi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":i}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:i,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":r}}=this,l=Object.assign(super.serialize(t),{isSignature:!0,areContours:this.#t,color:[0,0,0],thickness:this.#t?0:r});return this.addComment(l),t?(l.paths={lines:i,points:s},l.uuid=this.#i,l.isCopy=!0):l.lines=i,this.#e&&(l.accessibilityData={type:"Figure",alt:this.#e}),l}static deserializeDraw(t,i,s,r,l,o){return o.areContours?th.deserialize(t,i,s,r,l,o):Cr.deserialize(t,i,s,r,l,o)}static async deserialize(t,i,s){const r=await super.deserialize(t,i,s);return r.#t=t.areContours,r.description=t.accessibilityData?.alt||"",r.#i=t.uuid,r}}class Nx extends bt{#t=null;#e=null;#n=null;#i=null;#r=null;#s="";#a=null;#l=!1;#c=null;#o=!1;#d=!1;static _type="stamp";static _editorType=_t.STAMP;constructor(t){super({...t,name:"stampEditor"}),this.#i=t.bitmapUrl,this.#r=t.bitmapFile,this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,i){bt.initialize(t,i)}static isHandlingMimeForPasting(t){return Vu.includes(t)}static paste(t,i){i.pasteEditor({mode:_t.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){return{type:"stamp",hasAltText:!!this.altTextData?.altText}}static computeTelemetryFinalData(t){const i=t.get("hasAltText");return{hasAltText:i.get(!0)??0,hasNoAltText:i.get(!1)??0}}#h(t,i=!1){if(!t){this.remove();return}this.#t=t.bitmap,i||(this.#e=t.id,this.#o=t.isSvg),t.file&&(this.#s=t.file.name),this.#g()}#f(){if(this.#n=null,this._uiManager.enableWaiting(!1),!!this.#a){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&this.#t){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}}async mlGuessAltText(t=null,i=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:l,height:o}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:r,width:l,height:o,channels:r.length/(l*o)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const h=u.output;return await this.setGuessedAltText(h),i&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}#m(){if(this.#e){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#e).then(s=>this.#h(s,!0)).finally(()=>this.#f());return}if(this.#i){const s=this.#i;this.#i=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(s).then(r=>this.#h(r)).finally(()=>this.#f());return}if(this.#r){const s=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(s).then(r=>this.#h(r)).finally(()=>this.#f());return}const t=document.createElement("input");t.type="file",t.accept=Vu.join(",");const i=this._uiManager._signal;this.#n=new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),this.#h(r)}s()},{signal:i}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:i})}).finally(()=>this.#f()),t.click()}remove(){this.#e&&(this.#t=null,this._uiManager.imageManager.deleteId(this.#e),this.#a?.remove(),this.#a=null,this.#c&&(clearTimeout(this.#c),this.#c=null)),super.remove()}rebuild(){if(!this.parent){this.#e&&this.#m();return}super.rebuild(),this.div!==null&&(this.#e&&this.#a===null&&this.#m(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(this.#n||this.#t||this.#i||this.#r||this.#e||this.#l)}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,i;return this._isCopy&&(t=this.x,i=this.y),super.render(),this.div.hidden=!0,this.createAltText(),this.#l||(this.#t?this.#g():this.#m()),this._isCopy&&this._moveAfterPaste(t,i),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,i){const{id:s,bitmap:r}=this._uiManager.imageManager.getFromCanvas(t,i);i.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(this.#e=s,r&&(this.#t=r),this.#l=!1,this.#g())}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;this.#c!==null&&clearTimeout(this.#c);const t=200;this.#c=setTimeout(()=>{this.#c=null,this.#p()},t)}#g(){const{div:t}=this;let{width:i,height:s}=this.#t;const[r,l]=this.pageDimensions,o=.75;if(this.width)i=this.width*r,s=this.height*l;else if(i>o*r||s>o*l){const h=Math.min(o*r/i,o*l/s);i*=h,s*=h}this._uiManager.enableWaiting(!1);const u=this.#a=document.createElement("canvas");u.setAttribute("role","img"),this.addContainer(u),this.width=i/r,this.height=s/l,this.setDims(),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),this.#p(),this.#d||(this.parent.addUndoableEditor(this),this.#d=!0),this._reportTelemetry({action:"inserted_image"}),this.#s&&this.div.setAttribute("aria-description",this.#s),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}copyCanvas(t,i,s=!1){t||(t=224);const{width:r,height:l}=this.#t,o=new Gi;let u=this.#t,h=r,d=l,p=null;if(i){if(r>i||l>i){const F=Math.min(i/r,i/l);h=Math.floor(r*F),d=Math.floor(l*F)}p=document.createElement("canvas");const y=p.width=Math.ceil(h*o.sx),A=p.height=Math.ceil(d*o.sy);this.#o||(u=this.#u(y,A));const w=p.getContext("2d");w.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":Wy.isDarkMode&&(S="#8f8f9d",C="#42414d");const E=15,k=E*o.sx,O=E*o.sy,P=new OffscreenCanvas(k*2,O*2),I=P.getContext("2d");I.fillStyle=S,I.fillRect(0,0,k*2,O*2),I.fillStyle=C,I.fillRect(0,0,k,O),I.fillRect(k,O,k,O),w.fillStyle=w.createPattern(P,"repeat"),w.fillRect(0,0,y,A),w.drawImage(u,0,0,u.width,u.height,0,0,y,A)}let b=null;if(s){let y,A;if(o.symmetric&&u.width<t&&u.height<t)y=u.width,A=u.height;else if(u=this.#t,r>t||l>t){const C=Math.min(t/r,t/l);y=Math.floor(r*C),A=Math.floor(l*C),this.#o||(u=this.#u(y,A))}const S=new OffscreenCanvas(y,A).getContext("2d",{willReadFrequently:!0});S.drawImage(u,0,0,u.width,u.height,0,0,y,A),b={width:y,height:A,data:S.getImageData(0,0,y,A).data}}return{canvas:p,width:h,height:d,imageData:b}}#u(t,i){const{width:s,height:r}=this.#t;let l=s,o=r,u=this.#t;for(;l>2*t||o>2*i;){const h=l,d=o;l>2*t&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2)),o>2*i&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const p=new OffscreenCanvas(l,o);p.getContext("2d").drawImage(u,0,0,h,d,0,0,l,o),u=p.transferToImageBitmap()}return u}#p(){const[t,i]=this.parentDimensions,{width:s,height:r}=this,l=new Gi,o=Math.ceil(s*t*l.sx),u=Math.ceil(r*i*l.sy),h=this.#a;if(!h||h.width===o&&h.height===u)return;h.width=o,h.height=u;const d=this.#o?this.#t:this.#u(o,u),p=h.getContext("2d");p.filter=this._uiManager.hcmFilter,p.drawImage(d,0,0,d.width,d.height,0,0,o,u)}#b(t){if(t){if(this.#o){const r=this._uiManager.imageManager.getSvgUrl(this.#e);if(r)return r}const i=document.createElement("canvas");return{width:i.width,height:i.height}=this.#t,i.getContext("2d").drawImage(this.#t,0,0),i.toDataURL()}if(this.#o){const[i,s]=this.pageDimensions,r=Math.round(this.width*i*ha.PDF_TO_CSS_UNITS),l=Math.round(this.height*s*ha.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(r,l);return o.getContext("2d").drawImage(this.#t,0,0,this.#t.width,this.#t.height,0,0,r,l),o.transferToImageBitmap()}return structuredClone(this.#t)}static async deserialize(t,i,s){let r=null,l=!1;if(t instanceof Pm){const{data:{rect:S,rotation:C,id:E,structParent:k,popupRef:O,richText:P,contentsObj:I,creationDate:F,modificationDate:B},container:D,parent:{page:{pageNumber:N}},canvas:U}=t;let $,tt;U?(delete t.canvas,{id:$,bitmap:tt}=s.imageManager.getFromCanvas(D.id,U),U.remove()):(l=!0,t._hasNoCanvas=!0);const st=(await i._structTree.getAriaAttributes(`${sh}${E}`))?.get("aria-label")||"";r=t={annotationType:_t.STAMP,bitmapId:$,bitmap:tt,pageIndex:N-1,rect:S.slice(0),rotation:C,annotationElementId:E,id:E,deleted:!1,accessibilityData:{decorative:!1,altText:st},isSvg:!1,structParent:k,popupRef:O,richText:P,comment:I?.str||null,creationDate:F,modificationDate:B}}const o=await super.deserialize(t,i,s),{rect:u,bitmap:h,bitmapUrl:d,bitmapId:p,isSvg:b,accessibilityData:y}=t;l?(s.addMissingCanvas(t.id,o),o.#l=!0):p&&s.imageManager.isValidId(p)?(o.#e=p,h&&(o.#t=h)):o.#i=d,o.#o=b;const[A,w]=o.pageDimensions;return o.width=(u[2]-u[0])/A,o.height=(u[3]-u[1])/w,y&&(o.altTextData=y),o._initialData=r,t.comment&&o.setCommentData(t),o.#d=!!r,o}serialize(t=!1,i=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:this.#e,isSvg:this.#o});if(this.addComment(s),t)return s.bitmapUrl=this.#b(!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:r,altText:l}=this.serializeAltText(!1);if(!r&&l&&(s.accessibilityData={type:"Figure",alt:l}),this.annotationElementId){const u=this.#v(s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(i===null)return s;i.stamps||=new Map;const o=this.#o?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!i.stamps.has(this.#e))i.stamps.set(this.#e,{area:o,serialized:s}),s.bitmap=this.#b(!1);else if(this.#o){const u=i.stamps.get(this.#e);o>u.area&&(u.area=o,u.serialized.bitmap.close(),u.serialized.bitmap=this.#b(!1))}return s}#v(t){const{pageIndex:i,accessibilityData:{altText:s}}=this._initialData,r=t.pageIndex===i,l=(t.accessibilityData?.alt||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&r&&l,isSameAltText:l}}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}class hn{#t;#e=!1;#n=null;#i=null;#r=null;#s=new Map;#a=!1;#l=!1;#c=!1;#o=null;#d=null;#h=null;#f=null;#m=null;#g=-1;#u;static _initialized=!1;static#p=new Map([we,bh,Nx,fe,Hi].map(t=>[t._editorType,t]));constructor({uiManager:t,pageIndex:i,div:s,structTreeLayer:r,accessibilityManager:l,annotationLayer:o,drawLayer:u,textLayer:h,viewport:d,l10n:p}){const b=[...hn.#p.values()];if(!hn._initialized){hn._initialized=!0;for(const y of b)y.initialize(p,t)}t.registerEditorTypes(b),this.#u=t,this.pageIndex=i,this.div=s,this.#t=l,this.#n=o,this.viewport=d,this.#h=h,this.drawLayer=u,this._structTree=r,this.#u.addLayer(this)}get isEmpty(){return this.#s.size===0}get isInvisible(){return this.isEmpty&&this.#u.getMode()===_t.NONE}updateToolbar(t){this.#u.updateToolbar(t)}updateMode(t=this.#u.getMode()){switch(this.#x(),t){case _t.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case _t.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case _t.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:i}=this.div;if(i.toggle("nonEditing",!1),t===_t.POPUP)i.toggle("commentEditing",!0);else{i.toggle("commentEditing",!1);for(const s of hn.#p.values())i.toggle(`${s._type}Editing`,t===s._editorType)}this.div.hidden=!1}hasTextLayer(t){return t===this.#h?.div}setEditingState(t){this.#u.setEditingState(t)}addCommands(t){this.#u.addCommands(t)}cleanUndoStack(t){this.#u.cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){this.#n?.div.classList.toggle("disabled",!t)}get#b(){return this.#s.size!==0?this.#s.values():this.#u.getEditors(this.pageIndex)}async enable(){this.#c=!0,this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),this.#m?.abort(),this.#m=null;const t=new Set;for(const s of this.#b)s.enableEditing(),s.show(!0),s.annotationElementId&&(this.#u.removeChangedExistingAnnotation(s),t.add(s.annotationElementId));const i=this.#n;if(i)for(const s of i.getEditableAnnotations()){if(s.hide(),this.#u.isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const r=await this.deserialize(s);r&&(this.addOrRebuild(r),r.enableEditing())}this.#c=!1,this.#u._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(this.#l=!0,this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),this.#h&&!this.#m){this.#m=new AbortController;const s=this.#u.combinedSignal(this.#m);this.#h.div.addEventListener("pointerdown",r=>{const{clientX:o,clientY:u,timeStamp:h}=r,d=this.#g;if(h-d>500){this.#g=h;return}this.#g=-1;const{classList:p}=this.div;p.toggle("getElements",!0);const b=document.elementsFromPoint(o,u);if(p.toggle("getElements",!1),!this.div.contains(b[0]))return;let y;const A=new RegExp(`^${pr}[0-9]+$`);for(const S of b)if(A.test(S.id)){y=S.id;break}if(!y)return;const w=this.#s.get(y);w?.annotationElementId===null&&(r.stopPropagation(),r.preventDefault(),w.dblclick(r))},{signal:s,capture:!0})}const t=this.#n;if(t){const s=new Map,r=new Map;for(const o of this.#b){if(o.disableEditing(),!o.annotationElementId){o.updateFakeAnnotationElement(t);continue}if(o.serialize()!==null){s.set(o.annotationElementId,o);continue}else r.set(o.annotationElementId,o);this.getEditableAnnotation(o.annotationElementId)?.show(),o.remove()}const l=t.getEditableAnnotations();for(const o of l){const{id:u}=o.data;if(this.#u.isDeletedAnnotationElement(u)){o.updateEdited({deleted:!0});continue}let h=r.get(u);if(h){h.resetAnnotationElement(o),h.show(!1),o.show();continue}h=s.get(u),h&&(this.#u.addChangedExistingAnnotation(h),h.renderAnnotationElement(o)&&h.show(!1)),o.show()}}this.#x(),this.isEmpty&&(this.div.hidden=!0);const{classList:i}=this.div;for(const s of hn.#p.values())i.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),this.#l=!1}getEditableAnnotation(t){return this.#n?.getEditableAnnotation(t)||null}setActiveEditor(t){this.#u.getActive()!==t&&this.#u.setActiveEditor(t)}enableTextSelection(){if(this.div.tabIndex=-1,this.#h?.div&&!this.#f){this.#f=new AbortController;const t=this.#u.combinedSignal(this.#f);this.#h.div.addEventListener("pointerdown",this.#v.bind(this),{signal:t}),this.#h.div.classList.add("highlighting")}}disableTextSelection(){this.div.tabIndex=0,this.#h?.div&&this.#f&&(this.#f.abort(),this.#f=null,this.#h.div.classList.remove("highlighting"))}#v(t){this.#u.unselectAll();const{target:i}=t;if(i===this.#h.div||(i.getAttribute("role")==="img"||i.classList.contains("endOfContent"))&&this.#h.div.contains(i)){const{isMac:s}=ke.platform;if(t.button!==0||t.ctrlKey&&s)return;this.#u.showAllEditors("highlight",!0,!0),this.#h.div.classList.add("free"),this.toggleDrawing(),fe.startHighlighting(this,this.#u.direction==="ltr",{target:this.#h.div,x:t.x,y:t.y}),this.#h.div.addEventListener("pointerup",()=>{this.#h.div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:this.#u._signal}),t.preventDefault()}}enableClick(){if(this.#i)return;this.#i=new AbortController;const t=this.#u.combinedSignal(this.#i);this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const i=this.pointerup.bind(this);this.div.addEventListener("pointerup",i,{signal:t}),this.div.addEventListener("pointercancel",i,{signal:t})}disableClick(){this.#i?.abort(),this.#i=null}attach(t){this.#s.set(t.id,t);const{annotationElementId:i}=t;i&&this.#u.isDeletedAnnotationElement(i)&&this.#u.removeDeletedAnnotationElement(t)}detach(t){this.#s.delete(t.id),this.#t?.removePointerInTextLayer(t.contentDiv),!this.#l&&t.annotationElementId&&this.#u.addDeletedAnnotationElement(t)}remove(t){this.detach(t),this.#u.removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){t.parent!==this&&(t.parent&&t.annotationElementId&&(this.#u.addDeletedAnnotationElement(t.annotationElementId),bt.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),t.parent?.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),this.#u.addEditor(t),this.attach(t),!t.isAttachedToDOM){const i=t.render();this.div.append(i),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!this.#c),this.#u.addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){if(!t.isAttachedToDOM)return;const{activeElement:i}=document;t.div.contains(i)&&!this.#r&&(t._focusEventsAllowed=!1,this.#r=setTimeout(()=>{this.#r=null,t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this.#u._signal}),i.focus())},0)),t._structTreeParentId=this.#t?.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||=this,t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const i=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:i,undo:s,mustExec:!1})}getEditorByUID(t){for(const i of this.#s.values())if(i.uid===t)return i;return null}getNextId(){return this.#u.getId()}get#y(){return hn.#p.get(this.#u.getMode())}combinedSignal(t){return this.#u.combinedSignal(t)}#E(t){const i=this.#y;return i?new i.prototype.constructor(t):null}canCreateNewEmptyEditor(){return this.#y?.canCreateNewEmptyEditor()}async pasteEditor(t,i){this.updateToolbar(t),await this.#u.updateMode(t.mode);const{offsetX:s,offsetY:r}=this.#w(),l=this.getNextId(),o=this.#E({parent:this,id:l,x:s,y:r,uiManager:this.#u,isCentered:!0,...i});o&&this.add(o)}async deserialize(t){return await hn.#p.get(t.annotationType??t.annotationEditorType)?.deserialize(t,this,this.#u)||null}createAndAddNewEditor(t,i,s={}){const r=this.getNextId(),l=this.#E({parent:this,id:r,x:t.offsetX,y:t.offsetY,uiManager:this.#u,isCentered:i,...s});return l&&this.add(l),l}get boundingClientRect(){return this.div.getBoundingClientRect()}#w(){const{x:t,y:i,width:s,height:r}=this.boundingClientRect,l=Math.max(0,t),o=Math.max(0,i),u=Math.min(window.innerWidth,t+s),h=Math.min(window.innerHeight,i+r),d=(l+u)/2-t,p=(o+h)/2-i,[b,y]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:b,offsetY:y}}addNewEditor(t={}){this.createAndAddNewEditor(this.#w(),!0,t)}setSelected(t){this.#u.setSelected(t)}toggleSelected(t){this.#u.toggleSelected(t)}unselect(t){this.#u.unselect(t)}pointerup(t){const{isMac:i}=ke.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div||!this.#a||(this.#a=!1,this.#y?.isDrawer&&this.#y.supportMultipleDrawings))return;if(!this.#e){this.#e=!0;return}const s=this.#u.getMode();if(s===_t.STAMP||s===_t.SIGNATURE){this.#u.unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){if(this.#u.getMode()===_t.HIGHLIGHT&&this.enableTextSelection(),this.#a){this.#a=!1;return}const{isMac:i}=ke.platform;if(t.button!==0||t.ctrlKey&&i||t.target!==this.div)return;if(this.#a=!0,this.#y?.isDrawer){this.startDrawingSession(t);return}const s=this.#u.getActive();this.#e=!s||s.isEmpty()}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),this.#o){this.#y.startDrawing(this,this.#u,!1,t);return}this.#u.setCurrentDrawingSession(this),this.#o=new AbortController;const i=this.#u.combinedSignal(this.#o);this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(this.#d=null,this.commitOrRemove())},{signal:i}),this.#y.startDrawing(this,this.#u,!1,t)}pause(t){if(t){const{activeElement:i}=document;this.div.contains(i)&&(this.#d=i);return}this.#d&&setTimeout(()=>{this.#d?.focus(),this.#d=null},0)}endDrawingSession(t=!1){return this.#o?(this.#u.setCurrentDrawingSession(null),this.#o.abort(),this.#o=null,this.#d=null,this.#y.endDrawing(t)):null}findNewParent(t,i,s){const r=this.#u.findParent(i,s);return r===null||r===this?!1:(r.changeParent(t),!0)}commitOrRemove(){return this.#o?(this.endDrawingSession(),!0):!1}onScaleChanging(){this.#o&&this.#y.onScaleChangingWhenDrawing(this)}destroy(){this.commitOrRemove(),this.#u.getActive()?.parent===this&&(this.#u.commitOrRemove(),this.#u.setActiveEditor(null)),this.#r&&(clearTimeout(this.#r),this.#r=null);for(const t of this.#s.values())this.#t?.removePointerInTextLayer(t.contentDiv),t.setParent(null),t.isAttachedToDOM=!1,t.div.remove();this.div=null,this.#s.clear(),this.#u.removeLayer(this)}#x(){for(const t of this.#s.values())t.isEmpty()&&t.remove()}render({viewport:t}){this.viewport=t,ds(this.div,t);for(const i of this.#u.getEditors(this.pageIndex))this.add(i),i.rebuild();this.updateMode()}update({viewport:t}){this.#u.commitOrRemove(),this.#x();const i=this.viewport.rotation,s=t.rotation;if(this.viewport=t,ds(this.div,{rotation:s}),i!==s)for(const r of this.#s.values())r.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:i}=this.viewport.rawDims;return[t,i]}get scale(){return this.#u.viewParameters.realScale}}class Re{#t=null;#e=new Map;#n=new Map;static#i=0;constructor({pageIndex:t}){this.pageIndex=t}setParent(t){if(!this.#t){this.#t=t;return}if(this.#t!==t){if(this.#e.size>0)for(const i of this.#e.values())i.remove(),t.append(i);this.#t=t}}static get _svgFactory(){return Tt(this,"_svgFactory",new ao)}static#r(t,[i,s,r,l]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*i}%`,o.width=`${100*r}%`,o.height=`${100*l}%`}#s(){const t=Re._svgFactory.create(1,1,!0);return this.#t.append(t),t.setAttribute("aria-hidden",!0),t}#a(t,i){const s=Re._svgFactory.createElement("clipPath");t.append(s);const r=`clip_${i}`;s.setAttribute("id",r),s.setAttribute("clipPathUnits","objectBoundingBox");const l=Re._svgFactory.createElement("use");return s.append(l),l.setAttribute("href",`#${i}`),l.classList.add("clip"),r}#l(t,i){for(const[s,r]of Object.entries(i))r===null?t.removeAttribute(s):t.setAttribute(s,r)}draw(t,i=!1,s=!1){const r=Re.#i++,l=this.#s(),o=Re._svgFactory.createElement("defs");l.append(o);const u=Re._svgFactory.createElement("path");o.append(u);const h=`path_p${this.pageIndex}_${r}`;u.setAttribute("id",h),u.setAttribute("vector-effect","non-scaling-stroke"),i&&this.#n.set(r,u);const d=s?this.#a(o,h):null,p=Re._svgFactory.createElement("use");return l.append(p),p.setAttribute("href",`#${h}`),this.updateProperties(l,t),this.#e.set(r,l),{id:r,clipPathId:`url(#${d})`}}drawOutline(t,i){const s=Re.#i++,r=this.#s(),l=Re._svgFactory.createElement("defs");r.append(l);const o=Re._svgFactory.createElement("path");l.append(o);const u=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",u),o.setAttribute("vector-effect","non-scaling-stroke");let h;if(i){const b=Re._svgFactory.createElement("mask");l.append(b),h=`mask_p${this.pageIndex}_${s}`,b.setAttribute("id",h),b.setAttribute("maskUnits","objectBoundingBox");const y=Re._svgFactory.createElement("rect");b.append(y),y.setAttribute("width","1"),y.setAttribute("height","1"),y.setAttribute("fill","white");const A=Re._svgFactory.createElement("use");b.append(A),A.setAttribute("href",`#${u}`),A.setAttribute("stroke","none"),A.setAttribute("fill","black"),A.setAttribute("fill-rule","nonzero"),A.classList.add("mask")}const d=Re._svgFactory.createElement("use");r.append(d),d.setAttribute("href",`#${u}`),h&&d.setAttribute("mask",`url(#${h})`);const p=d.cloneNode();return r.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(r,t),this.#e.set(s,r),s}finalizeDraw(t,i){this.#n.delete(t),this.updateProperties(t,i)}updateProperties(t,i){if(!i)return;const{root:s,bbox:r,rootClass:l,path:o}=i,u=typeof t=="number"?this.#e.get(t):t;if(u){if(s&&this.#l(u,s),r&&Re.#r(u,r),l){const{classList:h}=u;for(const[d,p]of Object.entries(l))h.toggle(d,p)}if(o){const d=u.firstChild.firstChild;this.#l(d,o)}}}updateParent(t,i){if(i===this)return;const s=this.#e.get(t);s&&(i.#t.append(s),this.#e.delete(t),i.#e.set(t,s))}remove(t){this.#n.delete(t),this.#t!==null&&(this.#e.get(t).remove(),this.#e.delete(t))}destroy(){this.#t=null;for(const t of this.#e.values())t.remove();this.#e.clear(),this.#n.clear()}}globalThis._pdfjsTestingUtils={HighlightOutliner:Zu};globalThis.pdfjsLib={AbortException:Un,AnnotationEditorLayer:hn,AnnotationEditorParamsType:jt,AnnotationEditorType:_t,AnnotationEditorUIManager:Hn,AnnotationLayer:mh,AnnotationMode:zn,AnnotationType:ve,applyOpacity:Jy,build:ax,ColorPicker:Ei,createValidAbsoluteUrl:rm,CSSConstants:Zy,DOMSVGFactory:ao,DrawLayer:Re,FeatureTest:ke,fetchData:Ar,findContrastColor:tv,getDocument:Dm,getFilenameFromUrl:Yy,getPdfFilenameFromUrl:Xy,getRGB:wr,getUuid:cm,getXfaPageViewport:Ky,GlobalWorkerOptions:ca,ImageKind:to,InvalidPDFException:qu,isDataScheme:uo,isPdfFile:rh,isValidExplicitDest:uv,MathClamp:ze,noContextMenu:Ci,normalizeUnicode:qy,OPS:mr,OutputScale:Gi,PasswordResponses:Ly,PDFDataRangeTransport:Nm,PDFDateString:Gu,PDFWorker:yr,PermissionFlag:ky,PixelsPerInch:ha,RenderingCancelledException:ah,renderRichText:dm,ResponseException:no,setLayerDimensions:ds,shadow:Tt,SignatureExtractor:na,stopEvent:ce,SupportedImageMimeTypes:Vu,TextLayer:Pe,TouchManager:ho,updateUrlHash:lm,Util:ht,VerbosityLevel:lo,version:Om,XfaLayer:hm};ca.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${Om}/pdf.worker.min.js`;const Mx=async g=>{const t=await g.arrayBuffer(),i=await Dm({data:t}).promise;let s="";for(let r=1;r<=i.numPages;r++){const u=(await(await i.getPage(r)).getTextContent()).items.map(h=>h.str).join(" ");s+=u+`
`}return s},Rx=g=>{const t=[],i=g.split(`
`),s=/(\d{1,2}\/\d{1,2}\/\d{4})\s+(.+?)\s+([-+]?\$?[\d,]+\.?\d{0,2})/g;let r=0;for(const l of i){const o=[...l.matchAll(s)];for(const u of o)try{const h=u[1],d=u[2].trim(),p=u[3].replace(/[$,]/g,""),b=new Date(h);if(isNaN(b.getTime()))continue;const y=parseFloat(p);if(isNaN(y))continue;t.push({id:`pdf-${b.getTime()}-${r}`,date:b,description:d,category:"Uncategorized",amount:y,balance:0,isPending:!1,isManual:!1,sortOrder:r}),r++}catch(h){console.warn("Failed to parse line:",l,h)}}return t},Ox=g=>{const t=[],i=g.split(`
`),s=/(\d{2}\/\d{2})\s+(.+?)\s+([-+]?\$?[\d,]+\.\d{2})/g;let r=0;const l=new Date().getFullYear();for(const o of i){const u=[...o.matchAll(s)];for(const h of u)try{const d=`${h[1]}/${l}`,p=h[2].trim(),b=h[3].replace(/[$,]/g,""),y=new Date(d);if(isNaN(y.getTime()))continue;const A=parseFloat(b);if(isNaN(A))continue;t.push({id:`pdf-${y.getTime()}-${r}`,date:y,description:p,category:"Uncategorized",amount:A,balance:0,isPending:!1,isManual:!1,sortOrder:r}),r++}catch(d){console.warn("Failed to parse line:",o,d)}}return t},kx=g=>{const t=[],i=g.split(`
`),s=/(\d{1,2}\/\d{1,2}\/\d{4})\s+(.+?)\s+(?:([\d,]+\.\d{2})\s+)?([-]?[\d,]+\.\d{2})?/g;let r=0;for(const l of i){const o=[...l.matchAll(s)];for(const u of o)try{const h=u[1],d=u[2].trim(),p=u[3]?parseFloat(u[3].replace(/,/g,"")):0,b=u[4]?parseFloat(u[4].replace(/[-,]/g,"")):0,y=new Date(h);if(isNaN(y.getTime()))continue;const A=p>0?p:-b;if(A===0)continue;t.push({id:`pdf-${y.getTime()}-${r}`,date:y,description:d,category:"Uncategorized",amount:A,balance:0,isPending:!1,isManual:!1,sortOrder:r}),r++}catch(h){console.warn("Failed to parse line:",l,h)}}return t},Lx=g=>{const t=[],i=g.split(`
`),s=[/(\d{1,2}\/\d{1,2}\/\d{4})\s+(.+?)\s+([-+]?\$?[\d,]+\.\d{2})/g,/(\d{4}-\d{2}-\d{2})\s+(.+?)\s+([-+]?\$?[\d,]+\.\d{2})/g,/(\d{2}\/\d{2}\/\d{4})\s+(.+?)\s+([-+]?\$?[\d,]+\.\d{2})/g];let r=0;for(const l of i)for(const o of s){const u=[...l.matchAll(o)];for(const h of u)try{const d=h[1],p=h[2].trim(),b=h[3].replace(/[$,]/g,""),y=new Date(d);if(isNaN(y.getTime()))continue;const A=parseFloat(b);if(isNaN(A))continue;t.some(S=>S.date.getTime()===y.getTime()&&S.description===p&&S.amount===A)||(t.push({id:`pdf-${y.getTime()}-${r}`,date:y,description:p,category:"Uncategorized",amount:A,balance:0,isPending:!1,isManual:!1,sortOrder:r}),r++)}catch(d){console.warn("Failed to parse line:",l,d)}}return t},jx=[{name:"USAA",detect:g=>g.toLowerCase().includes("usaa"),parse:Rx},{name:"Chase",detect:g=>g.toLowerCase().includes("chase"),parse:Ox},{name:"Bank of America",detect:g=>g.toLowerCase().includes("bank of america")||g.toLowerCase().includes("bankofamerica"),parse:kx}],Bx=async g=>{const t=[];try{const i=await Mx(g);if(!i.trim())return{transactions:[],errors:["Could not extract text from PDF. The file may be scanned or encrypted."]};const s=jx.find(l=>l.detect(i));let r;return s?(console.log(`Detected bank format: ${s.name}`),r=s.parse(i)):(console.log("Using generic parser"),r=Lx(i)),r.length===0&&t.push("No transactions found in PDF. The format may not be supported."),{transactions:r,errors:t}}catch(i){return{transactions:[],errors:[`Failed to parse PDF: ${i instanceof Error?i.message:"Unknown error"}`]}}},Px=({onImportComplete:g})=>{const[t,i]=vt.useState(!1),[s,r]=vt.useState(!1),[l,o]=vt.useState("Processing file..."),u=vt.useRef(null),h=async y=>{const A=y.name.toLowerCase().endsWith(".csv"),w=y.name.toLowerCase().endsWith(".pdf");if(!A&&!w){alert("Please select a CSV or PDF file");return}i(!0),o(w?"Extracting data from PDF...":"Processing CSV file...");try{let S;w?S=await Bx(y):S=await _y(y),g(S)}catch(S){console.error("Error parsing file:",S),alert(`Failed to parse ${w?"PDF":"CSV"} file. Please check the format.`)}finally{i(!1)}},d=y=>{const A=y.target.files?.[0];A&&h(A)},p=y=>{y.preventDefault(),y.stopPropagation(),y.type==="dragenter"||y.type==="dragover"?r(!0):y.type==="dragleave"&&r(!1)},b=y=>{y.preventDefault(),y.stopPropagation(),r(!1);const A=y.dataTransfer.files?.[0];A&&h(A)};return v.jsxs("div",{className:`
        border-2 border-dashed rounded-2xl p-12 text-center cursor-pointer
        transition-all duration-200 backdrop-blur-sm
        ${s?"border-blue-500 bg-blue-500/20":"border-gray-600 hover:border-gray-500 bg-gray-800/50"}
        ${t?"opacity-50 pointer-events-none":""}
      `,onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:b,onClick:()=>u.current?.click(),children:[v.jsx("input",{ref:u,type:"file",accept:".csv,.pdf",onChange:d,className:"hidden"}),t?v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto"}),v.jsx("p",{className:"text-gray-400",children:l})]}):v.jsxs("div",{className:"space-y-4",children:[v.jsx("div",{className:"text-6xl",children:"📊"}),v.jsxs("div",{className:"text-gray-300",children:[v.jsx("p",{className:"text-lg font-semibold text-white",children:"Import Bank Transactions"}),v.jsx("p",{className:"text-sm mt-2 text-gray-400",children:"Drag and drop your CSV or PDF statement here, or click to browse"}),v.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs text-gray-500",children:[v.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded-lg",children:"CSV"}),v.jsx("span",{className:"px-3 py-1 bg-gray-700 rounded-lg",children:"PDF"})]}),v.jsx("p",{className:"text-xs mt-3 text-gray-500",children:"Supports USAA, Chase, Bank of America, Wells Fargo, Capital One, and more"})]})]})]})},Fx=({onImportComplete:g})=>{const[t,i]=vt.useState(""),[s,r]=vt.useState(null),[l,o]=vt.useState(!1),u=()=>{r(null);try{const d=JSON.parse(t),p=Array.isArray(d)?d:d.transactions||[];if(p.length===0){r("No transactions found in JSON. Expected an array of transactions.");return}const b=p.map((y,A)=>{if(!y.date)throw new Error(`Transaction ${A+1}: Missing required field 'date'`);if(!y.description&&!y.desc&&!y.merchant)throw new Error(`Transaction ${A+1}: Missing required field 'description'`);if(y.amount===void 0&&y.amt===void 0)throw new Error(`Transaction ${A+1}: Missing required field 'amount'`);let w;if(typeof y.date=="string"){if(w=new Date(y.date),isNaN(w.getTime()))throw new Error(`Transaction ${A+1}: Invalid date format '${y.date}'`)}else w=new Date(y.date);let S;const C=y.amount??y.amt;if(typeof C=="string"){const E=C.replace(/[$,]/g,"");if(S=parseFloat(E),isNaN(S))throw new Error(`Transaction ${A+1}: Invalid amount '${C}'`)}else S=parseFloat(C);return y.type==="debit"||y.transaction_type==="debit"||S>0?S=-Math.abs(S):(y.type==="credit"||y.transaction_type==="credit")&&(S=Math.abs(S)),{id:`json-import-${Date.now()}-${A}`,date:w,description:y.description||y.desc||y.merchant||"Unknown",category:y.category||y.cat||"Uncategorized",amount:S,balance:0,isPending:y.pending||y.isPending||!1,isManual:!0,sortOrder:A}});g({transactions:b,errors:[]}),i(""),o(!1)}catch(d){d instanceof Error?r(d.message):r("Failed to parse JSON. Please check the format.")}},h=`[
  {
    "date": "2024-01-15",
    "description": "Amazon Purchase",
    "category": "Shopping",
    "amount": -125.50
  },
  {
    "date": "2024-01-14",
    "description": "Salary Deposit",
    "category": "Income",
    "amount": 3000.00
  }
]`;return v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:()=>o(!0),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-2xl font-semibold hover:from-purple-600 hover:to-pink-600 transition-all shadow-lg",children:"Import from JSON"}),l&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-800 rounded-3xl p-8 max-w-4xl w-full max-h-[90vh] overflow-y-auto border border-gray-700",children:[v.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Import Transactions from JSON"}),v.jsxs("div",{className:"mb-6",children:[v.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Instructions"}),v.jsxs("ol",{className:"list-decimal list-inside text-gray-300 space-y-2 text-sm",children:[v.jsx("li",{children:"Upload your credit card statement PDF to claude.ai"}),v.jsx("li",{children:'Ask Claude: "Extract all transactions from this statement as JSON with fields: date, description, category, amount"'}),v.jsx("li",{children:"Copy the JSON response from Claude"}),v.jsx("li",{children:"Paste it in the box below and click Import"})]})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Paste JSON Here"}),v.jsx("textarea",{value:t,onChange:d=>i(d.target.value),placeholder:h,className:"w-full h-64 px-4 py-3 bg-gray-700 border border-gray-600 rounded-xl text-white font-mono text-sm resize-y"})]}),s&&v.jsxs("div",{className:"mb-4 p-4 bg-red-500/20 border border-red-500/50 rounded-xl text-red-300 text-sm",children:[v.jsx("strong",{children:"Error:"})," ",s]}),v.jsxs("div",{className:"mb-6 p-4 bg-gray-700/50 rounded-xl",children:[v.jsx("h4",{className:"text-sm font-semibold text-white mb-2",children:"Expected JSON Format"}),v.jsx("pre",{className:"text-xs text-gray-300 overflow-x-auto",children:h}),v.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[v.jsx("strong",{children:"Note:"})," Negative amounts = debits (expenses), Positive amounts = credits (income/refunds)"]})]}),v.jsxs("div",{className:"flex gap-4",children:[v.jsx("button",{onClick:u,disabled:!t.trim(),className:"px-6 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-2xl font-semibold hover:from-green-600 hover:to-emerald-600 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Import Transactions"}),v.jsx("button",{onClick:()=>{o(!1),i(""),r(null)},className:"px-6 py-3 bg-gray-700 text-white rounded-2xl font-semibold hover:bg-gray-600 transition-all",children:"Cancel"})]})]})})]})},zx=({transactions:g,onAddTransaction:t,onDeleteTransaction:i,onCreateRecurringBill:s,onUpdateTransaction:r,onDismissProjection:l,recurringBills:o})=>{const[u,h]=vt.useState(!1),[d,p]=vt.useState(""),[b,y]=vt.useState(null),[A,w]=vt.useState(!0),[S,C]=vt.useState(null),[E,k]=vt.useState(""),[O,P]=vt.useState("date"),[I,F]=vt.useState("desc"),B=T=>{O===T?F(I==="asc"?"desc":"asc"):(P(T),F(T==="date"||T==="amount"?"desc":"asc"))},N=[...g].sort((T,X)=>{let et=0;switch(O){case"date":et=T.date.getTime()-X.date.getTime();break;case"description":et=T.description.localeCompare(X.description);break;case"category":et=T.category.localeCompare(X.category);break;case"amount":et=T.amount-X.amount;break}return I==="asc"?et:-et}).filter(T=>{const X=T.description.toLowerCase().includes(d.toLowerCase())||T.category.toLowerCase().includes(d.toLowerCase()),et=A||!T.isPending;return X&&et}),U=T=>{r({...T,isReconciled:!T.isReconciled,isPending:T.isReconciled?T.isPending:!1})},$=T=>{const X=T.description.replace(" (Projected)","");return o.some(et=>et.description.toLowerCase()===X.toLowerCase()||et.description.toLowerCase().includes(X.toLowerCase())||X.toLowerCase().includes(et.description.toLowerCase()))},tt=T=>{r({...T,isProjectedVisible:T.isProjectedVisible===!1})},st=(T,X)=>{if(!T.isReconciled)switch(C({id:T.id,field:X}),X){case"date":k(T.date.toISOString().split("T")[0]);break;case"description":k(T.description);break;case"category":k(T.category);break;case"amount":k(Math.abs(T.amount).toString());break}},rt=T=>{if(!S)return;let X={};switch(S.field){case"date":const et=new Date(E);isNaN(et.getTime())||(X.date=et);break;case"description":E.trim()&&(X.description=E.trim());break;case"category":E.trim()&&(X.category=E.trim());break;case"amount":const gt=parseFloat(E);isNaN(gt)||(X.amount=T.amount<0?-Math.abs(gt):Math.abs(gt));break}Object.keys(X).length>0&&r({...T,...X}),C(null),k("")},dt=()=>{C(null),k("")},j=T=>{const X=T.description.replace(" (Projected)","");T.id.startsWith("proj-")?t({date:T.date,description:X,category:T.category,amount:T.amount,balance:T.balance,isPending:!0,isManual:!0}):r({...T,description:X,isPending:!0})};return v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-xl font-bold text-white",children:"Transaction History"}),v.jsx("button",{onClick:()=>h(!0),className:"px-3 py-1.5 text-sm bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-lg hover:from-blue-600 hover:to-purple-600 transition-all shadow-lg font-medium",children:"+ Add Transaction"})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("div",{className:"relative flex-1",children:v.jsx("input",{type:"text",placeholder:"Search by Description or Category...",value:d,onChange:T=>p(T.target.value),className:"w-full px-3 py-2 text-sm bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})}),v.jsxs("div",{className:"flex items-center gap-2 bg-gray-800 rounded-lg px-3 py-2 border border-gray-700",children:[v.jsx("span",{className:"text-xs text-gray-300 whitespace-nowrap",children:"Show Pending"}),v.jsx("button",{onClick:()=>w(!A),className:`relative inline-flex h-5 w-9 items-center rounded-full transition-colors ${A?"bg-blue-500":"bg-gray-600"}`,children:v.jsx("span",{className:`inline-block h-3.5 w-3.5 transform rounded-full bg-white transition-transform ${A?"translate-x-5":"translate-x-1"}`})})]})]}),v.jsx("div",{className:"overflow-x-auto bg-gray-800 rounded-xl shadow-xl border border-gray-700",children:v.jsxs("table",{className:"w-full",children:[v.jsx("thead",{className:"bg-gray-900/50 border-b border-gray-700",children:v.jsxs("tr",{children:[v.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-medium text-gray-300 uppercase tracking-wider",children:v.jsx("span",{title:"Reconciled",children:"✓"})}),v.jsx("th",{className:"px-3 py-2 text-left text-[10px] font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-700/30 select-none",onClick:()=>B("date"),children:v.jsxs("div",{className:"flex items-center gap-1",children:["Date",O==="date"&&v.jsx("span",{className:"text-blue-400",children:I==="asc"?"↑":"↓"})]})}),v.jsx("th",{className:"px-3 py-2 text-left text-[10px] font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-700/30 select-none",onClick:()=>B("description"),children:v.jsxs("div",{className:"flex items-center gap-1",children:["Description",O==="description"&&v.jsx("span",{className:"text-blue-400",children:I==="asc"?"↑":"↓"})]})}),v.jsx("th",{className:"px-3 py-2 text-left text-[10px] font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-700/30 select-none",onClick:()=>B("category"),children:v.jsxs("div",{className:"flex items-center gap-1",children:["Category",O==="category"&&v.jsx("span",{className:"text-blue-400",children:I==="asc"?"↑":"↓"})]})}),v.jsx("th",{className:"px-3 py-2 text-right text-[10px] font-medium text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-700/30 select-none",onClick:()=>B("amount"),children:v.jsxs("div",{className:"flex items-center gap-1 justify-end",children:["Amount",O==="amount"&&v.jsx("span",{className:"text-blue-400",children:I==="asc"?"↑":"↓"})]})}),v.jsx("th",{className:"px-3 py-2 text-right text-[10px] font-medium text-gray-300 uppercase tracking-wider",children:"Balance"}),v.jsx("th",{className:"px-3 py-2 text-center text-[10px] font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),v.jsx("tbody",{className:"divide-y divide-gray-700",children:N.length===0?v.jsx("tr",{children:v.jsx("td",{colSpan:7,className:"px-4 py-8 text-center text-gray-400",children:"No transactions found. Import a CSV or add a manual transaction."})}):N.map(T=>v.jsxs("tr",{className:"hover:bg-gray-700/30 transition-colors",children:[v.jsx("td",{className:"px-3 py-2 text-center",children:v.jsx("button",{onClick:()=>U(T),disabled:T.description.includes("(Projected)"),className:`w-6 h-6 rounded flex items-center justify-center transition-colors ${T.description.includes("(Projected)")?"bg-gray-800 text-gray-600 cursor-not-allowed":T.isReconciled?"bg-green-500 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}`,title:T.description.includes("(Projected)")?"Mark as processed first":T.isReconciled?"Reconciled":"Not reconciled",children:T.description.includes("(Projected)")?"—":T.isReconciled&&"✓"})}),v.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-white",children:S?.id===T.id&&S.field==="date"&&!T.isReconciled?v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("input",{type:"date",value:E,onChange:X=>k(X.target.value),onKeyDown:X=>{X.key==="Enter"&&rt(T),X.key==="Escape"&&dt()},className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white",autoFocus:!0}),v.jsx("button",{onClick:()=>rt(T),className:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"✓"}),v.jsx("button",{onClick:dt,className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:"✕"})]}):v.jsx("button",{onClick:()=>!T.isReconciled&&st(T,"date"),className:`text-left w-full ${T.isReconciled?"cursor-default px-2 py-1":"hover:bg-gray-700/50 rounded px-2 py-1 cursor-pointer"}`,disabled:T.isReconciled,title:T.isReconciled?"Cannot edit reconciled transaction":"Click to edit date",children:T.date.toLocaleDateString()})}),v.jsx("td",{className:"px-3 py-2 text-xs text-white",children:v.jsxs("div",{className:"flex items-center gap-2",children:[S?.id===T.id&&S.field==="description"&&!T.isReconciled?v.jsxs("div",{className:"flex items-center gap-1 flex-1",children:[v.jsx("input",{type:"text",value:E,onChange:X=>k(X.target.value),onKeyDown:X=>{X.key==="Enter"&&rt(T),X.key==="Escape"&&dt()},className:"flex-1 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white",autoFocus:!0}),v.jsx("button",{onClick:()=>rt(T),className:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"✓"}),v.jsx("button",{onClick:dt,className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:"✕"})]}):v.jsx("button",{onClick:()=>!T.isReconciled&&st(T,"description"),className:`text-left flex-1 ${T.isReconciled?"cursor-default px-2 py-1":"hover:bg-gray-700/50 rounded px-2 py-1 cursor-pointer"}`,disabled:T.isReconciled,title:T.isReconciled?"Cannot edit reconciled transaction":"Click to edit description",children:T.description}),T.isReconciled&&v.jsx("span",{className:"px-2 py-0.5 text-xs bg-green-500/20 text-green-300 rounded-lg border border-green-500/30",children:"Cleared"}),T.description.includes("(Projected)")?v.jsx("span",{className:"px-2 py-0.5 text-xs bg-purple-500/20 text-purple-300 rounded-lg border border-purple-500/30",children:"Projected"}):T.isPending&&!T.isReconciled&&v.jsx("span",{className:"px-2 py-0.5 text-xs bg-yellow-500/20 text-yellow-300 rounded-lg border border-yellow-500/30",children:"Pending"}),T.isManual&&!T.description.includes("(Projected)")&&v.jsx("span",{className:"px-2 py-0.5 text-xs bg-blue-500/20 text-blue-300 rounded-lg border border-blue-500/30",children:"Manual"})]})}),v.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-300",children:S?.id===T.id&&S.field==="category"&&!T.isReconciled?v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("input",{type:"text",value:E,onChange:X=>k(X.target.value),onKeyDown:X=>{X.key==="Enter"&&rt(T),X.key==="Escape"&&dt()},className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white",autoFocus:!0}),v.jsx("button",{onClick:()=>rt(T),className:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"✓"}),v.jsx("button",{onClick:dt,className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:"✕"})]}):v.jsx("button",{onClick:()=>!T.isReconciled&&st(T,"category"),className:`text-left w-full ${T.isReconciled?"cursor-default px-2 py-1":"hover:bg-gray-700/50 rounded px-2 py-1 cursor-pointer"}`,disabled:T.isReconciled,title:T.isReconciled?"Cannot edit reconciled transaction":"Click to edit category",children:T.category})}),v.jsx("td",{className:`px-3 py-2 whitespace-nowrap text-xs text-right font-semibold ${T.amount<0?"text-red-400":"text-green-400"}`,children:S?.id===T.id&&S.field==="amount"&&!T.isReconciled?v.jsxs("div",{className:"flex items-center gap-1 justify-end",children:[v.jsxs("span",{className:"text-gray-300",children:[T.amount<0?"-":"","$"]}),v.jsx("input",{type:"number",step:"0.01",value:E,onChange:X=>k(X.target.value),onKeyDown:X=>{X.key==="Enter"&&rt(T),X.key==="Escape"&&dt()},className:"w-24 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-right",autoFocus:!0}),v.jsx("button",{onClick:()=>rt(T),className:"px-2 py-1 bg-green-500 text-white rounded text-xs hover:bg-green-600",children:"✓"}),v.jsx("button",{onClick:dt,className:"px-2 py-1 bg-red-500 text-white rounded text-xs hover:bg-red-600",children:"✕"})]}):v.jsxs("button",{onClick:()=>!T.isReconciled&&st(T,"amount"),className:`text-right w-full ${T.isReconciled?"cursor-default":"hover:bg-gray-700/50 rounded px-2 py-1 cursor-pointer"}`,disabled:T.isReconciled,title:T.isReconciled?"Cannot edit reconciled transaction":"Click to edit amount",children:[T.amount<0?"-":"","$",Math.abs(T.amount).toFixed(2)]})}),v.jsxs("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-right font-semibold text-white",children:["$",T.balance.toFixed(2)]}),v.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-center text-sm",children:v.jsx("div",{className:"flex gap-2 justify-center items-center",children:T.description.includes("(Projected)")?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("span",{className:"text-xs text-gray-400",children:"Include:"}),v.jsx("button",{onClick:()=>tt(T),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${T.isProjectedVisible!==!1?"bg-blue-500":"bg-gray-600"}`,title:T.isProjectedVisible!==!1?"Included in balance":"Excluded from balance",children:v.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${T.isProjectedVisible!==!1?"translate-x-6":"translate-x-1"}`})})]}),v.jsx("button",{onClick:()=>j(T),className:"px-3 py-1 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-medium text-xs",children:"Mark as Processed"}),v.jsx("button",{onClick:()=>{confirm(`Dismiss this projected transaction?

${T.description}
${T.amount<0?"-":""}$${Math.abs(T.amount).toFixed(2)}

It will not appear again.`)&&l(T.id)},className:"px-3 py-1 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium text-xs",title:"Dismiss this projection",children:"Dismiss"})]}):v.jsxs(v.Fragment,{children:[!$(T)&&v.jsx("button",{onClick:()=>y(T),className:"px-3 py-1 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-medium text-xs",children:"Make Recurring"}),v.jsx("button",{onClick:()=>{confirm(`Are you sure you want to permanently remove this transaction?

${T.description}
${T.amount<0?"-":""}$${Math.abs(T.amount).toFixed(2)}

This action cannot be undone.`)&&i(T.id)},className:"px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium text-xs",title:"Permanently remove this transaction",children:"Remove"})]})})})]},T.id))})]})}),u&&v.jsx(Ix,{onAdd:T=>{t(T),h(!1)},onCancel:()=>h(!1)}),b&&v.jsx(Ux,{transaction:b,onSave:T=>{s(T),y(null)},onCancel:()=>y(null)})]})},Ix=({onAdd:g,onCancel:t})=>{const[i,s]=vt.useState({date:new Date().toISOString().split("T")[0],description:"",category:"",amount:"",isPending:!1}),r=l=>{l.preventDefault(),g({date:new Date(i.date),description:i.description,category:i.category,amount:parseFloat(i.amount),balance:0,isPending:i.isPending,isManual:!0})};return v.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 w-full max-w-md border border-gray-700 shadow-2xl",children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Add Manual Transaction"}),v.jsxs("form",{onSubmit:r,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Date"}),v.jsx("input",{type:"date",value:i.date,onChange:l=>s({...i,date:l.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Description"}),v.jsx("input",{type:"text",value:i.description,onChange:l=>s({...i,description:l.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Grocery Store",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Category"}),v.jsx("input",{type:"text",value:i.category,onChange:l=>s({...i,category:l.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Groceries",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Amount (negative for expenses, positive for income)"}),v.jsx("input",{type:"number",step:"0.01",value:i.amount,onChange:l=>s({...i,amount:l.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white placeholder-gray-500 focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"-25.50",required:!0})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("input",{type:"checkbox",id:"isPending",checked:i.isPending,onChange:l=>s({...i,isPending:l.target.checked}),className:"h-4 w-4 text-blue-500 rounded bg-gray-700 border-gray-600"}),v.jsx("label",{htmlFor:"isPending",className:"text-sm text-gray-300",children:"Mark as Pending"})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all font-medium",children:"Add Transaction"}),v.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 bg-gray-700 text-gray-300 rounded-xl hover:bg-gray-600 transition-all",children:"Cancel"})]})]})]})})},Ux=({transaction:g,onSave:t,onCancel:i})=>{const s=g.amount>0,r=new Date(g.date);r.setDate(r.getDate()+30);const[l,o]=vt.useState({description:g.description,category:g.category,amount:Math.abs(g.amount).toString(),frequency:"monthly",nextDueDate:r.toISOString().split("T")[0],dayOfMonth:g.date.getDate().toString()}),u=h=>{h.preventDefault();const d=parseFloat(l.amount),p=s?Math.abs(d):-Math.abs(d);t({description:l.description,category:l.category,amount:p,frequency:l.frequency,dayOfMonth:l.frequency==="monthly"?parseInt(l.dayOfMonth):void 0,nextDueDate:new Date(l.nextDueDate),isActive:!0})};return v.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 w-full max-w-md border border-gray-700 shadow-2xl",children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Create Recurring Bill"}),v.jsxs("form",{onSubmit:u,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),v.jsx("input",{type:"text",value:l.description,onChange:h=>o({...l,description:h.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),v.jsx("input",{type:"text",value:l.category,onChange:h=>o({...l,category:h.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Amount"}),v.jsx("input",{type:"number",step:"0.01",value:l.amount,onChange:h=>o({...l,amount:h.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0}),v.jsx("p",{className:"text-xs text-gray-500 mt-1",children:s?"Income (positive amount)":"Expense (negative amount)"})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Frequency"}),v.jsxs("select",{value:l.frequency,onChange:h=>o({...l,frequency:h.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[v.jsx("option",{value:"weekly",children:"Weekly"}),v.jsx("option",{value:"biweekly",children:"Bi-weekly"}),v.jsx("option",{value:"monthly",children:"Monthly"}),v.jsx("option",{value:"yearly",children:"Yearly"})]})]}),l.frequency==="monthly"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Day of Month"}),v.jsx("input",{type:"number",min:"1",max:"31",value:l.dayOfMonth,onChange:h=>o({...l,dayOfMonth:h.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Next Due Date"}),v.jsx("input",{type:"date",value:l.nextDueDate,onChange:h=>o({...l,nextDueDate:h.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all font-medium",children:"Create Recurring Bill"}),v.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 bg-gray-700 text-gray-300 rounded-xl hover:bg-gray-600 transition-all",children:"Cancel"})]})]})]})})},Hx=({bills:g,onAddBill:t,onUpdateBill:i,onDeleteBill:s})=>{const[r,l]=vt.useState(!1),[o,u]=vt.useState(null),h=g.filter(p=>p.isActive),d=g.filter(p=>!p.isActive);return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Recurring Bills"}),v.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"+ Add Recurring Bill"})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Active Bills"}),h.length===0?v.jsx("p",{className:"text-gray-500",children:"No active recurring bills. Add one to see projections."}):v.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:h.map(p=>v.jsx(nm,{bill:p,onEdit:()=>u(p),onToggleActive:()=>i({...p,isActive:!1}),onDelete:()=>s(p.id)},p.id))})]}),d.length>0&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-500 mb-3",children:"Inactive Bills"}),v.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:d.map(p=>v.jsx(nm,{bill:p,onEdit:()=>u(p),onToggleActive:()=>i({...p,isActive:!0}),onDelete:()=>s(p.id)},p.id))})]}),(r||o)&&v.jsx(qx,{bill:o,onSave:p=>{o?(i({...p,id:o.id}),u(null)):(t(p),l(!1))},onCancel:()=>{l(!1),u(null)}})]})},nm=({bill:g,onEdit:t,onToggleActive:i,onDelete:s})=>{const r=l=>l.charAt(0).toUpperCase()+l.slice(1);return v.jsxs("div",{className:`bg-white rounded-lg shadow p-4 border-l-4 ${g.isActive?"border-blue-500":"border-gray-300"}`,children:[v.jsxs("div",{className:"flex justify-between items-start mb-2",children:[v.jsx("h4",{className:"font-semibold text-gray-900",children:g.description}),v.jsxs("span",{className:`text-2xl font-bold ${g.amount<0?"text-red-600":"text-green-600"}`,children:["$",Math.abs(g.amount).toFixed(2)]})]}),v.jsxs("div",{className:"space-y-1 text-sm text-gray-600 mb-3",children:[v.jsxs("p",{children:["Category: ",g.category]}),v.jsxs("p",{children:["Frequency: ",r(g.frequency)]}),v.jsxs("p",{children:["Next Due: ",g.nextDueDate.toLocaleDateString()]}),g.dayOfMonth&&v.jsxs("p",{children:["Day of Month: ",g.dayOfMonth]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:t,className:"flex-1 px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:"Edit"}),v.jsx("button",{onClick:i,className:`flex-1 px-3 py-1 text-sm rounded transition-colors ${g.isActive?"bg-yellow-100 text-yellow-700 hover:bg-yellow-200":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:g.isActive?"Pause":"Activate"}),v.jsx("button",{onClick:()=>{confirm("Are you sure you want to delete this recurring bill?")&&s()},className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:"Delete"})]})]})},qx=({bill:g,onSave:t,onCancel:i})=>{const[s,r]=vt.useState({description:g?.description||"",category:g?.category||"",amount:g?Math.abs(g.amount).toString():"",isExpense:g?g.amount<0:!0,frequency:g?.frequency||"monthly",dayOfMonth:g?.dayOfMonth?.toString()||"",dayOfWeek:g?.dayOfWeek?.toString()||"",nextDueDate:g?.nextDueDate?g.nextDueDate.toISOString().split("T")[0]:new Date().toISOString().split("T")[0]}),l=o=>{o.preventDefault();const u=parseFloat(s.amount)*(s.isExpense?-1:1);t({description:s.description,category:s.category,amount:u,frequency:s.frequency,dayOfMonth:s.dayOfMonth?parseInt(s.dayOfMonth):void 0,dayOfWeek:s.dayOfWeek?parseInt(s.dayOfWeek):void 0,nextDueDate:new Date(s.nextDueDate),isActive:!0})};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[v.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:[g?"Edit":"Add"," Recurring Bill"]}),v.jsxs("form",{onSubmit:l,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),v.jsx("input",{type:"text",value:s.description,onChange:o=>r({...s,description:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Electric Bill",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),v.jsx("input",{type:"text",value:s.category,onChange:o=>r({...s,category:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Utilities",required:!0})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Amount"}),v.jsx("input",{type:"number",step:"0.01",value:s.amount,onChange:o=>r({...s,amount:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"100.00",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),v.jsxs("select",{value:s.isExpense?"expense":"income",onChange:o=>r({...s,isExpense:o.target.value==="expense"}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"expense",children:"Expense"}),v.jsx("option",{value:"income",children:"Income"})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Frequency"}),v.jsxs("select",{value:s.frequency,onChange:o=>r({...s,frequency:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"weekly",children:"Weekly"}),v.jsx("option",{value:"biweekly",children:"Bi-weekly"}),v.jsx("option",{value:"monthly",children:"Monthly"}),v.jsx("option",{value:"yearly",children:"Yearly"})]})]}),s.frequency==="monthly"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day of Month (1-31)"}),v.jsx("input",{type:"number",min:"1",max:"31",value:s.dayOfMonth,onChange:o=>r({...s,dayOfMonth:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"15"})]}),s.frequency==="weekly"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day of Week"}),v.jsxs("select",{value:s.dayOfWeek,onChange:o=>r({...s,dayOfWeek:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"",children:"Select a day"}),v.jsx("option",{value:"0",children:"Sunday"}),v.jsx("option",{value:"1",children:"Monday"}),v.jsx("option",{value:"2",children:"Tuesday"}),v.jsx("option",{value:"3",children:"Wednesday"}),v.jsx("option",{value:"4",children:"Thursday"}),v.jsx("option",{value:"5",children:"Friday"}),v.jsx("option",{value:"6",children:"Saturday"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Next Due Date"}),v.jsx("input",{type:"date",value:s.nextDueDate,onChange:o=>r({...s,nextDueDate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",required:!0})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[g?"Update":"Add"," Bill"]}),v.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})})},Gx=g=>{const t=Vx(g),i=[];return t.forEach(s=>{if(s.length<2)return;const r=Xx(s);if(!r)return;const l=Math.round(s.reduce((d,p)=>d+p.amount,0)/s.length*100)/100,o=$x(s,r,l),h=l>0?35:50;o>=h&&i.push({description:s[0].description,category:s[0].category,averageAmount:l,frequency:r,occurrences:s,confidence:o,suggestedNextDate:Kx(s,r)})}),i.sort((s,r)=>r.confidence-s.confidence)},Vx=g=>{const t=new Map;return g.forEach(i=>{if(i.isManual||i.isPending)return;const s=Yx(i.description),r=i.amount>=0?`INCOME:${s}`:`EXPENSE:${s}`;t.has(r)||t.set(r,[]),t.get(r).push(i)}),Array.from(t.values())},Yx=g=>g.toLowerCase().replace(/\d+/g,"").replace(/[^\w\s]/g,"").trim(),Xx=g=>{if(g.length<2)return null;const t=[...g].sort((r,l)=>r.date.getTime()-l.date.getTime()),i=[];for(let r=1;r<t.length;r++){const l=Math.round((t[r].date.getTime()-t[r-1].date.getTime())/864e5);i.push(l)}const s=i.reduce((r,l)=>r+l,0)/i.length;return s>=5&&s<=9?"weekly":s>=12&&s<=16?"biweekly":s>=27&&s<=33?"monthly":s>=355&&s<=375?"yearly":null},$x=(g,t,i)=>{let s=0;s+=Math.min(g.length*10,40);const r=g.map(h=>Math.abs(h.amount)),l=Math.max(...r),o=Math.min(...r),u=(l-o)/Math.abs(i);if(u<.1?s+=30:u<.2?s+=20:u<.3&&(s+=10),g.length>=2){const h=[...g].sort((y,A)=>y.date.getTime()-A.date.getTime()),d=[];for(let y=1;y<h.length;y++){const A=Math.round((h[y].date.getTime()-h[y-1].date.getTime())/864e5);d.push(A)}const p=d.reduce((y,A)=>y+A,0)/d.length,b=Math.max(...d.map(y=>Math.abs(y-p)));b<3?s+=30:b<7&&(s+=15)}return Math.min(s,100)},Kx=(g,t)=>{const s=[...g].sort((l,o)=>o.date.getTime()-l.date.getTime())[0].date,r=new Date(s);switch(t){case"weekly":r.setDate(r.getDate()+7);break;case"biweekly":r.setDate(r.getDate()+14);break;case"monthly":r.setMonth(r.getMonth()+1);break;case"yearly":r.setFullYear(r.getFullYear()+1);break}return r},Qx=({transactions:g,existingBills:t,onAddBill:i})=>{const[s,r]=vt.useState([]),[l,o]=vt.useState(null),[u,h]=vt.useState(new Set);vt.useEffect(()=>{const b=Gx(g).filter(y=>{const A=u.has(y.description),w=t.some(S=>S.description.toLowerCase().includes(y.description.toLowerCase())||y.description.toLowerCase().includes(S.description.toLowerCase()));return!A&&!w});r(b)},[g,t,u]);const d=p=>{h(new Set([...u,p]))};return s.length===0?v.jsx("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:v.jsx("p",{className:"text-gray-400 text-center",children:"No recurring bill suggestions found. Import more transactions to detect patterns."})}):v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h3",{className:"text-lg font-semibold text-white",children:"Suggested Recurring Bills"}),v.jsxs("span",{className:"text-sm text-gray-400",children:[s.length," suggestions"]})]}),v.jsx("div",{className:"grid gap-4",children:s.map((p,b)=>v.jsx(Wx,{suggestion:p,onAdd:()=>o(p),onDismiss:()=>d(p.description)},b))}),l&&v.jsx(Zx,{suggestion:l,onSave:p=>{i(p),o(null),d(l.description)},onCancel:()=>o(null)})]})},Wx=({suggestion:g,onAdd:t,onDismiss:i})=>{const s=l=>l>=80?"text-green-400":l>=60?"text-yellow-400":"text-orange-400",r=g.averageAmount>0;return v.jsxs("div",{className:`bg-gray-800/80 rounded-2xl p-5 border transition-all ${r?"border-green-500/30 hover:border-green-500/50":"border-red-500/30 hover:border-red-500/50"}`,children:[v.jsxs("div",{className:"flex justify-between items-start mb-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("h4",{className:"font-semibold text-white text-lg",children:g.description}),v.jsx("span",{className:`px-2 py-0.5 text-xs rounded-lg font-medium ${r?"bg-green-500/20 text-green-300 border border-green-500/30":"bg-red-500/20 text-red-300 border border-red-500/30"}`,children:r?"Income":"Expense"})]}),v.jsx("p",{className:"text-sm text-gray-400 mt-1",children:g.category})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("p",{className:`text-2xl font-bold ${r?"text-green-400":"text-red-400"}`,children:[r?"+":"","$",Math.abs(g.averageAmount).toFixed(2)]}),v.jsxs("p",{className:`text-xs font-medium mt-1 ${s(g.confidence)}`,children:[g.confidence,"% confidence"]})]})]}),v.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400 mb-4",children:[v.jsx("span",{className:"capitalize",children:g.frequency}),v.jsx("span",{children:"•"}),v.jsxs("span",{children:[g.occurrences.length," occurrences"]}),v.jsx("span",{children:"•"}),v.jsxs("span",{children:["Next: ",g.suggestedNextDate.toLocaleDateString()]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all font-medium",children:"Add to Recurring Bills"}),v.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-700 text-gray-300 rounded-xl hover:bg-gray-600 transition-all",children:"Dismiss"})]})]})},Zx=({suggestion:g,onSave:t,onCancel:i})=>{const s=g.averageAmount>0,[r,l]=vt.useState({description:g.description,category:g.category,amount:Math.abs(g.averageAmount).toString(),isIncome:s,frequency:g.frequency,nextDueDate:g.suggestedNextDate.toISOString().split("T")[0],dayOfMonth:g.frequency==="monthly"?g.suggestedNextDate.getDate().toString():""}),o=u=>{u.preventDefault();const h=parseFloat(r.amount),d=r.isIncome?Math.abs(h):-Math.abs(h);t({description:r.description,category:r.category,amount:d,frequency:r.frequency,dayOfMonth:r.dayOfMonth?parseInt(r.dayOfMonth):void 0,nextDueDate:new Date(r.nextDueDate),isActive:!0})};return v.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-gray-800 rounded-3xl p-6 w-full max-w-md border border-gray-700 shadow-2xl",children:[v.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Review Recurring Bill"}),v.jsxs("form",{onSubmit:o,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Description"}),v.jsx("input",{type:"text",value:r.description,onChange:u=>l({...r,description:u.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Category"}),v.jsx("input",{type:"text",value:r.category,onChange:u=>l({...r,category:u.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Amount"}),v.jsx("input",{type:"number",step:"0.01",value:r.amount,onChange:u=>l({...r,amount:u.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Type"}),v.jsxs("select",{value:r.isIncome?"income":"expense",onChange:u=>l({...r,isIncome:u.target.value==="income"}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[v.jsx("option",{value:"expense",children:"Expense"}),v.jsx("option",{value:"income",children:"Income"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Frequency"}),v.jsxs("select",{value:r.frequency,onChange:u=>l({...r,frequency:u.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[v.jsx("option",{value:"weekly",children:"Weekly"}),v.jsx("option",{value:"biweekly",children:"Bi-weekly"}),v.jsx("option",{value:"monthly",children:"Monthly"}),v.jsx("option",{value:"yearly",children:"Yearly"})]})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Next Due Date"}),v.jsx("input",{type:"date",value:r.nextDueDate,onChange:u=>l({...r,nextDueDate:u.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),r.frequency==="monthly"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-400 mb-1",children:"Day of Month (1-31)"}),v.jsx("input",{type:"number",min:"1",max:"31",value:r.dayOfMonth,onChange:u=>l({...r,dayOfMonth:u.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all font-medium",children:"Add Bill"}),v.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 bg-gray-700 text-gray-300 rounded-xl hover:bg-gray-600 transition-all",children:"Cancel"})]})]})]})})},Jx=({transactions:g,currentBalance:t})=>{const[i,s]=vt.useState(!0),r=new Date;r.setHours(0,0,0,0);const l=g.filter(A=>{const w=new Date(A.date);return w.setHours(0,0,0,0),w>r}).sort((A,w)=>A.date.getTime()-w.date.getTime()),o=i?l:l.filter(A=>!A.description.includes("(Projected)")),u=o.reduce((A,w)=>{const S=`${w.date.getFullYear()}-${String(w.date.getMonth()+1).padStart(2,"0")}`;return A[S]||(A[S]=[]),A[S].push(w),A},{}),h=Object.keys(u).sort(),d=o.filter(A=>A.amount>0).reduce((A,w)=>A+w.amount,0),p=o.filter(A=>A.amount<0).reduce((A,w)=>A+Math.abs(w.amount),0),b=o.length>0?o[o.length-1].balance:t,y=b-t;return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Balance Projections"}),v.jsx("p",{className:"text-gray-400",children:"Future balance projections based on recurring bills and scheduled transactions"})]}),v.jsxs("div",{className:"flex items-center gap-3 bg-gray-800 rounded-xl px-4 py-3 border border-gray-700",children:[v.jsx("span",{className:"text-sm text-gray-300",children:"Include Recurring Bills"}),v.jsx("button",{onClick:()=>s(!i),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${i?"bg-blue-500":"bg-gray-600"}`,children:v.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${i?"translate-x-6":"translate-x-1"}`})})]})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[v.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 rounded-2xl p-6 border border-blue-500/30",children:[v.jsx("h3",{className:"text-sm font-medium text-blue-300 mb-2",children:"Current Balance"}),v.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",t.toFixed(2)]})]}),v.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-2xl p-6 border border-green-500/30",children:[v.jsx("h3",{className:"text-sm font-medium text-green-300 mb-2",children:"Expected Income"}),v.jsxs("p",{className:"text-3xl font-bold text-white",children:["+$",d.toFixed(2)]})]}),v.jsxs("div",{className:"bg-gradient-to-br from-red-500/20 to-red-600/20 rounded-2xl p-6 border border-red-500/30",children:[v.jsx("h3",{className:"text-sm font-medium text-red-300 mb-2",children:"Expected Expenses"}),v.jsxs("p",{className:"text-3xl font-bold text-white",children:["-$",p.toFixed(2)]})]}),v.jsxs("div",{className:`bg-gradient-to-br rounded-2xl p-6 border ${y>=0?"from-purple-500/20 to-purple-600/20 border-purple-500/30":"from-orange-500/20 to-orange-600/20 border-orange-500/30"}`,children:[v.jsx("h3",{className:`text-sm font-medium mb-2 ${y>=0?"text-purple-300":"text-orange-300"}`,children:"Projected End Balance"}),v.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",b.toFixed(2)]}),v.jsxs("p",{className:`text-sm mt-1 ${y>=0?"text-green-400":"text-red-400"}`,children:[y>=0?"+":"",y.toFixed(2)," net change"]})]})]}),o.length===0?v.jsx("div",{className:"bg-gray-800/50 rounded-2xl p-12 border border-gray-700 text-center",children:v.jsx("p",{className:"text-gray-400",children:"No future transactions projected. Add recurring bills to see balance projections."})}):v.jsxs("div",{className:"space-y-4",children:[v.jsx("h3",{className:"text-xl font-semibold text-white",children:"Monthly Breakdown"}),h.map(A=>{const w=u[A],[S,C]=A.split("-"),E=new Date(parseInt(S),parseInt(C)-1).toLocaleDateString("en-US",{month:"long",year:"numeric"}),k=w.filter(F=>F.amount>0).reduce((F,B)=>F+B.amount,0),O=w.filter(F=>F.amount<0).reduce((F,B)=>F+Math.abs(B.amount),0),P=w[0].balance-w[0].amount,I=w[w.length-1].balance;return v.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-4",children:[v.jsx("h4",{className:"text-lg font-semibold text-white",children:E}),v.jsxs("div",{className:"text-right",children:[v.jsx("p",{className:"text-sm text-gray-400",children:"End Balance"}),v.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",I.toFixed(2)]})]})]}),v.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[v.jsxs("div",{className:"bg-gray-700/50 rounded-xl p-3",children:[v.jsx("p",{className:"text-xs text-gray-400",children:"Start"}),v.jsxs("p",{className:"text-lg font-semibold text-white",children:["$",P.toFixed(2)]})]}),v.jsxs("div",{className:"bg-green-500/20 rounded-xl p-3",children:[v.jsx("p",{className:"text-xs text-green-300",children:"Income"}),v.jsxs("p",{className:"text-lg font-semibold text-white",children:["+$",k.toFixed(2)]})]}),v.jsxs("div",{className:"bg-red-500/20 rounded-xl p-3",children:[v.jsx("p",{className:"text-xs text-red-300",children:"Expenses"}),v.jsxs("p",{className:"text-lg font-semibold text-white",children:["-$",O.toFixed(2)]})]})]}),v.jsx("div",{className:"space-y-2",children:w.map((F,B)=>v.jsxs("div",{className:"flex justify-between items-center bg-gray-700/30 rounded-xl p-3",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"text-white font-medium",children:F.description}),v.jsxs("p",{className:"text-sm text-gray-400",children:[F.date.toLocaleDateString()," • ",F.category]})]}),v.jsxs("div",{className:"text-right",children:[v.jsxs("p",{className:`font-semibold ${F.amount<0?"text-red-400":"text-green-400"}`,children:[F.amount<0?"-":"+","$",Math.abs(F.amount).toFixed(2)]}),v.jsxs("p",{className:"text-sm text-gray-400",children:["$",F.balance.toFixed(2)]})]})]},B))})]},A)})]})]})},tA=({debts:g,onAddDebt:t,onUpdateDebt:i,onDeleteDebt:s})=>{const[r,l]=vt.useState(!1),[o,u]=vt.useState(null),h=g.reduce((b,y)=>b+y.currentBalance,0),d=g.reduce((b,y)=>b+y.minimumPayment,0),p=g.length>0?g.reduce((b,y)=>b+y.interestRate*y.currentBalance,0)/h:0;return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{className:"flex justify-between items-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Debts & Credit Cards"}),v.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"+ Add Debt"})]}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[v.jsxs("div",{className:"bg-red-50 rounded-lg p-6 border border-red-200",children:[v.jsx("h3",{className:"text-sm font-medium text-red-900 mb-2",children:"Total Debt"}),v.jsxs("p",{className:"text-3xl font-bold text-red-600",children:["$",h.toFixed(2)]})]}),v.jsxs("div",{className:"bg-orange-50 rounded-lg p-6 border border-orange-200",children:[v.jsx("h3",{className:"text-sm font-medium text-orange-900 mb-2",children:"Total Min. Payment"}),v.jsxs("p",{className:"text-3xl font-bold text-orange-600",children:["$",d.toFixed(2)]})]}),v.jsxs("div",{className:"bg-purple-50 rounded-lg p-6 border border-purple-200",children:[v.jsx("h3",{className:"text-sm font-medium text-purple-900 mb-2",children:"Avg. Interest Rate"}),v.jsxs("p",{className:"text-3xl font-bold text-purple-600",children:[isNaN(p)?"0.00":p.toFixed(2),"%"]})]})]}),g.length===0?v.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:v.jsx("p",{className:"text-gray-500",children:"No debts tracked. Add one to start managing your debt."})}):v.jsx("div",{className:"space-y-4",children:g.map(b=>v.jsx(eA,{debt:b,onEdit:()=>u(b),onDelete:()=>s(b.id)},b.id))}),(r||o)&&v.jsx(iA,{debt:o,onSave:b=>{o?(i({...b,id:o.id}),u(null)):(t(b),l(!1))},onCancel:()=>{l(!1),u(null)}})]})},eA=({debt:g,onEdit:t,onDelete:i})=>{const s=l=>({credit_card:"Credit Card",loan:"Loan",mortgage:"Mortgage",student_loan:"Student Loan",other:"Other"})[l],r=l=>({credit_card:"bg-red-100 text-red-800",loan:"bg-orange-100 text-orange-800",mortgage:"bg-blue-100 text-blue-800",student_loan:"bg-purple-100 text-purple-800",other:"bg-gray-100 text-gray-800"})[l];return v.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[v.jsxs("div",{className:"flex justify-between items-start mb-4",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-bold text-gray-900",children:g.name}),v.jsx("span",{className:`inline-block px-2 py-1 text-xs rounded mt-2 ${r(g.type)}`,children:s(g.type)})]}),v.jsxs("div",{className:"text-right",children:[v.jsx("p",{className:"text-sm text-gray-600",children:"Current Balance"}),v.jsxs("p",{className:"text-3xl font-bold text-red-600",children:["$",g.currentBalance.toFixed(2)]})]})]}),v.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-600",children:"Interest Rate"}),v.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:[g.interestRate.toFixed(2),"%"]})]}),v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-600",children:"Min. Payment"}),v.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",g.minimumPayment.toFixed(2)]})]}),g.dueDate&&v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-600",children:"Due Day"}),v.jsx("p",{className:"text-lg font-semibold text-gray-900",children:g.dueDate})]}),g.institution&&v.jsxs("div",{children:[v.jsx("p",{className:"text-sm text-gray-600",children:"Institution"}),v.jsx("p",{className:"text-lg font-semibold text-gray-900",children:g.institution})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:t,className:"flex-1 px-4 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:"Edit"}),v.jsx("button",{onClick:()=>{confirm(`Are you sure you want to delete ${g.name}?`)&&i()},className:"px-4 py-2 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors",children:"Delete"})]})]})},iA=({debt:g,onSave:t,onCancel:i})=>{const[s,r]=vt.useState({name:g?.name||"",type:g?.type||"credit_card",currentBalance:g?.currentBalance.toString()||"",interestRate:g?.interestRate.toString()||"",minimumPayment:g?.minimumPayment.toString()||"",dueDate:g?.dueDate?.toString()||"",institution:g?.institution||""}),l=o=>{o.preventDefault(),t({name:s.name,type:s.type,currentBalance:parseFloat(s.currentBalance),interestRate:parseFloat(s.interestRate),minimumPayment:parseFloat(s.minimumPayment),dueDate:s.dueDate?parseInt(s.dueDate):void 0,institution:s.institution||void 0})};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[v.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:[g?"Edit":"Add"," Debt"]}),v.jsxs("form",{onSubmit:l,className:"space-y-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),v.jsx("input",{type:"text",value:s.name,onChange:o=>r({...s,name:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Chase Freedom",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),v.jsxs("select",{value:s.type,onChange:o=>r({...s,type:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[v.jsx("option",{value:"credit_card",children:"Credit Card"}),v.jsx("option",{value:"loan",children:"Loan"}),v.jsx("option",{value:"mortgage",children:"Mortgage"}),v.jsx("option",{value:"student_loan",children:"Student Loan"}),v.jsx("option",{value:"other",children:"Other"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Balance"}),v.jsx("input",{type:"number",step:"0.01",value:s.currentBalance,onChange:o=>r({...s,currentBalance:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"5000.00",required:!0})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Interest Rate (%)"}),v.jsx("input",{type:"number",step:"0.01",value:s.interestRate,onChange:o=>r({...s,interestRate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"18.99",required:!0})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Min. Payment"}),v.jsx("input",{type:"number",step:"0.01",value:s.minimumPayment,onChange:o=>r({...s,minimumPayment:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"100.00",required:!0})]})]}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Due Day (1-31)"}),v.jsx("input",{type:"number",min:"1",max:"31",value:s.dueDate,onChange:o=>r({...s,dueDate:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"15"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Institution"}),v.jsx("input",{type:"text",value:s.institution,onChange:o=>r({...s,institution:o.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"Chase"})]})]}),v.jsxs("div",{className:"flex gap-3 pt-4",children:[v.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[g?"Update":"Add"," Debt"]}),v.jsx("button",{type:"button",onClick:i,className:"flex-1 px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]})})},Im="finance-data.json",Um=g=>({...g,transactions:g.transactions.map(t=>({...t,date:new Date(t.date)})),recurringBills:g.recurringBills.map(t=>({...t,nextDueDate:new Date(t.nextDueDate)}))}),Hm=()=>"showDirectoryPicker"in window,nA=async()=>{if(!Hm())return alert("File System Access API is not supported in this browser. Please use Safari, Chrome, or Edge."),null;try{return await window.showDirectoryPicker()}catch(g){return g.name!=="AbortError"&&(console.error("Error selecting folder:",g),alert("Failed to select folder. Please try again.")),null}},sA=async(g,t)=>{try{if(await g.queryPermission({mode:"readwrite"})!=="granted"&&await g.requestPermission({mode:"readwrite"})!=="granted")return alert("Permission denied. Please grant access to save data."),!1;const r=await(await g.getFileHandle(Im,{create:!0})).createWritable(),l={...t,lastModified:new Date().toISOString()};return await r.write(JSON.stringify(l,null,2)),await r.close(),console.log("Data saved to iCloud Drive"),!0}catch(i){return console.error("Error saving to iCloud:",i),alert("Failed to save data to iCloud Drive. Please try again."),!1}},sm=async g=>{try{if(await g.queryPermission({mode:"read"})!=="granted"&&await g.requestPermission({mode:"read"})!=="granted")return alert("Permission denied. Please grant access to load data."),null;const r=await(await(await g.getFileHandle(Im)).getFile()).text(),l=JSON.parse(r);return Um(l)}catch(t){return t.name==="NotFoundError"?(console.log("No existing data file found, will create on first save"),null):(console.error("Error loading from iCloud:",t),alert("Failed to load data from iCloud Drive."),null)}},aA=g=>{const t={...g,lastModified:new Date().toISOString()},i=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(i),r=document.createElement("a");r.href=s,r.download=`finance-data-${new Date().toISOString().split("T")[0]}.json`,r.click(),URL.revokeObjectURL(s)},rA=()=>new Promise(g=>{const t=document.createElement("input");t.type="file",t.accept="application/json",t.onchange=async i=>{const s=i.target.files?.[0];if(!s){g(null);return}try{const r=await s.text(),l=JSON.parse(r);g(Um(l))}catch(r){console.error("Error importing data:",r),alert("Failed to import data. Please check the file format."),g(null)}},t.click()}),lA=({transactions:g,accounts:t,activeAccountId:i,recurringBills:s,debts:r,onDataLoaded:l})=>{const[o,u]=vt.useState(null),[h,d]=vt.useState(!1),p=Hm(),b=async()=>{const C=await nA();if(C){u(C);const E=await sm(C);E&&confirm("Found existing data in this folder. Load it? This will replace your current data.")&&l({transactions:E.transactions,accounts:E.accounts||(E.account?[E.account]:[]),activeAccountId:E.activeAccountId||E.account?.id||"",recurringBills:E.recurringBills,debts:E.debts})}},y=async()=>{if(!o){alert("Please select an iCloud Drive folder first.");return}d(!0);const C=await sA(o,{transactions:g,accounts:t,activeAccountId:i,recurringBills:s,debts:r,lastModified:new Date().toISOString()});d(!1),C&&alert("Data synced to iCloud Drive successfully!")},A=async()=>{if(!o){alert("Please select an iCloud Drive folder first.");return}d(!0);const C=await sm(o);d(!1),C&&confirm("This will replace your current data with data from iCloud. Continue?")&&(l({transactions:C.transactions,accounts:C.accounts||(C.account?[C.account]:[]),activeAccountId:C.activeAccountId||C.account?.id||"",recurringBills:C.recurringBills,debts:C.debts}),alert("Data loaded from iCloud Drive successfully!"))},w=()=>{aA({transactions:g,accounts:t,activeAccountId:i,recurringBills:s,debts:r,lastModified:new Date().toISOString()})},S=async()=>{const C=await rA();C&&confirm("This will replace your current data with data from the file. Continue?")&&(l({transactions:C.transactions,accounts:C.accounts||(C.account?[C.account]:[]),activeAccountId:C.activeAccountId||C.account?.id||"",recurringBills:C.recurringBills,debts:C.debts}),alert("Data imported successfully!"))};return v.jsxs("div",{className:"space-y-6",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"iCloud Drive Sync"}),v.jsx("p",{className:"text-gray-400",children:"Sync your financial data to a shared iCloud Drive folder accessible by your Apple Family"})]}),p?v.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 rounded-2xl p-6 border border-blue-500/30",children:[v.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[v.jsx("svg",{className:"w-8 h-8 text-blue-400",fill:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{d:"M19.35 10.04A7.49 7.49 0 0 0 12 4C9.11 4 6.6 5.64 5.35 8.04A5.994 5.994 0 0 0 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96z"})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-white",children:"iCloud Drive Integration"}),v.jsx("p",{className:"text-sm text-gray-400",children:o?`Connected to: ${o.name}`:"Not connected"})]})]}),v.jsx("div",{className:"space-y-3",children:o?v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsx("button",{onClick:y,disabled:h,className:"px-4 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Syncing...":"Save to iCloud"}),v.jsx("button",{onClick:A,disabled:h,className:"px-4 py-3 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-all font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Loading...":"Load from iCloud"}),v.jsx("button",{onClick:b,className:"col-span-2 px-4 py-2 bg-gray-700 text-gray-300 rounded-xl hover:bg-gray-600 transition-all",children:"Change Folder"})]}):v.jsx("button",{onClick:b,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-xl hover:from-blue-600 hover:to-purple-600 transition-all font-medium",children:"Select iCloud Drive Folder"})}),v.jsx("div",{className:"mt-4 p-4 bg-blue-500/10 rounded-xl border border-blue-500/20",children:v.jsxs("p",{className:"text-xs text-blue-300",children:[v.jsx("strong",{children:"Tip:"})," Create a shared folder in iCloud Drive, share it with your family member, and both select the same folder. Changes will sync automatically via iCloud."]})})]}):v.jsxs("div",{className:"bg-yellow-500/20 rounded-2xl p-6 border border-yellow-500/30",children:[v.jsx("h3",{className:"text-lg font-semibold text-yellow-300 mb-2",children:"Browser Not Supported"}),v.jsx("p",{className:"text-sm text-yellow-200",children:"Your browser doesn't support File System Access API. Please use Safari, Chrome, or Edge for iCloud Drive integration, or use the manual export/import below."})]}),v.jsxs("div",{className:"bg-gray-800 rounded-2xl p-6 border border-gray-700",children:[v.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Manual Backup"}),v.jsx("p",{className:"text-sm text-gray-400 mb-4",children:"Export your data to a file and save it to iCloud Drive manually, or import from a file."}),v.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[v.jsx("button",{onClick:w,className:"px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-500 text-white rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all font-medium",children:"Export Data"}),v.jsx("button",{onClick:S,className:"px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 transition-all font-medium",children:"Import Data"})]})]}),v.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:[v.jsx("h3",{className:"text-lg font-semibold text-white mb-3",children:"Setup Instructions"}),v.jsxs("ol",{className:"text-sm text-gray-300 space-y-2 list-decimal list-inside",children:[v.jsx("li",{children:'Create a new folder in your iCloud Drive (e.g., "Family Finances")'}),v.jsx("li",{children:'Right-click the folder and select "Share" → Add your family member'}),v.jsx("li",{children:'Both of you click "Select iCloud Drive Folder" and choose the same folder'}),v.jsx("li",{children:"The first person saves data to iCloud"}),v.jsx("li",{children:"The second person loads the data from iCloud"}),v.jsx("li",{children:'From then on, click "Save to iCloud" after making changes'}),v.jsx("li",{children:'Click "Load from iCloud" to get the latest data'})]})]})]})},oA=({accounts:g,activeAccountId:t,onSelectAccount:i,onManageAccounts:s})=>{const r=g.find(u=>u.id===t),l=u=>{switch(u){case"checking":return"💳";case"savings":return"🏦";case"credit_card":return"💎";default:return"💵"}},o=u=>{switch(u){case"checking":return"Checking";case"savings":return"Savings";case"credit_card":return"Credit Card";default:return"Account"}};return v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsxs("div",{className:"relative",children:[v.jsx("select",{value:t,onChange:u=>i(u.target.value),className:"appearance-none bg-gray-800 text-white border border-gray-700 rounded-2xl px-6 py-3 pr-12 font-medium hover:bg-gray-700 transition-colors cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(u=>v.jsxs("option",{value:u.id,children:[l(u.accountType)," ",u.name," (•••• ",u.accountNumber.slice(-4),")"]},u.id))}),v.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-gray-400",children:"▼"})]}),r&&v.jsx("div",{className:"flex items-center gap-6",children:v.jsxs("div",{className:"text-sm",children:[v.jsx("span",{className:"text-gray-400",children:o(r.accountType)}),r.accountType==="credit_card"&&r.creditLimit&&v.jsxs("span",{className:"text-gray-500 ml-2",children:["Limit: $",r.creditLimit.toLocaleString()]})]})}),v.jsx("button",{onClick:s,className:"px-4 py-2 bg-gray-700 text-white rounded-xl hover:bg-gray-600 transition-colors text-sm font-medium",title:"Manage accounts",children:"Manage Accounts"})]})},cA=({accounts:g,onAddAccount:t,onUpdateAccount:i,onDeleteAccount:s,onClose:r})=>{const[l,o]=vt.useState(!1),[u,h]=vt.useState(null),[d,p]=vt.useState({name:"",accountType:"checking",accountNumber:"",routingNumber:"",institution:"",availableBalance:0,creditLimit:void 0}),b=()=>{p({name:"",accountType:"checking",accountNumber:"",routingNumber:"",institution:"",availableBalance:0,creditLimit:void 0}),h(null),o(!1)},y=S=>{h(S),p({name:S.name,accountType:S.accountType,accountNumber:S.accountNumber,routingNumber:S.routingNumber||"",institution:S.institution,availableBalance:S.availableBalance,creditLimit:S.creditLimit}),o(!0)},A=S=>{S.preventDefault(),u?i({...u,...d,routingNumber:d.accountType==="credit_card"?void 0:d.routingNumber,creditLimit:d.accountType==="credit_card"?d.creditLimit:void 0}):t({...d,routingNumber:d.accountType==="credit_card"?void 0:d.routingNumber,creditLimit:d.accountType==="credit_card"?d.creditLimit:void 0}),b()},w=S=>{switch(S){case"checking":return"Checking";case"savings":return"Savings";case"credit_card":return"Credit Card";default:return S}};return v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs("div",{className:"bg-gray-800 rounded-3xl p-8 max-w-5xl w-full max-h-[90vh] overflow-y-auto border border-gray-700",children:[v.jsxs("div",{className:"flex justify-between items-center mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-white",children:"Manage Accounts"}),v.jsx("button",{onClick:r,className:"text-gray-400 hover:text-white text-2xl",children:"×"})]}),v.jsxs("div",{className:"mb-8",children:[v.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Your Accounts"}),v.jsx("div",{className:"space-y-3",children:g.map(S=>v.jsxs("div",{className:"bg-gray-700/50 rounded-2xl p-4 flex justify-between items-center",children:[v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("h4",{className:"text-white font-semibold",children:S.name}),v.jsx("span",{className:"px-2 py-1 bg-blue-500/20 text-blue-300 rounded-lg text-xs",children:w(S.accountType)}),S.isDefault&&v.jsx("span",{className:"px-2 py-1 bg-green-500/20 text-green-300 rounded-lg text-xs",children:"Default"})]}),v.jsxs("div",{className:"text-sm text-gray-400 mt-1",children:[S.institution," •••• ",S.accountNumber.slice(-4)]}),v.jsxs("div",{className:"text-lg font-semibold text-white mt-2",children:["$",S.availableBalance.toLocaleString("en-US",{minimumFractionDigits:2}),S.accountType==="credit_card"&&S.creditLimit&&v.jsxs("span",{className:"text-sm text-gray-400 ml-2",children:["/ $",S.creditLimit.toLocaleString()]})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:()=>y(S),className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition-colors text-sm",children:"Edit"}),g.length>1&&v.jsx("button",{onClick:()=>{confirm(`Delete ${S.name}? This will remove all transactions for this account.`)&&s(S.id)},className:"px-4 py-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors text-sm",children:"Delete"})]})]},S.id))})]}),l?v.jsxs("form",{onSubmit:A,className:"bg-gray-700/30 rounded-2xl p-6 space-y-4",children:[v.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:u?"Edit Account":"Add New Account"}),v.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Name"}),v.jsx("input",{type:"text",value:d.name,onChange:S=>p({...d,name:S.target.value}),required:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white",placeholder:"My Checking"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Type"}),v.jsxs("select",{value:d.accountType,onChange:S=>p({...d,accountType:S.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white",children:[v.jsx("option",{value:"checking",children:"Checking"}),v.jsx("option",{value:"savings",children:"Savings"}),v.jsx("option",{value:"credit_card",children:"Credit Card"})]})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Institution"}),v.jsx("input",{type:"text",value:d.institution,onChange:S=>p({...d,institution:S.target.value}),required:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white",placeholder:"USAA"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Account Number"}),v.jsx("input",{type:"text",value:d.accountNumber,onChange:S=>p({...d,accountNumber:S.target.value}),required:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white",placeholder:"0165700823"})]}),d.accountType!=="credit_card"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Routing Number"}),v.jsx("input",{type:"text",value:d.routingNumber,onChange:S=>p({...d,routingNumber:S.target.value}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white",placeholder:"314074269"})]}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:d.accountType==="credit_card"?"Current Balance":"Available Balance"}),v.jsx("input",{type:"number",step:"0.01",value:d.availableBalance,onChange:S=>p({...d,availableBalance:parseFloat(S.target.value)}),required:!0,className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white",placeholder:"0.00"})]}),d.accountType==="credit_card"&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Credit Limit"}),v.jsx("input",{type:"number",step:"0.01",value:d.creditLimit||"",onChange:S=>p({...d,creditLimit:S.target.value?parseFloat(S.target.value):void 0}),className:"w-full px-4 py-2 bg-gray-700 border border-gray-600 rounded-xl text-white",placeholder:"5000.00"})]})]}),v.jsxs("div",{className:"flex gap-4 mt-6",children:[v.jsx("button",{type:"submit",className:"px-6 py-3 bg-green-500 text-white rounded-xl hover:bg-green-600 transition-colors font-semibold",children:u?"Save Changes":"Add Account"}),v.jsx("button",{type:"button",onClick:b,className:"px-6 py-3 bg-gray-600 text-white rounded-xl hover:bg-gray-500 transition-colors font-semibold",children:"Cancel"})]})]}):v.jsx("button",{onClick:()=>o(!0),className:"w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-500 text-white rounded-2xl font-semibold hover:from-blue-600 hover:to-purple-600 transition-all",children:"+ Add New Account"})]})})},Oi={TRANSACTIONS:"usaa_bills_transactions",ACCOUNT:"usaa_bills_account",ACCOUNTS:"usaa_bills_accounts",RECURRING_BILLS:"usaa_bills_recurring",DEBTS:"usaa_bills_debts",ACTIVE_ACCOUNT_ID:"usaa_bills_active_account"},qm=g=>{localStorage.setItem(Oi.TRANSACTIONS,JSON.stringify(g))},Gm=()=>{const g=localStorage.getItem(Oi.TRANSACTIONS);return g?JSON.parse(g).map(i=>({...i,date:new Date(i.date)})):[]},eh=g=>{localStorage.setItem(Oi.ACCOUNTS,JSON.stringify(g))},uA=()=>{const g=localStorage.getItem(Oi.ACCOUNTS);return g?JSON.parse(g):[]},ih=g=>{localStorage.setItem(Oi.ACTIVE_ACCOUNT_ID,g)},hA=()=>localStorage.getItem(Oi.ACTIVE_ACCOUNT_ID),dA=()=>{const g=localStorage.getItem(Oi.ACCOUNT);return g?JSON.parse(g):null},Vm=g=>{localStorage.setItem(Oi.RECURRING_BILLS,JSON.stringify(g))},Ym=()=>{const g=localStorage.getItem(Oi.RECURRING_BILLS);return g?JSON.parse(g).map(i=>({...i,nextDueDate:new Date(i.nextDueDate)})):[]},fA=g=>{localStorage.setItem(Oi.DEBTS,JSON.stringify(g))},gA=()=>{const g=localStorage.getItem(Oi.DEBTS);return g?JSON.parse(g):[]},pA=()=>({id:"bills-account",name:"USAA Bills",accountType:"checking",accountNumber:"0165700823",routingNumber:"314074269",availableBalance:2969.86,institution:"USAA",isDefault:!0}),mA=()=>{const g=dA(),t=uA();if(t.length>0)return t;if(g){const r={...g,accountType:g.accountType||"checking",isDefault:!0},l=[r];return eh(l),ih(r.id),bA(r.id),yA(r.id),l}const i=pA(),s=[i];return eh(s),ih(i.id),s},bA=g=>{const i=Gm().map(s=>({...s,accountId:s.accountId||g}));qm(i)},yA=g=>{const i=Ym().map(s=>({...s,accountId:s.accountId||g}));Vm(i)},vA=(g,t=60)=>{const i=[],s=new Date;return s.setDate(s.getDate()+t),g.filter(r=>r.isActive).forEach(r=>{let l=new Date(r.nextDueDate);for(;l<=s;)i.push({id:`proj-${r.id}-${l.getTime()}`,date:new Date(l),description:`${r.description} (Projected)`,category:r.category,amount:r.amount,balance:0,isPending:!0,isManual:!1}),l=xA(l,r.frequency,r.dayOfMonth,r.dayOfWeek)}),i.sort((r,l)=>r.date.getTime()-l.date.getTime())},xA=(g,t,i,s)=>{const r=new Date(g);switch(t){case"weekly":r.setDate(r.getDate()+7);break;case"biweekly":r.setDate(r.getDate()+14);break;case"monthly":r.setMonth(r.getMonth()+1),i&&r.setDate(i);break;case"yearly":r.setFullYear(r.getFullYear()+1);break}return r},am=(g,t=0)=>{if(g.length===0)return[];const i=[...g].sort((h,d)=>h.sortOrder!==void 0&&d.sortOrder!==void 0?d.sortOrder-h.sortOrder:h.date.getTime()-d.date.getTime()),s=new Date;s.setHours(0,0,0,0);const r=[],l=[];i.forEach(h=>{const d=new Date(h.date);d.setHours(0,0,0,0),d<=s?r.push(h):l.push(h)});const o=[];if(r.length>0){let h=t;for(let d=r.length-1;d>=0;d--)r[d].isProjectedVisible!==!1&&(h-=r[d].amount);for(let d=0;d<r.length;d++)r[d].isProjectedVisible!==!1&&(h+=r[d].amount,h=Math.round(h*100)/100),o.push({...r[d],balance:h})}let u=t;for(const h of l)h.isProjectedVisible!==!1&&(u+=h.amount,u=Math.round(u*100)/100),o.push({...h,balance:u});return o};function AA(){const[g,t]=vt.useState("account"),[i,s]=vt.useState([]),[r,l]=vt.useState([]),[o,u]=vt.useState(""),[h,d]=vt.useState([]),[p,b]=vt.useState([]),[y,A]=vt.useState(!0),[w,S]=vt.useState(new Set),[C,E]=vt.useState(new Map),[k,O]=vt.useState(!1);vt.useEffect(()=>{const Q=Gm(),it=mA(),at=hA(),ct=Ym(),lt=gA();s(Q),l(it),u(at||it[0]?.id||""),d(ct),b(lt)},[]),vt.useEffect(()=>{i.length>0&&qm(i)},[i]),vt.useEffect(()=>{r.length>0&&eh(r)},[r]),vt.useEffect(()=>{o&&ih(o)},[o]),vt.useEffect(()=>{h.length>0&&Vm(h)},[h]),vt.useEffect(()=>{p.length>0&&fA(p)},[p]);const P=r.find(Q=>Q.id===o)||null,I=i.filter(Q=>Q.accountId===o),F=h.filter(Q=>Q.accountId===o),B=Q=>{u(Q)},D=Q=>{const it={...Q,id:`account-${Date.now()}`};l([...r,it])},N=Q=>{l(r.map(it=>it.id===Q.id?Q:it))},U=Q=>{s(i.filter(at=>at.accountId!==Q)),d(h.filter(at=>at.accountId!==Q));const it=r.filter(at=>at.id!==Q);l(it),o===Q&&it.length>0&&u(it[0].id)},$=Q=>{if(!o)return;let it=0,at=0,ct=0;const lt=[...i];Q.transactions.forEach(zt=>{const pt={...zt,accountId:o},Pt=lt.findIndex(Ft=>Ft.accountId===o&&Ft.date.toDateString()===pt.date.toDateString()&&Ft.description===pt.description&&Math.abs(Ft.amount-pt.amount)<.01);if(Pt!==-1){const Ft=lt[Pt];Ft.isManual?(lt[Pt]={...pt,isReconciled:Ft.isReconciled},at++):ct++}else lt.push(pt),it++}),s(lt),Q.errors.length>0?(alert(`Import completed with ${Q.errors.length} errors. Check console for details.`),console.error("Import errors:",Q.errors)):alert(`Import complete!
New: ${it}
Updated: ${at}
Skipped: ${ct}`)},tt=Q=>{if(!o)return;const it={...Q,id:`manual-${Date.now()}`,accountId:o};s([...i,it])},st=Q=>{s(i.filter(it=>it.id!==Q))},rt=Q=>{if(Q.id.startsWith("proj-")){const it=new Map(C);it.set(Q.id,Q.isProjectedVisible!==!1),E(it)}else s(i.map(it=>it.id===Q.id?Q:it))},dt=Q=>{S(new Set([...w,Q]))},j=Q=>{if(!o)return;const it={...Q,id:`bill-${Date.now()}`,accountId:o};d([...h,it])},T=Q=>{d(h.map(it=>it.id===Q.id?Q:it))},X=Q=>{d(h.filter(it=>it.id!==Q))},et=Q=>{const it={...Q,id:`debt-${Date.now()}`};b([...p,it])},gt=Q=>{b(p.map(it=>it.id===Q.id?Q:it))},M=Q=>{b(p.filter(it=>it.id!==Q))},H=Q=>{s(Q.transactions),l(Q.accounts),u(Q.activeAccountId),d(Q.recurringBills),b(Q.debts)},G=y&&P?am([...I,...vA(F,60).filter(Q=>{if(w.has(Q.id))return!1;const it=Q.date.toDateString(),at=Q.description.replace(" (Projected)","");return!I.some(ct=>ct.date.toDateString()===it&&ct.description.toLowerCase()===at.toLowerCase())}).map(Q=>({...Q,isProjectedVisible:C.has(Q.id)?C.get(Q.id):!0}))],P.availableBalance):am(I,P?.availableBalance||0),nt=G.length>0?G[G.length-1].balance:P?.availableBalance||0;return v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900",children:[v.jsx("div",{className:"sticky top-0 z-50 bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 pt-3 pb-2",children:v.jsx("div",{className:"max-w-7xl mx-auto px-3",children:v.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl shadow-xl p-4 border border-gray-700",children:[v.jsx("div",{className:"mb-3",children:v.jsx(oA,{accounts:r,activeAccountId:o,onSelectAccount:B,onManageAccounts:()=>O(!0)})}),v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsxs("div",{children:[v.jsx("h1",{className:"text-xl font-bold text-white",children:P?.name||"No Account"}),v.jsxs("p",{className:"text-gray-400 text-xs mt-1 flex items-center gap-1",children:[v.jsx("span",{className:"inline-block w-1.5 h-1.5 rounded-full bg-green-400"}),P?.institution," •••• ",P?.accountNumber.slice(-4)]})]}),v.jsxs("div",{className:"text-right bg-gradient-to-br from-blue-500/20 to-purple-500/20 px-4 py-2 rounded-xl border border-blue-500/30",children:[v.jsx("p",{className:"text-xs text-gray-400 mb-0.5",children:P?.accountType==="credit_card"?"Balance":"Available"}),v.jsxs("p",{className:"text-2xl font-bold text-white",children:["$",P?.availableBalance.toFixed(2)||"0.00"]}),P?.accountType==="credit_card"&&P?.creditLimit&&v.jsxs("p",{className:"text-[10px] text-gray-400 mt-0.5",children:["Limit: $",P.creditLimit.toLocaleString()]})]})]})]})})}),v.jsxs("div",{className:"max-w-7xl mx-auto px-3 pb-5",children:[v.jsxs("div",{className:"bg-gray-800 rounded-2xl shadow-xl mb-4 border border-gray-700",children:[v.jsxs("nav",{className:"flex gap-1.5 p-2",children:[v.jsx("button",{onClick:()=>t("account"),className:`px-4 py-2 text-sm font-medium rounded-xl transition-all ${g==="account"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"Account Info"}),v.jsx("button",{onClick:()=>t("register"),className:`px-4 py-2 text-sm font-medium rounded-xl transition-all ${g==="register"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"Transactions"}),v.jsx("button",{onClick:()=>t("recurring"),className:`px-4 py-2 text-sm font-medium rounded-xl transition-all ${g==="recurring"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"Recurring Bills"}),v.jsx("button",{onClick:()=>t("projections"),className:`px-4 py-2 text-sm font-medium rounded-xl transition-all ${g==="projections"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"Projections"}),v.jsx("button",{onClick:()=>t("debts"),className:`px-4 py-2 text-sm font-medium rounded-xl transition-all ${g==="debts"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"Debts"}),v.jsx("button",{onClick:()=>t("sync"),className:`px-4 py-2 text-sm font-medium rounded-xl transition-all ${g==="sync"?"bg-gradient-to-r from-blue-500 to-purple-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-gray-700"}`,children:"iCloud Sync"})]}),v.jsxs("div",{className:"p-4",children:[g==="account"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-white",children:"Account Information"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"bg-gradient-to-br from-blue-500/20 to-blue-600/20 rounded-2xl p-6 border border-blue-500/30 backdrop-blur-sm",children:[v.jsx("h3",{className:"text-sm font-medium text-blue-300 mb-2",children:"Current Balance"}),v.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",P?.availableBalance.toFixed(2)]})]}),v.jsxs("div",{className:"bg-gradient-to-br from-green-500/20 to-green-600/20 rounded-2xl p-6 border border-green-500/30 backdrop-blur-sm",children:[v.jsx("h3",{className:"text-sm font-medium text-green-300 mb-2",children:"Projected Balance (60 days)"}),v.jsxs("p",{className:"text-3xl font-bold text-white",children:["$",nt.toFixed(2)]})]}),v.jsxs("div",{className:"bg-gradient-to-br from-purple-500/20 to-purple-600/20 rounded-2xl p-6 border border-purple-500/30 backdrop-blur-sm",children:[v.jsx("h3",{className:"text-sm font-medium text-purple-300 mb-2",children:"Transactions"}),v.jsx("p",{className:"text-3xl font-bold text-white",children:i.length})]})]}),v.jsxs("div",{className:"bg-gray-800/50 rounded-2xl p-6 border border-gray-700",children:[v.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Account Details"}),v.jsxs("dl",{className:"grid grid-cols-2 gap-4",children:[v.jsxs("div",{children:[v.jsx("dt",{className:"text-sm text-gray-400",children:"Account Number"}),v.jsxs("dd",{className:"text-lg font-medium text-white",children:["•••• ",P?.accountNumber.slice(-4)]})]}),v.jsxs("div",{children:[v.jsx("dt",{className:"text-sm text-gray-400",children:"Routing Number"}),v.jsx("dd",{className:"text-lg font-medium text-white",children:P?.routingNumber})]}),v.jsxs("div",{children:[v.jsx("dt",{className:"text-sm text-gray-400",children:"Institution"}),v.jsx("dd",{className:"text-lg font-medium text-white",children:P?.institution})]}),v.jsxs("div",{children:[v.jsx("dt",{className:"text-sm text-gray-400",children:"Account Type"}),v.jsx("dd",{className:"text-lg font-medium text-white",children:"Bills"})]})]})]}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Import Transactions"}),v.jsxs("div",{className:"flex gap-4",children:[v.jsx(Px,{onImportComplete:$}),v.jsx(Fx,{onImportComplete:$})]})]}),v.jsxs("div",{className:"flex items-center gap-3 bg-gray-800/50 rounded-2xl p-4 border border-gray-700",children:[v.jsx("input",{type:"checkbox",id:"showProjections",checked:y,onChange:Q=>A(Q.target.checked),className:"h-5 w-5 text-blue-500 rounded bg-gray-700 border-gray-600"}),v.jsx("label",{htmlFor:"showProjections",className:"text-gray-300 font-medium",children:"Show projected transactions from recurring bills"})]})]}),g==="register"&&v.jsx(zx,{transactions:G,onAddTransaction:tt,onDeleteTransaction:st,onCreateRecurringBill:j,onUpdateTransaction:rt,onDismissProjection:dt,recurringBills:F}),g==="recurring"&&v.jsxs("div",{className:"space-y-6",children:[v.jsx(Qx,{transactions:I,existingBills:F,onAddBill:j}),v.jsx(Hx,{bills:F,onAddBill:j,onUpdateBill:T,onDeleteBill:X})]}),g==="projections"&&v.jsx(Jx,{transactions:G,currentBalance:P?.availableBalance||0}),g==="debts"&&v.jsx(tA,{debts:p,onAddDebt:et,onUpdateDebt:gt,onDeleteDebt:M}),g==="sync"&&v.jsx(lA,{transactions:i,accounts:r,activeAccountId:o,recurringBills:h,debts:p,onDataLoaded:H})]})]}),k&&v.jsx(cA,{accounts:r,onAddAccount:D,onUpdateAccount:N,onDeleteAccount:U,onClose:()=>O(!1)})]})]})}vy.createRoot(document.getElementById("root")).render(v.jsx(vt.StrictMode,{children:v.jsx(AA,{})}));
